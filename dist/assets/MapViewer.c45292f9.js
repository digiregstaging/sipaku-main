import{i as sR,o as At,c as Vt,j as PA,k as aR,a as ii,r as En,_ as In,l as C_,m as Hr,q as nn,d as U,b as A,F as mr,s as ig,f as ge,x as Kc,y as Np,t as vi,e as li,T as Eo,z as Yw,p as yr,h as _r,n as xi,A as lR,g as Os,u as OA,B as He,C as w_,D as uR,E as Kw,G as em,H as im,I as AA,J as DA,w as S_,v as fn,K as LA}from"./index.3a5b383c.js";import{d as ia,a as lh,c as os,_ as IA}from"./encryption.fb6bb8c3.js";var FA=Object.defineProperty,NA=Object.defineProperties,GA=Object.getOwnPropertyDescriptors,$p=Object.getOwnPropertySymbols,cR=Object.prototype.hasOwnProperty,hR=Object.prototype.propertyIsEnumerable,Xw=(r,t,e)=>t in r?FA(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,HA=(r,t)=>{for(var e in t||(t={}))cR.call(t,e)&&Xw(r,e,t[e]);if($p)for(var e of $p(t))hR.call(t,e)&&Xw(r,e,t[e]);return r},WA=(r,t)=>NA(r,GA(t)),VA=(r,t)=>{var e={};for(var i in r)cR.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&$p)for(var i of $p(r))t.indexOf(i)<0&&hR.call(r,i)&&(e[i]=r[i]);return e};const qw={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((r,t)=>(r[t.id]=t)&&r,{})}},methods:{updatePaneComponents(){this.panes.forEach(r=>{r.update&&r.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[r.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(r,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(r){this.touch.mouseDown&&(r.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(r)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(r=>({min:r.min,max:r.max,size:r.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(r,t){"ontouchstart"in window&&(r.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(r,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(r,t){let e=0;this.panes=this.panes.map((i,n)=>(i.size=n===t?i.max:i.min,n!==t&&(e+=i.min),i)),this.panes[t].size-=e,this.$emit("pane-maximize",this.panes[t])},onPaneClick(r,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(r){const t=this.container.getBoundingClientRect(),{clientX:e,clientY:i}="ontouchstart"in window&&r.touches?r.touches[0]:r;return{x:e-t.left,y:i-t.top}},getCurrentDragPercentage(r){r=r[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(r=t-r),r*100/t},calculatePanesSize(r){const t=this.touch.activeSplitter;let e={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const i=0+(this.pushOtherPanes?0:e.prevPanesSize),n=100-(this.pushOtherPanes?0:e.nextPanesSize),o=Math.max(Math.min(this.getCurrentDragPercentage(r),n),i);let s=[t,t+1],a=this.panes[s[0]]||null,l=this.panes[s[1]]||null;const u=a.max<100&&o>=a.max+e.prevPanesSize,c=l.max<100&&o<=100-(l.max+this.sumNextPanesSize(t+1));if(u||c){u?(a.size=a.max,l.size=Math.max(100-a.max-e.prevPanesSize-e.nextPanesSize,0)):(a.size=Math.max(100-l.max-e.prevPanesSize-this.sumNextPanesSize(t+1),0),l.size=l.max);return}if(this.pushOtherPanes){const h=this.doPushOtherPanes(e,o);if(!h)return;({sums:e,panesToResize:s}=h),a=this.panes[s[0]]||null,l=this.panes[s[1]]||null}a!==null&&(a.size=Math.min(Math.max(o-e.prevPanesSize-e.prevReachedMinPanes,a.min),a.max)),l!==null&&(l.size=Math.min(Math.max(100-o-e.nextPanesSize-e.nextReachedMinPanes,l.min),l.max))},doPushOtherPanes(r,t){const e=this.touch.activeSplitter,i=[e,e+1];return t<r.prevPanesSize+this.panes[i[0]].min&&(i[0]=this.findPrevExpandedPane(e).index,r.prevReachedMinPanes=0,i[0]<e&&this.panes.forEach((n,o)=>{o>i[0]&&o<=e&&(n.size=n.min,r.prevReachedMinPanes+=n.min)}),r.prevPanesSize=this.sumPrevPanesSize(i[0]),i[0]===void 0)?(r.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((n,o)=>{o>0&&o<=e&&(n.size=n.min,r.prevReachedMinPanes+=n.min)}),this.panes[i[1]].size=100-r.prevReachedMinPanes-this.panes[0].min-r.prevPanesSize-r.nextPanesSize,null):t>100-r.nextPanesSize-this.panes[i[1]].min&&(i[1]=this.findNextExpandedPane(e).index,r.nextReachedMinPanes=0,i[1]>e+1&&this.panes.forEach((n,o)=>{o>e&&o<i[1]&&(n.size=n.min,r.nextReachedMinPanes+=n.min)}),r.nextPanesSize=this.sumNextPanesSize(i[1]-1),i[1]===void 0)?(r.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((n,o)=>{o<this.panesCount-1&&o>=e+1&&(n.size=n.min,r.nextReachedMinPanes+=n.min)}),this.panes[i[0]].size=100-r.prevPanesSize-r.nextReachedMinPanes-this.panes[this.panesCount-1].min-r.nextPanesSize,null):{sums:r,panesToResize:i}},sumPrevPanesSize(r){return this.panes.reduce((t,e,i)=>t+(i<r?e.size:0),0)},sumNextPanesSize(r){return this.panes.reduce((t,e,i)=>t+(i>r+1?e.size:0),0)},findPrevExpandedPane(r){return[...this.panes].reverse().find(e=>e.index<r&&e.size>e.min)||{}},findNextExpandedPane(r){return this.panes.find(e=>e.index>r+1&&e.size>e.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(t=>{const e=t.classList.contains("splitpanes__pane"),i=t.classList.contains("splitpanes__splitter");if(!e&&!i){t.parentNode.removeChild(t),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.");return}})},addSplitter(r,t,e=!1){const i=r-1,n=document.createElement("div");n.classList.add("splitpanes__splitter"),e||(n.onmousedown=o=>this.onMouseDown(o,i),typeof window<"u"&&"ontouchstart"in window&&(n.ontouchstart=o=>this.onMouseDown(o,i)),n.onclick=o=>this.onSplitterClick(o,i+1)),this.dblClickSplitter&&(n.ondblclick=o=>this.onSplitterDblClick(o,i+1)),t.parentNode.insertBefore(n,t)},removeSplitter(r){r.onmousedown=void 0,r.onclick=void 0,r.ondblclick=void 0,r.parentNode.removeChild(r)},redoSplitters(){const r=Array.from(this.container.children);r.forEach(e=>{e.className.includes("splitpanes__splitter")&&this.removeSplitter(e)});let t=0;r.forEach(e=>{e.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,e,!0):t&&this.addSplitter(t,e),t++)})},requestUpdate(r){var t=r,{target:e}=t,i=VA(t,["target"]);const n=this.indexedPanes[e._.uid];Object.entries(i).forEach(([o,s])=>n[o]=s)},onPaneAdd(r){let t=-1;Array.from(r.$el.parentNode.children).some(n=>(n.className.includes("splitpanes__pane")&&t++,n===r.$el));const e=parseFloat(r.minSize),i=parseFloat(r.maxSize);this.panes.splice(t,0,{id:r._.uid,index:t,min:isNaN(e)?0:e,max:isNaN(i)?100:i,size:r.size===null?null:parseFloat(r.size),givenSize:r.size,update:r.update}),this.panes.forEach((n,o)=>n.index=o),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},onPaneRemove(r){const t=this.panes.findIndex(i=>i.id===r._.uid),e=this.panes.splice(t,1)[0];this.panes.forEach((i,n)=>i.index=n),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:WA(HA({},e),{index:t})}),this.$emit("pane-remove",{removed:e,panes:this.panes.map(i=>({min:i.min,max:i.max,size:i.size}))})})},resetPaneSizes(r={}){!r.addedPane&&!r.removedPane?this.initialPanesSizing():this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(r):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const r=100/this.panesCount;let t=0,e=[],i=[];this.panes.forEach(n=>{n.size=Math.max(Math.min(r,n.max),n.min),t-=n.size,n.size>=n.max&&e.push(n.id),n.size<=n.min&&i.push(n.id)}),t>.1&&this.readjustSizes(t,e,i)},initialPanesSizing(){100/this.panesCount;let r=100,t=[],e=[],i=0;this.panes.forEach(o=>{r-=o.size,o.size!==null&&i++,o.size>=o.max&&t.push(o.id),o.size<=o.min&&e.push(o.id)});let n=100;r>.1&&(this.panes.forEach(o=>{o.size===null&&(o.size=Math.max(Math.min(r/(this.panesCount-i),o.max),o.min)),n-=o.size}),n>.1&&this.readjustSizes(r,t,e))},equalizeAfterAddOrRemove({addedPane:r,removedPane:t}={}){let e=100/this.panesCount,i=0,n=[],o=[];r&&r.givenSize!==null&&(e=(100-r.givenSize)/(this.panesCount-1)),this.panes.forEach(s=>{i-=s.size,s.size>=s.max&&n.push(s.id),s.size<=s.min&&o.push(s.id)}),!(Math.abs(i)<.1)&&(this.panes.forEach(s=>{r&&r.givenSize!==null&&r.id===s.id||(s.size=Math.max(Math.min(e,s.max),s.min)),i-=s.size,s.size>=s.max&&n.push(s.id),s.size<=s.min&&o.push(s.id)}),i>.1&&this.readjustSizes(i,n,o))},readjustSizes(r,t,e){let i;r>0?i=r/(this.panesCount-t.length):i=r/(this.panesCount-e.length),this.panes.forEach((n,o)=>{if(r>0&&!t.includes(n.id)){const s=Math.max(Math.min(n.size+i,n.max),n.min),a=s-n.size;r-=a,n.size=s}else if(!e.includes(n.id)){const s=Math.max(Math.min(n.size+i,n.max),n.min),a=s-n.size;r-=a,n.size=s}n.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[n.id].size}%`})}),Math.abs(r)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(r){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((e,i)=>{e.ondblclick=r?n=>this.onSplitterDblClick(n,i):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return sR("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}};var kA=(r,t)=>{const e=r.__vccOpts||r;for(const[i,n]of t)e[i]=n;return e};const BA={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(r){this.style=r}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(r){this.requestUpdate({target:this,size:r})},minSizeNumber(r){this.requestUpdate({target:this,min:r})},maxSizeNumber(r){this.requestUpdate({target:this,max:r})}}};function UA(r,t,e,i,n,o){return At(),Vt("div",{class:"splitpanes__pane",onClick:t[0]||(t[0]=s=>o.onPaneClick(s,r._.uid)),style:aR(r.style)},[PA(r.$slots,"default")],4)}var hd=kA(BA,[["render",UA]]);class zA{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const $r=zA,_u={PROPERTYCHANGE:"propertychange"};class jA{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const E_=jA;function $A(r,t,e){let i,n;e=e||$a;let o=0,s=r.length,a=!1;for(;o<s;)i=o+(s-o>>1),n=+e(r[i],t),n<0?o=i+1:(s=i,a=!n);return a?o:~o}function $a(r,t){return r>t?1:r<t?-1:0}function x_(r,t,e){const i=r.length;if(r[0]<=t)return 0;if(t<=r[i-1])return i-1;{let n;if(e>0){for(n=1;n<i;++n)if(r[n]<t)return n-1}else if(e<0){for(n=1;n<i;++n)if(r[n]<=t)return n}else for(n=1;n<i;++n){if(r[n]==t)return n;if(r[n]<t)return typeof e=="function"?e(t,r[n-1],r[n])>0?n-1:n:r[n-1]-t<t-r[n]?n-1:n}return i-1}}function YA(r,t,e){for(;t<e;){const i=r[t];r[t]=r[e],r[e]=i,++t,--e}}function Wr(r,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let n=0;n<i;n++)r[r.length]=e[n]}function rl(r,t){const e=r.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(r[i]!==t[i])return!1;return!0}function KA(r,t,e){const i=t||$a;return r.every(function(n,o){if(o===0)return!0;const s=i(r[o-1],n);return!(s>0||e&&s===0)})}function Ks(){return!0}function Wu(){return!1}function Ya(){}function XA(r){let t=!1,e,i,n;return function(){const o=Array.prototype.slice.call(arguments);return(!t||this!==n||!rl(o,i))&&(t=!0,n=this,i=o,e=r.apply(this,arguments)),e}}function Vu(r){for(const t in r)delete r[t]}function Ka(r){let t;for(t in r)return!1;return!t}class qA extends E_{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const o=e?new $r(t):t;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let l;for(let u=0,c=n.length;u<c;++u)if("handleEvent"in n[u]?l=n[u].handleEvent(o):l=n[u].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--s[i]===0){let u=a[i];for(delete a[i];u--;)this.removeEventListener(i,Ya);delete s[i]}return l}disposeInternal(){this.listeners_&&Vu(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const n=i.indexOf(e);n!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=Ya,++this.pendingRemovals_[t]):(i.splice(n,1),i.length===0&&delete this.listeners_[t]))}}}const ng=qA,ae={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Me(r,t,e,i,n){if(i&&i!==r&&(e=e.bind(i)),n){const s=e;e=function(){r.removeEventListener(t,e),s.apply(this,arguments)}}const o={target:r,type:t,listener:e};return r.addEventListener(t,e),o}function Yp(r,t,e,i){return Me(r,t,e,i,!0)}function Ze(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Vu(r))}class rg extends ng{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ae.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Me(this,t[o],e);return n}else return Me(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let o=0;o<n;++o)i[o]=Yp(this,t[o],e)}else i=Yp(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)R_(i);else if(Array.isArray(t))for(let n=0,o=t.length;n<o;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}rg.prototype.on;rg.prototype.once;rg.prototype.un;function R_(r){if(Array.isArray(r))for(let t=0,e=r.length;t<e;++t)Ze(r[t]);else Ze(r)}const dR=rg;function ee(){throw new Error("Unimplemented abstract method.")}let ZA=0;function Re(r){return r.ol_uid||(r.ol_uid=String(++ZA))}class Zw extends $r{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class JA extends dR{constructor(t){super(),this.on,this.once,this.un,Re(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Zw(i,t,e)),i=_u.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Zw(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const o=n[t];n[t]=e,o!==e&&this.notify(t,o)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){!t.values_||Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],Ka(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const Yr=JA,QA={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class tD extends Error{constructor(t){const e=QA[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const pR=tD,Ni={ADD:"add",REMOVE:"remove"},Jw={LENGTH:"length"};class dd extends $r{constructor(t,e,i){super(t),this.element=e,this.index=i}}class eD extends Yr{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Jw.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new dd(Ni.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new dd(Ni.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new dd(Ni.REMOVE,n,t)),this.dispatchEvent(new dd(Ni.ADD,e,t))}updateLength_(){this.set(Jw.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new pR(58)}}const Nr=eD,Xs=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",iD=Xs.includes("firefox"),nD=Xs.includes("safari")&&!Xs.includes("chrom");nD&&(Xs.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Xs));const rD=Xs.includes("webkit")&&!Xs.includes("edge"),oD=Xs.includes("macintosh"),fR=typeof devicePixelRatio<"u"?devicePixelRatio:1,b_=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,sD=typeof Image<"u"&&Image.prototype.decode,gR=function(){let r=!1;try{const t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return r}();function ve(r,t){if(!r)throw new pR(t)}new Array(6);function ho(){return[1,0,0,1,0,0]}function aD(r,t,e,i,n,o,s){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r[4]=o,r[5]=s,r}function lD(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function Ii(r,t){const e=t[0],i=t[1];return t[0]=r[0]*e+r[2]*i+r[4],t[1]=r[1]*e+r[3]*i+r[5],t}function uD(r,t,e){return aD(r,t,0,0,e,0,0)}function qs(r,t,e,i,n,o,s,a){const l=Math.sin(o),u=Math.cos(o);return r[0]=i*u,r[1]=n*l,r[2]=-i*l,r[3]=n*u,r[4]=s*i*u-a*i*l+t,r[5]=s*n*l+a*n*u+e,r}function M_(r,t){const e=cD(t);ve(e!==0,32);const i=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5];return r[0]=s/e,r[1]=-n/e,r[2]=-o/e,r[3]=i/e,r[4]=(o*l-s*a)/e,r[5]=-(i*l-n*a)/e,r}function cD(r){return r[0]*r[3]-r[1]*r[2]}let Qw;function mR(r){const t="matrix("+r.join(", ")+")";if(b_)return t;const e=Qw||(Qw=document.createElement("div"));return e.style.transform=t,e.style.transform}const Di={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ty(r){const t=Zn();for(let e=0,i=r.length;e<i;++e)Xc(t,r[e]);return t}function hD(r,t,e){const i=Math.min.apply(null,r),n=Math.min.apply(null,t),o=Math.max.apply(null,r),s=Math.max.apply(null,t);return zr(i,n,o,s,e)}function uh(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function vR(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function ol(r,t,e){let i,n;return t<r[0]?i=r[0]-t:r[2]<t?i=t-r[2]:i=0,e<r[1]?n=r[1]-e:r[3]<e?n=e-r[3]:n=0,i*i+n*n}function og(r,t){return T_(r,t[0],t[1])}function As(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function T_(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function ey(r,t){const e=r[0],i=r[1],n=r[2],o=r[3],s=t[0],a=t[1];let l=Di.UNKNOWN;return s<e?l=l|Di.LEFT:s>n&&(l=l|Di.RIGHT),a<i?l=l|Di.BELOW:a>o&&(l=l|Di.ABOVE),l===Di.UNKNOWN&&(l=Di.INTERSECTING),l}function Zn(){return[1/0,1/0,-1/0,-1/0]}function zr(r,t,e,i,n){return n?(n[0]=r,n[1]=t,n[2]=e,n[3]=i,n):[r,t,e,i]}function Gh(r){return zr(1/0,1/0,-1/0,-1/0,r)}function dD(r,t){const e=r[0],i=r[1];return zr(e,i,e,i,t)}function yR(r,t,e,i,n){const o=Gh(n);return CR(o,r,t,e,i)}function ch(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function _R(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function Xc(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function CR(r,t,e,i,n){for(;e<i;e+=n)pD(r,t[e],t[e+1]);return r}function pD(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function P_(r,t){let e;return e=t(sg(r)),e||(e=t(ag(r)),e)||(e=t(lg(r)),e)||(e=t(sl(r)),e)?e:!1}function iy(r){let t=0;return O_(r)||(t=Qe(r)*yo(r)),t}function sg(r){return[r[0],r[1]]}function ag(r){return[r[2],r[1]]}function Xa(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function fD(r,t){let e;return t==="bottom-left"?e=sg(r):t==="bottom-right"?e=ag(r):t==="top-left"?e=sl(r):t==="top-right"?e=lg(r):ve(!1,13),e}function ny(r,t,e,i,n){const[o,s,a,l,u,c,h,d]=ry(r,t,e,i);return zr(Math.min(o,a,u,h),Math.min(s,l,c,d),Math.max(o,a,u,h),Math.max(s,l,c,d),n)}function ry(r,t,e,i){const n=t*i[0]/2,o=t*i[1]/2,s=Math.cos(e),a=Math.sin(e),l=n*s,u=n*a,c=o*s,h=o*a,d=r[0],p=r[1];return[d-l+h,p-u-c,d-l-h,p-u+c,d+l-h,p+u+c,d+l+h,p+u-c,d-l+h,p-u-c]}function yo(r){return r[3]-r[1]}function qc(r,t,e){const i=e||Zn();return gn(r,t)?(r[0]>t[0]?i[0]=r[0]:i[0]=t[0],r[1]>t[1]?i[1]=r[1]:i[1]=t[1],r[2]<t[2]?i[2]=r[2]:i[2]=t[2],r[3]<t[3]?i[3]=r[3]:i[3]=t[3]):Gh(i),i}function sl(r){return[r[0],r[3]]}function lg(r){return[r[2],r[3]]}function Qe(r){return r[2]-r[0]}function gn(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function O_(r){return r[2]<r[0]||r[3]<r[1]}function gD(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function mD(r,t,e){let i=!1;const n=ey(r,t),o=ey(r,e);if(n===Di.INTERSECTING||o===Di.INTERSECTING)i=!0;else{const s=r[0],a=r[1],l=r[2],u=r[3],c=t[0],h=t[1],d=e[0],p=e[1],f=(p-h)/(d-c);let m,g;!!(o&Di.ABOVE)&&!(n&Di.ABOVE)&&(m=d-(p-u)/f,i=m>=s&&m<=l),!i&&!!(o&Di.RIGHT)&&!(n&Di.RIGHT)&&(g=p-(d-l)*f,i=g>=a&&g<=u),!i&&!!(o&Di.BELOW)&&!(n&Di.BELOW)&&(m=d-(p-a)/f,i=m>=s&&m<=l),!i&&!!(o&Di.LEFT)&&!(n&Di.LEFT)&&(g=p-(d-s)*f,i=g>=a&&g<=u)}return i}function vD(r,t,e,i){let n=[];if(i>1){const a=r[2]-r[0],l=r[3]-r[1];for(let u=0;u<i;++u)n.push(r[0]+a*u/i,r[1],r[2],r[1]+l*u/i,r[2]-a*u/i,r[3],r[0],r[3]-l*u/i)}else n=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]];t(n,n,2);const o=[],s=[];for(let a=0,l=n.length;a<l;a+=2)o.push(n[a]),s.push(n[a+1]);return hD(o,s,e)}function wR(r,t){const e=t.getExtent(),i=Xa(r);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const n=Qe(e),s=Math.floor((i[0]-e[0])/n)*n;r[0]-=s,r[2]-=s}return r}function yD(r,t){if(t.canWrapX()){const e=t.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[e[0],r[1],e[2],r[3]]];wR(r,t);const i=Qe(e);if(Qe(r)>i)return[[e[0],r[1],e[2],r[3]]];if(r[0]<e[0])return[[r[0]+i,r[1],e[2],r[3]],[e[0],r[1],r[2],r[3]]];if(r[2]>e[2])return[[r[0],r[1],e[2],r[3]],[e[0],r[1],r[2]-i,r[3]]]}return[r]}function yi(r,t,e){return Math.min(Math.max(r,t),e)}function _D(r,t,e,i,n,o){const s=n-e,a=o-i;if(s!==0||a!==0){const l=((r-e)*s+(t-i)*a)/(s*s+a*a);l>1?(e=n,i=o):l>0&&(e+=s*l,i+=a*l)}return Yo(r,t,e,i)}function Yo(r,t,e,i){const n=e-r,o=i-t;return n*n+o*o}function CD(r){const t=r.length;for(let i=0;i<t;i++){let n=i,o=Math.abs(r[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(r[a][i]);l>o&&(o=l,n=a)}if(o===0)return null;const s=r[n];r[n]=r[i],r[i]=s;for(let a=i+1;a<t;a++){const l=-r[a][i]/r[i][i];for(let u=i;u<t+1;u++)i==u?r[a][u]=0:r[a][u]+=l*r[i][u]}}const e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=r[i][t]/r[i][i];for(let n=i-1;n>=0;n--)r[n][t]-=r[n][i]*e[i]}return e}function Ga(r){return r*Math.PI/180}function Ha(r,t){const e=r%t;return e*t<0?e+t:e}function ko(r,t,e){return r+e*(t-r)}function A_(r,t){const e=Math.pow(10,t);return Math.round(r*e)/e}function pd(r,t){return Math.floor(A_(r,t))}function fd(r,t){return Math.ceil(A_(r,t))}const wD=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,SD=/^([a-z]*)$|^hsla?\(.*\)$/i;function SR(r){return typeof r=="string"?r:ER(r)}function ED(r){const t=document.createElement("div");if(t.style.color=r,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}else return""}const xD=function(){const t={};let e=0;return function(i){let n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){let o=0;for(const s in t)(o++&3)===0&&(delete t[s],--e)}n=RD(i),t[i]=n,++e}return n}}();function Kp(r){return Array.isArray(r)?r:xD(r)}function RD(r){let t,e,i,n,o;if(SD.exec(r)&&(r=ED(r)),wD.exec(r)){const s=r.length-1;let a;s<=4?a=1:a=2;const l=s===4||s===8;t=parseInt(r.substr(1+0*a,a),16),e=parseInt(r.substr(1+1*a,a),16),i=parseInt(r.substr(1+2*a,a),16),l?n=parseInt(r.substr(1+3*a,a),16):n=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,l&&(n=(n<<4)+n)),o=[t,e,i,n/255]}else r.startsWith("rgba(")?(o=r.slice(5,-1).split(",").map(Number),t0(o)):r.startsWith("rgb(")?(o=r.slice(4,-1).split(",").map(Number),o.push(1),t0(o)):ve(!1,14);return o}function t0(r){return r[0]=yi(r[0]+.5|0,0,255),r[1]=yi(r[1]+.5|0,0,255),r[2]=yi(r[2]+.5|0,0,255),r[3]=yi(r[3],0,1),r}function ER(r){let t=r[0];t!=(t|0)&&(t=t+.5|0);let e=r[1];e!=(e|0)&&(e=e+.5|0);let i=r[2];i!=(i|0)&&(i=i+.5|0);const n=r[3]===void 0?1:Math.round(r[3]*100)/100;return"rgba("+t+","+e+","+i+","+n+")"}class bD{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];(t++&3)===0&&!i.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=e0(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const o=e0(t,e,i);this.cache_[o]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function e0(r,t,e){const i=e?SR(e):"null";return t+":"+r+":"+i}const Xp=new bD,$e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class MD extends Yr{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[$e.OPACITY]=t.opacity!==void 0?t.opacity:1,ve(typeof e[$e.OPACITY]=="number",64),e[$e.VISIBLE]=t.visible!==void 0?t.visible:!0,e[$e.Z_INDEX]=t.zIndex,e[$e.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[$e.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[$e.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[$e.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=yi(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return ee()}getLayerStatesArray(t){return ee()}getExtent(){return this.get($e.EXTENT)}getMaxResolution(){return this.get($e.MAX_RESOLUTION)}getMinResolution(){return this.get($e.MIN_RESOLUTION)}getMinZoom(){return this.get($e.MIN_ZOOM)}getMaxZoom(){return this.get($e.MAX_ZOOM)}getOpacity(){return this.get($e.OPACITY)}getSourceState(){return ee()}getVisible(){return this.get($e.VISIBLE)}getZIndex(){return this.get($e.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set($e.EXTENT,t)}setMaxResolution(t){this.set($e.MAX_RESOLUTION,t)}setMinResolution(t){this.set($e.MIN_RESOLUTION,t)}setMaxZoom(t){this.set($e.MAX_ZOOM,t)}setMinZoom(t){this.set($e.MIN_ZOOM,t)}setOpacity(t){ve(typeof t=="number",64),this.set($e.OPACITY,t)}setVisible(t){this.set($e.VISIBLE,t)}setZIndex(t){this.set($e.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const xR=MD,ks={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class TD extends xR{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener($e.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get($e.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ze(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=Me(t,ae.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(e=>e([]))}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}render(t,e){const i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set($e.MAP,t)}getMapInternal(){return this.get($e.MAP)}setMap(t){this.mapPrecomposeKey_&&(Ze(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Ze(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Me(t,ks.PRECOMPOSE,function(e){const n=e.frameState.layerStatesArray,o=this.getLayerState(!1);ve(!n.some(function(s){return s.layer===o.layer}),67),n.push(o)},this),this.mapRenderKey_=Me(this,ae.CHANGE,t.render,t),this.changed())}setSource(t){this.set($e.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function D_(r,t){if(!r.visible)return!1;const e=t.resolution;if(e<r.minResolution||e>=r.maxResolution)return!1;const i=t.zoom;return i>r.minZoom&&i<=r.maxZoom}const ug=TD;function PD(r,t){const e=(""+r).split("."),i=(""+t).split(".");for(let n=0;n<Math.max(e.length,i.length);n++){const o=parseInt(e[n]||"0",10),s=parseInt(i[n]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function OD(r,t){return r[0]+=+t[0],r[1]+=+t[1],r}function qp(r,t){let e=!0;for(let i=r.length-1;i>=0;--i)if(r[i]!=t[i]){e=!1;break}return e}function L_(r,t){const e=Math.cos(t),i=Math.sin(t),n=r[0]*e-r[1]*i,o=r[1]*e+r[0]*i;return r[0]=n,r[1]=o,r}function AD(r,t){return r[0]*=t,r[1]*=t,r}function RR(r,t){const e=r[0]-t[0],i=r[1]-t[1];return e*e+i*i}function bR(r,t){return Math.sqrt(RR(r,t))}function MR(r,t){if(t.canWrapX()){const e=Qe(t.getExtent()),i=DD(r,t,e);i&&(r[0]-=i*e)}return r}function DD(r,t,e){const i=t.getExtent();let n=0;return t.canWrapX()&&(r[0]<i[0]||r[0]>i[2])&&(e=e||Qe(i),n=Math.floor((r[0]-i[0])/e)),n}class LD extends E_{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){ee()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;qs(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),M_(n,i)}forEachFeatureAtCoordinate(t,e,i,n,o,s,a,l){let u;const c=e.viewState;function h(S,E,M,L){return o.call(s,E,S?M:null,L)}const d=c.projection,p=MR(t.slice(),d),f=[[0,0]];if(d.canWrapX()&&n){const S=d.getExtent(),E=Qe(S);f.push([-E,0],[E,0])}const m=e.layerStatesArray,g=m.length,y=[],C=[];for(let S=0;S<f.length;S++)for(let E=g-1;E>=0;--E){const M=m[E],L=M.layer;if(L.hasRenderer()&&D_(M,c)&&a.call(l,L)){const x=L.getRenderer(),T=L.getSource();if(x&&T){const N=T.getWrapX()?p:t,K=h.bind(null,M.managed);C[0]=N[0]+f[S][0],C[1]=N[1]+f[S][1],u=x.forEachFeatureAtCoordinate(C,e,i,K,y)}if(u)return u}}if(y.length===0)return;const w=1/y.length;return y.forEach((S,E)=>S.distanceSq+=E*w),y.sort((S,E)=>S.distanceSq-E.distanceSq),y.some(S=>u=S.callback(S.feature,S.layer,S.geometry)),u}hasFeatureAtCoordinate(t,e,i,n,o,s){return this.forEachFeatureAtCoordinate(t,e,i,n,Ks,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(t){ee()}scheduleExpireIconCache(t){Xp.canExpireCache()&&t.postRenderFunctions.push(ID)}}function ID(r,t){Xp.expire()}const FD=LD;class ND extends $r{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}const TR=ND,gd="ol-hidden",GD="ol-selectable",cg="ol-unselectable",I_="ol-control",i0="ol-collapsed",HD=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),n0=["style","variant","weight","size","lineHeight","family"],PR=function(r){const t=r.match(HD);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,n=n0.length;i<n;++i){const o=t[i+1];o!==void 0&&(e[n0[i]]=o)}return e.families=e.family.split(/,\s?/),e};function Jn(r,t,e,i){let n;return e&&e.length?n=e.shift():b_?n=new OffscreenCanvas(r||300,t||300):n=document.createElement("canvas"),r&&(n.width=r),t&&(n.height=t),n.getContext("2d",i)}function OR(r){const t=r.canvas;t.width=1,t.height=1,r.clearRect(0,0,1,1)}function WD(r){let t=r.offsetWidth;const e=getComputedStyle(r);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function VD(r){let t=r.offsetHeight;const e=getComputedStyle(r);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function r0(r,t){const e=t.parentNode;e&&e.replaceChild(r,t)}function Zp(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function AR(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function kD(r,t){const e=r.childNodes;for(let i=0;;++i){const n=e[i],o=t[i];if(!n&&!o)break;if(n!==o){if(!n){r.appendChild(o);continue}if(!o){r.removeChild(n),--i;continue}r.insertBefore(o,n)}}}const DR="10px sans-serif",Ko="#000",Jp="round",hh=[],dh=0,Cu="round",ph=10,fh="#000",gh="center",Qp="middle",Ta=[0,0,0,0],mh=1,No=new Yr;let zl=null,oy;const sy={},BD=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10\uF013";let o,s;function a(u,c,h){let d=!0;for(let p=0;p<i;++p){const f=e[p];if(s=tf(u+" "+c+" "+t+f,n),h!=f){const m=tf(u+" "+c+" "+t+h+","+f,n);d=d&&m!=s}}return!!d}function l(){let u=!0;const c=No.getKeys();for(let h=0,d=c.length;h<d;++h){const p=c[h];No.get(p)<100&&(a.apply(this,p.split(`
`))?(Vu(sy),zl=null,oy=void 0,No.set(p,100)):(No.set(p,No.get(p)+1,!0),u=!1))}u&&(clearInterval(o),o=void 0)}return function(u){const c=PR(u);if(!c)return;const h=c.families;for(let d=0,p=h.length;d<p;++d){const f=h[d],m=c.style+`
`+c.weight+`
`+f;No.get(m)===void 0&&(No.set(m,100,!0),a(c.style,c.weight,f)||(No.set(m,0,!0),o===void 0&&(o=setInterval(l,32))))}}}(),UD=function(){let r;return function(t){let e=sy[t];if(e==null){if(b_){const i=PR(t),n=LR(t,"\u017Dg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=t,document.body.appendChild(r),e=r.offsetHeight,document.body.removeChild(r);sy[t]=e}return e}}();function LR(r,t){return zl||(zl=Jn(1,1)),r!=oy&&(zl.font=r,oy=zl.font),zl.measureText(t)}function tf(r,t){return LR(r,t).width}function o0(r,t,e){if(t in e)return e[t];const i=t.split(`
`).reduce((n,o)=>Math.max(n,tf(r,o)),0);return e[t]=i,i}function zD(r,t){const e=[],i=[],n=[];let o=0,s=0,a=0,l=0;for(let u=0,c=t.length;u<=c;u+=2){const h=t[u];if(h===`
`||u===c){o=Math.max(o,s),n.push(s),s=0,a+=l;continue}const d=t[u+1]||r.font,p=tf(d,h);e.push(p),s+=p;const f=UD(d);i.push(f),l=Math.max(l,f)}return{width:o,height:a,widths:e,heights:i,lineWidths:n}}function jD(r,t,e,i,n,o,s,a,l,u,c){r.save(),e!==1&&(r.globalAlpha*=e),t&&r.setTransform.apply(r,t),i.contextInstructions?(r.translate(l,u),r.scale(c[0],c[1]),$D(i,r)):c[0]<0||c[1]<0?(r.translate(l,u),r.scale(c[0],c[1]),r.drawImage(i,n,o,s,a,0,0,s,a)):r.drawImage(i,n,o,s,a,l,u,s*c[0],a*c[1]),r.restore()}function $D(r,t){const e=r.contextInstructions;for(let i=0,n=e.length;i<n;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}class YD extends FD{constructor(t){super(t),this.fontChangeListenerKey_=Me(No,_u.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=cg+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new TR(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){Ze(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(ks.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(s,a){return s.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const n=[];let o=null;for(let s=0,a=e.length;s<a;++s){const l=e[s];t.layerIndex=s;const u=l.layer,c=u.getSourceState();if(!D_(l,i)||c!="ready"&&c!="undefined"){u.unrender();continue}const h=u.render(t,o);!h||(h!==o&&(this.children_.push(h),o=h),"getDeclutter"in u&&n.push(u))}for(let s=n.length-1;s>=0;--s)n[s].renderDeclutter(t);kD(this.element_,this.children_),this.dispatchRenderEvent(ks.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}const KD=YD;class Rs extends $r{constructor(t,e){super(t),this.layer=e}}const nm={LAYERS:"layers"};class F_ extends xR{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(nm.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Nr(i.slice(),{unique:!0}):ve(typeof i.getArray=="function",43):i=new Nr(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ze),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Me(t,Ni.ADD,this.handleLayersAdd_,this),Me(t,Ni.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ze);Vu(this.listenerKeys_);const e=t.getArray();for(let i=0,n=e.length;i<n;i++){const o=e[i];this.registerLayerListeners_(o),this.dispatchEvent(new Rs("addlayer",o))}this.changed()}registerLayerListeners_(t){const e=[Me(t,_u.PROPERTYCHANGE,this.handleLayerChange_,this),Me(t,ae.CHANGE,this.handleLayerChange_,this)];t instanceof F_&&e.push(Me(t,"addlayer",this.handleLayerGroupAdd_,this),Me(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Re(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Rs("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Rs("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Rs("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=Re(e);this.listenerKeys_[i].forEach(Ze),delete this.listenerKeys_[i],this.dispatchEvent(new Rs("removelayer",e)),this.changed()}getLayers(){return this.get(nm.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let n=0,o=i.length;n<o;++n)this.dispatchEvent(new Rs("removelayer",i[n]))}this.set(nm.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(e)});const n=this.getLayerState();let o=n.zIndex;!t&&n.zIndex===void 0&&(o=0);for(let s=i,a=e.length;s<a;s++){const l=e[s];l.opacity*=n.opacity,l.visible=l.visible&&n.visible,l.maxResolution=Math.min(l.maxResolution,n.maxResolution),l.minResolution=Math.max(l.minResolution,n.minResolution),l.minZoom=Math.max(l.minZoom,n.minZoom),l.maxZoom=Math.min(l.maxZoom,n.maxZoom),n.extent!==void 0&&(l.extent!==void 0?l.extent=qc(l.extent,n.extent):l.extent=n.extent),l.zIndex===void 0&&(l.zIndex=o)}return e}getSourceState(){return"ready"}}const hg=F_;class XD extends $r{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}}const jl=XD;class qD extends jl{constructor(t,e,i,n,o,s){super(t,e,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Go=qD,Ne={SINGLECLICK:"singleclick",CLICK:ae.CLICK,DBLCLICK:ae.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ay={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class ZD extends ng{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Me(i,ay.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Me(i,ay.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ae.TOUCHMOVE,this.boundHandleTouchMove_,gR?{passive:!1}:!1)}emulateClick_(t){let e=new Go(Ne.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Go(Ne.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const i=new Go(Ne.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==Ne.POINTERUP||e.type==Ne.POINTERCANCEL){delete this.trackedTouches_[i];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==e.target){delete this.trackedTouches_[n];break}}else(e.type==Ne.POINTERDOWN||e.type==Ne.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Go(Ne.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ze),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Go(Ne.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const i in t){const n=t[i];this.down_[i]=typeof n=="function"?Ya:n}if(this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Me(i,Ne.POINTERMOVE,this.handlePointerMove_,this),Me(i,Ne.POINTERUP,this.handlePointerUp_,this),Me(this.element_,Ne.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Me(this.element_.getRootNode(),Ne.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Go(Ne.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Go(Ne.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ze(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ae.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ze(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ze),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const JD=ZD,Ho={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Zi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ef=1/0;class QD{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Vu(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){ve(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=ef?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,o=e[t],s=i[t],a=t;for(;t<n>>1;){const l=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),c=u<n&&i[u]<i[l]?u:l;e[t]=e[c],i[t]=i[c],t=c}e[t]=o,i[t]=s,this.siftDown_(a,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,o=i[e],s=n[e];for(;e>t;){const a=this.getParentIndex_(e);if(n[a]>s)i[e]=i[a],n[e]=n[a],e=a;else break}i[e]=o,n[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const o=e.length;let s,a,l;for(a=0;a<o;++a)s=e[a],l=t(s),l==ef?delete this.queuedElements_[this.keyFunction_(s)]:(i[n]=l,e[n++]=s);e.length=n,i.length=n,this.heapify_()}}const tL=QD,Zt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class eL extends tL{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(ae.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===Zt.LOADED||i===Zt.ERROR||i===Zt.EMPTY){i!==Zt.ERROR&&e.removeEventListener(ae.CHANGE,this.boundHandleTileChange_);const n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0,n,o,s;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;)o=this.dequeue()[0],s=o.getKey(),n=o.getState(),n===Zt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,o.load())}}const iL=eL;function nL(r,t,e,i,n){if(!r||!(e in r.wantedTiles)||!r.wantedTiles[e][t.getKey()])return ef;const o=r.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(n)+Math.sqrt(s*s+a*a)/n}const Qi={ANIMATING:0,INTERACTING:1},wr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},rL=42,N_=256,vh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class oL{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||vh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const IR=oL,Hh=6378137,ql=Math.PI*Hh,sL=[-ql,-ql,ql,ql],aL=[-180,-85,180,85],md=Hh*Math.log(Math.tan(Math.PI/2));class yl extends IR{constructor(t){super({code:t,units:"m",extent:sL,global:!0,worldExtent:aL,getPointResolution:function(e,i){return e/Math.cosh(i[1]/Hh)}})}}const s0=[new yl("EPSG:3857"),new yl("EPSG:102100"),new yl("EPSG:102113"),new yl("EPSG:900913"),new yl("http://www.opengis.net/def/crs/EPSG/0/3857"),new yl("http://www.opengis.net/gml/srs/epsg.xml#3857")];function lL(r,t,e){const i=r.length;e=e>1?e:2,t===void 0&&(e>2?t=r.slice():t=new Array(i));for(let n=0;n<i;n+=e){t[n]=ql*r[n]/180;let o=Hh*Math.log(Math.tan(Math.PI*(+r[n+1]+90)/360));o>md?o=md:o<-md&&(o=-md),t[n+1]=o}return t}function uL(r,t,e){const i=r.length;e=e>1?e:2,t===void 0&&(e>2?t=r.slice():t=new Array(i));for(let n=0;n<i;n+=e)t[n]=180*r[n]/ql,t[n+1]=360*Math.atan(Math.exp(r[n+1]/Hh))/Math.PI-90;return t}const cL=6378137,a0=[-180,-90,180,90],hL=Math.PI*cL/180;class ua extends IR{constructor(t,e){super({code:t,units:"degrees",extent:a0,axisOrientation:e,global:!0,metersPerUnit:hL,worldExtent:a0})}}const l0=[new ua("CRS:84"),new ua("EPSG:4326","neu"),new ua("urn:ogc:def:crs:OGC:1.3:CRS84"),new ua("urn:ogc:def:crs:OGC:2:84"),new ua("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ua("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ua("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ly={};function dL(r){return ly[r]||ly[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function pL(r,t){ly[r]=t}let cu={};function nf(r,t,e){const i=r.getCode(),n=t.getCode();i in cu||(cu[i]={}),cu[i][n]=e}function fL(r,t){let e;return r in cu&&t in cu[r]&&(e=cu[r][t]),e}const G_=63710088e-1;function uy(r,t,e){e=e||G_;const i=Ga(r[1]),n=Ga(t[1]),o=(n-i)/2,s=Ga(t[0]-r[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(n);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function rm(r,t){let e=0;for(let i=0,n=r.length;i<n-1;++i)e+=uy(r[i],r[i+1],t);return e}function FR(r,t){t=t||{};const e=t.radius||G_,i=t.projection||"EPSG:3857",n=r.getType();n!=="GeometryCollection"&&(r=r.clone().transform(i,"EPSG:4326"));let o=0,s,a,l,u,c,h;switch(n){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{s=r.getCoordinates(),o=rm(s,e);break}case"MultiLineString":case"Polygon":{for(s=r.getCoordinates(),l=0,u=s.length;l<u;++l)o+=rm(s[l],e);break}case"MultiPolygon":{for(s=r.getCoordinates(),l=0,u=s.length;l<u;++l)for(a=s[l],c=0,h=a.length;c<h;++c)o+=rm(a[c],e);break}case"GeometryCollection":{const d=r.getGeometries();for(l=0,u=d.length;l<u;++l)o+=FR(d[l],t);break}default:throw new Error("Unsupported geometry type: "+n)}return o}function vd(r,t){let e=0;const i=r.length;let n=r[i-1][0],o=r[i-1][1];for(let s=0;s<i;s++){const a=r[s][0],l=r[s][1];e+=Ga(a-n)*(2+Math.sin(Ga(o))+Math.sin(Ga(l))),n=a,o=l}return e*t*t/2}function NR(r,t){t=t||{};const e=t.radius||G_,i=t.projection||"EPSG:3857",n=r.getType();n!=="GeometryCollection"&&(r=r.clone().transform(i,"EPSG:4326"));let o=0,s,a,l,u,c,h;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(s=r.getCoordinates(),o=Math.abs(vd(s[0],e)),l=1,u=s.length;l<u;++l)o-=Math.abs(vd(s[l],e));break}case"MultiPolygon":{for(s=r.getCoordinates(),l=0,u=s.length;l<u;++l)for(a=s[l],o+=Math.abs(vd(a[0],e)),c=1,h=a.length;c<h;++c)o-=Math.abs(vd(a[c],e));break}case"GeometryCollection":{const d=r.getGeometries();for(l=0,u=d.length;l<u;++l)o+=NR(d[l],t);break}default:throw new Error("Unsupported geometry type: "+n)}return o}let cy=!0;function GR(r){cy=!(r===void 0?!0:r)}function H_(r,t,e){if(t!==void 0){for(let i=0,n=r.length;i<n;++i)t[i]=r[i];t=t}else t=r.slice();return t}function HR(r,t,e){if(t!==void 0&&r!==t){for(let i=0,n=r.length;i<n;++i)t[i]=r[i];r=t}return r}function gL(r){pL(r.getCode(),r),nf(r,r,H_)}function mL(r){r.forEach(gL)}function fi(r){return typeof r=="string"?dL(r):r||null}function u0(r,t,e,i){r=fi(r);let n;const o=r.getPointResolutionFunc();if(o){if(n=o(t,e),i&&i!==r.getUnits()){const s=r.getMetersPerUnit();s&&(n=n*s/vh[i])}}else{const s=r.getUnits();if(s=="degrees"&&!i||i=="degrees")n=t;else{const a=V_(r,fi("EPSG:4326"));if(a===HR&&s!=="degrees")n=t*r.getMetersPerUnit();else{let u=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];u=a(u,u,2);const c=uy(u.slice(0,2),u.slice(2,4)),h=uy(u.slice(4,6),u.slice(6,8));n=(c+h)/2}const l=i?vh[i]:r.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function c0(r){mL(r),r.forEach(function(t){r.forEach(function(e){t!==e&&nf(t,e,H_)})})}function vL(r,t,e,i){r.forEach(function(n){t.forEach(function(o){nf(n,o,e),nf(o,n,i)})})}function W_(r,t){return r?typeof r=="string"?fi(r):r:fi(t)}function yL(r,t){return GR(),Wh(r,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function Ra(r,t){if(r===t)return!0;const e=r.getUnits()===t.getUnits();return(r.getCode()===t.getCode()||V_(r,t)===H_)&&e}function V_(r,t){const e=r.getCode(),i=t.getCode();let n=fL(e,i);return n||(n=HR),n}function yh(r,t){const e=fi(r),i=fi(t);return V_(e,i)}function Wh(r,t,e){return yh(t,e)(r,void 0,r.length)}function _L(r,t,e,i){const n=yh(t,e);return vD(r,n,void 0,i)}function hy(r,t){return r}function Pr(r,t){return cy&&!qp(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(cy=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function WR(r,t){return r}function Pa(r,t){return r}function CL(){c0(s0),c0(l0),vL(l0,s0,lL,uL)}CL();function h0(r,t,e){return function(i,n,o,s,a){if(!i)return;if(!n&&!t)return i;const l=t?0:o[0]*n,u=t?0:o[1]*n,c=a?a[0]:0,h=a?a[1]:0;let d=r[0]+l/2+c,p=r[2]-l/2+c,f=r[1]+u/2+h,m=r[3]-u/2+h;d>p&&(d=(p+d)/2,p=d),f>m&&(f=(m+f)/2,m=f);let g=yi(i[0],d,p),y=yi(i[1],f,m);if(s&&e&&n){const C=30*n;g+=-C*Math.log(1+Math.max(0,d-i[0])/C)+C*Math.log(1+Math.max(0,i[0]-p)/C),y+=-C*Math.log(1+Math.max(0,f-i[1])/C)+C*Math.log(1+Math.max(0,i[1]-m)/C)}return[g,y]}}function wL(r){return r}function k_(r,t,e,i){const n=Qe(t)/e[0],o=yo(t)/e[1];return i?Math.min(r,Math.max(n,o)):Math.min(r,Math.min(n,o))}function B_(r,t,e){let i=Math.min(r,t);const n=50;return i*=Math.log(1+n*Math.max(0,r/t-1))/n+1,e&&(i=Math.max(i,e),i/=Math.log(1+n*Math.max(0,e/r-1))/n+1),yi(i,e/2,t*2)}function SL(r,t,e,i){return t=t!==void 0?t:!0,function(n,o,s,a){if(n!==void 0){const l=r[0],u=r[r.length-1],c=e?k_(l,e,s,i):l;if(a)return t?B_(n,c,u):yi(n,u,c);const h=Math.min(c,n),d=Math.floor(x_(r,h,o));return r[d]>c&&d<r.length-1?r[d+1]:r[d]}else return}}function EL(r,t,e,i,n,o){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(s,a,l,u){if(s!==void 0){const c=n?k_(t,n,l,o):t;if(u)return i?B_(s,c,e):yi(s,e,c);const h=1e-9,d=Math.ceil(Math.log(t/c)/Math.log(r)-h),p=-a*(.5-h)+.5,f=Math.min(c,s),m=Math.floor(Math.log(t/f)/Math.log(r)+p),g=Math.max(d,m),y=t/Math.pow(r,g);return yi(y,e,c)}else return}}function d0(r,t,e,i,n){return e=e!==void 0?e:!0,function(o,s,a,l){if(o!==void 0){const u=i?k_(r,i,a,n):r;return!e||!l?yi(o,t,u):B_(o,u,t)}else return}}function U_(r){if(r!==void 0)return 0}function p0(r){if(r!==void 0)return r}function xL(r){const t=2*Math.PI/r;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function RL(r){return r=r||Ga(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=r?0:t}}function VR(r){return Math.pow(r,3)}function ku(r){return 1-VR(1-r)}function bL(r){return 3*r*r-2*r*r*r}function ML(r){return r}function Wa(r,t,e,i,n,o){o=o||[];let s=0;for(let a=t;a<e;a+=i){const l=r[a],u=r[a+1];o[s++]=n[0]*l+n[2]*u+n[4],o[s++]=n[1]*l+n[3]*u+n[5]}return o&&o.length!=s&&(o.length=s),o}function z_(r,t,e,i,n,o,s){s=s||[];const a=Math.cos(n),l=Math.sin(n),u=o[0],c=o[1];let h=0;for(let d=t;d<e;d+=i){const p=r[d]-u,f=r[d+1]-c;s[h++]=u+p*a-f*l,s[h++]=c+p*l+f*a;for(let m=d+2;m<d+i;++m)s[h++]=r[m]}return s&&s.length!=h&&(s.length=h),s}function TL(r,t,e,i,n,o,s,a){a=a||[];const l=s[0],u=s[1];let c=0;for(let h=t;h<e;h+=i){const d=r[h]-l,p=r[h+1]-u;a[c++]=l+n*d,a[c++]=u+o*p;for(let f=h+2;f<h+i;++f)a[c++]=r[f]}return a&&a.length!=c&&(a.length=c),a}function kR(r,t,e,i,n,o,s){s=s||[];let a=0;for(let l=t;l<e;l+=i){s[a++]=r[l]+n,s[a++]=r[l+1]+o;for(let u=l+2;u<l+i;++u)s[a++]=r[u]}return s&&s.length!=a&&(s.length=a),s}const f0=ho();class PL extends Yr{constructor(){super(),this.extent_=Zn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=XA(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return ee()}closestPointXY(t,e,i,n){return ee()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return ee()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Gh(e),this.extentRevision_=this.getRevision()}return gD(this.extent_,t)}rotate(t,e){ee()}scale(t,e,i){ee()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return ee()}getType(){return ee()}applyTransform(t){ee()}intersectsExtent(t){return ee()}translate(t,e){ee()}transform(t,e){const i=fi(t),n=i.getUnits()=="tile-pixels"?function(o,s,a){const l=i.getExtent(),u=i.getWorldExtent(),c=yo(u)/yo(l);return qs(f0,u[0],u[3],c,-c,0,0,0),Wa(o,0,o.length,a,f0,s),yh(i,e)(o,s,a)}:yh(i,e);return this.applyTransform(n),this}}const BR=PL;class OL extends BR{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return yR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return ee()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=rf(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){ee()}setLayout(t,e,i){let n;if(t)n=rf(t);else{for(let o=0;o<i;++o)if(e.length===0){this.layout="XY",this.stride=2;return}else e=e[0];n=e.length,t=AL(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();z_(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=Xa(this.getExtent()));const n=this.getFlatCoordinates();if(n){const o=this.getStride();TL(n,0,n.length,o,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();kR(i,0,i.length,n,t,e,i),this.changed()}}}function AL(r){let t;return r==2?t="XY":r==3?t="XYZ":r==4&&(t="XYZM"),t}function rf(r){let t;return r=="XY"?t=2:r=="XYZ"||r=="XYM"?t=3:r=="XYZM"&&(t=4),t}function DL(r,t,e){const i=r.getFlatCoordinates();if(i){const n=r.getStride();return Wa(i,0,i.length,n,t,e)}else return null}const na=OL;function g0(r,t,e,i,n,o,s){const a=r[t],l=r[t+1],u=r[e]-a,c=r[e+1]-l;let h;if(u===0&&c===0)h=t;else{const d=((n-a)*u+(o-l)*c)/(u*u+c*c);if(d>1)h=e;else if(d>0){for(let p=0;p<i;++p)s[p]=ko(r[t+p],r[e+p],d);s.length=i;return}else h=t}for(let d=0;d<i;++d)s[d]=r[h+d];s.length=i}function j_(r,t,e,i,n){let o=r[t],s=r[t+1];for(t+=i;t<e;t+=i){const a=r[t],l=r[t+1],u=Yo(o,s,a,l);u>n&&(n=u),o=a,s=l}return n}function $_(r,t,e,i,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];n=j_(r,t,a,i,n),t=a}return n}function LL(r,t,e,i,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];n=$_(r,t,a,i,n),t=a[a.length-1]}return n}function Y_(r,t,e,i,n,o,s,a,l,u,c){if(t==e)return u;let h,d;if(n===0)if(d=Yo(s,a,r[t],r[t+1]),d<u){for(h=0;h<i;++h)l[h]=r[t+h];return l.length=i,d}else return u;c=c||[NaN,NaN];let p=t+i;for(;p<e;)if(g0(r,p-i,p,i,s,a,c),d=Yo(s,a,c[0],c[1]),d<u){for(u=d,h=0;h<i;++h)l[h]=c[h];l.length=i,p+=i}else p+=i*Math.max((Math.sqrt(d)-Math.sqrt(u))/n|0,1);if(o&&(g0(r,e-i,t,i,s,a,c),d=Yo(s,a,c[0],c[1]),d<u)){for(u=d,h=0;h<i;++h)l[h]=c[h];l.length=i}return u}function K_(r,t,e,i,n,o,s,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=e.length;h<d;++h){const p=e[h];u=Y_(r,t,p,i,n,o,s,a,l,u,c),t=p}return u}function IL(r,t,e,i,n,o,s,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=e.length;h<d;++h){const p=e[h];u=K_(r,t,p,i,n,o,s,a,l,u,c),t=p[p.length-1]}return u}function UR(r,t,e,i){for(let n=0,o=e.length;n<o;++n)r[t++]=e[n];return t}function Vh(r,t,e,i){for(let n=0,o=e.length;n<o;++n){const s=e[n];for(let a=0;a<i;++a)r[t++]=s[a]}return t}function X_(r,t,e,i,n){n=n||[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=Vh(r,t,e[s],i);n[o++]=l,t=l}return n.length=o,n}function FL(r,t,e,i,n){n=n||[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=X_(r,t,e[s],i,n[o]);l.length===0&&(l[0]=t),n[o++]=l,t=l[l.length-1]}return n.length=o,n}function q_(r,t,e,i,n,o,s){const a=(e-t)/i;if(a<3){for(;t<e;t+=i)o[s++]=r[t],o[s++]=r[t+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[t,e-i];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let p=0;const f=r[d],m=r[d+1],g=r[h],y=r[h+1];for(let C=d+i;C<h;C+=i){const w=r[C],S=r[C+1],E=_D(w,S,f,m,g,y);E>p&&(c=C,p=E)}p>n&&(l[(c-t)/i]=1,d+i<c&&u.push(d,c),c+i<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(o[s++]=r[t+h*i],o[s++]=r[t+h*i+1]);return s}function NL(r,t,e,i,n,o,s,a){for(let l=0,u=e.length;l<u;++l){const c=e[l];s=q_(r,t,c,i,n,o,s),a.push(s),t=c}return s}function wa(r,t){return t*Math.round(r/t)}function GL(r,t,e,i,n,o,s){if(t==e)return s;let a=wa(r[t],n),l=wa(r[t+1],n);t+=i,o[s++]=a,o[s++]=l;let u,c;do if(u=wa(r[t],n),c=wa(r[t+1],n),t+=i,t==e)return o[s++]=u,o[s++]=c,s;while(u==a&&c==l);for(;t<e;){const h=wa(r[t],n),d=wa(r[t+1],n);if(t+=i,h==u&&d==c)continue;const p=u-a,f=c-l,m=h-a,g=d-l;if(p*g==f*m&&(p<0&&m<p||p==m||p>0&&m>p)&&(f<0&&g<f||f==g||f>0&&g>f)){u=h,c=d;continue}o[s++]=u,o[s++]=c,a=u,l=c,u=h,c=d}return o[s++]=u,o[s++]=c,s}function zR(r,t,e,i,n,o,s,a){for(let l=0,u=e.length;l<u;++l){const c=e[l];s=GL(r,t,c,i,n,o,s),a.push(s),t=c}return s}function HL(r,t,e,i,n,o,s,a){for(let l=0,u=e.length;l<u;++l){const c=e[l],h=[];s=zR(r,t,c,i,n,o,s,h),a.push(h),t=c[c.length-1]}return s}function Ds(r,t,e,i,n){n=n!==void 0?n:[];let o=0;for(let s=t;s<e;s+=i)n[o++]=r.slice(s,s+i);return n.length=o,n}function _h(r,t,e,i,n){n=n!==void 0?n:[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s];n[o++]=Ds(r,t,l,i,n[o]),t=l}return n.length=o,n}function dy(r,t,e,i,n){n=n!==void 0?n:[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s];n[o++]=l.length===1&&l[0]===t?[]:_h(r,t,l,i,n[o]),t=l[l.length-1]}return n.length=o,n}function jR(r,t,e,i){let n=0,o=r[e-i],s=r[e-i+1];for(;t<e;t+=i){const a=r[t],l=r[t+1];n+=s*a-o*l,o=a,s=l}return n/2}function $R(r,t,e,i){let n=0;for(let o=0,s=e.length;o<s;++o){const a=e[o];n+=jR(r,t,a,i),t=a}return n}function WL(r,t,e,i){let n=0;for(let o=0,s=e.length;o<s;++o){const a=e[o];n+=$R(r,t,a,i),t=a[a.length-1]}return n}class of extends na{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new of(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<ol(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(j_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Y_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return jR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ds(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=q_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new of(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vh(this.flatCoordinates,0,t,this.stride),this.changed()}}const sf=of;class Z_ extends na{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Z_(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const o=this.flatCoordinates,s=Yo(t,e,o[0],o[1]);if(s<n){const a=this.stride;for(let l=0;l<a;++l)i[l]=o[l];return i.length=a,s}else return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return dD(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return T_(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=UR(this.flatCoordinates,0,t,this.stride),this.changed()}}const yn=Z_;function VL(r,t,e,i,n){return!P_(n,function(s){return!Oa(r,t,e,i,s[0],s[1])})}function Oa(r,t,e,i,n,o){let s=0,a=r[e-i],l=r[e-i+1];for(;t<e;t+=i){const u=r[t],c=r[t+1];l<=o?c>o&&(u-a)*(o-l)-(n-a)*(c-l)>0&&s++:c<=o&&(u-a)*(o-l)-(n-a)*(c-l)<0&&s--,a=u,l=c}return s!==0}function J_(r,t,e,i,n,o){if(e.length===0||!Oa(r,t,e[0],i,n,o))return!1;for(let s=1,a=e.length;s<a;++s)if(Oa(r,e[s-1],e[s],i,n,o))return!1;return!0}function kL(r,t,e,i,n,o){if(e.length===0)return!1;for(let s=0,a=e.length;s<a;++s){const l=e[s];if(J_(r,t,l,i,n,o))return!0;t=l[l.length-1]}return!1}function YR(r,t,e,i,n,o,s){let a,l,u,c,h,d,p;const f=n[o+1],m=[];for(let C=0,w=e.length;C<w;++C){const S=e[C];for(c=r[S-i],d=r[S-i+1],a=t;a<S;a+=i)h=r[a],p=r[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(u=(f-d)/(p-d)*(h-c)+c,m.push(u)),c=h,d=p}let g=NaN,y=-1/0;for(m.sort($a),c=m[0],a=1,l=m.length;a<l;++a){h=m[a];const C=Math.abs(h-c);C>y&&(u=(c+h)/2,J_(r,t,e,i,u,f)&&(g=u,y=C)),c=h}return isNaN(g)&&(g=n[o]),s?(s.push(g,f,y),s):[g,f,y]}function BL(r,t,e,i,n){let o=[];for(let s=0,a=e.length;s<a;++s){const l=e[s];o=YR(r,t,l,i,n,2*s,o),t=l[l.length-1]}return o}function KR(r,t,e,i,n){let o;for(t+=i;t<e;t+=i)if(o=n(r.slice(t-i,t),r.slice(t,t+i)),o)return o;return!1}function dg(r,t,e,i,n){const o=CR(Zn(),r,t,e,i);return gn(n,o)?As(n,o)||o[0]>=n[0]&&o[2]<=n[2]||o[1]>=n[1]&&o[3]<=n[3]?!0:KR(r,t,e,i,function(s,a){return mD(n,s,a)}):!1}function UL(r,t,e,i,n){for(let o=0,s=e.length;o<s;++o){if(dg(r,t,e[o],i,n))return!0;t=e[o]}return!1}function XR(r,t,e,i,n){return!!(dg(r,t,e,i,n)||Oa(r,t,e,i,n[0],n[1])||Oa(r,t,e,i,n[0],n[3])||Oa(r,t,e,i,n[2],n[1])||Oa(r,t,e,i,n[2],n[3]))}function qR(r,t,e,i,n){if(!XR(r,t,e[0],i,n))return!1;if(e.length===1)return!0;for(let o=1,s=e.length;o<s;++o)if(VL(r,e[o-1],e[o],i,n)&&!dg(r,e[o-1],e[o],i,n))return!1;return!0}function zL(r,t,e,i,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];if(qR(r,t,a,i,n))return!0;t=a[a.length-1]}return!1}function jL(r,t,e,i){for(;t<e-i;){for(let n=0;n<i;++n){const o=r[t+n];r[t+n]=r[e-i+n],r[e-i+n]=o}t+=i,e-=i}}function Q_(r,t,e,i){let n=0,o=r[e-i],s=r[e-i+1];for(;t<e;t+=i){const a=r[t],l=r[t+1];n+=(a-o)*(l+s),o=a,s=l}return n===0?void 0:n>0}function ZR(r,t,e,i,n){n=n!==void 0?n:!1;for(let o=0,s=e.length;o<s;++o){const a=e[o],l=Q_(r,t,a,i);if(o===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;t=a}return!0}function $L(r,t,e,i,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];if(!ZR(r,t,a,i,n))return!1;a.length&&(t=a[a.length-1])}return!0}function py(r,t,e,i,n){n=n!==void 0?n:!1;for(let o=0,s=e.length;o<s;++o){const a=e[o],l=Q_(r,t,a,i);(o===0?n&&l||!n&&!l:n&&!l||!n&&l)&&jL(r,t,a,i),t=a}return t}function m0(r,t,e,i,n){for(let o=0,s=e.length;o<s;++o)t=py(r,t,e[o],i,n);return t}class Ch extends na{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Wr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ch(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<ol(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),K_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return J_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return $R(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),py(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,_h(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Xa(this.getExtent());this.flatInteriorPoint_=YR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new yn(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new sf(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let o=0;for(let s=0,a=i.length;s<a;++s){const l=i[s],u=new sf(e.slice(o,l),t);n.push(u),o=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;ZR(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=py(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=zR(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Ch(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return qR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=X_(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Qo=Ch;function v0(r){const t=r[0],e=r[1],i=r[2],n=r[3],o=[t,e,t,n,i,n,i,e,t,e];return new Ch(o,"XY",[o.length])}const om=0;class YL extends Yr{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=W_(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&GR(),t.center&&(t.center=Pr(t.center,this.projection_)),t.extent&&(t.extent=Pa(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in wr)delete e[a];this.setProperties(e,!0);const i=XL(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=KL(t),o=i.constraint,s=qL(t);this.constraints_={center:n,resolution:o,rotation:s},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenter();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const o=this.getResolution(),s=o/2*(n[3]-e[3]+e[1]-n[1]),a=o/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=Pr(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=Pr(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let n=0;for(;n<e&&!this.isDef();++n){const c=arguments[n];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(n===e){i&&yd(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;n<e;++n){const c=arguments[n],h={start:o,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||bL,callback:i};if(c.center&&(h.sourceCenter=s,h.targetCenter=c.center.slice(),s=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const d=Ha(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}ZL(h)?h.complete=!0:o+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(Qi.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Qi.ANIMATING]>0}getInteracting(){return this.hints_[Qi.INTERACTING]>0}cancelAnimations(){this.setHint(Qi.ANIMATING,-this.hints_[Qi.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){const n=this.animations_[e];if(n[0].callback&&yd(n[0].callback,!1),!t)for(let o=0,s=n.length;o<s;++o){const a=n[o];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let o=!0;for(let s=0,a=n.length;s<a;++s){const l=n[s];if(l.complete)continue;const u=t-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):o=!1;const h=l.easing(c);if(l.sourceCenter){const d=l.sourceCenter[0],p=l.sourceCenter[1],f=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const g=d+h*(f-d),y=p+h*(m-p);this.targetCenter_=[g,y]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,p,!0);this.targetCenter_=this.calculateCenterZoom(f,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?Ha(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(o){this.animations_[i]=null,this.setHint(Qi.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=n[0].callback;s&&yd(s,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return n!==void 0&&(i=[n[0]-e[0],n[1]-e[1]],L_(i,t-this.getRotation()),OD(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),o=this.getResolution();if(n!==void 0&&o!==void 0){const s=e[0]-t*(e[0]-n[0])/o,a=e[1]-t*(e[1]-n[1])/o;i=[s,a]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}else return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&hy(t,this.getProjection())}getCenterInternal(){return this.get(wr.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return WR(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();ve(e,1);const i=this.getResolution();ve(i!==void 0,2);const n=this.getRotation();return ve(n!==void 0,3),ny(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(wr.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Pa(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=Qe(t)/e[0],n=yo(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(o){return e/Math.pow(t,o*n)}}getRotation(){return this.get(wr.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(i/n)/e;return function(s){return Math.log(i/s)/e/o}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();n=sm(n,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],e,i)}return{center:n.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,n;if(this.resolutions_){const o=x_(this.resolutions_,t,1);e=o,i=this.resolutions_[o],o==this.resolutions_.length-1?n=2:n=i/this.resolutions_[o+1]}else i=this.maxResolution_,n=this.zoomFactor_;return e+Math.log(i/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=yi(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,yi(t-e,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(ve(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){ve(!O_(t),25);const n=Pa(t,this.getProjection());i=v0(n)}else if(t.getType()==="Circle"){const n=Pa(t.getExtent(),this.getProjection());i=v0(n),i.rotate(this.getRotation(),Xa(n))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),o=t.getFlatCoordinates(),s=t.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,d=o.length;h<d;h+=s){const p=o[h]*i-o[h+1]*n,f=o[h]*n+o[h+1]*i;a=Math.min(a,p),l=Math.min(l,f),u=Math.max(u,p),c=Math.max(c,f)}return[a,l,u,c]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const n=e.padding!==void 0?e.padding:[0,0,0,0],o=e.nearest!==void 0?e.nearest:!1;let s;e.minResolution!==void 0?s=e.minResolution:e.maxZoom!==void 0?s=this.getResolutionForZoom(e.maxZoom):s=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);l=isNaN(l)?s:Math.max(l,s),l=this.getConstrainedResolution(l,o?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=Xa(a);d[0]+=(n[1]-n[3])/2*l,d[1]+=(n[0]-n[2])/2*l;const p=d[0]*h-d[1]*c,f=d[1]*h+d[0]*c,m=this.getConstrainedCenter([p,f],l),g=e.callback?e.callback:Ya;e.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:e.duration,easing:e.easing},g):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),yd(g,!0))}centerOn(t,e,i){this.centerOnInternal(Pr(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(sm(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let o;const s=this.padding_;if(s&&t){const a=this.getViewportSizeMinusPadding_(-i),l=sm(t,n,[a[0]/2+s[3],a[1]/2+s[0]],e,i);o=[t[0]-l[0],t[1]-l[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=hy(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Pr(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Pr(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Pr(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,n,o));this.get(wr.ROTATION)!==n&&this.set(wr.ROTATION,n),this.get(wr.RESOLUTION)!==s&&(this.set(wr.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(wr.CENTER)||!qp(this.get(wr.CENTER),a))&&this.set(wr.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const n=e||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,n,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!qp(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:t,easing:ku,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Qi.INTERACTING,1)}endInteraction(t,e,i){i=i&&Pr(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.setHint(Qi.INTERACTING,-1),this.resolveConstraints(t,e,i)}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function yd(r,t){setTimeout(function(){r(t)},0)}function KL(r){if(r.extent!==void 0){const e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return h0(r.extent,r.constrainOnlyCenter,e)}const t=W_(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,h0(e,!1,!1)}return wL}function XL(r){let t,e,i,s=r.minZoom!==void 0?r.minZoom:om,a=r.maxZoom!==void 0?r.maxZoom:28;const l=r.zoomFactor!==void 0?r.zoomFactor:2,u=r.multiWorld!==void 0?r.multiWorld:!1,c=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,h=r.showFullExtent!==void 0?r.showFullExtent:!1,d=W_(r.projection,"EPSG:3857"),p=d.getExtent();let f=r.constrainOnlyCenter,m=r.extent;if(!u&&!m&&d.isGlobal()&&(f=!1,m=p),r.resolutions!==void 0){const g=r.resolutions;e=g[s],i=g[a]!==void 0?g[a]:g[g.length-1],r.constrainResolution?t=SL(g,c,!f&&m,h):t=d0(e,i,c,!f&&m,h)}else{const y=(p?Math.max(Qe(p),yo(p)):360*vh.degrees/d.getMetersPerUnit())/N_/Math.pow(2,om),C=y/Math.pow(2,28-om);e=r.maxResolution,e!==void 0?s=0:e=y/Math.pow(l,s),i=r.minResolution,i===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?i=e/Math.pow(l,a):i=y/Math.pow(l,a):i=C),a=s+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,a-s),r.constrainResolution?t=EL(l,e,i,c,!f&&m,h):t=d0(e,i,c,!f&&m,h)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:s,zoomFactor:l}}function qL(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const e=r.constrainRotation;return e===void 0||e===!0?RL():e===!1?p0:typeof e=="number"?xL(e):p0}else return U_}function ZL(r){return!(r.sourceCenter&&r.targetCenter&&!qp(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function sm(r,t,e,i,n){const o=Math.cos(-n);let s=Math.sin(-n),a=r[0]*o-r[1]*s,l=r[1]*o+r[0]*s;a+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,s=-s;const u=a*o-l*s,c=l*o+a*s;return[u,c]}const Ts=YL;class JL extends Yr{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Zp(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Zp(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)Ze(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ya&&this.listenerKeys.push(Me(t,Ho.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const tC=JL;class QL extends tC{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",n=t.expandClassName!==void 0?t.expandClassName:e+"-expand",o=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",s=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(ae.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+cg+" "+I_+(this.collapsed_&&this.collapsible_?" "+i0:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},i=[];let n=!0;const o=t.layerStatesArray;for(let s=0,a=o.length;s<a;++s){const l=o[s];if(!D_(l,t.viewState))continue;const u=l.layer.getSource();if(!u)continue;const c=u.getAttributions();if(!c)continue;const h=c(t);if(!!h)if(n=n&&u.getAttributionsCollapsible()!==!1,Array.isArray(h))for(let d=0,p=h.length;d<p;++d)h[d]in e||(i.push(h[d]),e[h[d]]=!0);else h in e||(i.push(h),e[h]=!0)}return this.overrideCollapsible_||this.setCollapsible(n),i}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!rl(e,this.renderedAttributions_)){AR(this.ulElement_);for(let n=0,o=e.length;n<o;++n){const s=document.createElement("li");s.innerHTML=e[n],this.ulElement_.appendChild(s)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(i0),this.collapsed_?r0(this.collapseLabel_,this.label_):r0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const tI=QL;class eI extends tC{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"\u21E7",n=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const o=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=e+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(ae.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+cg+" "+I_,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(gd)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:ku}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const n="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(gd);!o&&i===0?this.element.classList.add(gd):o&&i!==0&&this.element.classList.remove(gd)}this.label_.style.transform=n}this.rotation_=i}}const iI=eI;class nI extends tC{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,n=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",o=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",s=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",u=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=n,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof s=="string"?document.createTextNode(s):s),c.addEventListener(ae.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=o,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(ae.CLICK,this.handleClick_.bind(this,-i),!1);const d=e+" "+cg+" "+I_,p=this.element;p.className=d,p.appendChild(c),p.appendChild(h),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const o=i.getConstrainedZoom(n+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:ku})):i.setZoom(o)}}}const rI=nI;function JR(r){r=r||{};const t=new Nr;return(r.zoom!==void 0?r.zoom:!0)&&t.push(new rI(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&t.push(new iI(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&t.push(new tI(r.attributionOptions)),t}const fy={ACTIVE:"active"};class oI extends Yr{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(fy.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(fy.ACTIVE,t)}setMap(t){this.map_=t}}function sI(r,t,e){const i=r.getCenterInternal();if(i){const n=[i[0]+t[0],i[1]+t[1]];r.animateInternal({duration:e!==void 0?e:250,easing:ML,center:r.getConstrainedCenter(n)})}}function eC(r,t,e,i){const n=r.getZoom();if(n===void 0)return;const o=r.getConstrainedZoom(n+t),s=r.getResolutionForZoom(o);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:s,anchor:e,duration:i!==void 0?i:250,easing:ku})}const Bu=oI;class aI extends Bu{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Ne.DBLCLICK){const i=t.originalEvent,n=t.map,o=t.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=n.getView();eC(a,s,o,this.duration_),i.preventDefault(),e=!0}return!e}}const lI=aI;class uI extends Bu{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ne.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ne.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Ne.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Ne.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function iC(r){const t=r.length;let e=0,i=0;for(let n=0;n<t;n++)e+=r[n].clientX,i+=r[n].clientY;return[e/t,i/t]}const Uu=uI;function gy(r){const t=arguments;return function(e){let i=!0;for(let n=0,o=t.length;n<o&&(i=i&&t[n](e),!!i);++n);return i}}const cI=function(r){const t=r.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},hI=function(r){const t=r.map.getTargetElement(),e=r.map.getOwnerDocument().activeElement;return t.contains(e)},QR=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?hI(r):!0},my=Ks,dI=function(r){return r.type==Ne.CLICK},tb=function(r){const t=r.originalEvent;return t.button==0&&!(rD&&oD&&t.ctrlKey)},vy=Wu,pI=function(r){return r.type==Ne.SINGLECLICK},nC=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},rC=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},eb=function(r){const t=r.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},am=function(r){const t=r.originalEvent;return ve(t!==void 0,56),t.pointerType=="mouse"},fI=function(r){const t=r.originalEvent;return ve(t!==void 0,56),t.isPrimary&&t.button===0};class gI extends Uu{constructor(t){super({stopDown:Wu}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:gy(nC,fI);this.condition_=t.onFocusOnly?gy(QR,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,i=iC(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const n=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();AD(n,s.getResolution()),L_(n,s.getRotation()),s.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(s),l=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(o),a[1]-n*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:ku})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1}}const mI=gI;class vI extends Uu{constructor(t){t=t||{},super({stopDown:Wu}),this.condition_=t.condition?t.condition:cI,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!am(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===U_)return;const n=e.getSize(),o=t.pixel,s=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(t){return am(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return am(t)&&tb(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const yI=vI;class _I extends E_{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Qo([n])}getGeometry(){return this.geometry_}}const CI=_I,_d={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class lm extends $r{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class wI extends Uu{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new CI(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:tb,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],o=i[1]-e[1];return n*n+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new lm(_d.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new lm(e?_d.BOXEND:_d.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new lm(_d.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const SI=wI;class EI extends SI{constructor(t){t=t||{};const e=t.condition?t.condition:rC;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(n),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;n=n.clone(),n.scale(a*a)}i.fitInternal(n,{duration:this.duration_,easing:ku})}}const xI=EI,ca={LEFT:37,UP:38,RIGHT:39,DOWN:40};class RI extends Bu{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return nC(e)&&eb(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==ae.KEYDOWN){const i=t.originalEvent,n=i.keyCode;if(this.condition_(t)&&(n==ca.DOWN||n==ca.LEFT||n==ca.RIGHT||n==ca.UP)){const s=t.map.getView(),a=s.getResolution()*this.pixelDelta_;let l=0,u=0;n==ca.DOWN?u=-a:n==ca.LEFT?l=-a:n==ca.RIGHT?l=a:u=a;const c=[l,u];L_(c,s.getRotation()),sI(s,c,this.duration_),i.preventDefault(),e=!0}}return!e}}const bI=RI;class MI extends Bu{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:eb,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==ae.KEYDOWN||t.type==ae.KEYPRESS){const i=t.originalEvent,n=i.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){const o=t.map,s=n=="+".charCodeAt(0)?this.delta_:-this.delta_,a=o.getView();eC(a,s,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}const TI=MI;class PI{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const o=this.points_[e]-this.points_[i],s=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const OI=PI;class AI extends Bu{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:my;this.condition_=t.onFocusOnly?gy(QR,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==ae.WHEEL)return!0;const i=t.map,n=t.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let o;if(t.type==ae.WHEEL&&(o=n.deltaY,iD&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=fR),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=o;const l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-yi(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),eC(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const DI=AI;class LI extends Uu{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Wu),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=c}this.lastAngle_=o;const s=t.map,a=s.getView();if(a.getConstraints().rotation===U_)return;const l=s.getViewport().getBoundingClientRect(),u=iC(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}}const II=LI;class FI extends Uu{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Wu),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],o=i.clientX-n.clientX,s=i.clientY-n.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,u=l.getView();e!=1&&(this.lastScaleDelta_=e);const c=l.getViewport().getBoundingClientRect(),h=iC(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=l.getCoordinateFromPixelInternal(h),l.render(),u.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}else return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}}const NI=FI;function GI(r){r=r||{};const t=new Nr,e=new OI(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&t.push(new yI),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&t.push(new lI({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&t.push(new mI({onFocusOnly:r.onFocusOnly,kinetic:e})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&t.push(new II),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&t.push(new NI({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(t.push(new bI),t.push(new TI({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&t.push(new DI({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&t.push(new xI({duration:r.zoomDuration})),t}function y0(r,t,e){return e===void 0&&(e=[0,0]),e[0]=r[0]+2*t,e[1]=r[1]+2*t,e}function _0(r){return r[0]>0&&r[1]>0}function ib(r,t,e){return e===void 0&&(e=[0,0]),e[0]=r[0]*t+.5|0,e[1]=r[1]*t+.5|0,e}function vn(r,t){return Array.isArray(r)?r:(t===void 0?t=[r,r]:(t[0]=r,t[1]=r),t)}function nb(r){if(r instanceof ug){r.setMapInternal(null);return}r instanceof hg&&r.getLayers().forEach(nb)}function rb(r,t){if(r instanceof ug){r.setMapInternal(t);return}if(r instanceof hg){const e=r.getLayers().getArray();for(let i=0,n=e.length;i<n;++i)rb(e[i],t)}}class HI extends Yr{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=WI(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:fR,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ho(),this.pixelToCoordinateTransform_=ho(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||JR(),this.interactions=e.interactions||GI({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new iL(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Zi.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Zi.VIEW,this.handleViewChanged_),this.addChangeListener(Zi.SIZE,this.handleSizeChanged_),this.addChangeListener(Zi.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof Ts)&&t.view.then(function(n){i.setView(new Ts(n))}),this.controls.addEventListener(Ni.ADD,function(n){n.element.setMap(this)}.bind(this)),this.controls.addEventListener(Ni.REMOVE,function(n){n.element.setMap(null)}.bind(this)),this.interactions.addEventListener(Ni.ADD,function(n){n.element.setMap(this)}.bind(this)),this.interactions.addEventListener(Ni.REMOVE,function(n){n.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(Ni.ADD,function(n){this.addOverlayInternal_(n.element)}.bind(this)),this.overlays_.addEventListener(Ni.REMOVE,function(n){const o=n.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],n.element.setMap(null)}.bind(this)),this.controls.forEach(function(n){n.setMap(this)}.bind(this)),this.interactions.forEach(function(n){n.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){rb(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:Ks,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,a,e,null,s,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(n){i.push(n)},e),i}getAllLayers(){const t=[];function e(i){i.forEach(function(n){n instanceof hg?e(n.getLayers()):t.push(n)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const n=e.layerFilter!==void 0?e.layerFilter:Ks,o=e.hitTolerance!==void 0?e.hitTolerance:0,s=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]}getTarget(){return this.get(Zi.TARGET)}getTargetElement(){const t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null}getCoordinateFromPixel(t){return hy(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Ii(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Zi.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Nr){e.setLayers(t);return}const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e];if(!n.visible)continue;const o=n.layer.getRenderer();if(o&&!o.ready)return!0;const s=n.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Pr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Ii(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Zi.SIZE)}getView(){return this.get(Zi.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return nL(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new Go(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===ay.POINTERDOWN||i===ae.WHEEL||i===ae.KEYDOWN){const n=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():n,s=e.target;if(this.overlayContainerStopEvent_.contains(s)||!(o===n?n.documentElement:o).contains(s))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const n=this.getInteractions().getArray().slice();for(let o=n.length-1;o>=0;o--){const s=n[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,o=n;if(t){const s=t.viewHints;if(s[Qi.ANIMATING]||s[Qi.INTERACTING]){const a=Date.now()-t.time>8;n=a?0:8,o=a?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(ks.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ks.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new jl(Ho.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new jl(Ho.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let n=0,o=i.length;n<o;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,i=this.targetChangeHandlerKeys_.length;e<i;++e)Ze(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ae.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ae.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Zp(this.viewport_)}const t=this.getTargetElement();if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new KD(this)),this.mapBrowserEventHandler_=new JD(this,this.moveTolerance_);for(const n in Ne)this.mapBrowserEventHandler_.addEventListener(Ne[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ae.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ae.WHEEL,this.boundHandleBrowserEvent_,gR?{passive:!1}:!1);const e=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Me(i,ae.KEYDOWN,this.handleBrowserEvent,this),Me(i,ae.KEYPRESS,this.handleBrowserEvent,this),Me(e,ae.RESIZE,this.updateSize,this)]}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ze(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ze(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Me(t,_u.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Me(t,ae.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ze),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Rs("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Me(t,_u.PROPERTYCHANGE,this.render,this),Me(t,ae.CHANGE,this.render,this),Me(t,"addlayer",this.handleLayerAdd_,this),Me(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){nb(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let o=null;if(e!==void 0&&_0(e)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ny(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:Re(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=ny(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),n&&(!this.previousExtent_||!O_(this.previousExtent_)&&!ch(o.extent,this.previousExtent_))&&(this.dispatchEvent(new jl(Ho.MOVESTART,this,n)),this.previousExtent_=Gh(this.previousExtent_)),this.previousExtent_&&!o.viewHints[Qi.ANIMATING]&&!o.viewHints[Qi.INTERACTING]&&!ch(o.extent,this.previousExtent_)&&(this.dispatchEvent(new jl(Ho.MOVEEND,this,o)),vR(o.extent,this.previousExtent_))),this.dispatchEvent(new jl(Ho.POSTRENDER,this,o)),this.renderComplete_=this.hasListener(Ho.LOADSTART)||this.hasListener(Ho.LOADEND)||this.hasListener(ks.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Rs("removelayer",e)),this.set(Zi.LAYERGROUP,t)}setSize(t){this.set(Zi.SIZE,t)}setTarget(t){this.set(Zi.TARGET,t)}setView(t){if(!t||t instanceof Ts){this.set(Zi.VIEW,t);return}this.set(Zi.VIEW,new Ts);const e=this;t.then(function(i){e.setView(new Ts(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),o=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(n)&&!isNaN(o)&&(e=[n,o],!_0(e)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}}function WI(r){let t=null;r.keyboardEventTarget!==void 0&&(t=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const e={},i=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new hg({layers:r.layers});e[Zi.LAYERGROUP]=i,e[Zi.TARGET]=r.target,e[Zi.VIEW]=r.view instanceof Ts?r.view:new Ts;let n;r.controls!==void 0&&(Array.isArray(r.controls)?n=new Nr(r.controls.slice()):(ve(typeof r.controls.getArray=="function",47),n=r.controls));let o;r.interactions!==void 0&&(Array.isArray(r.interactions)?o=new Nr(r.interactions.slice()):(ve(typeof r.interactions.getArray=="function",48),o=r.interactions));let s;return r.overlays!==void 0?Array.isArray(r.overlays)?s=new Nr(r.overlays.slice()):(ve(typeof r.overlays.getArray=="function",49),s=r.overlays):s=new Nr,{controls:n,interactions:o,keyboardEventTarget:t,overlays:s,values:e}}const VI=HI;class kI extends ng{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(ae.CHANGE)}release(){this.state===Zt.ERROR&&this.setState(Zt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==Zt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==Zt.LOADED){t.interimTile=null;break}else t.getState()==Zt.LOADING?e=t:t.getState()==Zt.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Zt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){ee()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;const n=e-i+1e3/60;return n>=this.transition_?1:VR(n/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const ob=kI,Ri={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function sb(r,t,e){const i=r;let n=!0,o=!1,s=!1;const a=[Yp(i,ae.LOAD,function(){s=!0,o||t()})];return i.src&&sD?(o=!0,i.decode().then(function(){n&&t()}).catch(function(l){n&&(s?t():e())})):a.push(Yp(i,ae.ERROR,e)),function(){n=!1,a.forEach(Ze)}}class BI extends ob{constructor(t,e,i,n,o,s){super(t,e,s),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Zt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Zt.ERROR,this.unlistenImage_(),this.image_=UI(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Zt.LOADED:this.state=Zt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Zt.ERROR&&(this.state=Zt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Zt.IDLE&&(this.state=Zt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=sb(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function UI(){const r=Jn(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}const ab=BI,zI=.5,jI=10,C0=.25;class $I{constructor(t,e,i,n,o,s){this.sourceProj_=t,this.targetProj_=e;let a={};const l=yh(this.targetProj_,this.sourceProj_);this.transformInv_=function(C){const w=C[0]+"/"+C[1];return a[w]||(a[w]=l(C)),a[w]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Qe(n)==Qe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Qe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Qe(this.targetProj_.getExtent()):null;const u=sl(i),c=lg(i),h=ag(i),d=sg(i),p=this.transformInv_(u),f=this.transformInv_(c),m=this.transformInv_(h),g=this.transformInv_(d),y=jI+(s?Math.max(0,Math.ceil(Math.log2(iy(i)/(s*s*256*256)))):0);if(this.addQuad_(u,c,h,d,p,f,m,g,y),this.wrapsXInSource_){let C=1/0;this.triangles_.forEach(function(w,S,E){C=Math.min(C,w.source[0][0],w.source[1][0],w.source[2][0])}),this.triangles_.forEach(function(w){if(Math.max(w.source[0][0],w.source[1][0],w.source[2][0])-C>this.sourceWorldWidth_/2){const S=[[w.source[0][0],w.source[0][1]],[w.source[1][0],w.source[1][1]],[w.source[2][0],w.source[2][1]]];S[0][0]-C>this.sourceWorldWidth_/2&&(S[0][0]-=this.sourceWorldWidth_),S[1][0]-C>this.sourceWorldWidth_/2&&(S[1][0]-=this.sourceWorldWidth_),S[2][0]-C>this.sourceWorldWidth_/2&&(S[2][0]-=this.sourceWorldWidth_);const E=Math.min(S[0][0],S[1][0],S[2][0]);Math.max(S[0][0],S[1][0],S[2][0])-E<this.sourceWorldWidth_/2&&(w.source=S)}}.bind(this))}a={}}addTriangle_(t,e,i,n,o,s){this.triangles_.push({source:[n,o,s],target:[t,e,i]})}addQuad_(t,e,i,n,o,s,a,l,u){const c=ty([o,s,a,l]),h=this.sourceWorldWidth_?Qe(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&h>.5&&h<1;let f=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const g=ty([t,e,i,n]);f=Qe(g)/this.targetWorldWidth_>C0||f}!p&&this.sourceProj_.isGlobal()&&h&&(f=h>C0||f)}if(!f&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!gn(c,this.maxSourceExtent_))return;let m=0;if(!f&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)f=!0;else if(m=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(u>0){if(!f){const g=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.transformInv_(g);let C;p?C=(Ha(o[0],d)+Ha(a[0],d))/2-Ha(y[0],d):C=(o[0]+a[0])/2-y[0];const w=(o[1]+a[1])/2-y[1];f=C*C+w*w>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const g=[(e[0]+i[0])/2,(e[1]+i[1])/2],y=this.transformInv_(g),C=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(C);this.addQuad_(t,e,g,C,o,s,y,w,u-1),this.addQuad_(C,g,i,n,w,y,a,l,u-1)}else{const g=[(t[0]+e[0])/2,(t[1]+e[1])/2],y=this.transformInv_(g),C=[(i[0]+n[0])/2,(i[1]+n[1])/2],w=this.transformInv_(C);this.addQuad_(t,g,C,n,o,y,w,l,u-1),this.addQuad_(g,e,i,C,y,s,a,w,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(t,i,n,o,a,l),(m&14)==0&&this.addTriangle_(t,i,e,o,a,s),m&&((m&13)==0&&this.addTriangle_(e,n,t,s,l,o),(m&7)==0&&this.addTriangle_(e,n,i,s,l,a))}calculateSourceExtent(){const t=Zn();return this.triangles_.forEach(function(e,i,n){const o=e.source;Xc(t,o[0]),Xc(t,o[1]),Xc(t,o[2])}),t}getTriangles(){return this.triangles_}}const YI=$I;let um;const lb=[];function w0(r,t,e,i,n){r.beginPath(),r.moveTo(0,0),r.lineTo(t,e),r.lineTo(i,n),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(t,i)+1,Math.max(e,n)),r.restore()}function cm(r,t){return Math.abs(r[t*4]-210)>2||Math.abs(r[t*4+3]-.75*255)>2}function KI(){if(um===void 0){const r=document.createElement("canvas").getContext("2d");r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",w0(r,4,5,4,0),w0(r,4,5,0,5);const t=r.getImageData(0,0,3,3).data;um=cm(t,0)||cm(t,4)||cm(t,8)}return um}function yy(r,t,e,i){const n=Wh(e,t,r);let o=u0(t,i,e);const s=t.getMetersPerUnit();s!==void 0&&(o*=s);const a=r.getMetersPerUnit();a!==void 0&&(o/=a);const l=r.getExtent();if(!l||og(l,n)){const u=u0(r,o,n)/o;isFinite(u)&&u>0&&(o/=u)}return o}function XI(r,t,e,i){const n=Xa(e);let o=yy(r,t,n,i);return(!isFinite(o)||o<=0)&&P_(e,function(s){return o=yy(r,t,s,i),isFinite(o)&&o>0}),o}function qI(r,t,e,i,n,o,s,a,l,u,c,h){const d=Jn(Math.round(e*r),Math.round(e*t),lb);if(h||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(e,e);function p(S){return Math.round(S*e)/e}d.globalCompositeOperation="lighter";const f=Zn();l.forEach(function(S,E,M){_R(f,S.extent)});const m=Qe(f),g=yo(f),y=Jn(Math.round(e*m/i),Math.round(e*g/i));h||(y.imageSmoothingEnabled=!1);const C=e/i;l.forEach(function(S,E,M){const L=S.extent[0]-f[0],x=-(S.extent[3]-f[3]),T=Qe(S.extent),N=yo(S.extent);S.image.width>0&&S.image.height>0&&y.drawImage(S.image,u,u,S.image.width-2*u,S.image.height-2*u,L*C,x*C,T*C,N*C)});const w=sl(s);return a.getTriangles().forEach(function(S,E,M){const L=S.source,x=S.target;let T=L[0][0],N=L[0][1],K=L[1][0],Q=L[1][1],z=L[2][0],V=L[2][1];const W=p((x[0][0]-w[0])/o),q=p(-(x[0][1]-w[1])/o),Y=p((x[1][0]-w[0])/o),X=p(-(x[1][1]-w[1])/o),B=p((x[2][0]-w[0])/o),j=p(-(x[2][1]-w[1])/o),pt=T,G=N;T=0,N=0,K-=pt,Q-=G,z-=pt,V-=G;const vt=[[K,Q,0,0,Y-W],[z,V,0,0,B-W],[0,0,K,Q,X-q],[0,0,z,V,j-q]],mt=CD(vt);if(!!mt){if(d.save(),d.beginPath(),KI()||!h){d.moveTo(Y,X);const xt=4,st=W-Y,ne=q-X;for(let Lt=0;Lt<xt;Lt++)d.lineTo(Y+p((Lt+1)*st/xt),X+p(Lt*ne/(xt-1))),Lt!=xt-1&&d.lineTo(Y+p((Lt+1)*st/xt),X+p((Lt+1)*ne/(xt-1)));d.lineTo(B,j)}else d.moveTo(Y,X),d.lineTo(W,q),d.lineTo(B,j);d.clip(),d.transform(mt[0],mt[2],mt[1],mt[3],W,q),d.translate(f[0]-pt,f[3]-G),d.scale(i/e,-i/e),d.drawImage(y.canvas,0,0),d.restore()}}),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(S,E,M){const L=S.target,x=(L[0][0]-w[0])/o,T=-(L[0][1]-w[1])/o,N=(L[1][0]-w[0])/o,K=-(L[1][1]-w[1])/o,Q=(L[2][0]-w[0])/o,z=-(L[2][1]-w[1])/o;d.beginPath(),d.moveTo(N,K),d.lineTo(x,T),d.lineTo(Q,z),d.closePath(),d.stroke()}),d.restore()),d.canvas}class ZI extends ob{constructor(t,e,i,n,o,s,a,l,u,c,h,d){super(o,Zt.IDLE,{interpolate:!!d}),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const p=n.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const g=f?qc(p,f):p;if(iy(g)===0){this.state=Zt.EMPTY;return}const y=t.getExtent();y&&(m?m=qc(m,y):m=y);const C=n.getResolution(this.wrappedTileCoord_[0]),w=XI(t,i,g,C);if(!isFinite(w)||w<=0){this.state=Zt.EMPTY;return}const S=c!==void 0?c:zI;if(this.triangulation_=new YI(t,i,g,m,w*S,C),this.triangulation_.getTriangles().length===0){this.state=Zt.EMPTY;return}this.sourceZ_=e.getZForResolution(w);let E=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(E[1]=yi(E[1],m[1],m[3]),E[3]=yi(E[3],m[1],m[3])):E=qc(E,m)),!iy(E))this.state=Zt.EMPTY;else{const M=e.getTileRangeForExtentAndZ(E,this.sourceZ_);for(let L=M.minX;L<=M.maxX;L++)for(let x=M.minY;x<=M.maxY;x++){const T=u(this.sourceZ_,L,x,a);T&&this.sourceTiles_.push(T)}this.sourceTiles_.length===0&&(this.state=Zt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==Zt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=Zt.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=qI(n,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Zt.LOADED}this.changed()}load(){if(this.state==Zt.IDLE){this.state=Zt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){const o=e.getState();if(o==Zt.IDLE||o==Zt.LOADING){t++;const s=Me(e,ae.CHANGE,function(a){const l=e.getState();(l==Zt.LOADED||l==Zt.ERROR||l==Zt.EMPTY)&&(Ze(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,n){e.getState()==Zt.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ze),this.sourcesListenerKeys_=null}release(){this.canvas_&&(OR(this.canvas_.getContext("2d")),lb.push(this.canvas_),this.canvas_=null),super.release()}}const _y=ZI;class JI{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return ve(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return ve(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(!!this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){ve(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const QI=JI;function S0(r,t,e,i){return i!==void 0?(i[0]=r,i[1]=t,i[2]=e,i):[r,t,e]}function pg(r,t,e){return r+"/"+t+"/"+e}function ub(r){return pg(r[0],r[1],r[2])}function t1(r){return r.split("/").map(Number)}function cb(r){return(r[1]<<r[0])+r[2]}function e1(r,t){const e=r[0],i=r[1],n=r[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const o=t.getFullTileRange(e);return o?o.containsXY(i,n):!0}class i1 extends QI{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=t1(t)[0];this.forEach(function(n){n.tileCoord[0]!==i&&(this.remove(ub(n.tileCoord)),n.release())}.bind(this))}}const hb=i1,hm={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class n1 extends Yr{constructor(t){super(),this.projection=fi(t.projection),this.attributions_=E0(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,n){e.viewResolver=i,e.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return ee()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=E0(t),this.changed()}setState(t){this.state_=t,this.changed()}}function E0(r){return r?Array.isArray(r)?function(t){return r}:typeof r=="function"?r:function(t){return[r]}:null}const db=n1;class pb{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function _l(r,t,e,i,n){return n!==void 0?(n.minX=r,n.maxX=t,n.minY=e,n.maxY=i,n):new pb(r,t,e,i)}const fb=pb,r1=[0,0,0],ss=5;class o1{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,ve(KA(this.resolutions_,function(n,o){return o-n},!0),17);let e;if(!t.origins){for(let n=0,o=this.resolutions_.length-1;n<o;++n)if(!e)e=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,ve(this.origins_.length==this.resolutions_.length,20));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=sl(i)),ve(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,ve(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:N_,ve(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(n,o){const s=new fb(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let o=n.minX,s=n.maxX;o<=s;++o)for(let a=n.minY,l=n.maxY;a<=l;++a)i([e,o,a])}forEachTileCoordParentTileRange(t,e,i,n){let o,s,a,l=null,u=t[0]-1;for(this.zoomFactor_===2?(s=t[1],a=t[2]):l=this.getTileCoordExtent(t,n);u>=this.minZoom;){if(this.zoomFactor_===2?(s=Math.floor(s/2),a=Math.floor(a/2),o=_l(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(l,u,i),e(u,o))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const o=t[1]*2,s=t[2]*2;return _l(o,o+1,s,s+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],o=t[1],s=t[2];if(e===n)return _l(o,s,o,s,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-n),u=Math.floor(o*l),c=Math.floor(s*l);if(e<n)return _l(u,u,c,c,i);const h=Math.floor(l*(o+1))-1,d=Math.floor(l*(s+1))-1;return _l(u,h,c,d,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeExtent(t,e,i){const n=this.getOrigin(t),o=this.getResolution(t),s=vn(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*s[0]*o,l=n[0]+(e.maxX+1)*s[0]*o,u=n[1]+e.minY*s[1]*o,c=n[1]+(e.maxY+1)*s[1]*o;return zr(a,u,l,c,i)}getTileRangeForExtentAndZ(t,e,i){const n=r1;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);const o=n[1],s=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),_l(o,n[1],s,n[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=vn(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=vn(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*o[0]*n,a=i[1]-(t[2]+1)*o[1]*n,l=s+o[0]*n,u=a+o[1]*n;return zr(s,a,l,u,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),l=this.getOrigin(s),u=vn(this.getTileSize(s),this.tmpSize_);let c=a*(t-l[0])/i/u[0],h=a*(l[1]-e)/i/u[1];return n?(c=fd(c,ss)-1,h=fd(h,ss)-1):(c=pd(c,ss),h=pd(h,ss)),S0(s,c,h,o)}getTileCoordForXYAndZ_(t,e,i,n,o){const s=this.getOrigin(i),a=this.getResolution(i),l=vn(this.getTileSize(i),this.tmpSize_);let u=(t-s[0])/a/l[0],c=(s[1]-e)/a/l[1];return n?(u=fd(u,ss)-1,c=fd(c,ss)-1):(u=pd(u,ss),c=pd(c,ss)),S0(i,u,c,o)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=x_(this.resolutions_,t,e||0);return yi(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return XR(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}}const gb=o1;function mb(r){let t=r.getDefaultTileGrid();return t||(t=u1(r),r.setDefaultTileGrid(t)),t}function s1(r,t,e){const i=t[0],n=r.getTileCoordCenter(t),o=oC(e);if(og(o,n))return t;{const s=Qe(o),a=Math.ceil((o[0]-n[0])/s);return n[0]+=s*a,r.getTileCoordForCoordAndZ(n,i)}}function a1(r,t,e,i){i=i!==void 0?i:"top-left";const n=vb(r,t,e);return new gb({extent:r,origin:fD(r,i),resolutions:n,tileSize:e})}function l1(r){const t=r||{},e=t.extent||fi("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:vb(e,t.maxZoom,t.tileSize,t.maxResolution)};return new gb(i)}function vb(r,t,e,i){t=t!==void 0?t:rL,e=vn(e!==void 0?e:N_);const n=yo(r),o=Qe(r);i=i>0?i:Math.max(o/e[0],n/e[1]);const s=t+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=i/Math.pow(2,l);return a}function u1(r,t,e,i){const n=oC(r);return a1(n,t,e,i)}function oC(r){r=fi(r);let t=r.getExtent();if(!t){const e=180*vh.degrees/r.getMetersPerUnit();t=zr(-e,-e,e,e)}return t}class c1 extends db{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&vn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new hb(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){const o=this.getTileCacheForProjection(t);if(!o)return!1;let s=!0,a,l,u;for(let c=i.minX;c<=i.maxX;++c)for(let h=i.minY;h<=i.maxY;++h)l=pg(e,c,h),u=!1,o.containsKey(l)&&(a=o.get(l),u=a.getState()===Zt.LOADED,u&&(u=n(a)!==!1)),u||(s=!1);return s}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,i,n,o){return ee()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:mb(t)}getTileCacheForProjection(t){const e=this.getProjection();return ve(e===null||Ra(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),s=vn(n.getTileSize(t),this.tmpSize);return o==1?s:ib(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=s1(i,t,e)),e1(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}}class h1 extends $r{constructor(t,e){super(t),this.tile=e}}const d1=c1;function p1(r,t){const e=/\{z\}/g,i=/\{x\}/g,n=/\{y\}/g,o=/\{-y\}/g;return function(s,a,l){if(s)return r.replace(e,s[0].toString()).replace(i,s[1].toString()).replace(n,s[2].toString()).replace(o,function(){const u=s[0],c=t.getFullTileRange(u);return ve(c,55),(c.getHeight()-s[2]-1).toString()})}}function f1(r,t){const e=r.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=p1(r[n],t);return g1(i)}function g1(r){return r.length===1?r[0]:function(t,e,i){if(t){const n=cb(t),o=Ha(n,r.length);return r[o](t,e,i)}else return}}function m1(r){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(r);if(e){const i=e[1].charCodeAt(0),n=e[2].charCodeAt(0);let o;for(o=i;o<=n;++o)t.push(r.replace(e[0],String.fromCharCode(o)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(r),e){const i=parseInt(e[2],10);for(let n=parseInt(e[1],10);n<=i;n++)t.push(r.replace(e[0],n.toString()));return t}return t.push(r),t}class sC extends d1{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===sC.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=Re(e),n=e.getState();let o;n==Zt.LOADING?(this.tileLoadingKeys_[i]=!0,o=hm.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=n==Zt.ERROR?hm.TILELOADERROR:n==Zt.LOADED?hm.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new h1(o,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=m1(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(f1(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const n=pg(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const v1=sC;class y1 extends v1{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:_1,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:ab,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const n in this.tileCacheForProjection){const o=this.tileCacheForProjection[n];o.expireCache(o==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Ra(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Ra(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Ra(e,t)))return this.tileGrid;{const i=Re(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=mb(t)),this.tileGridForProjection[i]}}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Ra(e,t))return this.tileCache;{const i=Re(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new hb(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(t,e,i,n,o,s){const a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,o),u=l?this.tileUrlFunction(l,n,o):void 0,c=new this.tileClass(a,u!==void 0?Zt.IDLE:Zt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=s,c.addEventListener(ae.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,i,n,o){const s=this.getProjection();if(!s||!o||Ra(s,o))return this.getTileInternal(t,e,i,n,s||o);{const a=this.getTileCacheForProjection(o),l=[t,e,i];let u;const c=ub(l);a.containsKey(c)&&(u=a.get(c));const h=this.getKey();if(u&&u.key==h)return u;{const d=this.getTileGridForProjection(s),p=this.getTileGridForProjection(o),f=this.getTileCoordForTileUrlFunction(l,o),m=new _y(s,d,o,p,l,f,this.getTilePixelRatio(n),this.getGutter(),function(g,y,C,w){return this.getTileInternal(g,y,C,w,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=h,u?(m.interimTile=u,m.refreshInterimChain(),a.replace(c,m)):a.set(c,m),m}}}getTileInternal(t,e,i,n,o){let s=null;const a=pg(t,e,i),l=this.getKey();if(!this.tileCache.containsKey(a))s=this.createTile_(t,e,i,n,o,l),this.tileCache.set(a,s);else if(s=this.tileCache.get(a),s.key!=l){const u=s;s=this.createTile_(t,e,i,n,o,l),u.getState()==Zt.IDLE?s.interimTile=u.interimTile:s.interimTile=u,s.refreshInterimChain(),this.tileCache.replace(a,s)}return s}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const i=fi(t);if(i){const n=Re(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function _1(r,t){r.getImage().src=t}const yb=y1;class C1 extends yb{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:l1({extent:oC(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const to=C1,Xi={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class w1 extends Yr{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+GD,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Xi.ELEMENT,this.handleElementChanged),this.addChangeListener(Xi.MAP,this.handleMapChanged),this.addChangeListener(Xi.OFFSET,this.handleOffsetChanged),this.addChangeListener(Xi.POSITION,this.handlePositionChanged),this.addChangeListener(Xi.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(Xi.ELEMENT)}getId(){return this.id}getMap(){return this.get(Xi.MAP)||null}getOffset(){return this.get(Xi.OFFSET)}getPosition(){return this.get(Xi.POSITION)}getPositioning(){return this.get(Xi.POSITIONING)}handleElementChanged(){AR(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Zp(this.element),Ze(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Me(t,Ho.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Xi.ELEMENT,t)}setMap(t){this.set(Xi.MAP,t)}setOffset(t){this.set(Xi.OFFSET,t)}setPosition(t){this.set(Xi.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Xi.POSITION))return;const i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[WD(n),VD(n)]);t=t||{};const s=t.margin===void 0?20:t.margin;if(!As(i,o)){const a=o[0]-i[0],l=i[2]-o[2],u=o[1]-i[1],c=i[3]-o[3],h=[0,0];if(a<0?h[0]=a-s:l<0&&(h[0]=Math.abs(l)+s),u<0?h[1]=u-s:c<0&&(h[1]=Math.abs(c)+s),h[0]!==0||h[1]!==0){const d=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(d);if(!p)return;const f=[p[0]+h[0],p[1]+h[1]],m=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(f),duration:m.duration,easing:m.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]}setPositioning(t){this.set(Xi.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(t,e){const i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px";let l="0%",u="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?l="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(l="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?u="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(u="-50%");const c=`translate(${l}, ${u}) translate(${s}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,i.transform=c)}getOptions(){return this.options}}const _b=w1,Cd={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class S1 extends ug{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(Cd.PRELOAD)}setPreload(t){this.set(Cd.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Cd.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Cd.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const E1=S1;class x1 extends dR{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return ee()}getData(t){return null}prepareFrame(t){return ee()}renderFrame(t,e){return ee()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return function(n,o){const s=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,o,s)}.bind(this)}forEachFeatureAtCoordinate(t,e,i,n,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===Ri.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Ri.LOADED&&e!=Ri.ERROR&&t.addEventListener(ae.CHANGE,this.boundHandleImageChange_),e==Ri.IDLE&&(t.load(),e=t.getState()),e==Ri.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const R1=x1,x0=[];let $l=null;function b1(){const r=document.createElement("canvas");r.width=1,r.height=1,$l=r.getContext("2d")}class M1 extends R1{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=ho(),this.pixelTransform=ho(),this.inversePixelTransform=ho(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){$l||b1(),$l.clearRect(0,0,1,1);let n;try{$l.drawImage(t,e,i,1,1,0,0,1,1),n=$l.getImageData(0,0,1,1).data}catch{return $l=null,null}return n}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let o,s;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&rl(Kp(t.style.backgroundColor),Kp(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&s.canvas.style.transform===e?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){o=document.createElement("div"),o.className=n;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Jn();const l=s.canvas;o.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=sl(i),o=lg(i),s=ag(i),a=sg(i);Ii(e.coordinateToPixelTransform,n),Ii(e.coordinateToPixelTransform,o),Ii(e.coordinateToPixelTransform,s),Ii(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ii(l,n),Ii(l,o),Ii(l,s),Ii(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const o=new TR(t,this.inversePixelTransform,i,e);n.dispatchEvent(o)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(ks.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(ks.POSTRENDER,t,e)}getRenderTransform(t,e,i,n,o,s,a){const l=o/2,u=s/2,c=n/e,h=-c,d=-t[0]+a,p=-t[1];return qs(this.tempTransform,l,u,c,h,-i,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const Cb=M1;class T1 extends Cb{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Zn(),this.tmpTileRange_=new fb(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==Zt.LOADED||i==Zt.EMPTY||i==Zt.ERROR&&!n}getTile(t,e,i,n){const o=n.pixelRatio,s=n.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(t,e,i,o,s);return u.getState()==Zt.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=Ii(e.pixelToCoordinateTransform,t.slice()),o=i.getExtent();if(o&&!og(o,n))return null;const s=e.pixelRatio,a=e.viewState.projection,l=e.viewState,u=i.getRenderSource(),c=u.getTileGridForProjection(l.projection),h=u.getTilePixelRatio(e.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){const p=c.getTileCoordForCoordAndZ(n,d),f=u.getTile(d,p[1],p[2],s,a);if(!(f instanceof ab||f instanceof _y)||f instanceof _y&&f.getState()===Zt.EMPTY)return null;if(f.getState()!==Zt.LOADED)continue;const m=c.getOrigin(d),g=vn(c.getTileSize(d)),y=c.getResolution(d),C=Math.floor(h*((n[0]-m[0])/y-p[1]*g[0])),w=Math.floor(h*((m[1]-n[1])/y-p[2]*g[1])),S=Math.round(h*u.getGutterForProjection(l.projection));return this.getImageData(f.getImage(),C+S,w+S)}return null}loadedTileCallback(t,e,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,e,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,s=n.resolution,a=n.center,l=n.rotation,u=t.pixelRatio,c=this.getLayer(),h=c.getSource(),d=h.getRevision(),p=h.getTileGridForProjection(o),f=p.getZForResolution(s,h.zDirection),m=p.getResolution(f);let g=t.extent;const y=t.viewState.resolution,C=h.getTilePixelRatio(u),w=Math.round(Qe(g)/y*u),S=Math.round(yo(g)/y*u),E=i.extent&&Pa(i.extent);E&&(g=qc(g,Pa(i.extent)));const M=m*w/2/C,L=m*S/2/C,x=[a[0]-M,a[1]-L,a[0]+M,a[1]+L],T=p.getTileRangeForExtentAndZ(g,f),N={};N[f]={};const K=this.createLoadedTileFinder(h,o,N),Q=this.tmpExtent,z=this.tmpTileRange_;this.newTiles_=!1;const V=l?ry(n.center,y,l,t.size):void 0;for(let vt=T.minX;vt<=T.maxX;++vt)for(let mt=T.minY;mt<=T.maxY;++mt){if(l&&!p.tileCoordIntersectsViewport([f,vt,mt],V))continue;const xt=this.getTile(f,vt,mt,t);if(this.isDrawableTile(xt)){const Lt=Re(this);if(xt.getState()==Zt.LOADED){N[f][xt.tileCoord.toString()]=xt;let Ft=xt.inTransition(Lt);Ft&&i.opacity!==1&&(xt.endTransition(Lt),Ft=!1),!this.newTiles_&&(Ft||!this.renderedTiles.includes(xt))&&(this.newTiles_=!0)}if(xt.getAlpha(Lt,t.time)===1)continue}const st=p.getTileCoordChildTileRange(xt.tileCoord,z,Q);let ne=!1;st&&(ne=K(f+1,st)),ne||p.forEachTileCoordParentTileRange(xt.tileCoord,K,z,Q)}const W=m/s*u/C;qs(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,l,-w/2,-S/2);const q=mR(this.pixelTransform);this.useContainer(e,q,this.getBackground(t));const Y=this.context,X=Y.canvas;M_(this.inversePixelTransform,this.pixelTransform),qs(this.tempTransform,w/2,S/2,W,W,0,-w/2,-S/2),X.width!=w||X.height!=S?(X.width=w,X.height=S):this.containerReused||Y.clearRect(0,0,w,S),E&&this.clipUnrotated(Y,t,E),h.getInterpolate()||(Y.imageSmoothingEnabled=!1),this.preRender(Y,t),this.renderedTiles.length=0;let B=Object.keys(N).map(Number);B.sort($a);let j,pt,G;i.opacity===1&&(!this.containerReused||h.getOpaque(t.viewState.projection))?B=B.reverse():(j=[],pt=[]);for(let vt=B.length-1;vt>=0;--vt){const mt=B[vt],xt=h.getTilePixelSize(mt,u,o),ne=p.getResolution(mt)/m,Lt=xt[0]*ne*W,Ft=xt[1]*ne*W,Rt=p.getTileCoordForCoordAndZ(sl(x),mt),De=p.getTileCoordExtent(Rt),Ut=Ii(this.tempTransform,[C*(De[0]-x[0])/m,C*(x[3]-De[3])/m]),zt=C*h.getGutterForProjection(o),ze=N[mt];for(const ni in ze){const Bt=ze[ni],Xe=Bt.tileCoord,Ge=Rt[1]-Xe[1],de=Math.round(Ut[0]-(Ge-1)*Lt),Te=Rt[2]-Xe[2],Ve=Math.round(Ut[1]-(Te-1)*Ft),I=Math.round(Ut[0]-Ge*Lt),P=Math.round(Ut[1]-Te*Ft),et=de-I,yt=Ve-P,St=f===mt,bt=St&&Bt.getAlpha(Re(this),t.time)!==1;let $t=!1;if(!bt)if(j){G=[I,P,I+et,P,I+et,P+yt,I,P+yt];for(let Tt=0,ct=j.length;Tt<ct;++Tt)if(f!==mt&&mt<pt[Tt]){const gt=j[Tt];gn([I,P,I+et,P+yt],[gt[0],gt[3],gt[4],gt[7]])&&($t||(Y.save(),$t=!0),Y.beginPath(),Y.moveTo(G[0],G[1]),Y.lineTo(G[2],G[3]),Y.lineTo(G[4],G[5]),Y.lineTo(G[6],G[7]),Y.moveTo(gt[6],gt[7]),Y.lineTo(gt[4],gt[5]),Y.lineTo(gt[2],gt[3]),Y.lineTo(gt[0],gt[1]),Y.clip())}j.push(G),pt.push(mt)}else Y.clearRect(I,P,et,yt);this.drawTileImage(Bt,t,I,P,et,yt,zt,St),j&&!bt?($t&&Y.restore(),this.renderedTiles.unshift(Bt)):this.renderedTiles.push(Bt),this.updateUsedTiles(t.usedTiles,h,Bt)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!ch(this.renderedExtent_,x),this.renderedExtent_=x,this.renderedPixelRatio=u,this.renderedProjection=o,this.manageTilePyramid(t,h,p,u,o,g,f,c.getPreload()),this.scheduleExpireCache(t,h),this.postRender(Y,t),i.extent&&Y.restore(),Y.imageSmoothingEnabled=!0,q!==X.style.transform&&(X.style.transform=q),this.container}drawTileImage(t,e,i,n,o,s,a,l){const u=this.getTileImage(t);if(!u)return;const c=Re(this),h=e.layerStatesArray[e.layerIndex],d=h.opacity*(l?t.getAlpha(c,e.time):1),p=d!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,n,o,s),p&&this.context.restore(),d!==h.opacity?e.animate=!0:l&&t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(n,o,s){const a=Re(n);a in s.usedTiles&&n.expireCache(s.viewState.projection,s.usedTiles[a])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=Re(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,o,s,a,l,u){const c=Re(e);c in t.wantedTiles||(t.wantedTiles[c]={});const h=t.wantedTiles[c],d=t.tileQueue,p=i.getMinZoom(),f=t.viewState.rotation,m=f?ry(t.viewState.center,t.viewState.resolution,f,t.size):void 0;let g=0,y,C,w,S,E,M;for(M=p;M<=a;++M)for(C=i.getTileRangeForExtentAndZ(s,M,C),w=i.getResolution(M),S=C.minX;S<=C.maxX;++S)for(E=C.minY;E<=C.maxY;++E)f&&!i.tileCoordIntersectsViewport([M,S,E],m)||(a-M<=l?(++g,y=e.getTile(M,S,E,n,o),y.getState()==Zt.IDLE&&(h[y.getKey()]=!0,d.isKeyQueued(y.getKey())||d.enqueue([y,c,i.getTileCoordCenter(y.tileCoord),w])),u!==void 0&&u(y)):e.useTile(M,S,E,o));e.updateCacheSize(g,o)}}const P1=T1;class O1 extends E1{constructor(t){super(t)}createRenderer(){return new P1(this)}}const wb=O1,wd="1.3.0";function R0(r,t){const e=[];Object.keys(t).forEach(function(n){t[n]!==null&&t[n]!==void 0&&e.push(n+"="+encodeURIComponent(t[n]))});const i=e.join("&");return r=r.replace(/[?&]$/,""),r+=r.includes("?")?"&":"?",r+i}class A1 extends yb{constructor(t){t=t||{};const e=Object.assign({},t.params),i="TRANSPARENT"in e?e.TRANSPARENT:!0;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=Zn(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,n){const o=fi(i),s=this.getProjection();let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=a.getZForResolution(e,this.zDirection),u=a.getTileCoordForCoordAndZ(t,l);if(a.getResolutions().length<=u[0])return;let c=a.getResolution(u[0]),h=a.getTileCoordExtent(u,this.tmpExtent_),d=vn(a.getTileSize(u[0]),this.tmpSize);const p=this.gutter_;p!==0&&(d=y0(d,p,this.tmpSize),h=uh(h,c*p,h)),s&&s!==o&&(c=yy(s,o,t,c),h=_L(h,o,s),t=Wh(t,o,s));const f={SERVICE:"WMS",VERSION:wd,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(f,this.params_,n);const m=Math.floor((t[0]-h[0])/c),g=Math.floor((h[3]-t[1])/c);return f[this.v13_?"I":"X"]=m,f[this.v13_?"J":"Y"]=g,this.getRequestUrl_(u,d,h,1,s||o,f)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:wd,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;i.LAYER=n}if(t!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,o=28e-5;i.SCALE=t*n/o}return Object.assign(i,e),R0(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,n,o,s){const a=this.urls;if(!a)return;if(s.WIDTH=e[0],s.HEIGHT=e[1],s[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(s.STYLES=""),n!=1)switch(this.serverType_){case"geoserver":const h=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:ve(!1,52);break}const l=o.getAxisOrientation(),u=i;if(this.v13_&&l.substr(0,2)=="ne"){let h;h=i[0],u[0]=i[1],u[1]=h,h=i[2],u[2]=i[3],u[3]=h}s.BBOX=u.join(",");let c;if(a.length==1)c=a[0];else{const h=Ha(cb(t),a.length);c=a[h]}return R0(c,s)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||wd;this.v13_=PD(t,"1.3")>=0}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const o=n.getResolution(t[0]);let s=n.getTileCoordExtent(t,this.tmpExtent_),a=vn(n.getTileSize(t[0]),this.tmpSize);const l=this.gutter_;l!==0&&(a=y0(a,l,this.tmpSize),s=uh(s,o*l,s)),e!=1&&(a=ib(a,e,this.tmpSize));const u={SERVICE:"WMS",VERSION:wd,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(u,this.params_),this.getRequestUrl_(t,a,s,e,i,u)}}const D1=A1;class aC extends Yr{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new aC(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ze(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Me(t,ae.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?L1(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function L1(r){if(typeof r=="function")return r;{let t;return Array.isArray(r)?t=r:(ve(typeof r.getZIndex=="function",41),t=[r]),function(){return t}}}const hr=aC;class af extends BR{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ze),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(!!this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Me(this.geometries_[t],ae.CHANGE,this.changed,this))}clone(){const t=new af(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<ol(this.getExtent(),t,e))return n;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)n=o[s].closestPointXY(t,e,i,n);return n}containsXY(t,e){const i=this.geometries_;for(let n=0,o=i.length;n<o;++n)if(i[n].containsXY(t,e))return!0;return!1}computeExtent(t){Gh(t);const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)_R(t,e[i].getExtent());return t}getGeometries(){return b0(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let n=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(n=!0)}if(n){const o=new af(null);return o.setGeometriesArray(e),o}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let n=0,o=i.length;n<o;++n)i[n].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Xa(this.getExtent()));const n=this.geometries_;for(let o=0,s=n.length;o<s;++o)n[o].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(b0(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let n=0,o=i.length;n<o;++n)i[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function b0(r){const t=[];for(let e=0,i=r.length;e<i;++e)t.push(r[e].clone());return t}const Sb=af;class I1{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?fi(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=fi(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return ee()}readFeature(t,e){return ee()}readFeatures(t,e){return ee()}readGeometry(t,e){return ee()}readProjection(t){return ee()}writeFeature(t,e){return ee()}writeFeatures(t,e){return ee()}writeGeometry(t,e){return ee()}}function fg(r,t,e){const i=e?fi(e.featureProjection):null,n=e?fi(e.dataProjection):null;let o;if(i&&n&&!Ra(i,n)?o=(t?r.clone():r).transform(t?i:n,t?n:i):o=r,t&&e&&e.decimals!==void 0){const s=Math.pow(10,e.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*s)/s;return l};o===r&&(o=r.clone()),o.applyTransform(a)}return o}class F1 extends I1{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Sd(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Sd(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return ee()}readFeaturesFromObject(t,e){return ee()}readGeometry(t,e){return this.readGeometryFromObject(Sd(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return ee()}readProjection(t){return this.readProjectionFromObject(Sd(t))}readProjectionFromObject(t){return ee()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return ee()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return ee()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return ee()}}function Sd(r){if(typeof r=="string"){const t=JSON.parse(r);return t||null}else return r!==null?r:null}const Eb=F1;function xb(r,t,e,i,n,o,s){let a,l;const u=(e-t)/i;if(u===1)a=t;else if(u===2)a=t,l=n;else if(u!==0){let c=r[t],h=r[t+1],d=0;const p=[0];for(let g=t+i;g<e;g+=i){const y=r[g],C=r[g+1];d+=Math.sqrt((y-c)*(y-c)+(C-h)*(C-h)),p.push(d),c=y,h=C}const f=n*d,m=$A(p,f);m<0?(l=(f-p[-m-2])/(p[-m-1]-p[-m-2]),a=t+(-m-2)*i):a=t+m*i}s=s>1?s:2,o=o||new Array(s);for(let c=0;c<s;++c)o[c]=a===void 0?NaN:l===void 0?r[a+c]:ko(r[a+c],r[a+i+c],l);return o}function Cy(r,t,e,i,n,o){if(e==t)return null;let s;if(n<r[t+i-1])return o?(s=r.slice(t,t+i),s[i-1]=n,s):null;if(r[e-1]<n)return o?(s=r.slice(e-i,e),s[i-1]=n,s):null;if(n==r[t+i-1])return r.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){const d=a+l>>1;n<r[(d+1)*i-1]?l=d:a=d+1}const u=r[a*i-1];if(n==u)return r.slice((a-1)*i,(a-1)*i+i);const c=r[(a+1)*i-1],h=(n-u)/(c-u);s=[];for(let d=0;d<i-1;++d)s.push(ko(r[(a-1)*i+d],r[a*i+d],h));return s.push(n),s}function N1(r,t,e,i,n,o,s){if(s)return Cy(r,t,e[e.length-1],i,n,o);let a;if(n<r[i-1])return o?(a=r.slice(0,i),a[i-1]=n,a):null;if(r[r.length-1]<n)return o?(a=r.slice(r.length-i),a[i-1]=n,a):null;for(let l=0,u=e.length;l<u;++l){const c=e[l];if(t!=c){if(n<r[t+i-1])return null;if(n<=r[c-1])return Cy(r,t,c,i,n,!1);t=c}}return null}function Rb(r,t,e,i){let n=r[t],o=r[t+1],s=0;for(let a=t+i;a<e;a+=i){const l=r[a],u=r[a+1];s+=Math.sqrt((l-n)*(l-n)+(u-o)*(u-o)),n=l,o=u}return s}class lf extends na{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?Wr(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new lf(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<ol(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(j_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Y_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return KR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Cy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Ds(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return xb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Rb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=q_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new lf(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return dg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vh(this.flatCoordinates,0,t,this.stride),this.changed()}}const po=lf;class uf extends na{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let n=this.getLayout();const o=t,s=[],a=[];for(let l=0,u=o.length;l<u;++l){const c=o[l];l===0&&(n=c.getLayout()),Wr(s,c.getFlatCoordinates()),a.push(s.length)}this.setFlatCoordinates(n,s),this.ends_=a}}appendLineString(t){this.flatCoordinates?Wr(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new uf(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<ol(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),K_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,N1(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return _h(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new po(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s],u=new po(t.slice(o,l),i);n.push(u),o=l}return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,o=this.stride;for(let s=0,a=n.length;s<a;++s){const l=n[s],u=xb(e,i,l,o,.5);Wr(t,u),i=l}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=NL(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new uf(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return UL(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=X_(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const gg=uf;class lC extends na{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?Wr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new lC(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<ol(this.getExtent(),t,e))return n;const o=this.flatCoordinates,s=this.stride;for(let a=0,l=o.length;a<l;a+=s){const u=Yo(t,e,o[a],o[a+1]);if(u<n){n=u;for(let c=0;c<s;++c)i[c]=o[a+c];i.length=s}}return n}getCoordinates(){return Ds(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new yn(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,n=[];for(let o=0,s=t.length;o<s;o+=i){const a=new yn(t.slice(o,o+i),e);n.push(a)}return n}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let n=0,o=e.length;n<o;n+=i){const s=e[n],a=e[n+1];if(T_(t,s,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vh(this.flatCoordinates,0,t,this.stride),this.changed()}}const mg=lC;function G1(r,t,e,i){const n=[];let o=Zn();for(let s=0,a=e.length;s<a;++s){const l=e[s];o=yR(r,t,l[0],i),n.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return n}class cf extends na{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let n=this.getLayout();const o=t,s=[],a=[];for(let l=0,u=o.length;l<u;++l){const c=o[l];l===0&&(n=c.getLayout());const h=s.length,d=c.getEnds();for(let p=0,f=d.length;p<f;++p)d[p]+=h;Wr(s,c.getFlatCoordinates()),a.push(d)}e=n,t=s,i=a}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Wr(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let n=0,o=e.length;n<o;++n)e[n]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const i=new cf(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n<ol(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(LL(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),IL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return kL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return WL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),m0(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,dy(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=G1(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=BL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new mg(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;$L(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=m0(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=HL(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new cf(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const o=this.endss_[t-1];e=o[o.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(e!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=e;return new Qo(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let o=0;for(let s=0,a=i.length;s<a;++s){const l=i[s].slice(),u=l[l.length-1];if(o!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=o;const c=new Qo(e.slice(o,u),t,l);n.push(c),o=u}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return zL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=FL(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const n=i[i.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const vg=cf;class H1 extends Eb{constructor(t){t=t||{},super(),this.dataProjection=fi(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=fi(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const n=wy(i.geometry,e),o=new hr;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&o.setGeometryName(i.geometry_name),o.setGeometry(n),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(t,e){const i=t;let n=null;if(i.type==="FeatureCollection"){const o=t;n=[];const s=o.features;for(let a=0,l=s.length;a<l;++a)n.push(this.readFeatureFromObject(s[a],e))}else n=[this.readFeatureFromObject(t,e)];return n}readGeometryFromObject(t,e){return wy(t,e)}readProjectionFromObject(t){const e=t.crs;let i;return e?e.type=="name"?i=fi(e.properties.name):e.type==="EPSG"?i=fi("EPSG:"+e.properties.code):ve(!1,36):i=this.dataProjection,i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},n=t.getId();if(n!==void 0&&(i.id=n),!t.hasProperties())return i;const o=t.getProperties(),s=t.getGeometry();return s&&(i.geometry=Sy(s,e),delete o[t.getGeometryName()]),Ka(o)||(i.properties=o),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,o=t.length;n<o;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return Sy(t,this.adaptOptions(e))}}function wy(r,t){if(!r)return null;let e;switch(r.type){case"Point":{e=V1(r);break}case"LineString":{e=k1(r);break}case"Polygon":{e=j1(r);break}case"MultiPoint":{e=U1(r);break}case"MultiLineString":{e=B1(r);break}case"MultiPolygon":{e=z1(r);break}case"GeometryCollection":{e=W1(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return fg(e,!1,t)}function W1(r,t){const e=r.geometries.map(function(i){return wy(i,t)});return new Sb(e)}function V1(r){return new yn(r.coordinates)}function k1(r){return new po(r.coordinates)}function B1(r){return new gg(r.coordinates)}function U1(r){return new mg(r.coordinates)}function z1(r){return new vg(r.coordinates)}function j1(r){return new Qo(r.coordinates)}function Sy(r,t){r=fg(r,!0,t);const e=r.getType();let i;switch(e){case"Point":{i=Z1(r);break}case"LineString":{i=Y1(r);break}case"Polygon":{i=J1(r,t);break}case"MultiPoint":{i=X1(r);break}case"MultiLineString":{i=K1(r);break}case"MultiPolygon":{i=q1(r,t);break}case"GeometryCollection":{i=$1(r,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function $1(r,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(i){return Sy(i,t)})}}function Y1(r,t){return{type:"LineString",coordinates:r.getCoordinates()}}function K1(r,t){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function X1(r,t){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function q1(r,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(e)}}function Z1(r,t){return{type:"Point",coordinates:r.getCoordinates()}}function J1(r,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(e)}}const wh=H1;function Q1(r,t,e,i,n){bb(r,t,e||0,i||r.length-1,n||tF)}function bb(r,t,e,i,n){for(;i>e;){if(i-e>600){var o=i-e+1,s=t-e+1,a=Math.log(o),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1),c=Math.max(e,Math.floor(t-s*l/o+u)),h=Math.min(i,Math.floor(t+(o-s)*l/o+u));bb(r,t,c,h,n)}var d=r[t],p=e,f=i;for(ac(r,e,t),n(r[i],d)>0&&ac(r,e,i);p<f;){for(ac(r,p,f),p++,f--;n(r[p],d)<0;)p++;for(;n(r[f],d)>0;)f--}n(r[e],d)===0?ac(r,e,f):(f++,ac(r,f,i)),f<=t&&(e=f+1),t<=f&&(i=f-1)}}function ac(r,t,e){var i=r[t];r[t]=r[e],r[e]=i}function tF(r,t){return r<t?-1:r>t?1:0}class Mb{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!xd(t,e))return i;const n=this.toBBox,o=[];for(;e;){for(let s=0;s<e.children.length;s++){const a=e.children[s],l=e.leaf?n(a):a;xd(t,l)&&(e.leaf?i.push(a):pm(t,l)?this._all(a,i):o.push(a))}e=o.pop()}return i}collides(t){let e=this.data;if(!xd(t,e))return!1;const i=[];for(;e;){for(let n=0;n<e.children.length;n++){const o=e.children[n],s=e.leaf?this.toBBox(o):o;if(xd(t,s)){if(e.leaf||pm(t,s))return!0;i.push(o)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Yl([]),this}remove(t,e){if(!t)return this;let i=this.data;const n=this.toBBox(t),o=[],s=[];let a,l,u;for(;i||o.length;){if(i||(i=o.pop(),l=o[o.length-1],a=s.pop(),u=!0),i.leaf){const c=eF(t,i.children,e);if(c!==-1)return i.children.splice(c,1),o.push(i),this._condense(o),this}!u&&!i.leaf&&pm(i,n)?(o.push(i),s.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],u=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,n){const o=i-e+1;let s=this._maxEntries,a;if(o<=s)return a=Yl(t.slice(e,i+1)),Cl(a,this.toBBox),a;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),a=Yl([]),a.leaf=!1,a.height=n;const l=Math.ceil(o/s),u=l*Math.ceil(Math.sqrt(s));M0(t,e,i,u,this.compareMinX);for(let c=e;c<=i;c+=u){const h=Math.min(c+u-1,i);M0(t,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const p=Math.min(d+l-1,h);a.children.push(this._build(t,d,p,n-1))}}return Cl(a,this.toBBox),a}_chooseSubtree(t,e,i,n){for(;n.push(e),!(e.leaf||n.length-1===i);){let o=1/0,s=1/0,a;for(let l=0;l<e.children.length;l++){const u=e.children[l],c=dm(u),h=rF(t,u)-c;h<s?(s=h,o=c<o?c:o,a=u):h===s&&c<o&&(o=c,a=u)}e=a||e.children[0]}return e}_insert(t,e,i){const n=i?t:this.toBBox(t),o=[],s=this._chooseSubtree(n,this.data,e,o);for(s.children.push(t),Hc(s,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)}_split(t,e){const i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);const s=this._chooseSplitIndex(i,o,n),a=Yl(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,Cl(i,this.toBBox),Cl(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,e){this.data=Yl([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Cl(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let n,o=1/0,s=1/0;for(let a=e;a<=i-e;a++){const l=Gc(t,0,a,this.toBBox),u=Gc(t,a,i,this.toBBox),c=oF(l,u),h=dm(l)+dm(u);c<o?(o=c,n=a,s=h<s?h:s):c===o&&h<s&&(s=h,n=a)}return n||i-e}_chooseSplitAxis(t,e,i){const n=t.leaf?this.compareMinX:iF,o=t.leaf?this.compareMinY:nF,s=this._allDistMargin(t,e,i,n),a=this._allDistMargin(t,e,i,o);s<a&&t.children.sort(n)}_allDistMargin(t,e,i,n){t.children.sort(n);const o=this.toBBox,s=Gc(t,0,e,o),a=Gc(t,i-e,i,o);let l=Ed(s)+Ed(a);for(let u=e;u<i-e;u++){const c=t.children[u];Hc(s,t.leaf?o(c):c),l+=Ed(s)}for(let u=i-e-1;u>=e;u--){const c=t.children[u];Hc(a,t.leaf?o(c):c),l+=Ed(a)}return l}_adjustParentBBoxes(t,e,i){for(let n=i;n>=0;n--)Hc(e[n],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():Cl(t[e],this.toBBox)}}function eF(r,t,e){if(!e)return t.indexOf(r);for(let i=0;i<t.length;i++)if(e(r,t[i]))return i;return-1}function Cl(r,t){Gc(r,0,r.children.length,t,r)}function Gc(r,t,e,i,n){n||(n=Yl(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let o=t;o<e;o++){const s=r.children[o];Hc(n,r.leaf?i(s):s)}return n}function Hc(r,t){return r.minX=Math.min(r.minX,t.minX),r.minY=Math.min(r.minY,t.minY),r.maxX=Math.max(r.maxX,t.maxX),r.maxY=Math.max(r.maxY,t.maxY),r}function iF(r,t){return r.minX-t.minX}function nF(r,t){return r.minY-t.minY}function dm(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Ed(r){return r.maxX-r.minX+(r.maxY-r.minY)}function rF(r,t){return(Math.max(t.maxX,r.maxX)-Math.min(t.minX,r.minX))*(Math.max(t.maxY,r.maxY)-Math.min(t.minY,r.minY))}function oF(r,t){const e=Math.max(r.minX,t.minX),i=Math.max(r.minY,t.minY),n=Math.min(r.maxX,t.maxX),o=Math.min(r.maxY,t.maxY);return Math.max(0,n-e)*Math.max(0,o-i)}function pm(r,t){return r.minX<=t.minX&&r.minY<=t.minY&&t.maxX<=r.maxX&&t.maxY<=r.maxY}function xd(r,t){return t.minX<=r.maxX&&t.minY<=r.maxY&&t.maxX>=r.minX&&t.maxY>=r.minY}function Yl(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function M0(r,t,e,i,n){const o=[t,e];for(;o.length;){if(e=o.pop(),t=o.pop(),e-t<=i)continue;const s=t+Math.ceil((e-t)/i/2)*i;Q1(r,s,t,e,n),o.push(t,s,s,e)}}class uC{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=vn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new uC({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ee()}getImage(t){return ee()}getHitDetectionImage(){return ee()}getPixelRatio(t){return 1}getImageState(){return ee()}getImageSize(){return ee()}getOrigin(){return ee()}getSize(){return ee()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=vn(t)}listenImageChange(t){ee()}load(){ee()}unlistenImageChange(t){ee()}}const Tb=uC;function uo(r){return Array.isArray(r)?ER(r):r}class cC extends Tb{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new cC({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,n=Jn(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Ri.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let n=this.radius_,o=this.radius2_===void 0?n:this.radius2_;if(n<o){const M=n;n=o,o=M}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,l=o*Math.sin(a),u=Math.sqrt(o*o-l*l),c=n-u,h=Math.sqrt(l*l+c*c),d=h/l;if(t==="miter"&&d<=i)return d*e;const p=e/2/d,f=e/2*(c/h),g=Math.sqrt((n+p)*(n+p)+f*f)-n;if(this.radius2_===void 0||t==="bevel")return g*2;const y=n*Math.sin(a),C=Math.sqrt(n*n-y*y),w=o-C,E=Math.sqrt(y*y+w*w)/y;if(E<=i){const M=E*e/2-o-n;return 2*Math.max(g,M)}return g*2}createRenderOptions(){let t=Cu,e=0,i=null,n=0,o,s=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=fh),o=uo(o),s=this.stroke_.getWidth(),s===void 0&&(s=mh),i=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Cu),e=this.stroke_.getMiterLimit(),e===void 0&&(e=ph));const a=this.calculateLineJoinSize_(t,s,e),l=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*l+a);return{strokeStyle:o,strokeWidth:s,size:u,lineDash:i,lineDashOffset:n,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=Ko),e.fillStyle=uo(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=Kp(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){const n=Jn(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let a=0;a<e;a++){const l=o+a*s,u=a%2===0?i:n;t.lineTo(u*Math.cos(l),u*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ko,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const Pb=cC;class hC extends Pb{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new hC({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const kh=hC;class dC{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new dC({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const fr=dC;class pC{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new pC({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const zn=pC;class Ls{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=T0,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Ls({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=T0,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function sF(r){let t;if(typeof r=="function")t=r;else{let e;Array.isArray(r)?e=r:(ve(typeof r.getZIndex=="function",41),e=[r]),t=function(){return e}}return t}let fm=null;function aF(r,t){if(!fm){const e=new fr({color:"rgba(255,255,255,0.4)"}),i=new zn({color:"#3399CC",width:1.25});fm=[new Ls({image:new kh({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return fm}function Ob(){const r={},t=[255,255,255,1],e=[0,153,255,1],i=3;return r.Polygon=[new Ls({fill:new fr({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new Ls({stroke:new zn({color:t,width:i+2})}),new Ls({stroke:new zn({color:e,width:i})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new Ls({image:new kh({radius:i*2,fill:new fr({color:e}),stroke:new zn({color:t,width:i/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function T0(r){return r.getGeometry()}const Gr=Ls;let lc=null;class lF extends ng{constructor(t,e,i,n,o,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.unlisten_=null,this.imageState_=o,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ri.LOADED){lc||(lc=Jn(1,1)),lc.drawImage(this.image_,0,0);try{lc.getImageData(0,0,1,1),this.tainted_=!1}catch{lc=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ae.CHANGE)}handleImageError_(){this.imageState_=Ri.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ri.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Jn(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ri.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ri.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=sb(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Ri.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const n=i.getContext("2d");n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=SR(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function uF(r,t,e,i,n,o){let s=Xp.get(t,i,o);return s||(s=new lF(r,t,e,i,n,o),Xp.set(t,i,o,s)),s}class fC extends Tb{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,n=t.scale!==void 0?t.scale:1,o=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:n,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const s=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let a=t.src;ve(!(a!==void 0&&s),4),ve(!s||s&&this.imgSize_,5),(a===void 0||a.length===0)&&s&&(a=s.src||Re(s)),ve(a!==void 0&&a.length>0,6);const l=t.src!==void 0?Ri.IDLE:Ri.LOADED;this.color_=t.color!==void 0?Kp(t.color):null,this.iconImage_=uF(s,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null}clone(){const t=this.getScale();return new fC({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=n[0]),this.anchorYUnits_=="fraction"&&(t[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(ae.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ae.CHANGE,t)}}const yg=fC,cF="#333";class gC{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=vn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new fr({color:cF}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new gC({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=vn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const hF=gC;function P0(r){return new Gr({fill:Sh(r,""),stroke:Eh(r,""),text:dF(r),image:pF(r)})}function Sh(r,t){const e=r[t+"fill-color"];if(!!e)return new fr({color:e})}function Eh(r,t){const e=r[t+"stroke-width"],i=r[t+"stroke-color"];if(!(!e&&!i))return new zn({width:e,color:i,lineCap:r[t+"stroke-line-cap"],lineJoin:r[t+"stroke-line-join"],lineDash:r[t+"stroke-line-dash"],lineDashOffset:r[t+"stroke-line-dash-offset"],miterLimit:r[t+"stroke-miter-limit"]})}function dF(r){const t=r["text-value"];return t?new hF({text:t,font:r["text-font"],maxAngle:r["text-max-angle"],offsetX:r["text-offset-x"],offsetY:r["text-offset-y"],overflow:r["text-overflow"],placement:r["text-placement"],scale:r["text-scale"],rotateWithView:r["text-rotate-with-view"],rotation:r["text-rotation"],textAlign:r["text-align"],justify:r["text-justify"],textBaseline:r["text-baseline"],padding:r["text-padding"],fill:Sh(r,"text-"),backgroundFill:Sh(r,"text-background-"),stroke:Eh(r,"text-"),backgroundStroke:Eh(r,"text-background-")}):void 0}function pF(r){const t=r["icon-src"],e=r["icon-img"];if(t||e)return new yg({src:t,img:e,imgSize:r["icon-img-size"],anchor:r["icon-anchor"],anchorOrigin:r["icon-anchor-origin"],anchorXUnits:r["icon-anchor-x-units"],anchorYUnits:r["icon-anchor-y-units"],color:r["icon-color"],crossOrigin:r["icon-cross-origin"],offset:r["icon-offset"],displacement:r["icon-displacement"],opacity:r["icon-opacity"],scale:r["icon-scale"],rotation:r["icon-rotation"],rotateWithView:r["icon-rotate-with-view"],size:r["icon-size"],declutterMode:r["icon-declutter-mode"]});const i=r["shape-points"];if(i){const o="shape-";return new Pb({points:i,fill:Sh(r,o),stroke:Eh(r,o),radius:r["shape-radius"],radius1:r["shape-radius1"],radius2:r["shape-radius2"],angle:r["shape-angle"],displacement:r["shape-displacement"],rotation:r["shape-rotation"],rotateWithView:r["shape-rotate-with-view"],scale:r["shape-scale"],declutterMode:r["shape-declutter-mode"]})}const n=r["circle-radius"];if(n){const o="circle-";return new kh({radius:n,fill:Sh(r,o),stroke:Eh(r,o),displacement:r["circle-displacement"],scale:r["circle-scale"],rotation:r["circle-rotation"],rotateWithView:r["circle-rotate-with-view"],declutterMode:r["circle-declutter-mode"]})}}const O0={RENDER_ORDER:"renderOrder"};class fF extends ug{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(O0.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Mb(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(O0.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=aF;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof Gr)e=t;else if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let o=0;o<i;++o){const s=t[o];s instanceof Gr?n[o]=s:n[o]=P0(s)}e=n}else e=P0(t);this.style_=e,this.styleFunction_=t===null?void 0:sF(this.style_),this.changed()}}const gF=fF,Bh={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Rd=[Bh.FILL],Is=[Bh.STROKE],Aa=[Bh.BEGIN_PATH],A0=[Bh.CLOSE_PATH],Qt=Bh;class mF{drawCustom(t,e,i,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Ab=mF;class vF extends Ab{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,l=t.length;a<l;a+=e)n[0]=t[a],n[1]=t[a+1],og(i,n)&&(o[s++]=n[0],o[s++]=n[1]);return s}appendFlatLineCoordinates(t,e,i,n,o,s){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();s&&(e+=n);let c=t[e],h=t[e+1];const d=this.tmpCoordinate_;let p=!0,f,m,g;for(f=e+n;f<i;f+=n)d[0]=t[f],d[1]=t[f+1],g=ey(u,d),g!==m?(p&&(a[l++]=c,a[l++]=h,p=!1),a[l++]=d[0],a[l++]=d[1]):g===Di.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],p=!1):p=!0,c=d[0],h=d[1],m=g;return(o&&p||f===e+n)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(t,e,i,n,o){for(let s=0,a=i.length;s<a;++s){const l=i[s],u=this.appendFlatLineCoordinates(t,e,l,n,!1,!1);o.push(u),e=l}return e}drawCustom(t,e,i,n){this.beginGeometry(t,e);const o=t.getType(),s=t.getStride(),a=this.coordinates.length;let l,u,c,h,d;switch(o){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),h=[];const p=t.getEndss();d=0;for(let f=0,m=p.length;f<m;++f){const g=[];d=this.drawCustomCoordinates_(l,d,p[f],s,g),h.push(g)}this.instructions.push([Qt.CUSTOM,a,h,t,i,dy]),this.hitDetectionInstructions.push([Qt.CUSTOM,a,h,t,n||i,dy]);break;case"Polygon":case"MultiLineString":c=[],l=o=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),s,c),this.instructions.push([Qt.CUSTOM,a,c,t,i,_h]),this.hitDetectionInstructions.push([Qt.CUSTOM,a,c,t,n||i,_h]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,s,!1,!1),this.instructions.push([Qt.CUSTOM,a,u,t,i,Ds]),this.hitDetectionInstructions.push([Qt.CUSTOM,a,u,t,n||i,Ds]);break;case"MultiPoint":l=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,s),u>a&&(this.instructions.push([Qt.CUSTOM,a,u,t,i,Ds]),this.hitDetectionInstructions.push([Qt.CUSTOM,a,u,t,n||i,Ds]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([Qt.CUSTOM,a,u,t,i]),this.hitDetectionInstructions.push([Qt.CUSTOM,a,u,t,n||i]);break}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[Qt.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Qt.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let n,o,s=-1;for(e=0;e<i;++e)n=t[e],o=n[0],o==Qt.END_GEOMETRY?s=e:o==Qt.BEGIN_GEOMETRY&&(n[2]=e,YA(this.hitDetectionInstructions,s,e),s=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const n=t.getColor();i.fillStyle=uo(n||Ko)}else i.fillStyle=void 0;if(e){const n=e.getColor();i.strokeStyle=uo(n||fh);const o=e.getLineCap();i.lineCap=o!==void 0?o:Jp;const s=e.getLineDash();i.lineDash=s?s.slice():hh;const a=e.getLineDashOffset();i.lineDashOffset=a||dh;const l=e.getLineJoin();i.lineJoin=l!==void 0?l:Cu;const u=e.getWidth();i.lineWidth=u!==void 0?u:mh;const c=e.getMiterLimit();i.miterLimit=c!==void 0?c:ph,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[Qt.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[Qt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,o=t.lineDash,s=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||o!=t.currentLineDash&&!rl(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=u)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=u)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[Qt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=vR(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;uh(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Uh=vF;class yF extends Uh{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(i,n);this.instructions.push([Qt.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qt.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(i,n);this.instructions.push([Qt.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qt.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const _F=yF;class CF extends Uh{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),a=[Qt.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state,n=i.strokeStyle,o=i.lineWidth;if(n===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,hh,dh],Aa);const s=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(Is),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,n=i.strokeStyle,o=i.lineWidth;if(n===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Aa);const s=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let u=0;for(let c=0,h=s.length;c<h;++c)u=this.drawFlatCoordinates_(a,u,s[c],l);this.hitDetectionInstructions.push(Is),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Is),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Is),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Aa)}}const wF=CF;class SF extends Uh{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,l=i.length;this.instructions.push(Aa),this.hitDetectionInstructions.push(Aa);for(let u=0;u<l;++u){const c=i[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,c,n,!0,!a),p=[Qt.MOVE_TO_LINE_TO,h,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(A0),this.hitDetectionInstructions.push(A0)),e=c}return s&&(this.instructions.push(Rd),this.hitDetectionInstructions.push(Rd)),a&&(this.instructions.push(Is),this.hitDetectionInstructions.push(Is)),e}drawCircle(t,e){const i=this.state,n=i.fillStyle,o=i.strokeStyle;if(n===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qt.SET_FILL_STYLE,Ko]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,a,!1,!1);const u=[Qt.CIRCLE,l];this.instructions.push(Aa,u),this.hitDetectionInstructions.push(Aa,u),i.fillStyle!==void 0&&(this.instructions.push(Rd),this.hitDetectionInstructions.push(Rd)),i.strokeStyle!==void 0&&(this.instructions.push(Is),this.hitDetectionInstructions.push(Is)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,n=i.fillStyle,o=i.strokeStyle;if(n===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qt.SET_FILL_STYLE,Ko]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,s,l),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,n=i.fillStyle,o=i.strokeStyle;if(n===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qt.SET_FILL_STYLE,Ko]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let u=0;for(let c=0,h=s.length;c<h;++c)u=this.drawFlatCoordinatess_(a,u,s[c],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=wa(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const D0=SF;function EF(r,t,e,i,n){let o=e,s=e,a=0,l=0,u=e,c,h,d,p,f,m,g,y,C,w;for(h=e;h<i;h+=n){const S=t[h],E=t[h+1];f!==void 0&&(C=S-f,w=E-m,p=Math.sqrt(C*C+w*w),g!==void 0&&(l+=d,c=Math.acos((g*C+y*w)/(d*p)),c>r&&(l>a&&(a=l,o=u,s=h),l=0,u=h-n)),d=p,g=C,y=w),f=S,m=E}return l+=p,l>a?[u,h]:[o,s]}const Zc={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class xF extends Uh{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!n)return;const s=this.coordinates;let a=s.length;const l=t.getType();let u=null,c=t.getStride();if(o.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!gn(this.getBufferedMaxExtent(),t.getExtent()))return;let h;if(u=t.getFlatCoordinates(),l=="LineString")h=[u.length];else if(l=="MultiLineString")h=t.getEnds();else if(l=="Polygon")h=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();h=[];for(let g=0,y=m.length;g<y;++g)h.push(m[g][0])}this.beginGeometry(t,e);const d=o.textAlign;let p=0,f;for(let m=0,g=h.length;m<g;++m){if(d==null){const C=EF(o.maxAngle,u,p,h[m],c);p=C[0],f=C[1]}else f=h[m];for(let C=p;C<f;C+=c)s.push(u[C],u[C+1]);const y=s.length;p=h[m],this.drawChars_(a,y),a=y}this.endGeometry(e)}else{let h=o.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),c=2;break;case"Polygon":u=t.getFlatInteriorPoint(),o.overflow||h.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const g=t.getFlatInteriorPoints();u=[];for(let y=0,C=g.length;y<C;y+=3)o.overflow||h.push(g[y+2]/this.resolution),u.push(g[y],g[y+1]);if(u.length===0)return;c=2;break}const d=this.appendFlatPointCoordinates(u,c);if(d===a)return;if(h&&(d-a)/2!==u.length/c){let g=a/2;h=h.filter((y,C)=>{const w=s[(g+C)*2]===u[C*c]&&s[(g+C)*2+1]===u[C*c+1];return w||--g,w})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let p=o.padding;if(p!=Ta&&(o.scale[0]<0||o.scale[1]<0)){let g=o.padding[0],y=o.padding[1],C=o.padding[2],w=o.padding[3];o.scale[0]<0&&(y=-y,w=-w),o.scale[1]<0&&(g=-g,C=-C),p=[g,y,C,w]}const f=this.pixelRatio;this.instructions.push([Qt.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,p==Ta?Ta:p.map(function(g){return g*f}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const m=1/f;this.hitDetectionInstructions.push([Qt.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,p,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||gh,justify:e.justify,textBaseline:e.textBaseline||Qp,scale:e.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Zc[n.textBaseline],c=this.textOffsetY_*l,h=this.text_,d=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Qt.DRAW_CHARS,t,e,u,n.overflow,a,n.maxAngle,l,c,o,d*l,h,s,1]),this.hitDetectionInstructions.push([Qt.DRAW_CHARS,t,e,u,n.overflow,a,n.maxAngle,1,c,o,d,h,s,1/l])}setTextStyle(t,e){let i,n,o;if(!t)this.text_="";else{const s=t.getFill();s?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=uo(s.getColor()||Ko)):(n=null,this.textFillState_=n);const a=t.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const f=a.getLineDash(),m=a.getLineDashOffset(),g=a.getWidth(),y=a.getMiterLimit();o.lineCap=a.getLineCap()||Jp,o.lineDash=f?f.slice():hh,o.lineDashOffset=m===void 0?dh:m,o.lineJoin=a.getLineJoin()||Cu,o.lineWidth=g===void 0?mh:g,o.miterLimit=y===void 0?ph:y,o.strokeStyle=uo(a.getColor()||fh)}i=this.textState_;const l=t.getFont()||DR;BD(l);const u=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Qp,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Ta,i.scale=u===void 0?[1,1]:u;const c=t.getOffsetX(),h=t.getOffsetY(),d=t.getRotateWithView(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=p===void 0?0:p,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Re(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?typeof n.fillStyle=="string"?n.fillStyle:"|"+Re(n.fillStyle):""}this.declutterImageWithText_=e}}const RF={Circle:D0,Default:Uh,Image:_F,LineString:wF,Polygon:D0,Text:xF};class bF{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const o=i[n].finish();t[e][n]=o}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);let o=n[e];if(o===void 0){const s=RF[e];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=o}return o}}const L0=bF;function MF(r,t,e,i,n,o,s,a,l,u,c,h){let d=r[t],p=r[t+1],f=0,m=0,g=0,y=0;function C(){f=d,m=p,t+=i,d=r[t],p=r[t+1],y+=g,g=Math.sqrt((d-f)*(d-f)+(p-m)*(p-m))}do C();while(t<e-i&&y+g<o);let w=g===0?0:(o-y)/g;const S=ko(f,d,w),E=ko(m,p,w),M=t-i,L=y,x=o+a*l(u,n,c);for(;t<e-i&&y+g<x;)C();w=g===0?0:(x-y)/g;const T=ko(f,d,w),N=ko(m,p,w);let K;if(h){const q=[S,E,T,N];z_(q,0,4,2,h,q,q),K=q[0]>q[2]}else K=S>T;const Q=Math.PI,z=[],V=M+i===t;t=M,g=0,y=L,d=r[t],p=r[t+1];let W;if(V){C(),W=Math.atan2(p-m,d-f),K&&(W+=W>0?-Q:Q);const q=(T+S)/2,Y=(N+E)/2;return z[0]=[q,Y,(x-o)/2,W,n],z}n=n.replace(/\n/g," ");for(let q=0,Y=n.length;q<Y;){C();let X=Math.atan2(p-m,d-f);if(K&&(X+=X>0?-Q:Q),W!==void 0){let mt=X-W;if(mt+=mt>Q?-2*Q:mt<-Q?2*Q:0,Math.abs(mt)>s)return null}W=X;const B=q;let j=0;for(;q<Y;++q){const mt=K?Y-q-1:q,xt=a*l(u,n[mt],c);if(t+i<e&&y+g<o+j+xt/2)break;j+=xt}if(q===B)continue;const pt=K?n.substring(Y-B,Y-q):n.substring(B,q);w=g===0?0:(o+j/2-y)/g;const G=ko(f,d,w),vt=ko(m,p,w);z.push([G,vt,j/2,X,pt]),o+=j}return z}const wl=Zn(),as=[],bo=[],Mo=[],ls=[];function I0(r){return r[3].declutterBox}const TF=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function F0(r,t){return(t==="start"||t==="end")&&!TF.test(r)&&(t=t==="start"?"left":"right"),Zc[t]}function PF(r,t,e){return e>0&&r.push(`
`,""),r.push(t,""),r}class OF{constructor(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=ho(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,n){const o=t+e+i+n;if(this.labels_[o])return this.labels_[o];const s=n?this.strokeStates[n]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=Array.isArray(t),d=l.justify?Zc[l.justify]:F0(Array.isArray(t)?t[0]:t,l.textAlign||gh),p=n&&s.lineWidth?s.lineWidth:0,f=h?t:t.split(`
`).reduce(PF,[]),{width:m,height:g,widths:y,heights:C,lineWidths:w}=zD(l,f),S=m+p,E=[],M=(S+2)*c[0],L=(g+p)*c[1],x={width:M<0?Math.floor(M):Math.ceil(M),height:L<0?Math.floor(L):Math.ceil(L),contextInstructions:E};(c[0]!=1||c[1]!=1)&&E.push("scale",c),n&&(E.push("strokeStyle",s.strokeStyle),E.push("lineWidth",p),E.push("lineCap",s.lineCap),E.push("lineJoin",s.lineJoin),E.push("miterLimit",s.miterLimit),E.push("setLineDash",[s.lineDash]),E.push("lineDashOffset",s.lineDashOffset)),i&&E.push("fillStyle",a.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const T=.5-d;let N=d*S+T*p;const K=[],Q=[];let z=0,V=0,W=0,q=0,Y;for(let X=0,B=f.length;X<B;X+=2){const j=f[X];if(j===`
`){V+=z,z=0,N=d*S+T*p,++q;continue}const pt=f[X+1]||l.font;pt!==Y&&(n&&K.push("font",pt),i&&Q.push("font",pt),Y=pt),z=Math.max(z,C[W]);const G=[j,N+T*y[W]+d*(y[W]-w[q]),.5*(p+z)+V];N+=y[W],n&&K.push("strokeText",G),i&&Q.push("fillText",G),++W}return Array.prototype.push.apply(E,K),Array.prototype.push.apply(E,Q),this.labels_[o]=x,x}replayTextBackground_(t,e,i,n,o,s,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),s&&(this.alignFill_=s[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,o,s,a,l,u,c,h,d,p,f,m,g){a*=d[0],l*=d[1];let y=i-a,C=n-l;const w=o+u>t?t-u:o,S=s+c>e?e-c:s,E=f[3]+w*d[0]+f[1],M=f[0]+S*d[1]+f[2],L=y-f[3],x=C-f[0];(m||h!==0)&&(as[0]=L,ls[0]=L,as[1]=x,bo[1]=x,bo[0]=L+E,Mo[0]=bo[0],Mo[1]=x+M,ls[1]=Mo[1]);let T;return h!==0?(T=qs(ho(),i,n,1,1,h,-i,-n),Ii(T,as),Ii(T,bo),Ii(T,Mo),Ii(T,ls),zr(Math.min(as[0],bo[0],Mo[0],ls[0]),Math.min(as[1],bo[1],Mo[1],ls[1]),Math.max(as[0],bo[0],Mo[0],ls[0]),Math.max(as[1],bo[1],Mo[1],ls[1]),wl)):zr(Math.min(L,L+E),Math.min(x,x+M),Math.max(L,L+E),Math.max(x,x+M),wl),p&&(y=Math.round(y),C=Math.round(C)),{drawImageX:y,drawImageY:C,drawImageW:w,drawImageH:S,originX:u,originY:c,declutterBox:{minX:wl[0],minY:wl[1],maxX:wl[2],maxY:wl[3],value:g},canvasTransform:T,scale:d}}replayImageOrLabel_(t,e,i,n,o,s,a){const l=!!(s||a),u=n.declutterBox,c=t.canvas,h=a?a[2]*n.scale[0]/2:0;return u.minX-h<=c.width/e&&u.maxX+h>=0&&u.minY-h<=c.height/e&&u.maxY+h>=0&&(l&&this.replayTextBackground_(t,as,bo,Mo,ls,s,a),jD(t,n.canvasTransform,o,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){if(this.alignFill_){const e=Ii(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const o=this.textStates[e],s=this.createLabel(t,e,n,i),a=this.strokeStates[i],l=this.pixelRatio,u=F0(Array.isArray(t)?t[0]:t,o.textAlign||gh),c=Zc[o.textBaseline||Qp],h=a&&a.lineWidth?a.lineWidth:0,d=s.width/l-2*o.scale[0],p=u*d+2*(.5-u)*h,f=c*s.height/l+2*(.5-c)*h;return{label:s,anchorX:p,anchorY:f}}execute_(t,e,i,n,o,s,a,l){let u;this.pixelCoordinates_&&rl(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=Wa(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),lD(this.renderedTransform_,i));let c=0;const h=n.length;let d=0,p,f,m,g,y,C,w,S,E,M,L,x,T=0,N=0,K=null,Q=null;const z=this.coordinateCache_,V=this.viewRotation_,W=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,q={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:V},Y=this.instructions!=n||this.overlaps?0:200;let X,B,j,pt;for(;c<h;){const G=n[c];switch(G[0]){case Qt.BEGIN_GEOMETRY:X=G[1],pt=G[3],X.getGeometry()?a!==void 0&&!gn(a,pt.getExtent())?c=G[2]+1:++c:c=G[2];break;case Qt.BEGIN_PATH:T>Y&&(this.fill_(t),T=0),N>Y&&(t.stroke(),N=0),!T&&!N&&(t.beginPath(),g=NaN,y=NaN),++c;break;case Qt.CIRCLE:d=G[1];const mt=u[d],xt=u[d+1],st=u[d+2],ne=u[d+3],Lt=st-mt,Ft=ne-xt,Rt=Math.sqrt(Lt*Lt+Ft*Ft);t.moveTo(mt+Rt,xt),t.arc(mt,xt,Rt,0,2*Math.PI,!0),++c;break;case Qt.CLOSE_PATH:t.closePath(),++c;break;case Qt.CUSTOM:d=G[1],p=G[2];const De=G[3],Ut=G[4],zt=G.length==6?G[5]:void 0;q.geometry=De,q.feature=X,c in z||(z[c]=[]);const ze=z[c];zt?zt(u,d,p,2,ze):(ze[0]=u[d],ze[1]=u[d+1],ze.length=2),Ut(ze,q),++c;break;case Qt.DRAW_IMAGE:d=G[1],p=G[2],S=G[3],f=G[4],m=G[5];let ni=G[6];const Bt=G[7],Xe=G[8],Ge=G[9],de=G[10];let Te=G[11];const Ve=G[12];let I=G[13];const P=G[14],et=G[15];if(!S&&G.length>=20){E=G[19],M=G[20],L=G[21],x=G[22];const Pe=this.drawLabelWithPointPlacement_(E,M,L,x);S=Pe.label,G[3]=S;const je=G[23];f=(Pe.anchorX-je)*this.pixelRatio,G[4]=f;const ui=G[24];m=(Pe.anchorY-ui)*this.pixelRatio,G[5]=m,ni=S.height,G[6]=ni,I=S.width,G[13]=I}let yt;G.length>25&&(yt=G[25]);let St,bt,$t;G.length>17?(St=G[16],bt=G[17],$t=G[18]):(St=Ta,bt=!1,$t=!1),de&&W?Te+=V:!de&&!W&&(Te-=V);let Tt=0;for(;d<p;d+=2){if(yt&&yt[Tt++]<I/this.pixelRatio)continue;const Pe=this.calculateImageOrLabelDimensions_(S.width,S.height,u[d],u[d+1],I,ni,f,m,Xe,Ge,Te,Ve,o,St,bt||$t,X),je=[t,e,S,Pe,Bt,bt?K:null,$t?Q:null];if(l){if(P==="none")continue;if(P==="obstacle"){l.insert(Pe.declutterBox);continue}else{let ui,Se;if(et){const Je=p-d;if(!et[Je]){et[Je]=je;continue}if(ui=et[Je],delete et[Je],Se=I0(ui),l.collides(Se))continue}if(l.collides(Pe.declutterBox))continue;ui&&(l.insert(Se),this.replayImageOrLabel_.apply(this,ui)),l.insert(Pe.declutterBox)}}this.replayImageOrLabel_.apply(this,je)}++c;break;case Qt.DRAW_CHARS:const ct=G[1],gt=G[2],Kt=G[3],Wt=G[4];x=G[5];const Yt=G[6],jt=G[7],_e=G[8];L=G[9];const we=G[10];E=G[11],M=G[12];const ri=[G[13],G[13]],k=this.textStates[M],rt=k.font,_t=[k.scale[0]*jt,k.scale[1]*jt];let Pt;rt in this.widths_?Pt=this.widths_[rt]:(Pt={},this.widths_[rt]=Pt);const Ht=Rb(u,ct,gt,2),be=Math.abs(_t[0])*o0(rt,E,Pt);if(Wt||be<=Ht){const Pe=this.textStates[M].textAlign,je=(Ht-be)*Zc[Pe],ui=MF(u,ct,gt,2,E,je,Yt,Math.abs(_t[0]),o0,rt,Pt,W?0:this.viewRotation_);t:if(ui){const Se=[];let Je,Si,Cr,Oi,Ki;if(L)for(Je=0,Si=ui.length;Je<Si;++Je){Ki=ui[Je],Cr=Ki[4],Oi=this.createLabel(Cr,M,"",L),f=Ki[2]+(_t[0]<0?-we:we),m=Kt*Oi.height+(.5-Kt)*2*we*_t[1]/_t[0]-_e;const Nn=this.calculateImageOrLabelDimensions_(Oi.width,Oi.height,Ki[0],Ki[1],Oi.width,Oi.height,f,m,0,0,Ki[3],ri,!1,Ta,!1,X);if(l&&l.collides(Nn.declutterBox))break t;Se.push([t,e,Oi,Nn,1,null,null])}if(x)for(Je=0,Si=ui.length;Je<Si;++Je){Ki=ui[Je],Cr=Ki[4],Oi=this.createLabel(Cr,M,x,""),f=Ki[2],m=Kt*Oi.height-_e;const Nn=this.calculateImageOrLabelDimensions_(Oi.width,Oi.height,Ki[0],Ki[1],Oi.width,Oi.height,f,m,0,0,Ki[3],ri,!1,Ta,!1,X);if(l&&l.collides(Nn.declutterBox))break t;Se.push([t,e,Oi,Nn,1,null,null])}l&&l.load(Se.map(I0));for(let Nn=0,D=Se.length;Nn<D;++Nn)this.replayImageOrLabel_.apply(this,Se[Nn])}}++c;break;case Qt.END_GEOMETRY:if(s!==void 0){X=G[1];const Pe=s(X,pt);if(Pe)return Pe}++c;break;case Qt.FILL:Y?T++:this.fill_(t),++c;break;case Qt.MOVE_TO_LINE_TO:for(d=G[1],p=G[2],B=u[d],j=u[d+1],C=B+.5|0,w=j+.5|0,(C!==g||w!==y)&&(t.moveTo(B,j),g=C,y=w),d+=2;d<p;d+=2)B=u[d],j=u[d+1],C=B+.5|0,w=j+.5|0,(d==p-2||C!==g||w!==y)&&(t.lineTo(B,j),g=C,y=w);++c;break;case Qt.SET_FILL_STYLE:K=G,this.alignFill_=G[2],T&&(this.fill_(t),T=0,N&&(t.stroke(),N=0)),t.fillStyle=G[1],++c;break;case Qt.SET_STROKE_STYLE:Q=G,N&&(t.stroke(),N=0),this.setStrokeStyle_(t,G),++c;break;case Qt.STROKE:Y?N++:t.stroke(),++c;break;default:++c;break}}T&&this.fill_(t),N&&t.stroke()}execute(t,e,i,n,o,s){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(t,e,i,n,o){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,o)}}const AF=OF,gm=["Polygon","Circle","LineString","Image","Text","Default"];class DF{constructor(t,e,i,n,o,s){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ho(),this.createExecutors_(o)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);const n=t[e];for(const o in n){const s=n[o];i[o]=new AF(this.resolution_,this.pixelRatio_,this.overlaps_,s)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let n=0,o=t.length;n<o;++n)if(t[n]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,o,s){n=Math.round(n);const a=n*2+1,l=qs(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Jn(a,a));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Zn(),Xc(h,t),uh(h,e*(this.renderBuffer_+n),h));const d=LF(n);let p;function f(E,M){const L=c.getImageData(0,0,a,a).data;for(let x=0,T=d.length;x<T;x++)if(L[d[x]]>0){if(!s||p!=="Image"&&p!=="Text"||s.includes(E)){const N=(d[x]-3)/4,K=n-N%a,Q=n-(N/a|0),z=o(E,M,K*K+Q*Q);if(z)return z}c.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort($a);let g,y,C,w,S;for(g=m.length-1;g>=0;--g){const E=m[g].toString();for(C=this.executorsByZIndex_[E],y=gm.length-1;y>=0;--y)if(p=gm[y],w=C[p],w!==void 0&&(S=w.executeHitDetection(c,l,i,f,h),S))return S}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],o=e[2],s=e[3],a=[i,n,i,s,o,s,o,n];return Wa(a,0,8,2,t,a),a}isEmpty(){return Ka(this.executorsByZIndex_)}execute(t,e,i,n,o,s,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort($a),this.maxExtent_&&(t.save(),this.clip(t,i)),s=s||gm;let u,c,h,d,p,f;for(a&&l.reverse(),u=0,c=l.length;u<c;++u){const m=l[u].toString();for(p=this.executorsByZIndex_[m],h=0,d=s.length;h<d;++h){const g=s[h];f=p[g],f!==void 0&&f.execute(t,e,i,n,o,a)}}this.maxExtent_&&t.restore()}}const mm={};function LF(r){if(mm[r]!==void 0)return mm[r];const t=r*2+1,e=r*r,i=new Array(e+1);for(let o=0;o<=r;++o)for(let s=0;s<=r;++s){const a=o*o+s*s;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((r+o)*t+(r+s))*4+3),o>0&&l.push(((r-o)*t+(r+s))*4+3),s>0&&(l.push(((r+o)*t+(r-s))*4+3),o>0&&l.push(((r-o)*t+(r-s))*4+3))}const n=[];for(let o=0,s=i.length;o<s;++o)i[o]&&n.push(...i[o]);return mm[r]=n,n}const N0=DF;class IF extends Ab{constructor(t,e,i,n,o,s,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ho()}drawImages_(t,e,i,n){if(!this.image_)return;const o=Wa(t,e,i,n,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=o.length;c<h;c+=2){const d=o[c]-this.imageAnchorX_,p=o[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const f=d+this.imageAnchorX_,m=p+this.imageAnchorY_;qs(a,f,m,1,1,u,-f,-m),s.setTransform.apply(s,a),s.translate(f,m),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(t,e,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Wa(t,e,i,n,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){const l=o[e]+this.textOffsetX_,u=o[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.translate(l-this.textOffsetX_,u-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&s.strokeText(this.text_,l,u),this.textFillState_&&s.fillText(this.text_,l,u))}}moveToLineTo_(t,e,i,n,o){const s=this.context_,a=Wa(t,e,i,n,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let l=a.length;o&&(l-=2);for(let u=2;u<l;u+=2)s.lineTo(a[u],a[u+1]);return o&&s.closePath(),i}drawRings_(t,e,i,n){for(let o=0,s=i.length;o<s;++o)e=this.moveToLineTo_(t,e,i[o],n,!0);return e}drawCircle(t){if(!!gn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=DL(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],o=Math.sqrt(i*i+n*n),s=this.context_;s.beginPath(),s.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);!i||!gn(this.extent_,i.getExtent())||(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(!!gn(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=t.getFlatCoordinates();let o=0;const s=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,u=s.length;l<u;++l)o=this.moveToLineTo_(n,o,s[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const o=t.getEndss(),s=t.getStride();e.beginPath();for(let a=0,l=o.length;a<l;++a){const u=o[a];n=this.drawRings_(i,n,u,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),rl(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:gh;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:uo(i||Ko)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),n=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit(),c=o||hh;this.strokeState_={lineCap:n!==void 0?n:Jp,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(s||dh)*this.pixelRatio_,lineJoin:a!==void 0?a:Cu,lineWidth:(l!==void 0?l:mh)*this.pixelRatio_,miterLimit:u!==void 0?u:ph,strokeStyle:uo(i||fh)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const p=e.getColor();this.textFillState_={fillStyle:uo(p||Ko)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const p=i.getColor(),f=i.getLineCap(),m=i.getLineDash(),g=i.getLineDashOffset(),y=i.getLineJoin(),C=i.getWidth(),w=i.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:Jp,lineDash:m||hh,lineDashOffset:g||dh,lineJoin:y!==void 0?y:Cu,lineWidth:C!==void 0?C:mh,miterLimit:w!==void 0?w:ph,strokeStyle:uo(p||fh)}}const n=t.getFont(),o=t.getOffsetX(),s=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),u=t.getScaleArray(),c=t.getText(),h=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:n!==void 0?n:DR,textAlign:h!==void 0?h:gh,textBaseline:d!==void 0?d:Qp},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,f,m)=>p+=m%2?" ":f,""):c:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const FF=IF,so=.5;function NF(r,t,e,i,n,o,s){const a=r[0]*so,l=r[1]*so,u=Jn(a,l);u.imageSmoothingEnabled=!1;const c=u.canvas,h=new FF(u,so,n,null,s),d=e.length,p=Math.floor((256*256*256-1)/d),f={};for(let g=1;g<=d;++g){const y=e[g-1],C=y.getStyleFunction()||i;if(!i)continue;let w=C(y,o);if(!w)continue;Array.isArray(w)||(w=[w]);const E="#"+("000000"+(g*p).toString(16)).slice(-6);for(let M=0,L=w.length;M<L;++M){const x=w[M],T=x.getGeometryFunction()(y);if(!T||!gn(n,T.getExtent()))continue;const N=x.clone(),K=N.getFill();K&&K.setColor(E);const Q=N.getStroke();Q&&(Q.setColor(E),Q.setLineDash(null)),N.setText(void 0);const z=x.getImage();if(z&&z.getOpacity()!==0){const q=z.getImageSize();if(!q)continue;const Y=Jn(q[0],q[1],void 0,{alpha:!1}),X=Y.canvas;Y.fillStyle=E,Y.fillRect(0,0,X.width,X.height),N.setImage(new yg({img:X,imgSize:q,anchor:z.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:z.getOrigin(),opacity:1,size:z.getSize(),scale:z.getScale(),rotation:z.getRotation(),rotateWithView:z.getRotateWithView()}))}const V=N.getZIndex()||0;let W=f[V];W||(W={},f[V]=W,W.Polygon=[],W.Circle=[],W.LineString=[],W.Point=[]),W[T.getType().replace("Multi","")].push(T,N)}}const m=Object.keys(f).map(Number).sort($a);for(let g=0,y=m.length;g<y;++g){const C=f[m[g]];for(const w in C){const S=C[w];for(let E=0,M=S.length;E<M;E+=2){h.setStyle(S[E+1]);for(let L=0,x=t.length;L<x;++L)h.setTransform(t[L]),h.drawGeometry(S[E])}}}return u.getImageData(0,0,c.width,c.height)}function GF(r,t,e){const i=[];if(e){const n=Math.floor(Math.round(r[0])*so),o=Math.floor(Math.round(r[1])*so),s=(yi(n,0,e.width-1)+yi(o,0,e.height-1)*e.width)*4,a=e.data[s],l=e.data[s+1],c=e.data[s+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/t.length);c&&c%h===0&&i.push(t[c/h-1])}return i}const HF=.5,Db={Point:YF,LineString:zF,Polygon:XF,MultiPoint:KF,MultiLineString:jF,MultiPolygon:$F,GeometryCollection:UF,Circle:kF};function WF(r,t){return parseInt(Re(r),10)-parseInt(Re(t),10)}function VF(r,t){const e=Ey(r,t);return e*e}function Ey(r,t){return HF*r/t}function kF(r,t,e,i,n){const o=e.getFill(),s=e.getStroke();if(o||s){const l=r.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(o,s),l.drawCircle(t,i)}const a=e.getText();if(a&&a.getText()){const l=(n||r).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function G0(r,t,e,i,n,o,s){let a=!1;const l=e.getImage();if(l){const u=l.getImageState();u==Ri.LOADED||u==Ri.ERROR?l.unlistenImageChange(n):(u==Ri.IDLE&&l.load(),l.listenImageChange(n),a=!0)}return BF(r,t,e,i,o,s),a}function BF(r,t,e,i,n,o){const s=e.getGeometryFunction()(t);if(!s)return;const a=s.simplifyTransformed(i,n);if(e.getRenderer())Lb(r,a,e,t);else{const u=Db[a.getType()];u(r,a,e,t,o)}}function Lb(r,t,e,i){if(t.getType()=="GeometryCollection"){const o=t.getGeometries();for(let s=0,a=o.length;s<a;++s)Lb(r,o[s],e,i);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function UF(r,t,e,i,n){const o=t.getGeometriesArray();let s,a;for(s=0,a=o.length;s<a;++s){const l=Db[o[s].getType()];l(r,o[s],e,i,n)}}function zF(r,t,e,i,n){const o=e.getStroke();if(o){const a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(t,i)}const s=e.getText();if(s&&s.getText()){const a=(n||r).getBuilder(e.getZIndex(),"Text");a.setTextStyle(s),a.drawText(t,i)}}function jF(r,t,e,i,n){const o=e.getStroke();if(o){const a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(t,i)}const s=e.getText();if(s&&s.getText()){const a=(n||r).getBuilder(e.getZIndex(),"Text");a.setTextStyle(s),a.drawText(t,i)}}function $F(r,t,e,i,n){const o=e.getFill(),s=e.getStroke();if(s||o){const l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawMultiPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const l=(n||r).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function YF(r,t,e,i,n){const o=e.getImage(),s=e.getText();let a;if(o){if(o.getImageState()!=Ri.LOADED)return;let l=r;if(n){const c=o.getDeclutterMode();if(c!=="none")if(l=n,c==="obstacle"){const h=r.getBuilder(e.getZIndex(),"Image");h.setImageStyle(o,a),h.drawPoint(t,i)}else s&&s.getText()&&(a={})}const u=l.getBuilder(e.getZIndex(),"Image");u.setImageStyle(o,a),u.drawPoint(t,i)}if(s&&s.getText()){let l=r;n&&(l=n);const u=l.getBuilder(e.getZIndex(),"Text");u.setTextStyle(s,a),u.drawText(t,i)}}function KF(r,t,e,i,n){const o=e.getImage(),s=e.getText();let a;if(o){if(o.getImageState()!=Ri.LOADED)return;let l=r;if(n){const c=o.getDeclutterMode();if(c!=="none")if(l=n,c==="obstacle"){const h=r.getBuilder(e.getZIndex(),"Image");h.setImageStyle(o,a),h.drawMultiPoint(t,i)}else s&&s.getText()&&(a={})}const u=l.getBuilder(e.getZIndex(),"Image");u.setImageStyle(o,a),u.drawMultiPoint(t,i)}if(s&&s.getText()){let l=r;n&&(l=n);const u=l.getBuilder(e.getZIndex(),"Text");u.setTextStyle(s,a),u.drawText(t,i)}}function XF(r,t,e,i,n){const o=e.getFill(),s=e.getStroke();if(o||s){const l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const l=(n||r).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class qF extends Cb{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Zn(),this.wrappedRenderedExtent_=Zn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,o=e.viewState,s=o.center,a=o.resolution,l=o.projection,u=o.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=e.pixelRatio,p=e.viewHints,f=!(p[Qi.ANIMATING]||p[Qi.INTERACTING]),m=this.compositionContext_,g=Math.round(e.size[0]*d),y=Math.round(e.size[1]*d),C=h.getWrapX()&&l.canWrapX(),w=C?Qe(c):null,S=C?Math.ceil((n[2]-c[2])/w)+1:1;let E=C?Math.floor((n[0]-c[0])/w):0;do{const M=this.getRenderTransform(s,a,u,d,g,y,E*w);t.execute(m,1,M,u,f,void 0,i)}while(++E<S)}setupCompositionContext_(){if(this.opacity_!==1){const t=Jn(this.context.canvas.width,this.context.canvas.height,x0);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,OR(this.compositionContext_),x0.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];uD(this.pixelTransform,1/i,1/i),M_(this.inversePixelTransform,this.pixelTransform);const o=mR(this.pixelTransform);this.useContainer(e,o,this.getBackground(t));const s=this.context,a=s.canvas,l=this.replayGroup_,u=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!u||u.isEmpty()))return null;const c=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);a.width!=c||a.height!=h?(a.width=c,a.height=h,a.style.transform!==o&&(a.style.transform=o)):this.containerReused||s.clearRect(0,0,c,h),this.preRender(s,t);const d=t.viewState;d.projection,this.opacity_=n.opacity,this.setupCompositionContext_();let p=!1,f=!0;if(n.extent&&this.clipping){const m=Pa(n.extent);f=gn(m,t.extent),p=f&&!As(m,t.extent),p&&this.clipUnrotated(this.compositionContext_,t,m)}return f&&this.renderWorlds(l,t),p&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Ii(this.pixelTransform,i);const n=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=i[0]*so,d=i[1]*so;c.push(this.getRenderTransform(n,o,s,so,h,d,0).slice());const p=u.getSource(),f=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!As(f,l)){let m=l[0];const g=Qe(f);let y=0,C;for(;m<f[0];)--y,C=g*y,c.push(this.getRenderTransform(n,o,s,so,h,d,C).slice()),m+=g;for(y=0,m=l[2];m>f[2];)++y,C=g*y,c.push(this.getRenderTransform(n,o,s,so,h,d,C).slice()),m-=g}this.hitDetectionImageData_=NF(i,c,this.renderedFeatures_,u.getStyleFunction(),l,o,s)}e(GF(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,i,n,o){if(!this.replayGroup_)return;const s=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),u={},c=function(p,f,m){const g=Re(p),y=u[g];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return u[g]=!0,o.splice(o.lastIndexOf(y),1),n(p,l,f);y.geometry=f,y.distanceSq=m}}else{if(m===0)return u[g]=!0,n(p,l,f);o.push(u[g]={feature:p,layer:l,geometry:f,distanceSq:m,callback:n})}};let h;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(p=>h=p.forEachFeatureAtCoordinate(t,s,a,i,c,p===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(f=>f.value):null)),h}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[Qi.ANIMATING],o=t.viewHints[Qi.INTERACTING],s=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!s&&n||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,u=t.viewState,c=u.projection,h=u.resolution,d=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer();let m=e.getRenderOrder();m===void 0&&(m=WF);const g=u.center.slice(),y=uh(l,f*h),C=y.slice(),w=[y.slice()],S=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!As(S,t.extent)){const W=Qe(S),q=Math.max(Qe(y)/2,W);y[0]=S[0]-q,y[2]=S[2]+q,MR(g,c);const Y=wR(w[0],c);Y[0]<S[0]&&Y[2]<S[2]?w.push([Y[0]+W,Y[1],Y[2]+W,Y[3]]):Y[0]>S[0]&&Y[2]>S[2]&&w.push([Y[0]-W,Y[1],Y[2]-W,Y[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==m&&As(this.wrappedRenderedExtent_,y))return rl(this.renderedExtent_,C)||(this.hitDetectionImageData_=null,this.renderedExtent_=C),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const E=new L0(Ey(h,d),y,h,d);let M;this.getLayer().getDeclutter()&&(M=new L0(Ey(h,d),y,h,d));let L;for(let W=0,q=w.length;W<q;++W)i.loadFeatures(w[W],h,c);const x=VF(h,d);let T=!0;const N=function(W){let q;const Y=W.getStyleFunction()||e.getStyleFunction();if(Y&&(q=Y(W,h)),q){const X=this.renderFeature(W,x,q,E,L,M);T=T&&!X}}.bind(this),K=WR(y),Q=i.getFeaturesInExtent(K);m&&Q.sort(m);for(let W=0,q=Q.length;W<q;++W)N(Q[W]);this.renderedFeatures_=Q,this.ready=T;const z=E.finish(),V=new N0(y,h,d,i.getOverlaps(),z,e.getRenderBuffer());return M&&(this.declutterExecutorGroup=new N0(y,h,d,i.getOverlaps(),M.finish(),e.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=p,this.renderedRenderOrder_=m,this.renderedExtent_=C,this.wrappedRenderedExtent_=y,this.renderedCenter_=g,this.renderedProjection_=c,this.replayGroup_=V,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,u=i.length;l<u;++l)a=G0(n,t,i[l],e,this.boundHandleStyleImageChange_,o,s)||a;else a=G0(n,t,i,e,this.boundHandleStyleImageChange_,o,s);return a}}const ZF=qF;class JF extends gF{constructor(t){super(t)}createRenderer(){return new ZF(this)}}const Zs=JF;class QF{constructor(t){this.rbush_=new Mb(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Re(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,o=e.length;n<o;n++){const s=t[n],a=e[n],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[n]=l,this.items_[Re(a)]=l}this.rbush_.load(i)}remove(t){const e=Re(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[Re(e)],n=[i.minX,i.minY,i.maxX,i.maxY];ch(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(n){return n.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,o=t.length;n<o;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return Ka(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return zr(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const H0=QF,Sr={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function tN(r,t){return[[-1/0,-1/0,1/0,1/0]]}function eN(r,t){return[r]}let iN=!1;function nN(r,t,e,i,n,o,s){const a=new XMLHttpRequest;a.open("GET",typeof r=="function"?r(e,i,n):r,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=iN,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=t.getType();let c;u=="json"||u=="text"?c=a.responseText:u=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):u=="arraybuffer"&&(c=a.response),c?o(t.readFeatures(c,{extent:e,featureProjection:n}),t.readProjection(c)):s()}else s()},a.onerror=s,a.send()}function W0(r,t){return function(e,i,n,o,s){const a=this;nN(r,t,e,i,n,function(l,u){a.addFeatures(l),o!==void 0&&o(l)},s||Ya)}}class us extends $r{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class rN extends db{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ya,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(ve(this.format_,7),this.loader_=W0(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:tN;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new H0:null,this.loadedExtentsRtree_=new H0,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,n;Array.isArray(t.features)?n=t.features:t.features&&(i=t.features,n=i.getArray()),!e&&i===void 0&&(i=new Nr(n)),n!==void 0&&this.addFeaturesInternal(n),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=Re(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new us(Sr.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[Me(e,ae.CHANGE,this.handleFeatureChange_,this),Me(e,_u.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const n=e.getId();return n!==void 0&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(ve(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=Re(a);this.addToIndex_(l,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],l=Re(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();e.push(c),n.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(Sr.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new us(Sr.ADDFEATURE,i[o]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Sr.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(Sr.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(Ni.ADD,function(i){e||(e=!0,this.addFeature(i.element),e=!1)}.bind(this)),t.addEventListener(Ni.REMOVE,function(i){e||(e=!0,this.removeFeature(i.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ze);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(n){this.removeFeatureInternal(n)}.bind(this);this.featuresRtree_.forEach(i);for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new us(Sr.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(n){if(n.getGeometry().intersectsCoordinate(t))return e(n)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const o=e(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Ka(this.nullGeometryFeatures_)||Wr(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=yD(t,e);return[].concat(...n.map(o=>this.featuresRtree_.getInExtent(o)))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let o=null;const s=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||Ks,this.featuresRtree_.forEachInExtent(l,function(u){if(e(u)){const c=u.getGeometry(),h=a;if(a=c.closestPointXY(i,n,s,a),a<h){o=u;const d=Math.sqrt(a);l[0]=i-d,l[1]=n-d,l[2]=i+d,l[3]=n+d}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=Re(e),n=e.getGeometry();if(!n)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const s=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,e)):this.featuresRtree_&&this.featuresRtree_.update(s,e)}const o=e.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new us(Sr.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:Re(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ka(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,o=this.strategy_(t,e,i);for(let s=0,a=o.length;s<a;++s){const l=o[s];n.forEachInExtent(l,function(c){return As(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new us(Sr.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,function(c){--this.loadingExtentsCount_,this.dispatchEvent(new us(Sr.FEATURESLOADEND,void 0,c))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new us(Sr.FEATURESLOADERROR))}.bind(this)),n.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(n){if(ch(n.extent,t))return i=n,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=Re(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=Re(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(Ze),delete this.featureChangeKeys_[e];const n=t.getId();return n!==void 0&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new us(Sr.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){ve(this.format_,7),this.url_=t,this.setLoader(W0(t,this.format_))}}const Js=rN,oN={SELECT:"select"};class sN extends $r{constructor(t,e,i,n){super(t),this.selected=e,this.deselected=i,this.mapBrowserEvent=n}}const bd={};class mC extends Bu{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:pI,this.addCondition_=t.addCondition?t.addCondition:vy,this.removeCondition_=t.removeCondition?t.removeCondition:vy,this.toggleCondition_=t.toggleCondition?t.toggleCondition:rC,this.multi_=t.multi?t.multi:!1,this.filter_=t.filter?t.filter:Ks,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=t.style!==void 0?t.style:aN(),this.features_=t.features||new Nr;let e;if(t.layers)if(typeof t.layers=="function")e=t.layers;else{const i=t.layers;e=function(n){return i.includes(n)}}else e=Ks;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[Re(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[Re(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(Ni.ADD,this.boundAddFeature_),this.features_.addEventListener(Ni.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Ni.ADD,this.boundAddFeature_),this.features_.removeEventListener(Ni.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const i=this.getMap().getAllLayers().find(function(n){if(n instanceof Zs&&n.getSource()&&n.getSource().hasFeature(e))return n});i&&this.addFeatureLayerAssociation_(e,i)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=Re(t);e in bd||(bd[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let n=e.length-1;n>=0;--n){const o=e[n];if(o!==this&&o instanceof mC&&o.getStyle()&&o.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(o.getStyle());return}}const i=Re(t);t.setStyle(bd[i]),delete bd[i]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[Re(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),o=!e&&!i&&!n,s=t.map,a=this.getFeatures(),l=[],u=[];if(o){Vu(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,function(c,h){if(!(!(c instanceof hr)||!this.filter_(c,h)))return this.addFeatureLayerAssociation_(c,h),u.push(c),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=a.getLength()-1;c>=0;--c){const h=a.item(c),d=u.indexOf(h);d>-1?u.splice(d,1):(a.remove(h),l.push(h))}u.length!==0&&a.extend(u)}else{s.forEachFeatureAtPixel(t.pixel,function(c,h){if(!(!(c instanceof hr)||!this.filter_(c,h)))return(e||n)&&!a.getArray().includes(c)?(this.addFeatureLayerAssociation_(c,h),u.push(c)):(i||n)&&a.getArray().includes(c)&&(l.push(c),this.removeFeatureLayerAssociation_(c)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=l.length-1;c>=0;--c)a.remove(l[c]);a.extend(u)}return(u.length>0||l.length>0)&&this.dispatchEvent(new sN(oN.SELECT,u,l,t)),!0}}function aN(){const r=Ob();return Wr(r.Polygon,r.LineString),Wr(r.GeometryCollection,r.LineString),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}}const lN=mC,uN={Point:pN,LineString:fN,Polygon:yN,MultiPoint:mN,MultiLineString:gN,MultiPolygon:vN},cN={Point:_N,LineString:CN,Polygon:wN,MultiPoint:EN,MultiLineString:SN,MultiPolygon:xN};class hN extends Eb{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,e,i){const n=t,o=V0(n.geometry,e),s=new hr;if(this.geometryName_&&s.setGeometryName(this.geometryName_),s.setGeometry(o),n.attributes){s.setProperties(n.attributes,!0);const a=n.attributes[i];a!==void 0&&s.setId(a)}return s}readFeaturesFromObject(t,e){if(e=e||{},t.features){const i=t,n=[],o=i.features;for(let s=0,a=o.length;s<a;++s)n.push(this.readFeatureFromObject(o[s],e,t.objectIdFieldName));return n}else return[this.readFeatureFromObject(t,e)]}readGeometryFromObject(t,e){return V0(t,e)}readProjectionFromObject(t){if(t.spatialReference&&t.spatialReference.wkid!==void 0){const i=t.spatialReference.wkid;return fi("EPSG:"+i)}else return null}writeGeometryObject(t,e){return k0(t,this.adaptOptions(e))}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={};if(!t.hasProperties())return i.attributes={},i;const n=t.getProperties(),o=t.getGeometry();if(o){i.geometry=k0(o,e);const s=e&&(e.dataProjection||e.featureProjection);s&&(i.geometry.spatialReference={wkid:Number(fi(s).getCode().split(":").pop())}),delete n[t.getGeometryName()]}return Ka(n)?i.attributes={}:i.attributes=n,i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,o=t.length;n<o;++n)i.push(this.writeFeatureObject(t[n],e));return{features:i}}}function V0(r,t){if(!r)return null;let e;if(typeof r.x=="number"&&typeof r.y=="number")e="Point";else if(r.points)e="MultiPoint";else if(r.paths)r.paths.length===1?e="LineString":e="MultiLineString";else if(r.rings){const n=r,o=zu(n),s=dN(n.rings,o);s.length===1?(e="Polygon",r=Object.assign({},r,{rings:s[0]})):(e="MultiPolygon",r=Object.assign({},r,{rings:s}))}const i=uN[e];return fg(i(r),!1,t)}function dN(r,t){const e=[],i=[],n=[];let o,s;for(o=0,s=r.length;o<s;++o)e.length=0,Vh(e,0,r[o],t.length),Q_(e,0,e.length,t.length)?i.push([r[o]]):n.push(r[o]);for(;n.length;){const a=n.shift();let l=!1;for(o=i.length-1;o>=0;o--){const u=i[o][0];if(As(new sf(u).getExtent(),new sf(a).getExtent())){i[o].push(a),l=!0;break}}l||i.push([a.reverse()])}return i}function pN(r){let t;return r.m!==void 0&&r.z!==void 0?t=new yn([r.x,r.y,r.z,r.m],"XYZM"):r.z!==void 0?t=new yn([r.x,r.y,r.z],"XYZ"):r.m!==void 0?t=new yn([r.x,r.y,r.m],"XYM"):t=new yn([r.x,r.y]),t}function fN(r){const t=zu(r);return new po(r.paths[0],t)}function gN(r){const t=zu(r);return new gg(r.paths,t)}function zu(r){let t="XY";return r.hasZ===!0&&r.hasM===!0?t="XYZM":r.hasZ===!0?t="XYZ":r.hasM===!0&&(t="XYM"),t}function mN(r){const t=zu(r);return new mg(r.points,t)}function vN(r){const t=zu(r);return new vg(r.rings,t)}function yN(r){const t=zu(r);return new Qo(r.rings,t)}function _N(r,t){const e=r.getCoordinates();let i;const n=r.getLayout();return n==="XYZ"?i={x:e[0],y:e[1],z:e[2]}:n==="XYM"?i={x:e[0],y:e[1],m:e[2]}:n==="XYZM"?i={x:e[0],y:e[1],z:e[2],m:e[3]}:n==="XY"?i={x:e[0],y:e[1]}:ve(!1,34),i}function zh(r){const t=r.getLayout();return{hasZ:t==="XYZ"||t==="XYZM",hasM:t==="XYM"||t==="XYZM"}}function CN(r,t){const e=zh(r);return{hasZ:e.hasZ,hasM:e.hasM,paths:[r.getCoordinates()]}}function wN(r,t){const e=zh(r);return{hasZ:e.hasZ,hasM:e.hasM,rings:r.getCoordinates(!1)}}function SN(r,t){const e=zh(r);return{hasZ:e.hasZ,hasM:e.hasM,paths:r.getCoordinates()}}function EN(r,t){const e=zh(r);return{hasZ:e.hasZ,hasM:e.hasM,points:r.getCoordinates()}}function xN(r,t){const e=zh(r),i=r.getCoordinates(!1),n=[];for(let o=0;o<i.length;o++)for(let s=i[o].length-1;s>=0;s--)n.push(i[o][s]);return{hasZ:e.hasZ,hasM:e.hasM,rings:n}}function k0(r,t){const e=cN[r.getType()];return e(fg(r,!0,t),t)}const Ib=hN,{accessToken:RN}=JSON.parse(ia(sessionStorage.getItem("userData"))),ln=lh.create({baseURL:"https://backend.observer.xyz",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${RN}`}}),Fb=lh.create({baseURL:"https://sipaku.geoportal.co.id",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},params:{X_API_KEY:"Kemang_28_secret"},auth:{username:"admin",password:"Kemang_28"}});class _g extends na{constructor(t,e,i){super(),i!==void 0&&e===void 0?this.setFlatCoordinates(i,t):(e=e||0,this.setCenterAndRadius(t,e,i))}clone(){const t=new _g(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const o=this.flatCoordinates,s=t-o[0],a=e-o[1],l=s*s+a*a;if(l<n){if(l===0)for(let u=0;u<this.stride;++u)i[u]=o[u];else{const u=this.getRadius()/Math.sqrt(l);i[0]=o[0]+u*s,i[1]=o[1]+u*a;for(let c=2;c<this.stride;++c)i[c]=o[c]}return i.length=this.stride,l}else return n}containsXY(t,e){const i=this.flatCoordinates,n=t-i[0],o=e-i[1];return n*n+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return zr(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if(gn(t,e)){const i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]?!0:P_(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(let o=1;o<e;++o)n[e+o]=t[o];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let o=UR(n,0,t,this.stride);n[o++]=n[0]+e;for(let s=1,a=this.stride;s<a;++s)n[o++]=n[s];n.length=o,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const i=this.getCenter(),n=this.getStride();this.setCenter(z_(i,0,i.length,n,t,e,i)),this.changed()}translate(t,e){const i=this.getCenter(),n=this.getStride();this.setCenter(kR(i,0,i.length,n,t,e,i)),this.changed()}}_g.prototype.transform;const bN=_g,Md={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Td extends $r{constructor(t,e){super(t),this.feature=e}}function MN(r,t){const e=[];for(let i=0;i<t.length;++i){const o=t[i].getGeometry();Nb(r,o,e)}return e}function Pd(r,t){return Yo(r[0],r[1],t[0],t[1])}function Zl(r,t){const e=r.length;return t<0?r[t+e]:t>=e?r[t-e]:r[t]}function Od(r,t,e){let i,n;t<e?(i=t,n=e):(i=e,n=t);const o=Math.ceil(i),s=Math.floor(n);if(o>s){const l=Jl(r,i),u=Jl(r,n);return Pd(l,u)}let a=0;if(i<o){const l=Jl(r,i),u=Zl(r,o);a+=Pd(l,u)}if(s<n){const l=Zl(r,s),u=Jl(r,n);a+=Pd(l,u)}for(let l=o;l<s-1;++l){const u=Zl(r,l),c=Zl(r,l+1);a+=Pd(u,c)}return a}function Nb(r,t,e){if(t instanceof po){Ad(r,t.getCoordinates(),!1,e);return}if(t instanceof gg){const i=t.getCoordinates();for(let n=0,o=i.length;n<o;++n)Ad(r,i[n],!1,e);return}if(t instanceof Qo){const i=t.getCoordinates();for(let n=0,o=i.length;n<o;++n)Ad(r,i[n],!0,e);return}if(t instanceof vg){const i=t.getCoordinates();for(let n=0,o=i.length;n<o;++n){const s=i[n];for(let a=0,l=s.length;a<l;++a)Ad(r,s[a],!0,e)}return}if(t instanceof Sb){const i=t.getGeometries();for(let n=0;n<i.length;++n)Nb(r,i[n],e);return}}const vm={index:-1,endIndex:NaN};function TN(r,t,e,i){const n=r[0],o=r[1];let s=1/0,a=-1,l=NaN;for(let h=0;h<t.targets.length;++h){const d=t.targets[h],p=d.coordinates;let f=1/0,m;for(let g=0;g<p.length-1;++g){const y=p[g],C=p[g+1],w=Gb(n,o,y,C);w.squaredDistance<f&&(f=w.squaredDistance,m=g+w.along)}f<s&&(s=f,d.ring&&t.targetIndex===h&&(d.endIndex>d.startIndex?m<d.startIndex&&(m+=p.length):d.endIndex<d.startIndex&&m>d.startIndex&&(m-=p.length)),l=m,a=h)}const u=t.targets[a];let c=u.ring;if(t.targetIndex===a&&c){const h=Jl(u.coordinates,l),d=e.getPixelFromCoordinate(h);bR(d,t.startPx)>i&&(c=!1)}if(c){const h=u.coordinates,d=h.length,p=u.startIndex,f=l;if(p<f){const m=Od(h,p,f);Od(h,p,f-d)<m&&(l-=d)}else{const m=Od(h,p,f);Od(h,p,f+d)<m&&(l+=d)}}return vm.index=a,vm.endIndex=l,vm}function Ad(r,t,e,i){const n=r[0],o=r[1];for(let s=0,a=t.length-1;s<a;++s){const l=t[s],u=t[s+1],c=Gb(n,o,l,u);if(c.squaredDistance===0){const h=s+c.along;i.push({coordinates:t,ring:e,startIndex:h,endIndex:h});return}}}const ym={along:0,squaredDistance:0};function Gb(r,t,e,i){const n=e[0],o=e[1],s=i[0],a=i[1],l=s-n,u=a-o;let c=0,h=n,d=o;return(l!==0||u!==0)&&(c=yi(((r-n)*l+(t-o)*u)/(l*l+u*u),0,1),h+=l*c,d+=u*c),ym.along=c,ym.squaredDistance=A_(Yo(r,t,h,d),10),ym}function Jl(r,t){const e=r.length;let i=Math.floor(t);const n=t-i;i>=e?i-=e:i<0&&(i+=e);let o=i+1;o>=e&&(o-=e);const s=r[i],a=s[0],l=s[1],u=r[o],c=u[0]-a,h=u[1]-l;return[a+c*n,l+h*n]}class PN extends Uu{constructor(t){const e=t;e.stopDown||(e.stopDown=Wu),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=AN(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:Ks,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const n=this.mode_;if(n==="Circle")i=function(o,s,a){const l=s||new bN([NaN,NaN]),u=Pr(o[0]),c=RR(u,Pr(o[o.length-1]));return l.setCenterAndRadius(u,Math.sqrt(c),this.geometryLayout_),l};else{let o;n==="Point"?o=yn:n==="LineString"?o=po:n==="Polygon"&&(o=Qo),i=function(s,a,l){return a?n==="Polygon"?s[0].length?a.setCoordinates([s[0].concat([s[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(s,this.geometryLayout_):a=new o(s,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new Zs({source:new Js({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:ON(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:nC,this.freehandCondition_,t.freehand?this.freehandCondition_=my:this.freehandCondition_=t.freehandCondition?t.freehandCondition:rC,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(fy.ACTIVE,this.updateState_)}setTrace(t){let e;t?t===!0?e=my:e=t:e=vy,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===ae.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(t);let e=t.type===Ne.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&t.type===Ne.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Ne.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===Ne.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===Ne.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Ne.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Ne.DBLCLICK&&(i=!1),super.handleEvent(t)&&i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Go(Ne.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active){this.deactivateTrace_();return}const e=this.getMap(),i=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),n=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),o=ty([i,n]),s=this.traceSource_.getFeaturesInExtent(o);if(s.length===0)return;const a=MN(t.coordinate,s);a.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex,n=t.startIndex<=e;i===n?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const n=Math.ceil(t);let o=Math.floor(e);o===e&&(o-=1),i=o-n+1}else{const n=Math.floor(t);let o=Math.ceil(e);o===e&&(o+=1),i=n-o+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const n=[];if(e<i){const o=Math.ceil(e);let s=Math.floor(i);s===i&&(s-=1);for(let a=o;a<=s;++a)n.push(Zl(t.coordinates,a))}else{const o=Math.floor(e);let s=Math.ceil(i);s===i&&(s+=1);for(let a=o;a>=s;--a)n.push(Zl(t.coordinates,a))}n.length&&this.appendCoordinates(n)}updateTrace_(t){const e=this.traceState_;if(!e.active||e.targetIndex===-1&&bR(e.startPx,t.pixel)<this.snapTolerance_)return;const i=TN(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(e.targetIndex!==-1){const l=e.targets[e.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=e.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}e.targetIndex=i.index;const n=e.targets[e.targetIndex];n.endIndex=i.endIndex;const o=Jl(n.coordinates,n.endIndex),s=this.getMap().getPixelFromCoordinate(o);t.coordinate=o,t.pixel=[Math.round(s[0]),Math.round(s[1])]}handleUpEvent(t){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],o=e[1]-i[1],s=n*n+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(t.coordinate.slice());return}this.updateTrace_(t),this.modifyDrawing_(t.coordinate)}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let n=!1,o=[this.finishCoordinate_];const s=this.mode_;if(s==="Point")i=!0;else if(s==="Circle")i=this.sketchCoords_.length===2;else if(s==="LineString")n=!e&&this.sketchCoords_.length>this.minPoints_;else if(s==="Polygon"){const a=this.sketchCoords_;n=a[0].length>this.minPoints_,o=[a[0][0],a[0][a[0].length-2]],e?o=[a[0][0]]:o=[a[0][0],a[0][a[0].length-2]]}if(n){const a=this.getMap();for(let l=0,u=o.length;l<u;l++){const c=o[l],h=a.getPixelFromCoordinate(c),d=t[0]-h[0],p=t[1]-h[1],f=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(d*d+p*p)<=f,i){this.finishCoordinate_=c;break}}}}return i}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new hr(new yn(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new hr);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new po(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=rf(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_==="Point"?this.sketchCoords_=t.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new hr(new po(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new hr,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Td(Md.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),n=e.getView().getProjection(),o=rf(this.geometryLayout_);let s,a;for(;t.length<o;)t.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(s=this.sketchCoords_[0],a=s[s.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(s=this.sketchCoords_,a=s[s.length-1]),a[0]=t[0],a[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,o;const s=this.mode_;s==="LineString"||s==="Circle"?(this.finishCoordinate_=t.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():n=!0),o.push(t.slice()),this.geometryFunction_(o,e,i)):s==="Polygon"&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():n=!0),o.push(t.slice()),n&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),n&&this.finishDrawing()}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let o=0;o<t;++o){let s;if(n==="LineString"||n==="Circle"){if(s=this.sketchCoords_,s.splice(-2,1),s.length>=2){this.finishCoordinate_=s[s.length-2].slice();const a=this.finishCoordinate_.slice();s[s.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(s,e,i),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(n==="Polygon"){s=this.sketchCoords_[0],s.splice(-2,1);const a=this.sketchLine_.getGeometry();if(s.length>=2){const l=s[s.length-2].slice();s[s.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(s),this.geometryFunction_(this.sketchCoords_,e,i)}if(s.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const i=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,i,n)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new mg([e])):this.type_==="MultiLineString"?t.setGeometry(new gg([e])):this.type_==="MultiPolygon"&&t.setGeometry(new vg([e])),this.dispatchEvent(new Td(Md.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new Td(Md.DRAWABORT,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);let n;if(e==="LineString"||e==="Circle")n=this.sketchCoords_;else if(e==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&n.shift(),n.pop();for(let s=0;s<t.length;s++)this.addToDrawing_(t[s]);const o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)}extend(t){const i=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new hr(new yn(n)),this.updateSketchFeatures_(),this.dispatchEvent(new Td(Md.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function ON(){const r=Ob();return function(t,e){return r[t.getGeometry().getType()]}}function AN(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}const DN=PN,rr=ii("clear");let Fs,Jc,xy,Bo=null,hf,Uo=null;const LN="Click to continue drawing the polygon",IN="Click to continue drawing the line";let vC=new Js;const FN=new Zs({source:vC,style:{"fill-color":"rgba(255, 255, 255, 0.2)","stroke-color":"#ffcc33","stroke-width":2,"circle-radius":7,"circle-fill-color":"#ffcc33"}}),NN=function(r){if(r.dragging)return;let t="Click to start drawing";if(Jc){const e=Jc.getGeometry();e instanceof Qo?t=LN:e instanceof po&&(t=IN)}Bo.innerHTML=t,xy.setPosition(r.coordinate),Bo.classList.remove("hidden")},GN=function(r){const t=FR(r);let e;return t>100?e=Math.round(t/1e3*100)/100+" km":e=Math.round(t*100)/100+" m",e},HN=function(r){const t=NR(r);let e;return t>1e4?e=Math.round(t/1e6*100)/100+" km<sup>2</sup>":e=Math.round(t*100)/100+" m<sup>2</sup>",e};function Hb(r){Fs=new DN({source:vC,type:r,style:new Gr({fill:new fr({color:"rgba(255, 255, 255, 0.2)"}),stroke:new zn({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new kh({radius:5,stroke:new zn({color:"rgba(0, 0, 0, 0.7)"}),fill:new fr({color:"rgba(255, 255, 255, 0.2)"})})})}),Ie.addInteraction(Fs),B0(),WN();let t;Fs.on("drawstart",function(e){Jc=e.feature;let i=e.coordinate;t=Jc.getGeometry().on("change",function(n){const o=n.target;let s;o instanceof Qo?(s=HN(o),i=o.getInteriorPoint().getCoordinates()):o instanceof po&&(s=GN(o),i=o.getLastCoordinate()),Uo.innerHTML=s,hf.setPosition(i)})}),Fs.on("drawend",function(){Uo.className="ol-tooltip ol-tooltip-static",Uo.style="color: #3598dc; font-weight: bold",hf.setOffset([0,-7]),Jc=null,Uo=null,B0(),R_(t)}),Ie.on("pointermove",NN),Ie.getViewport().addEventListener("mouseout",function(){Bo.classList.add("hidden")})}function WN(){Bo&&Bo.remove(),Bo=document.createElement("div"),Bo.className="ol-tooltip hidden",Bo.style="color: #61a1fe; font-weight: bold",xy=new _b({element:Bo,offset:[15,0],positioning:"center-left"}),Ie.addOverlay(xy)}function B0(){Uo&&Uo.remove(),Uo=document.createElement("div"),Uo.className="ol-tooltip ol-tooltip-measure",hf=new _b({element:Uo,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),Ie.addOverlay(hf)}function VN(){Fs.setActive(!1),vC.clear(),kN("ol-tooltip")}function kN(r){const t=document.getElementsByClassName(r);for(;t.length>0;)t[0].parentNode.removeChild(t[0])}function BN(){Ie.removeInteraction(Fs),VN()}function UN(){Ie.removeInteraction(Fs),Hb("LineString")}function zN(){Ie.removeInteraction(Fs),Hb("Polygon")}const Gt=En({showBasemap:!1,showLayers:!1,showMeasurement:!1,showQueryLegend:!1,showMapInfo:!1,showSupportTable:!1,showAccInfo:!1});function jN(){Gt.showBasemap=!1,Gt.showLayers=!1,Gt.showMeasurement=!1,Gt.showQueryLegend=!1,Gt.showSupportTable=!1,Gt.showAccInfo=!1}function U0(){Gt.showBasemap=!Gt.showBasemap,Gt.showLayers=!1,Gt.showMeasurement=!1,Gt.showQueryLegend=!1,Gt.showSupportTable=!1,Gt.showAccInfo=!1}function z0(){Gt.showBasemap=!1,Gt.showLayers=!Gt.showLayers,Gt.showMeasurement=!1,Gt.showQueryLegend=!1,Gt.showSupportTable=!1,Gt.showAccInfo=!1}function j0(){Gt.showBasemap=!1,Gt.showLayers=!1,Gt.showMeasurement=!Gt.showMeasurement,Gt.showQueryLegend=!1,Gt.showSupportTable=!1,Gt.showAccInfo=!1}function df(){Gt.showLayers=!1,Gt.showBasemap=!1,Gt.showMeasurement=!1,Gt.showQueryLegend=!1,Gt.showMapInfo=!Gt.showMapInfo,Gt.showSupportTable=!1,Gt.showAccInfo=!1}function $0(){Gt.showBasemap=!1,Gt.showLayers=!1,Gt.showMeasurement=!1,Gt.showQueryLegend=!1,Gt.showSupportTable=!Gt.showSupportTable,Gt.showAccInfo=!1}function Y0(){Gt.showBasemap=!1,Gt.showLayers=!1,Gt.showMeasurement=!1,Gt.showQueryLegend=!1,Gt.showSupportTable=!1,Gt.showAccInfo=!Gt.showAccInfo}const Kn=En({showPanoramaInfo:!1,showCorrection:!1});function $N(){Kn.showPanoramaInfo=!1,Kn.showCorrection=!1}function K0(){Kn.showPanoramaInfo=!Kn.showPanoramaInfo,Kn.showCorrection=!1}function X0(){Kn.showPanoramaInfo=!1,Kn.showCorrection=!Kn.showCorrection}var Wb={exports:{}};/*!
* sweetalert2 v11.6.13
* Released under the MIT License.
*/(function(r,t){(function(e,i){r.exports=i()})(os,function(){var e={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const i="swal2-",n=v=>{const _={};for(const R in v)_[v[R]]=i+v[R];return _},o=n(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),s=n(["success","warning","info","question","error"]),a="SweetAlert2:",l=v=>{const _=[];for(let R=0;R<v.length;R++)_.indexOf(v[R])===-1&&_.push(v[R]);return _},u=v=>v.charAt(0).toUpperCase()+v.slice(1),c=v=>{console.warn(`${a} ${typeof v=="object"?v.join(" "):v}`)},h=v=>{console.error(`${a} ${v}`)},d=[],p=v=>{d.includes(v)||(d.push(v),c(v))},f=(v,_)=>{p(`"${v}" is deprecated and will be removed in the next major release. Please use "${_}" instead.`)},m=v=>typeof v=="function"?v():v,g=v=>v&&typeof v.toPromise=="function",y=v=>g(v)?v.toPromise():Promise.resolve(v),C=v=>v&&Promise.resolve(v)===v,w=()=>document.body.querySelector(`.${o.container}`),S=v=>{const _=w();return _?_.querySelector(v):null},E=v=>S(`.${v}`),M=()=>E(o.popup),L=()=>E(o.icon),x=()=>E(o["icon-content"]),T=()=>E(o.title),N=()=>E(o["html-container"]),K=()=>E(o.image),Q=()=>E(o["progress-steps"]),z=()=>E(o["validation-message"]),V=()=>S(`.${o.actions} .${o.confirm}`),W=()=>S(`.${o.actions} .${o.deny}`),q=()=>E(o["input-label"]),Y=()=>S(`.${o.loader}`),X=()=>S(`.${o.actions} .${o.cancel}`),B=()=>E(o.actions),j=()=>E(o.footer),pt=()=>E(o["timer-progress-bar"]),G=()=>E(o.close),vt=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,mt=()=>{const v=Array.from(M().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((R,F)=>{const ot=parseInt(R.getAttribute("tabindex")),Nt=parseInt(F.getAttribute("tabindex"));return ot>Nt?1:ot<Nt?-1:0}),_=Array.from(M().querySelectorAll(vt)).filter(R=>R.getAttribute("tabindex")!=="-1");return l(v.concat(_)).filter(R=>et(R))},xt=()=>Rt(document.body,o.shown)&&!Rt(document.body,o["toast-shown"])&&!Rt(document.body,o["no-backdrop"]),st=()=>M()&&Rt(M(),o.toast),ne=()=>M().hasAttribute("data-loading"),Lt={previousBodyPadding:null},Ft=(v,_)=>{if(v.textContent="",_){const F=new DOMParser().parseFromString(_,"text/html");Array.from(F.querySelector("head").childNodes).forEach(ot=>{v.appendChild(ot)}),Array.from(F.querySelector("body").childNodes).forEach(ot=>{ot instanceof HTMLVideoElement||ot instanceof HTMLAudioElement?v.appendChild(ot.cloneNode(!0)):v.appendChild(ot)})}},Rt=(v,_)=>{if(!_)return!1;const R=_.split(/\s+/);for(let F=0;F<R.length;F++)if(!v.classList.contains(R[F]))return!1;return!0},De=(v,_)=>{Array.from(v.classList).forEach(R=>{!Object.values(o).includes(R)&&!Object.values(s).includes(R)&&!Object.values(_.showClass).includes(R)&&v.classList.remove(R)})},Ut=(v,_,R)=>{if(De(v,_),_.customClass&&_.customClass[R]){if(typeof _.customClass[R]!="string"&&!_.customClass[R].forEach){c(`Invalid type of customClass.${R}! Expected string or iterable object, got "${typeof _.customClass[R]}"`);return}Bt(v,_.customClass[R])}},zt=(v,_)=>{if(!_)return null;switch(_){case"select":case"textarea":case"file":return v.querySelector(`.${o.popup} > .${o[_]}`);case"checkbox":return v.querySelector(`.${o.popup} > .${o.checkbox} input`);case"radio":return v.querySelector(`.${o.popup} > .${o.radio} input:checked`)||v.querySelector(`.${o.popup} > .${o.radio} input:first-child`);case"range":return v.querySelector(`.${o.popup} > .${o.range} input`);default:return v.querySelector(`.${o.popup} > .${o.input}`)}},ze=v=>{if(v.focus(),v.type!=="file"){const _=v.value;v.value="",v.value=_}},ni=(v,_,R)=>{!v||!_||(typeof _=="string"&&(_=_.split(/\s+/).filter(Boolean)),_.forEach(F=>{Array.isArray(v)?v.forEach(ot=>{R?ot.classList.add(F):ot.classList.remove(F)}):R?v.classList.add(F):v.classList.remove(F)}))},Bt=(v,_)=>{ni(v,_,!0)},Xe=(v,_)=>{ni(v,_,!1)},Ge=(v,_)=>{const R=Array.from(v.children);for(let F=0;F<R.length;F++){const ot=R[F];if(ot instanceof HTMLElement&&Rt(ot,_))return ot}},de=(v,_,R)=>{R===`${parseInt(R)}`&&(R=parseInt(R)),R||parseInt(R)===0?v.style[_]=typeof R=="number"?`${R}px`:R:v.style.removeProperty(_)},Te=function(v){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";v.style.display=_},Ve=v=>{v.style.display="none"},I=(v,_,R,F)=>{const ot=v.querySelector(_);ot&&(ot.style[R]=F)},P=function(v,_){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";_?Te(v,R):Ve(v)},et=v=>!!(v&&(v.offsetWidth||v.offsetHeight||v.getClientRects().length)),yt=()=>!et(V())&&!et(W())&&!et(X()),St=v=>v.scrollHeight>v.clientHeight,bt=v=>{const _=window.getComputedStyle(v),R=parseFloat(_.getPropertyValue("animation-duration")||"0"),F=parseFloat(_.getPropertyValue("transition-duration")||"0");return R>0||F>0},$t=function(v){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const R=pt();et(R)&&(_&&(R.style.transition="none",R.style.width="100%"),setTimeout(()=>{R.style.transition=`width ${v/1e3}s linear`,R.style.width="0%"},10))},Tt=()=>{const v=pt(),_=parseInt(window.getComputedStyle(v).width);v.style.removeProperty("transition"),v.style.width="100%";const R=parseInt(window.getComputedStyle(v).width),F=_/R*100;v.style.removeProperty("transition"),v.style.width=`${F}%`},ct=100,gt={},Kt=()=>{gt.previousActiveElement instanceof HTMLElement?(gt.previousActiveElement.focus(),gt.previousActiveElement=null):document.body&&document.body.focus()},Wt=v=>new Promise(_=>{if(!v)return _();const R=window.scrollX,F=window.scrollY;gt.restoreFocusTimeout=setTimeout(()=>{Kt(),_()},ct),window.scrollTo(R,F)}),Yt=()=>typeof window>"u"||typeof document>"u",jt=`
 <div aria-labelledby="${o.title}" aria-describedby="${o["html-container"]}" class="${o.popup}" tabindex="-1">
   <button type="button" class="${o.close}"></button>
   <ul class="${o["progress-steps"]}"></ul>
   <div class="${o.icon}"></div>
   <img class="${o.image}" />
   <h2 class="${o.title}" id="${o.title}"></h2>
   <div class="${o["html-container"]}" id="${o["html-container"]}"></div>
   <input class="${o.input}" />
   <input type="file" class="${o.file}" />
   <div class="${o.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${o.select}"></select>
   <div class="${o.radio}"></div>
   <label for="${o.checkbox}" class="${o.checkbox}">
     <input type="checkbox" />
     <span class="${o.label}"></span>
   </label>
   <textarea class="${o.textarea}"></textarea>
   <div class="${o["validation-message"]}" id="${o["validation-message"]}"></div>
   <div class="${o.actions}">
     <div class="${o.loader}"></div>
     <button type="button" class="${o.confirm}"></button>
     <button type="button" class="${o.deny}"></button>
     <button type="button" class="${o.cancel}"></button>
   </div>
   <div class="${o.footer}"></div>
   <div class="${o["timer-progress-bar-container"]}">
     <div class="${o["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),_e=()=>{const v=w();return v?(v.remove(),Xe([document.documentElement,document.body],[o["no-backdrop"],o["toast-shown"],o["has-column"]]),!0):!1},we=()=>{gt.currentInstance.resetValidationMessage()},ri=()=>{const v=M(),_=Ge(v,o.input),R=Ge(v,o.file),F=v.querySelector(`.${o.range} input`),ot=v.querySelector(`.${o.range} output`),Nt=Ge(v,o.select),gi=v.querySelector(`.${o.checkbox} input`),qr=Ge(v,o.textarea);_.oninput=we,R.onchange=we,Nt.onchange=we,gi.onchange=we,qr.oninput=we,F.oninput=()=>{we(),ot.value=F.value},F.onchange=()=>{we(),ot.value=F.value}},k=v=>typeof v=="string"?document.querySelector(v):v,rt=v=>{const _=M();_.setAttribute("role",v.toast?"alert":"dialog"),_.setAttribute("aria-live",v.toast?"polite":"assertive"),v.toast||_.setAttribute("aria-modal","true")},_t=v=>{window.getComputedStyle(v).direction==="rtl"&&Bt(w(),o.rtl)},Pt=v=>{const _=_e();if(Yt()){h("SweetAlert2 requires document to initialize");return}const R=document.createElement("div");R.className=o.container,_&&Bt(R,o["no-transition"]),Ft(R,jt);const F=k(v.target);F.appendChild(R),rt(v),_t(F),ri()},Ht=(v,_)=>{v instanceof HTMLElement?_.appendChild(v):typeof v=="object"?be(v,_):v&&Ft(_,v)},be=(v,_)=>{v.jquery?Pe(_,v):Ft(_,v.toString())},Pe=(v,_)=>{if(v.textContent="",0 in _)for(let R=0;R in _;R++)v.appendChild(_[R].cloneNode(!0));else v.appendChild(_.cloneNode(!0))},je=(()=>{if(Yt())return!1;const v=document.createElement("div"),_={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const R in _)if(Object.prototype.hasOwnProperty.call(_,R)&&typeof v.style[R]<"u")return _[R];return!1})(),ui=()=>{const v=document.createElement("div");v.className=o["scrollbar-measure"],document.body.appendChild(v);const _=v.getBoundingClientRect().width-v.clientWidth;return document.body.removeChild(v),_},Se=(v,_)=>{const R=B(),F=Y();!_.showConfirmButton&&!_.showDenyButton&&!_.showCancelButton?Ve(R):Te(R),Ut(R,_,"actions"),Je(R,F,_),Ft(F,_.loaderHtml),Ut(F,_,"loader")};function Je(v,_,R){const F=V(),ot=W(),Nt=X();Cr(F,"confirm",R),Cr(ot,"deny",R),Cr(Nt,"cancel",R),Si(F,ot,Nt,R),R.reverseButtons&&(R.toast?(v.insertBefore(Nt,F),v.insertBefore(ot,F)):(v.insertBefore(Nt,_),v.insertBefore(ot,_),v.insertBefore(F,_)))}function Si(v,_,R,F){if(!F.buttonsStyling){Xe([v,_,R],o.styled);return}Bt([v,_,R],o.styled),F.confirmButtonColor&&(v.style.backgroundColor=F.confirmButtonColor,Bt(v,o["default-outline"])),F.denyButtonColor&&(_.style.backgroundColor=F.denyButtonColor,Bt(_,o["default-outline"])),F.cancelButtonColor&&(R.style.backgroundColor=F.cancelButtonColor,Bt(R,o["default-outline"]))}function Cr(v,_,R){P(v,R[`show${u(_)}Button`],"inline-block"),Ft(v,R[`${_}ButtonText`]),v.setAttribute("aria-label",R[`${_}ButtonAriaLabel`]),v.className=o[_],Ut(v,R,`${_}Button`),Bt(v,R[`${_}ButtonClass`])}const Oi=(v,_)=>{const R=G();Ft(R,_.closeButtonHtml),Ut(R,_,"closeButton"),P(R,_.showCloseButton),R.setAttribute("aria-label",_.closeButtonAriaLabel)},Ki=(v,_)=>{const R=w();!R||(Nn(R,_.backdrop),D(R,_.position),tt(R,_.grow),Ut(R,_,"container"))};function Nn(v,_){typeof _=="string"?v.style.background=_:_||Bt([document.documentElement,document.body],o["no-backdrop"])}function D(v,_){_ in o?Bt(v,o[_]):(c('The "position" parameter is not valid, defaulting to "center"'),Bt(v,o.center))}function tt(v,_){if(_&&typeof _=="string"){const R=`grow-${_}`;R in o&&Bt(v,o[R])}}const at=["input","file","range","select","radio","checkbox","textarea"],J=(v,_)=>{const R=M(),F=e.innerParams.get(v),ot=!F||_.input!==F.input;at.forEach(Nt=>{const gi=Ge(R,o[Nt]);ie(Nt,_.inputAttributes),gi.className=o[Nt],ot&&Ve(gi)}),_.input&&(ot&&ht(_),he(_))},ht=v=>{if(!Ce[v.input]){h(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${v.input}"`);return}const _=pe(v.input),R=Ce[v.input](_,v);Te(_),setTimeout(()=>{ze(R)})},Xt=v=>{for(let _=0;_<v.attributes.length;_++){const R=v.attributes[_].name;["type","value","style"].includes(R)||v.removeAttribute(R)}},ie=(v,_)=>{const R=zt(M(),v);if(!!R){Xt(R);for(const F in _)R.setAttribute(F,_[F])}},he=v=>{const _=pe(v.input);typeof v.customClass=="object"&&Bt(_,v.customClass.input)},oe=(v,_)=>{(!v.placeholder||_.inputPlaceholder)&&(v.placeholder=_.inputPlaceholder)},Ee=(v,_,R)=>{if(R.inputLabel){v.id=o.input;const F=document.createElement("label"),ot=o["input-label"];F.setAttribute("for",v.id),F.className=ot,typeof R.customClass=="object"&&Bt(F,R.customClass.inputLabel),F.innerText=R.inputLabel,_.insertAdjacentElement("beforebegin",F)}},pe=v=>Ge(M(),o[v]||o.input),ye=(v,_)=>{["string","number"].includes(typeof _)?v.value=`${_}`:C(_)||c(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof _}"`)},Ce={};Ce.text=Ce.email=Ce.password=Ce.number=Ce.tel=Ce.url=(v,_)=>(ye(v,_.inputValue),Ee(v,v,_),oe(v,_),v.type=_.input,v),Ce.file=(v,_)=>(Ee(v,v,_),oe(v,_),v),Ce.range=(v,_)=>{const R=v.querySelector("input"),F=v.querySelector("output");return ye(R,_.inputValue),R.type=_.input,ye(F,_.inputValue),Ee(R,v,_),v},Ce.select=(v,_)=>{if(v.textContent="",_.inputPlaceholder){const R=document.createElement("option");Ft(R,_.inputPlaceholder),R.value="",R.disabled=!0,R.selected=!0,v.appendChild(R)}return Ee(v,v,_),v},Ce.radio=v=>(v.textContent="",v),Ce.checkbox=(v,_)=>{const R=zt(M(),"checkbox");R.value="1",R.id=o.checkbox,R.checked=Boolean(_.inputValue);const F=v.querySelector("span");return Ft(F,_.inputPlaceholder),R},Ce.textarea=(v,_)=>{ye(v,_.inputValue),oe(v,_),Ee(v,v,_);const R=F=>parseInt(window.getComputedStyle(F).marginLeft)+parseInt(window.getComputedStyle(F).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const F=parseInt(window.getComputedStyle(M()).width),ot=()=>{const Nt=v.offsetWidth+R(v);Nt>F?M().style.width=`${Nt}px`:M().style.width=null};new MutationObserver(ot).observe(v,{attributes:!0,attributeFilter:["style"]})}}),v};const xo=(v,_)=>{const R=N();Ut(R,_,"htmlContainer"),_.html?(Ht(_.html,R),Te(R,"block")):_.text?(R.textContent=_.text,Te(R,"block")):Ve(R),J(v,_)},es=(v,_)=>{const R=j();P(R,_.footer),_.footer&&Ht(_.footer,R),Ut(R,_,"footer")},is=(v,_)=>{const R=e.innerParams.get(v),F=L();if(R&&_.icon===R.icon){un(F,_),Gn(F,_);return}if(!_.icon&&!_.iconHtml){Ve(F);return}if(_.icon&&Object.keys(s).indexOf(_.icon)===-1){h(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${_.icon}"`),Ve(F);return}Te(F),un(F,_),Gn(F,_),Bt(F,_.showClass.icon)},Gn=(v,_)=>{for(const R in s)_.icon!==R&&Xe(v,s[R]);Bt(v,s[_.icon]),Kr(v,_),Fe(),Ut(v,_,"icon")},Fe=()=>{const v=M(),_=window.getComputedStyle(v).getPropertyValue("background-color"),R=v.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let F=0;F<R.length;F++)R[F].style.backgroundColor=_},ns=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,ci=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,un=(v,_)=>{let R=v.innerHTML,F;_.iconHtml?F=rs(_.iconHtml):_.icon==="success"?(F=ns,R=R.replace(/ style=".*?"/g,"")):_.icon==="error"?F=ci:F=rs({question:"?",warning:"!",info:"i"}[_.icon]),R.trim()!==F.trim()&&Ft(v,F)},Kr=(v,_)=>{if(!!_.iconColor){v.style.color=_.iconColor,v.style.borderColor=_.iconColor;for(const R of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])I(v,R,"backgroundColor",_.iconColor);I(v,".swal2-success-ring","borderColor",_.iconColor)}},rs=v=>`<div class="${o["icon-content"]}">${v}</div>`,ec=(v,_)=>{const R=K();if(!_.imageUrl){Ve(R);return}Te(R,""),R.setAttribute("src",_.imageUrl),R.setAttribute("alt",_.imageAlt),de(R,"width",_.imageWidth),de(R,"height",_.imageHeight),R.className=o.image,Ut(R,_,"image")},ki=(v,_)=>{const R=w(),F=M();_.toast?(de(R,"width",_.width),F.style.width="100%",F.insertBefore(Y(),L())):de(F,"width",_.width),de(F,"padding",_.padding),_.color&&(F.style.color=_.color),_.background&&(F.style.background=_.background),Ve(z()),Ro(F,_)},Ro=(v,_)=>{v.className=`${o.popup} ${et(v)?_.showClass.popup:""}`,_.toast?(Bt([document.documentElement,document.body],o["toast-shown"]),Bt(v,o.toast)):Bt(v,o.modal),Ut(v,_,"popup"),typeof _.customClass=="string"&&Bt(v,_.customClass),_.icon&&Bt(v,o[`icon-${_.icon}`])},ic=(v,_)=>{const R=Q();if(!_.progressSteps||_.progressSteps.length===0){Ve(R);return}Te(R),R.textContent="",_.currentProgressStep>=_.progressSteps.length&&c("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),_.progressSteps.forEach((F,ot)=>{const Nt=cn(F);if(R.appendChild(Nt),ot===_.currentProgressStep&&Bt(Nt,o["active-progress-step"]),ot!==_.progressSteps.length-1){const gi=nc(_);R.appendChild(gi)}})},cn=v=>{const _=document.createElement("li");return Bt(_,o["progress-step"]),Ft(_,v),_},nc=v=>{const _=document.createElement("li");return Bt(_,o["progress-step-line"]),v.progressStepsDistance&&de(_,"width",v.progressStepsDistance),_},$g=(v,_)=>{const R=T();P(R,_.title||_.titleText,"block"),_.title&&Ht(_.title,R),_.titleText&&(R.innerText=_.titleText),Ut(R,_,"title")},rc=(v,_)=>{ki(v,_),Ki(v,_),ic(v,_),is(v,_),ec(v,_),$g(v,_),Oi(v,_),xo(v,_),Se(v,_),es(v,_),typeof _.didRender=="function"&&_.didRender(M())};function Sw(){const v=e.innerParams.get(this);if(!v)return;const _=e.domCache.get(this);Ve(_.loader),st()?v.icon&&Te(L()):GP(_),Xe([_.popup,_.actions],o.loading),_.popup.removeAttribute("aria-busy"),_.popup.removeAttribute("data-loading"),_.confirmButton.disabled=!1,_.denyButton.disabled=!1,_.cancelButton.disabled=!1}const GP=v=>{const _=v.popup.getElementsByClassName(v.loader.getAttribute("data-button-to-replace"));_.length?Te(_[0],"inline-block"):yt()&&Ve(v.actions)};function HP(v){const _=e.innerParams.get(v||this),R=e.domCache.get(v||this);return R?zt(R.popup,_.input):null}const WP=()=>et(M()),Ew=()=>V()&&V().click(),VP=()=>W()&&W().click(),kP=()=>X()&&X().click(),pl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),xw=v=>{v.keydownTarget&&v.keydownHandlerAdded&&(v.keydownTarget.removeEventListener("keydown",v.keydownHandler,{capture:v.keydownListenerCapture}),v.keydownHandlerAdded=!1)},BP=(v,_,R,F)=>{xw(_),R.toast||(_.keydownHandler=ot=>zP(v,ot,F),_.keydownTarget=R.keydownListenerCapture?window:M(),_.keydownListenerCapture=R.keydownListenerCapture,_.keydownTarget.addEventListener("keydown",_.keydownHandler,{capture:_.keydownListenerCapture}),_.keydownHandlerAdded=!0)},Yg=(v,_,R)=>{const F=mt();if(F.length)return _=_+R,_===F.length?_=0:_===-1&&(_=F.length-1),F[_].focus();M().focus()},Rw=["ArrowRight","ArrowDown"],UP=["ArrowLeft","ArrowUp"],zP=(v,_,R)=>{const F=e.innerParams.get(v);!F||_.isComposing||_.keyCode===229||(F.stopKeydownPropagation&&_.stopPropagation(),_.key==="Enter"?jP(v,_,F):_.key==="Tab"?$P(_,F):[...Rw,...UP].includes(_.key)?YP(_.key):_.key==="Escape"&&KP(_,F,R))},jP=(v,_,R)=>{if(!!m(R.allowEnterKey)&&_.target&&v.getInput()&&_.target instanceof HTMLElement&&_.target.outerHTML===v.getInput().outerHTML){if(["textarea","file"].includes(R.input))return;Ew(),_.preventDefault()}},$P=(v,_)=>{const R=v.target,F=mt();let ot=-1;for(let Nt=0;Nt<F.length;Nt++)if(R===F[Nt]){ot=Nt;break}v.shiftKey?Yg(_,ot,-1):Yg(_,ot,1),v.stopPropagation(),v.preventDefault()},YP=v=>{const _=V(),R=W(),F=X();if(document.activeElement instanceof HTMLElement&&![_,R,F].includes(document.activeElement))return;const ot=Rw.includes(v)?"nextElementSibling":"previousElementSibling";let Nt=document.activeElement;for(let gi=0;gi<B().children.length;gi++){if(Nt=Nt[ot],!Nt)return;if(Nt instanceof HTMLButtonElement&&et(Nt))break}Nt instanceof HTMLButtonElement&&Nt.focus()},KP=(v,_,R)=>{m(_.allowEscapeKey)&&(v.preventDefault(),R(pl.esc))};var oc={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const XP=()=>{Array.from(document.body.children).forEach(_=>{_===w()||_.contains(w())||(_.hasAttribute("aria-hidden")&&_.setAttribute("data-previous-aria-hidden",_.getAttribute("aria-hidden")),_.setAttribute("aria-hidden","true"))})},bw=()=>{Array.from(document.body.children).forEach(_=>{_.hasAttribute("data-previous-aria-hidden")?(_.setAttribute("aria-hidden",_.getAttribute("data-previous-aria-hidden")),_.removeAttribute("data-previous-aria-hidden")):_.removeAttribute("aria-hidden")})},qP=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!Rt(document.body,o.iosfix)){const _=document.body.scrollTop;document.body.style.top=`${_*-1}px`,Bt(document.body,o.iosfix),JP(),ZP()}},ZP=()=>{const v=navigator.userAgent,_=!!v.match(/iPad/i)||!!v.match(/iPhone/i),R=!!v.match(/WebKit/i);_&&R&&!v.match(/CriOS/i)&&M().scrollHeight>window.innerHeight-44&&(w().style.paddingBottom=`${44}px`)},JP=()=>{const v=w();let _;v.ontouchstart=R=>{_=QP(R)},v.ontouchmove=R=>{_&&(R.preventDefault(),R.stopPropagation())}},QP=v=>{const _=v.target,R=w();return tO(v)||eO(v)?!1:_===R||!St(R)&&_ instanceof HTMLElement&&_.tagName!=="INPUT"&&_.tagName!=="TEXTAREA"&&!(St(N())&&N().contains(_))},tO=v=>v.touches&&v.touches.length&&v.touches[0].touchType==="stylus",eO=v=>v.touches&&v.touches.length>1,iO=()=>{if(Rt(document.body,o.iosfix)){const v=parseInt(document.body.style.top,10);Xe(document.body,o.iosfix),document.body.style.top="",document.body.scrollTop=v*-1}},nO=()=>{Lt.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(Lt.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Lt.previousBodyPadding+ui()}px`)},rO=()=>{Lt.previousBodyPadding!==null&&(document.body.style.paddingRight=`${Lt.previousBodyPadding}px`,Lt.previousBodyPadding=null)};function Mw(v,_,R,F){st()?Tw(v,F):(Wt(R).then(()=>Tw(v,F)),xw(gt)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(_.setAttribute("style","display:none !important"),_.removeAttribute("class"),_.innerHTML=""):_.remove(),xt()&&(rO(),iO(),bw()),oO()}function oO(){Xe([document.documentElement,document.body],[o.shown,o["height-auto"],o["no-backdrop"],o["toast-shown"]])}function ld(v){v=uO(v);const _=oc.swalPromiseResolve.get(this),R=aO(this);this.isAwaitingPromise()?v.isDismissed||(sc(this),_(v)):R&&_(v)}function sO(){return!!e.awaitingPromise.get(this)}const aO=v=>{const _=M();if(!_)return!1;const R=e.innerParams.get(v);if(!R||Rt(_,R.hideClass.popup))return!1;Xe(_,R.showClass.popup),Bt(_,R.hideClass.popup);const F=w();return Xe(F,R.showClass.backdrop),Bt(F,R.hideClass.backdrop),cO(v,_,R),!0};function lO(v){const _=oc.swalPromiseReject.get(this);sc(this),_&&_(v)}const sc=v=>{v.isAwaitingPromise()&&(e.awaitingPromise.delete(v),e.innerParams.get(v)||v._destroy())},uO=v=>typeof v>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},v),cO=(v,_,R)=>{const F=w(),ot=je&&bt(_);typeof R.willClose=="function"&&R.willClose(_),ot?hO(v,_,F,R.returnFocus,R.didClose):Mw(v,F,R.returnFocus,R.didClose)},hO=(v,_,R,F,ot)=>{gt.swalCloseEventFinishedCallback=Mw.bind(null,v,R,F,ot),_.addEventListener(je,function(Nt){Nt.target===_&&(gt.swalCloseEventFinishedCallback(),delete gt.swalCloseEventFinishedCallback)})},Tw=(v,_)=>{setTimeout(()=>{typeof _=="function"&&_.bind(v.params)(),v._destroy()})};function Pw(v,_,R){const F=e.domCache.get(v);_.forEach(ot=>{F[ot].disabled=R})}function Ow(v,_){if(!!v)if(v.type==="radio"){const F=v.parentNode.parentNode.querySelectorAll("input");for(let ot=0;ot<F.length;ot++)F[ot].disabled=_}else v.disabled=_}function dO(){Pw(this,["confirmButton","denyButton","cancelButton"],!1)}function pO(){Pw(this,["confirmButton","denyButton","cancelButton"],!0)}function fO(){Ow(this.getInput(),!1)}function gO(){Ow(this.getInput(),!0)}function mO(v){const _=e.domCache.get(this),R=e.innerParams.get(this);Ft(_.validationMessage,v),_.validationMessage.className=o["validation-message"],R.customClass&&R.customClass.validationMessage&&Bt(_.validationMessage,R.customClass.validationMessage),Te(_.validationMessage);const F=this.getInput();F&&(F.setAttribute("aria-invalid",!0),F.setAttribute("aria-describedby",o["validation-message"]),ze(F),Bt(F,o.inputerror))}function vO(){const v=e.domCache.get(this);v.validationMessage&&Ve(v.validationMessage);const _=this.getInput();_&&(_.removeAttribute("aria-invalid"),_.removeAttribute("aria-describedby"),Xe(_,o.inputerror))}const fl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},yO=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],_O={},CO=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Aw=v=>Object.prototype.hasOwnProperty.call(fl,v),Dw=v=>yO.indexOf(v)!==-1,Kg=v=>_O[v],wO=v=>{Aw(v)||c(`Unknown parameter "${v}"`)},SO=v=>{CO.includes(v)&&c(`The parameter "${v}" is incompatible with toasts`)},EO=v=>{Kg(v)&&f(v,Kg(v))},xO=v=>{v.backdrop===!1&&v.allowOutsideClick&&c('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const _ in v)wO(_),v.toast&&SO(_),EO(_)};function RO(v){const _=M(),R=e.innerParams.get(this);if(!_||Rt(_,R.hideClass.popup)){c("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const F=bO(v),ot=Object.assign({},R,F);rc(this,ot),e.innerParams.set(this,ot),Object.defineProperties(this,{params:{value:Object.assign({},this.params,v),writable:!1,enumerable:!0}})}const bO=v=>{const _={};return Object.keys(v).forEach(R=>{Dw(R)?_[R]=v[R]:c(`Invalid parameter to update: ${R}`)}),_};function MO(){const v=e.domCache.get(this),_=e.innerParams.get(this);if(!_){Lw(this);return}v.popup&&gt.swalCloseEventFinishedCallback&&(gt.swalCloseEventFinishedCallback(),delete gt.swalCloseEventFinishedCallback),typeof _.didDestroy=="function"&&_.didDestroy(),TO(this)}const TO=v=>{Lw(v),delete v.params,delete gt.keydownHandler,delete gt.keydownTarget,delete gt.currentInstance},Lw=v=>{v.isAwaitingPromise()?(Xg(e,v),e.awaitingPromise.set(v,!0)):(Xg(oc,v),Xg(e,v))},Xg=(v,_)=>{for(const R in v)v[R].delete(_)};var Iw=Object.freeze({__proto__:null,hideLoading:Sw,disableLoading:Sw,getInput:HP,close:ld,isAwaitingPromise:sO,rejectPromise:lO,handleAwaitingPromise:sc,closePopup:ld,closeModal:ld,closeToast:ld,enableButtons:dO,disableButtons:pO,enableInput:fO,disableInput:gO,showValidationMessage:mO,resetValidationMessage:vO,update:RO,_destroy:MO});const gl=v=>{let _=M();_||new cd,_=M();const R=Y();st()?Ve(L()):PO(_,v),Te(R),_.setAttribute("data-loading","true"),_.setAttribute("aria-busy","true"),_.focus()},PO=(v,_)=>{const R=B(),F=Y();!_&&et(V())&&(_=V()),Te(R),_&&(Ve(_),F.setAttribute("data-button-to-replace",_.className)),F.parentNode.insertBefore(F,_),Bt([v,R],o.loading)},OO=(v,_)=>{_.input==="select"||_.input==="radio"?FO(v,_):["text","email","number","tel","textarea"].includes(_.input)&&(g(_.inputValue)||C(_.inputValue))&&(gl(V()),NO(v,_))},AO=(v,_)=>{const R=v.getInput();if(!R)return null;switch(_.input){case"checkbox":return DO(R);case"radio":return LO(R);case"file":return IO(R);default:return _.inputAutoTrim?R.value.trim():R.value}},DO=v=>v.checked?1:0,LO=v=>v.checked?v.value:null,IO=v=>v.files.length?v.getAttribute("multiple")!==null?v.files:v.files[0]:null,FO=(v,_)=>{const R=M(),F=ot=>{GO[_.input](R,qg(ot),_)};g(_.inputOptions)||C(_.inputOptions)?(gl(V()),y(_.inputOptions).then(ot=>{v.hideLoading(),F(ot)})):typeof _.inputOptions=="object"?F(_.inputOptions):h(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof _.inputOptions}`)},NO=(v,_)=>{const R=v.getInput();Ve(R),y(_.inputValue).then(F=>{R.value=_.input==="number"?`${parseFloat(F)||0}`:`${F}`,Te(R),R.focus(),v.hideLoading()}).catch(F=>{h(`Error in inputValue promise: ${F}`),R.value="",Te(R),R.focus(),v.hideLoading()})},GO={select:(v,_,R)=>{const F=Ge(v,o.select),ot=(Nt,gi,qr)=>{const hn=document.createElement("option");hn.value=qr,Ft(hn,gi),hn.selected=Fw(qr,R.inputValue),Nt.appendChild(hn)};_.forEach(Nt=>{const gi=Nt[0],qr=Nt[1];if(Array.isArray(qr)){const hn=document.createElement("optgroup");hn.label=gi,hn.disabled=!1,F.appendChild(hn),qr.forEach(vl=>ot(hn,vl[1],vl[0]))}else ot(F,qr,gi)}),F.focus()},radio:(v,_,R)=>{const F=Ge(v,o.radio);_.forEach(Nt=>{const gi=Nt[0],qr=Nt[1],hn=document.createElement("input"),vl=document.createElement("label");hn.type="radio",hn.name=o.radio,hn.value=gi,Fw(gi,R.inputValue)&&(hn.checked=!0);const tm=document.createElement("span");Ft(tm,qr),tm.className=o.label,vl.appendChild(hn),vl.appendChild(tm),F.appendChild(vl)});const ot=F.querySelectorAll("input");ot.length&&ot[0].focus()}},qg=v=>{const _=[];return typeof Map<"u"&&v instanceof Map?v.forEach((R,F)=>{let ot=R;typeof ot=="object"&&(ot=qg(ot)),_.push([F,ot])}):Object.keys(v).forEach(R=>{let F=v[R];typeof F=="object"&&(F=qg(F)),_.push([R,F])}),_},Fw=(v,_)=>_&&_.toString()===v.toString(),HO=v=>{const _=e.innerParams.get(v);v.disableButtons(),_.input?Nw(v,"confirm"):Jg(v,!0)},WO=v=>{const _=e.innerParams.get(v);v.disableButtons(),_.returnInputValueOnDeny?Nw(v,"deny"):Zg(v,!1)},VO=(v,_)=>{v.disableButtons(),_(pl.cancel)},Nw=(v,_)=>{const R=e.innerParams.get(v);if(!R.input){h(`The "input" parameter is needed to be set when using returnInputValueOn${u(_)}`);return}const F=AO(v,R);R.inputValidator?kO(v,F,_):v.getInput().checkValidity()?_==="deny"?Zg(v,F):Jg(v,F):(v.enableButtons(),v.showValidationMessage(R.validationMessage))},kO=(v,_,R)=>{const F=e.innerParams.get(v);v.disableInput(),Promise.resolve().then(()=>y(F.inputValidator(_,F.validationMessage))).then(Nt=>{v.enableButtons(),v.enableInput(),Nt?v.showValidationMessage(Nt):R==="deny"?Zg(v,_):Jg(v,_)})},Zg=(v,_)=>{const R=e.innerParams.get(v||void 0);R.showLoaderOnDeny&&gl(W()),R.preDeny?(e.awaitingPromise.set(v||void 0,!0),Promise.resolve().then(()=>y(R.preDeny(_,R.validationMessage))).then(ot=>{ot===!1?(v.hideLoading(),sc(v)):v.close({isDenied:!0,value:typeof ot>"u"?_:ot})}).catch(ot=>Hw(v||void 0,ot))):v.close({isDenied:!0,value:_})},Gw=(v,_)=>{v.close({isConfirmed:!0,value:_})},Hw=(v,_)=>{v.rejectPromise(_)},Jg=(v,_)=>{const R=e.innerParams.get(v||void 0);R.showLoaderOnConfirm&&gl(),R.preConfirm?(v.resetValidationMessage(),e.awaitingPromise.set(v||void 0,!0),Promise.resolve().then(()=>y(R.preConfirm(_,R.validationMessage))).then(ot=>{et(z())||ot===!1?(v.hideLoading(),sc(v)):Gw(v,typeof ot>"u"?_:ot)}).catch(ot=>Hw(v||void 0,ot))):Gw(v,_)},BO=(v,_,R)=>{e.innerParams.get(v).toast?UO(v,_,R):(jO(_),$O(_),YO(v,_,R))},UO=(v,_,R)=>{_.popup.onclick=()=>{const F=e.innerParams.get(v);F&&(zO(F)||F.timer||F.input)||R(pl.close)}},zO=v=>v.showConfirmButton||v.showDenyButton||v.showCancelButton||v.showCloseButton;let ud=!1;const jO=v=>{v.popup.onmousedown=()=>{v.container.onmouseup=function(_){v.container.onmouseup=void 0,_.target===v.container&&(ud=!0)}}},$O=v=>{v.container.onmousedown=()=>{v.popup.onmouseup=function(_){v.popup.onmouseup=void 0,(_.target===v.popup||v.popup.contains(_.target))&&(ud=!0)}}},YO=(v,_,R)=>{_.container.onclick=F=>{const ot=e.innerParams.get(v);if(ud){ud=!1;return}F.target===_.container&&m(ot.allowOutsideClick)&&R(pl.backdrop)}},KO=v=>typeof v=="object"&&v.jquery,Ww=v=>v instanceof Element||KO(v),XO=v=>{const _={};return typeof v[0]=="object"&&!Ww(v[0])?Object.assign(_,v[0]):["title","html","icon"].forEach((R,F)=>{const ot=v[F];typeof ot=="string"||Ww(ot)?_[R]=ot:ot!==void 0&&h(`Unexpected type of ${R}! Expected "string" or "Element", got ${typeof ot}`)}),_};function qO(){const v=this;for(var _=arguments.length,R=new Array(_),F=0;F<_;F++)R[F]=arguments[F];return new v(...R)}function ZO(v){class _ extends this{_main(F,ot){return super._main(F,Object.assign({},v,ot))}}return _}const JO=()=>gt.timeout&&gt.timeout.getTimerLeft(),Vw=()=>{if(gt.timeout)return Tt(),gt.timeout.stop()},kw=()=>{if(gt.timeout){const v=gt.timeout.start();return $t(v),v}},QO=()=>{const v=gt.timeout;return v&&(v.running?Vw():kw())},tA=v=>{if(gt.timeout){const _=gt.timeout.increase(v);return $t(_,!0),_}},eA=()=>gt.timeout&&gt.timeout.isRunning();let Bw=!1;const Qg={};function iA(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Qg[v]=this,Bw||(document.body.addEventListener("click",nA),Bw=!0)}const nA=v=>{for(let _=v.target;_&&_!==document;_=_.parentNode)for(const R in Qg){const F=_.getAttribute(R);if(F){Qg[R].fire({template:F});return}}};var rA=Object.freeze({__proto__:null,isValidParameter:Aw,isUpdatableParameter:Dw,isDeprecatedParameter:Kg,argsToParams:XO,getContainer:w,getPopup:M,getTitle:T,getHtmlContainer:N,getImage:K,getIcon:L,getIconContent:x,getInputLabel:q,getCloseButton:G,getActions:B,getConfirmButton:V,getDenyButton:W,getCancelButton:X,getLoader:Y,getFooter:j,getTimerProgressBar:pt,getFocusableElements:mt,getValidationMessage:z,getProgressSteps:Q,isLoading:ne,isVisible:WP,clickConfirm:Ew,clickDeny:VP,clickCancel:kP,fire:qO,mixin:ZO,showLoading:gl,enableLoading:gl,getTimerLeft:JO,stopTimer:Vw,resumeTimer:kw,toggleTimer:QO,increaseTimer:tA,isTimerRunning:eA,bindClickHandler:iA});class oA{constructor(_,R){this.callback=_,this.remaining=R,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(_){const R=this.running;return R&&this.stop(),this.remaining+=_,R&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Uw=["swal-title","swal-html","swal-footer"],sA=v=>{const _=typeof v.template=="string"?document.querySelector(v.template):v.template;if(!_)return{};const R=_.content;return fA(R),Object.assign(aA(R),lA(R),uA(R),cA(R),hA(R),dA(R),pA(R,Uw))},aA=v=>{const _={};return Array.from(v.querySelectorAll("swal-param")).forEach(F=>{la(F,["name","value"]);const ot=F.getAttribute("name"),Nt=F.getAttribute("value");typeof fl[ot]=="boolean"?_[ot]=Nt!=="false":typeof fl[ot]=="object"?_[ot]=JSON.parse(Nt):_[ot]=Nt}),_},lA=v=>{const _={};return Array.from(v.querySelectorAll("swal-function-param")).forEach(F=>{const ot=F.getAttribute("name"),Nt=F.getAttribute("value");_[ot]=new Function(`return ${Nt}`)()}),_},uA=v=>{const _={};return Array.from(v.querySelectorAll("swal-button")).forEach(F=>{la(F,["type","color","aria-label"]);const ot=F.getAttribute("type");_[`${ot}ButtonText`]=F.innerHTML,_[`show${u(ot)}Button`]=!0,F.hasAttribute("color")&&(_[`${ot}ButtonColor`]=F.getAttribute("color")),F.hasAttribute("aria-label")&&(_[`${ot}ButtonAriaLabel`]=F.getAttribute("aria-label"))}),_},cA=v=>{const _={},R=v.querySelector("swal-image");return R&&(la(R,["src","width","height","alt"]),R.hasAttribute("src")&&(_.imageUrl=R.getAttribute("src")),R.hasAttribute("width")&&(_.imageWidth=R.getAttribute("width")),R.hasAttribute("height")&&(_.imageHeight=R.getAttribute("height")),R.hasAttribute("alt")&&(_.imageAlt=R.getAttribute("alt"))),_},hA=v=>{const _={},R=v.querySelector("swal-icon");return R&&(la(R,["type","color"]),R.hasAttribute("type")&&(_.icon=R.getAttribute("type")),R.hasAttribute("color")&&(_.iconColor=R.getAttribute("color")),_.iconHtml=R.innerHTML),_},dA=v=>{const _={},R=v.querySelector("swal-input");R&&(la(R,["type","label","placeholder","value"]),_.input=R.getAttribute("type")||"text",R.hasAttribute("label")&&(_.inputLabel=R.getAttribute("label")),R.hasAttribute("placeholder")&&(_.inputPlaceholder=R.getAttribute("placeholder")),R.hasAttribute("value")&&(_.inputValue=R.getAttribute("value")));const F=Array.from(v.querySelectorAll("swal-input-option"));return F.length&&(_.inputOptions={},F.forEach(ot=>{la(ot,["value"]);const Nt=ot.getAttribute("value"),gi=ot.innerHTML;_.inputOptions[Nt]=gi})),_},pA=(v,_)=>{const R={};for(const F in _){const ot=_[F],Nt=v.querySelector(ot);Nt&&(la(Nt,[]),R[ot.replace(/^swal-/,"")]=Nt.innerHTML.trim())}return R},fA=v=>{const _=Uw.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(v.children).forEach(R=>{const F=R.tagName.toLowerCase();_.includes(F)||c(`Unrecognized element <${F}>`)})},la=(v,_)=>{Array.from(v.attributes).forEach(R=>{_.indexOf(R.name)===-1&&c([`Unrecognized attribute "${R.name}" on <${v.tagName.toLowerCase()}>.`,`${_.length?`Allowed attributes are: ${_.join(", ")}`:"To set the value, use HTML within the element."}`])})},zw=10,gA=v=>{const _=w(),R=M();typeof v.willOpen=="function"&&v.willOpen(R);const ot=window.getComputedStyle(document.body).overflowY;yA(_,R,v),setTimeout(()=>{mA(_,R)},zw),xt()&&(vA(_,v.scrollbarPadding,ot),XP()),!st()&&!gt.previousActiveElement&&(gt.previousActiveElement=document.activeElement),typeof v.didOpen=="function"&&setTimeout(()=>v.didOpen(R)),Xe(_,o["no-transition"])},jw=v=>{const _=M();if(v.target!==_)return;const R=w();_.removeEventListener(je,jw),R.style.overflowY="auto"},mA=(v,_)=>{je&&bt(_)?(v.style.overflowY="hidden",_.addEventListener(je,jw)):v.style.overflowY="auto"},vA=(v,_,R)=>{qP(),_&&R!=="hidden"&&nO(),setTimeout(()=>{v.scrollTop=0})},yA=(v,_,R)=>{Bt(v,R.showClass.backdrop),_.style.setProperty("opacity","0","important"),Te(_,"grid"),setTimeout(()=>{Bt(_,R.showClass.popup),_.style.removeProperty("opacity")},zw),Bt([document.documentElement,document.body],o.shown),R.heightAuto&&R.backdrop&&!R.toast&&Bt([document.documentElement,document.body],o["height-auto"])};var $w={email:(v,_)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(v)?Promise.resolve():Promise.resolve(_||"Invalid email address"),url:(v,_)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(v)?Promise.resolve():Promise.resolve(_||"Invalid URL")};function _A(v){v.inputValidator||Object.keys($w).forEach(_=>{v.input===_&&(v.inputValidator=$w[_])})}function CA(v){(!v.target||typeof v.target=="string"&&!document.querySelector(v.target)||typeof v.target!="string"&&!v.target.appendChild)&&(c('Target parameter is not valid, defaulting to "body"'),v.target="body")}function wA(v){_A(v),v.showLoaderOnConfirm&&!v.preConfirm&&c(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),CA(v),typeof v.title=="string"&&(v.title=v.title.split(`
`).join("<br />")),Pt(v)}let Xr;class ml{constructor(){if(typeof window>"u")return;Xr=this;for(var _=arguments.length,R=new Array(_),F=0;F<_;F++)R[F]=arguments[F];const ot=Object.freeze(this.constructor.argsToParams(R));Object.defineProperties(this,{params:{value:ot,writable:!1,enumerable:!0,configurable:!0}});const Nt=Xr._main(Xr.params);e.promise.set(this,Nt)}_main(_){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xO(Object.assign({},R,_)),gt.currentInstance&&(gt.currentInstance._destroy(),xt()&&bw()),gt.currentInstance=Xr;const F=EA(_,R);wA(F),Object.freeze(F),gt.timeout&&(gt.timeout.stop(),delete gt.timeout),clearTimeout(gt.restoreFocusTimeout);const ot=xA(Xr);return rc(Xr,F),e.innerParams.set(Xr,F),SA(Xr,ot,F)}then(_){return e.promise.get(this).then(_)}finally(_){return e.promise.get(this).finally(_)}}const SA=(v,_,R)=>new Promise((F,ot)=>{const Nt=gi=>{v.close({isDismissed:!0,dismiss:gi})};oc.swalPromiseResolve.set(v,F),oc.swalPromiseReject.set(v,ot),_.confirmButton.onclick=()=>{HO(v)},_.denyButton.onclick=()=>{WO(v)},_.cancelButton.onclick=()=>{VO(v,Nt)},_.closeButton.onclick=()=>{Nt(pl.close)},BO(v,_,Nt),BP(v,gt,R,Nt),OO(v,R),gA(R),RA(gt,R,Nt),bA(_,R),setTimeout(()=>{_.container.scrollTop=0})}),EA=(v,_)=>{const R=sA(v),F=Object.assign({},fl,_,R,v);return F.showClass=Object.assign({},fl.showClass,F.showClass),F.hideClass=Object.assign({},fl.hideClass,F.hideClass),F},xA=v=>{const _={popup:M(),container:w(),actions:B(),confirmButton:V(),denyButton:W(),cancelButton:X(),loader:Y(),closeButton:G(),validationMessage:z(),progressSteps:Q()};return e.domCache.set(v,_),_},RA=(v,_,R)=>{const F=pt();Ve(F),_.timer&&(v.timeout=new oA(()=>{R("timer"),delete v.timeout},_.timer),_.timerProgressBar&&(Te(F),Ut(F,_,"timerProgressBar"),setTimeout(()=>{v.timeout&&v.timeout.running&&$t(_.timer)})))},bA=(v,_)=>{if(!_.toast){if(!m(_.allowEnterKey)){TA();return}MA(v,_)||Yg(_,-1,1)}},MA=(v,_)=>_.focusDeny&&et(v.denyButton)?(v.denyButton.focus(),!0):_.focusCancel&&et(v.cancelButton)?(v.cancelButton.focus(),!0):_.focusConfirm&&et(v.confirmButton)?(v.confirmButton.focus(),!0):!1,TA=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const v=new Date,_=localStorage.getItem("swal-initiation");_?(v.getTime()-Date.parse(_))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const R=document.createElement("audio");R.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",R.loop=!0,document.body.appendChild(R),setTimeout(()=>{R.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${v}`)}Object.assign(ml.prototype,Iw),Object.assign(ml,rA),Object.keys(Iw).forEach(v=>{ml[v]=function(){if(Xr)return Xr[v](...arguments)}}),ml.DismissReason=pl,ml.version="11.6.13";const cd=ml;return cd.default=cd,cd}),typeof os<"u"&&os.Sweetalert2&&(os.swal=os.sweetAlert=os.Swal=os.SweetAlert=os.Sweetalert2),typeof document<"u"&&function(e,i){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=i);else try{n.innerHTML=i}catch{n.innerText=i}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')})(Wb);const Qc=Wb.exports,jh=400;function jr(){let r=window.location.href,t=new URL(r);return new URLSearchParams(t.search).get("project")}function pf(){let r=window.location.href,t=new URL(r);return new URLSearchParams(t.search).get("year")}let YN=function(r,...t){return r.split("%%").reduce((e,i,n)=>e+i+(t[n]||""),"")};function KN(r,t,e,i){var n=6378.137,o=e*Math.PI/180-r*Math.PI/180,s=i*Math.PI/180-t*Math.PI/180,a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(r*Math.PI/180)*Math.cos(e*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2),l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),u=n*l;return u*1e3}const _o=Qc.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",Qc.stopTimer),r.addEventListener("mouseleave",Qc.resumeTimer)}}),ff=new Zs({source:new Js,zIndex:100,style:function(r){return kb[r.getGeometry().getType()]}});function Vb(r,t){return`${r.replaceAll("WMS","WFS")}&version=1.1.0&request=GetFeature&typeName=${t}&styles=&outputFormat=application/json`}function XN(r,t,e){const i="0",n=t.getCode().split(/:(?=\d+$)/).pop();return e+"/"+i+"/query/?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+r[0]+',"ymin":'+r[1]+',"xmax":'+r[2]+',"ymax":'+r[3]+',"spatialReference":{"wkid":'+n+"}}")+"&geometryType=esriGeometryEnvelope&inSR="+n+"&outFields=*&outSR="+n}new Gr({fill:new fr({color:"rgba(255, 255, 0, 0.7)"}),stroke:new zn({color:"yellow",width:4})});const kb={Point:new Gr({image:new kh({radius:5,fill:new fr({color:"red"}),stroke:new zn({color:"red",width:1})})}),MultiLineString:new Gr({stroke:new zn({color:"#dc3545",width:4})}),MultiPolygon:new Gr({stroke:new zn({color:"red",width:2}),fill:new fr({color:"rgba(255, 255, 0, 0.1)"})}),Polygon:new Gr({stroke:new zn({color:"red",width:2}),fill:new fr({color:"rgba(255, 255, 0, 0.1)"})})};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yC="146",qN=0,q0=1,ZN=2,Bb=1,JN=2,Wc=3,wu=0,gr=1,zi=2,Bs=0,hu=1,Z0=2,J0=3,Q0=4,QN=5,Kl=100,tG=101,eG=102,tS=103,eS=104,iG=200,nG=201,rG=202,oG=203,Ub=204,zb=205,sG=206,aG=207,lG=208,uG=209,cG=210,hG=0,dG=1,pG=2,Ry=3,fG=4,gG=5,mG=6,vG=7,jb=0,yG=1,_G=2,Xo=0,CG=1,wG=2,SG=3,EG=4,xG=5,$b=300,Su=301,Eu=302,by=303,My=304,Cg=306,Ty=1e3,Dr=1001,Py=1002,On=1003,iS=1004,nS=1005,lr=1006,RG=1007,wg=1008,qa=1009,bG=1010,MG=1011,Yb=1012,TG=1013,Da=1014,La=1015,xh=1016,PG=1017,OG=1018,du=1020,AG=1021,DG=1022,Lr=1023,LG=1024,IG=1025,Va=1026,xu=1027,FG=1028,NG=1029,GG=1030,HG=1031,WG=1033,_m=33776,Cm=33777,wm=33778,Sm=33779,rS=35840,oS=35841,sS=35842,aS=35843,VG=36196,lS=37492,uS=37496,cS=37808,hS=37809,dS=37810,pS=37811,fS=37812,gS=37813,mS=37814,vS=37815,yS=37816,_S=37817,CS=37818,wS=37819,SS=37820,ES=37821,xS=36492,Za=3e3,di=3001,kG=3200,BG=3201,UG=0,zG=1,Wo="srgb",Ia="srgb-linear",Em=7680,jG=519,RS=35044,bS="300 es",Oy=1035;class ju{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const n=this._listeners[t];if(n!==void 0){const o=n.indexOf(e);o!==-1&&n.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const n=i.slice(0);for(let o=0,s=n.length;o<s;o++)n[o].call(this,t);t.target=null}}}const qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let MS=1234567;const pu=Math.PI/180,gf=180/Math.PI;function $u(){const r=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qi[r&255]+qi[r>>8&255]+qi[r>>16&255]+qi[r>>24&255]+"-"+qi[t&255]+qi[t>>8&255]+"-"+qi[t>>16&15|64]+qi[t>>24&255]+"-"+qi[e&63|128]+qi[e>>8&255]+"-"+qi[e>>16&255]+qi[e>>24&255]+qi[i&255]+qi[i>>8&255]+qi[i>>16&255]+qi[i>>24&255]).toLowerCase()}function An(r,t,e){return Math.max(t,Math.min(e,r))}function _C(r,t){return(r%t+t)%t}function $G(r,t,e,i,n){return i+(r-t)*(n-i)/(e-t)}function YG(r,t,e){return r!==t?(e-r)/(t-r):0}function th(r,t,e){return(1-e)*r+e*t}function KG(r,t,e,i){return th(r,t,1-Math.exp(-e*i))}function XG(r,t=1){return t-Math.abs(_C(r,t*2)-t)}function qG(r,t,e){return r<=t?0:r>=e?1:(r=(r-t)/(e-t),r*r*(3-2*r))}function ZG(r,t,e){return r<=t?0:r>=e?1:(r=(r-t)/(e-t),r*r*r*(r*(r*6-15)+10))}function JG(r,t){return r+Math.floor(Math.random()*(t-r+1))}function QG(r,t){return r+Math.random()*(t-r)}function t2(r){return r*(.5-Math.random())}function e2(r){r!==void 0&&(MS=r);let t=MS+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function i2(r){return r*pu}function n2(r){return r*gf}function Ay(r){return(r&r-1)===0&&r!==0}function r2(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function mf(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function o2(r,t,e,i,n){const o=Math.cos,s=Math.sin,a=o(e/2),l=s(e/2),u=o((t+i)/2),c=s((t+i)/2),h=o((t-i)/2),d=s((t-i)/2),p=o((i-t)/2),f=s((i-t)/2);switch(n){case"XYX":r.set(a*c,l*h,l*d,a*u);break;case"YZY":r.set(l*d,a*c,l*h,a*u);break;case"ZXZ":r.set(l*h,l*d,a*c,a*u);break;case"XZX":r.set(a*c,l*f,l*p,a*u);break;case"YXY":r.set(l*p,a*c,l*f,a*u);break;case"ZYZ":r.set(l*f,l*p,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function Vc(r,t){switch(t.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function bn(r,t){switch(t.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}var Dy=Object.freeze({__proto__:null,DEG2RAD:pu,RAD2DEG:gf,generateUUID:$u,clamp:An,euclideanModulo:_C,mapLinear:$G,inverseLerp:YG,lerp:th,damp:KG,pingpong:XG,smoothstep:qG,smootherstep:ZG,randInt:JG,randFloat:QG,randFloatSpread:t2,seededRandom:e2,degToRad:i2,radToDeg:n2,isPowerOfTwo:Ay,ceilPowerOfTwo:r2,floorPowerOfTwo:mf,setQuaternionFromProperEuler:o2,normalize:bn,denormalize:Vc});class Ye{constructor(t=0,e=0){Ye.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*n+t.x,this.y=o*n+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class dr{constructor(){dr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,o,s,a,l,u){const c=this.elements;return c[0]=t,c[1]=n,c[2]=a,c[3]=e,c[4]=o,c[5]=l,c[6]=i,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],c=i[4],h=i[7],d=i[2],p=i[5],f=i[8],m=n[0],g=n[3],y=n[6],C=n[1],w=n[4],S=n[7],E=n[2],M=n[5],L=n[8];return o[0]=s*m+a*C+l*E,o[3]=s*g+a*w+l*M,o[6]=s*y+a*S+l*L,o[1]=u*m+c*C+h*E,o[4]=u*g+c*w+h*M,o[7]=u*y+c*S+h*L,o[2]=d*m+p*C+f*E,o[5]=d*g+p*w+f*M,o[8]=d*y+p*S+f*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return e*s*c-e*a*u-i*o*c+i*a*l+n*o*u-n*s*l}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=c*s-a*u,d=a*l-c*o,p=u*o-s*l,f=e*h+i*d+n*p;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/f;return t[0]=h*m,t[1]=(n*u-c*i)*m,t[2]=(a*i-n*s)*m,t[3]=d*m,t[4]=(c*e-n*l)*m,t[5]=(n*o-a*e)*m,t[6]=p*m,t[7]=(i*l-u*e)*m,t[8]=(s*e-i*o)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,o,s,a){const l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+t,-n*u,n*l,-n*(-u*s+l*a)+a+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],u=n[4],c=n[7];return n[0]=e*o+i*l,n[3]=e*s+i*u,n[6]=e*a+i*c,n[1]=-i*o+e*l,n[4]=-i*s+e*u,n[7]=-i*a+e*c,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}function Kb(r){for(let t=r.length-1;t>=0;--t)if(r[t]>=65535)return!0;return!1}function Rh(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function ka(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Gp(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const xm={[Wo]:{[Ia]:ka},[Ia]:{[Wo]:Gp}},Er={legacyMode:!0,get workingColorSpace(){return Ia},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,t,e){if(this.legacyMode||t===e||!t||!e)return r;if(xm[t]&&xm[t][e]!==void 0){const i=xm[t][e];return r.r=i(r.r),r.g=i(r.g),r.b=i(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,t){return this.convert(r,this.workingColorSpace,t)},toWorkingColorSpace:function(r,t){return this.convert(r,t,this.workingColorSpace)}},Xb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ei={r:0,g:0,b:0},xr={h:0,s:0,l:0},Dd={h:0,s:0,l:0};function Rm(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*6*(2/3-e):r}function Ld(r,t){return t.r=r.r,t.g=r.g,t.b=r.b,t}class ti{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,e===void 0&&i===void 0?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Wo){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Er.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=Ia){return this.r=t,this.g=e,this.b=i,Er.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=Ia){if(t=_C(t,1),e=An(e,0,1),i=An(i,0,1),e===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+e):i+e-i*e,s=2*i-o;this.r=Rm(s,o,t+1/3),this.g=Rm(s,o,t),this.b=Rm(s,o,t-1/3)}return Er.toWorkingColorSpace(this,n),this}setStyle(t,e=Wo){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const s=n[1],a=n[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,Er.toWorkingColorSpace(this,e),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,Er.toWorkingColorSpace(this,e),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(o[1])/360,u=parseFloat(o[2])/100,c=parseFloat(o[3])/100;return i(o[4]),this.setHSL(l,u,c,e)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=n[1],s=o.length;if(s===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,Er.toWorkingColorSpace(this,e),this;if(s===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,Er.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=Wo){const i=Xb[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ka(t.r),this.g=ka(t.g),this.b=ka(t.b),this}copyLinearToSRGB(t){return this.r=Gp(t.r),this.g=Gp(t.g),this.b=Gp(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Wo){return Er.fromWorkingColorSpace(Ld(this,Ei),t),An(Ei.r*255,0,255)<<16^An(Ei.g*255,0,255)<<8^An(Ei.b*255,0,255)<<0}getHexString(t=Wo){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Ia){Er.fromWorkingColorSpace(Ld(this,Ei),e);const i=Ei.r,n=Ei.g,o=Ei.b,s=Math.max(i,n,o),a=Math.min(i,n,o);let l,u;const c=(a+s)/2;if(a===s)l=0,u=0;else{const h=s-a;switch(u=c<=.5?h/(s+a):h/(2-s-a),s){case i:l=(n-o)/h+(n<o?6:0);break;case n:l=(o-i)/h+2;break;case o:l=(i-n)/h+4;break}l/=6}return t.h=l,t.s=u,t.l=c,t}getRGB(t,e=Ia){return Er.fromWorkingColorSpace(Ld(this,Ei),e),t.r=Ei.r,t.g=Ei.g,t.b=Ei.b,t}getStyle(t=Wo){return Er.fromWorkingColorSpace(Ld(this,Ei),t),t!==Wo?`color(${t} ${Ei.r} ${Ei.g} ${Ei.b})`:`rgb(${Ei.r*255|0},${Ei.g*255|0},${Ei.b*255|0})`}offsetHSL(t,e,i){return this.getHSL(xr),xr.h+=t,xr.s+=e,xr.l+=i,this.setHSL(xr.h,xr.s,xr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(xr),t.getHSL(Dd);const i=th(xr.h,Dd.h,e),n=th(xr.s,Dd.s,e),o=th(xr.l,Dd.l,e);return this.setHSL(i,n,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}ti.NAMES=Xb;let Sl;class qb{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Sl===void 0&&(Sl=Rh("canvas")),Sl.width=t.width,Sl.height=t.height;const i=Sl.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Sl}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Rh("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height),o=n.data;for(let s=0;s<o.length;s++)o[s]=ka(o[s]/255)*255;return i.putImageData(n,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(ka(e[i]/255)*255):e[i]=ka(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Zb{constructor(t=null){this.isSource=!0,this.uuid=$u(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(n!==null){let o;if(Array.isArray(n)){o=[];for(let s=0,a=n.length;s<a;s++)n[s].isDataTexture?o.push(bm(n[s].image)):o.push(bm(n[s]))}else o=bm(n);i.url=o}return e||(t.images[this.uuid]=i),i}}function bm(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?qb.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let s2=0;class vr extends ju{constructor(t=vr.DEFAULT_IMAGE,e=vr.DEFAULT_MAPPING,i=Dr,n=Dr,o=lr,s=wg,a=Lr,l=qa,u=1,c=Za){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:s2++}),this.uuid=$u(),this.name="",this.source=new Zb(t),this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==$b)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ty:t.x=t.x-Math.floor(t.x);break;case Dr:t.x=t.x<0?0:1;break;case Py:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Ty:t.y=t.y-Math.floor(t.y);break;case Dr:t.y=t.y<0?0:1;break;case Py:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}}vr.DEFAULT_IMAGE=null;vr.DEFAULT_MAPPING=$b;class $i{constructor(t=0,e=0,i=0,n=1){$i.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12]*o,this.y=s[1]*e+s[5]*i+s[9]*n+s[13]*o,this.z=s[2]*e+s[6]*i+s[10]*n+s[14]*o,this.w=s[3]*e+s[7]*i+s[11]*n+s[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,o;const l=t.elements,u=l[0],c=l[4],h=l[8],d=l[1],p=l[5],f=l[9],m=l[2],g=l[6],y=l[10];if(Math.abs(c-d)<.01&&Math.abs(h-m)<.01&&Math.abs(f-g)<.01){if(Math.abs(c+d)<.1&&Math.abs(h+m)<.1&&Math.abs(f+g)<.1&&Math.abs(u+p+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const w=(u+1)/2,S=(p+1)/2,E=(y+1)/2,M=(c+d)/4,L=(h+m)/4,x=(f+g)/4;return w>S&&w>E?w<.01?(i=0,n=.707106781,o=.707106781):(i=Math.sqrt(w),n=M/i,o=L/i):S>E?S<.01?(i=.707106781,n=0,o=.707106781):(n=Math.sqrt(S),i=M/n,o=x/n):E<.01?(i=.707106781,n=.707106781,o=0):(o=Math.sqrt(E),i=L/o,n=x/o),this.set(i,n,o,e),this}let C=Math.sqrt((g-f)*(g-f)+(h-m)*(h-m)+(d-c)*(d-c));return Math.abs(C)<.001&&(C=1),this.x=(g-f)/C,this.y=(h-m)/C,this.z=(d-c)/C,this.w=Math.acos((u+p+y-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ja extends ju{constructor(t=1,e=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new $i(0,0,t,e),this.scissorTest=!1,this.viewport=new $i(0,0,t,e);const n={width:t,height:e,depth:1};this.texture=new vr(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:lr,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Zb(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jb extends vr{constructor(t=null,e=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=On,this.minFilter=On,this.wrapR=Dr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class a2 extends vr{constructor(t=null,e=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=On,this.minFilter=On,this.wrapR=Dr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $h{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,o,s,a){let l=i[n+0],u=i[n+1],c=i[n+2],h=i[n+3];const d=o[s+0],p=o[s+1],f=o[s+2],m=o[s+3];if(a===0){t[e+0]=l,t[e+1]=u,t[e+2]=c,t[e+3]=h;return}if(a===1){t[e+0]=d,t[e+1]=p,t[e+2]=f,t[e+3]=m;return}if(h!==m||l!==d||u!==p||c!==f){let g=1-a;const y=l*d+u*p+c*f+h*m,C=y>=0?1:-1,w=1-y*y;if(w>Number.EPSILON){const E=Math.sqrt(w),M=Math.atan2(E,y*C);g=Math.sin(g*M)/E,a=Math.sin(a*M)/E}const S=a*C;if(l=l*g+d*S,u=u*g+p*S,c=c*g+f*S,h=h*g+m*S,g===1-a){const E=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=E,u*=E,c*=E,h*=E}}t[e]=l,t[e+1]=u,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,n,o,s){const a=i[n],l=i[n+1],u=i[n+2],c=i[n+3],h=o[s],d=o[s+1],p=o[s+2],f=o[s+3];return t[e]=a*f+c*h+l*p-u*d,t[e+1]=l*f+c*d+u*h-a*p,t[e+2]=u*f+c*p+a*d-l*h,t[e+3]=c*f-a*h-l*d-u*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const i=t._x,n=t._y,o=t._z,s=t._order,a=Math.cos,l=Math.sin,u=a(i/2),c=a(n/2),h=a(o/2),d=l(i/2),p=l(n/2),f=l(o/2);switch(s){case"XYZ":this._x=d*c*h+u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h-d*p*f;break;case"YXZ":this._x=d*c*h+u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h+d*p*f;break;case"ZXY":this._x=d*c*h-u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h-d*p*f;break;case"ZYX":this._x=d*c*h-u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h+d*p*f;break;case"YZX":this._x=d*c*h+u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h-d*p*f;break;case"XZY":this._x=d*c*h-u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h+d*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],o=e[8],s=e[1],a=e[5],l=e[9],u=e[2],c=e[6],h=e[10],d=i+a+h;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(c-l)*p,this._y=(o-u)*p,this._z=(s-n)*p}else if(i>a&&i>h){const p=2*Math.sqrt(1+i-a-h);this._w=(c-l)/p,this._x=.25*p,this._y=(n+s)/p,this._z=(o+u)/p}else if(a>h){const p=2*Math.sqrt(1+a-i-h);this._w=(o-u)/p,this._x=(n+s)/p,this._y=.25*p,this._z=(l+c)/p}else{const p=2*Math.sqrt(1+h-i-a);this._w=(s-n)/p,this._x=(o+u)/p,this._y=(l+c)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(An(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,o=t._z,s=t._w,a=e._x,l=e._y,u=e._z,c=e._w;return this._x=i*c+s*a+n*u-o*l,this._y=n*c+s*l+o*a-i*u,this._z=o*c+s*u+i*l-n*a,this._w=s*c-i*a-n*l-o*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,n=this._y,o=this._z,s=this._w;let a=s*t._w+i*t._x+n*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=n,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-e;return this._w=p*s+e*this._w,this._x=p*i+e*this._x,this._y=p*n+e*this._y,this._z=p*o+e*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-e)*c)/u,d=Math.sin(e*c)/u;return this._w=s*h+this._w*d,this._x=i*h+this._x*d,this._y=n*h+this._y*d,this._z=o*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(o),i*Math.cos(o),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(t=0,e=0,i=0){Z.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(TS.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(TS.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*n,this.y=o[1]*e+o[4]*i+o[7]*n,this.z=o[2]*e+o[5]*i+o[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,o=t.elements,s=1/(o[3]*e+o[7]*i+o[11]*n+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*n+o[12])*s,this.y=(o[1]*e+o[5]*i+o[9]*n+o[13])*s,this.z=(o[2]*e+o[6]*i+o[10]*n+o[14])*s,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,o=t.x,s=t.y,a=t.z,l=t.w,u=l*e+s*n-a*i,c=l*i+a*e-o*n,h=l*n+o*i-s*e,d=-o*e-s*i-a*n;return this.x=u*l+d*-o+c*-a-h*-s,this.y=c*l+d*-s+h*-o-u*-a,this.z=h*l+d*-a+u*-s-c*-o,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n,this.y=o[1]*e+o[5]*i+o[9]*n,this.z=o[2]*e+o[6]*i+o[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,o=t.z,s=e.x,a=e.y,l=e.z;return this.x=n*l-o*a,this.y=o*s-i*l,this.z=i*a-n*s,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Mm.copy(this).projectOnVector(t),this.sub(Mm)}reflect(t){return this.sub(Mm.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(An(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Mm=new Z,TS=new $h;class Yh{constructor(t=new Z(1/0,1/0,1/0),e=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,n=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,u=t.length;l<u;l+=3){const c=t[l],h=t[l+1],d=t[l+2];c<e&&(e=c),h<i&&(i=h),d<n&&(n=d),c>o&&(o=c),h>s&&(s=h),d>a&&(a=d)}return this.min.set(e,i,n),this.max.set(o,s,a),this}setFromBufferAttribute(t){let e=1/0,i=1/0,n=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,u=t.count;l<u;l++){const c=t.getX(l),h=t.getY(l),d=t.getZ(l);c<e&&(e=c),h<i&&(i=h),d<n&&(n=d),c>o&&(o=c),h>s&&(s=h),d>a&&(a=d)}return this.min.set(e,i,n),this.max.set(o,s,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=ha.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0)if(e&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let s=0,a=o.count;s<a;s++)ha.fromBufferAttribute(o,s).applyMatrix4(t.matrixWorld),this.expandByPoint(ha)}else i.boundingBox===null&&i.computeBoundingBox(),Tm.copy(i.boundingBox),Tm.applyMatrix4(t.matrixWorld),this.union(Tm);const n=t.children;for(let o=0,s=n.length;o<s;o++)this.expandByObject(n[o],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ha),ha.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(uc),Id.subVectors(this.max,uc),El.subVectors(t.a,uc),xl.subVectors(t.b,uc),Rl.subVectors(t.c,uc),cs.subVectors(xl,El),hs.subVectors(Rl,xl),da.subVectors(El,Rl);let e=[0,-cs.z,cs.y,0,-hs.z,hs.y,0,-da.z,da.y,cs.z,0,-cs.x,hs.z,0,-hs.x,da.z,0,-da.x,-cs.y,cs.x,0,-hs.y,hs.x,0,-da.y,da.x,0];return!Pm(e,El,xl,Rl,Id)||(e=[1,0,0,0,1,0,0,0,1],!Pm(e,El,xl,Rl,Id))?!1:(Fd.crossVectors(cs,hs),e=[Fd.x,Fd.y,Fd.z],Pm(e,El,xl,Rl,Id))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return ha.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(ha).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(To[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),To[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),To[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),To[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),To[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),To[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),To[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),To[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(To),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const To=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],ha=new Z,Tm=new Yh,El=new Z,xl=new Z,Rl=new Z,cs=new Z,hs=new Z,da=new Z,uc=new Z,Id=new Z,Fd=new Z,pa=new Z;function Pm(r,t,e,i,n){for(let o=0,s=r.length-3;o<=s;o+=3){pa.fromArray(r,o);const a=n.x*Math.abs(pa.x)+n.y*Math.abs(pa.y)+n.z*Math.abs(pa.z),l=t.dot(pa),u=e.dot(pa),c=i.dot(pa);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const l2=new Yh,cc=new Z,Om=new Z;class Sg{constructor(t=new Z,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):l2.setFromPoints(t).getCenter(i);let n=0;for(let o=0,s=t.length;o<s;o++)n=Math.max(n,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;cc.subVectors(t,this.center);const e=cc.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),n=(i-this.radius)*.5;this.center.addScaledVector(cc,n/i),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Om.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(cc.copy(t.center).add(Om)),this.expandByPoint(cc.copy(t.center).sub(Om))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Po=new Z,Am=new Z,Nd=new Z,ds=new Z,Dm=new Z,Gd=new Z,Lm=new Z;class CC{constructor(t=new Z,e=new Z(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Po)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Po.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Po.copy(this.direction).multiplyScalar(e).add(this.origin),Po.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){Am.copy(t).add(e).multiplyScalar(.5),Nd.copy(e).sub(t).normalize(),ds.copy(this.origin).sub(Am);const o=t.distanceTo(e)*.5,s=-this.direction.dot(Nd),a=ds.dot(this.direction),l=-ds.dot(Nd),u=ds.lengthSq(),c=Math.abs(1-s*s);let h,d,p,f;if(c>0)if(h=s*l-a,d=s*a-l,f=o*c,h>=0)if(d>=-f)if(d<=f){const m=1/c;h*=m,d*=m,p=h*(h+s*d+2*a)+d*(s*h+d+2*l)+u}else d=o,h=Math.max(0,-(s*d+a)),p=-h*h+d*(d+2*l)+u;else d=-o,h=Math.max(0,-(s*d+a)),p=-h*h+d*(d+2*l)+u;else d<=-f?(h=Math.max(0,-(-s*o+a)),d=h>0?-o:Math.min(Math.max(-o,-l),o),p=-h*h+d*(d+2*l)+u):d<=f?(h=0,d=Math.min(Math.max(-o,-l),o),p=d*(d+2*l)+u):(h=Math.max(0,-(s*o+a)),d=h>0?o:Math.min(Math.max(-o,-l),o),p=-h*h+d*(d+2*l)+u);else d=s>0?-o:o,h=Math.max(0,-(s*d+a)),p=-h*h+d*(d+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),n&&n.copy(Nd).multiplyScalar(d).add(Am),p}intersectSphere(t,e){Po.subVectors(t.center,this.origin);const i=Po.dot(this.direction),n=Po.dot(Po)-i*i,o=t.radius*t.radius;if(n>o)return null;const s=Math.sqrt(o-n),a=i-s,l=i+s;return a<0&&l<0?null:a<0?this.at(l,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,o,s,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return u>=0?(i=(t.min.x-d.x)*u,n=(t.max.x-d.x)*u):(i=(t.max.x-d.x)*u,n=(t.min.x-d.x)*u),c>=0?(o=(t.min.y-d.y)*c,s=(t.max.y-d.y)*c):(o=(t.max.y-d.y)*c,s=(t.min.y-d.y)*c),i>s||o>n||((o>i||isNaN(i))&&(i=o),(s<n||isNaN(n))&&(n=s),h>=0?(a=(t.min.z-d.z)*h,l=(t.max.z-d.z)*h):(a=(t.max.z-d.z)*h,l=(t.min.z-d.z)*h),i>l||a>n)||((a>i||i!==i)&&(i=a),(l<n||n!==n)&&(n=l),n<0)?null:this.at(i>=0?i:n,e)}intersectsBox(t){return this.intersectBox(t,Po)!==null}intersectTriangle(t,e,i,n,o){Dm.subVectors(e,t),Gd.subVectors(i,t),Lm.crossVectors(Dm,Gd);let s=this.direction.dot(Lm),a;if(s>0){if(n)return null;a=1}else if(s<0)a=-1,s=-s;else return null;ds.subVectors(this.origin,t);const l=a*this.direction.dot(Gd.crossVectors(ds,Gd));if(l<0)return null;const u=a*this.direction.dot(Dm.cross(ds));if(u<0||l+u>s)return null;const c=-a*ds.dot(Lm);return c<0?null:this.at(c/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Wi{constructor(){Wi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,o,s,a,l,u,c,h,d,p,f,m,g){const y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=n,y[1]=o,y[5]=s,y[9]=a,y[13]=l,y[2]=u,y[6]=c,y[10]=h,y[14]=d,y[3]=p,y[7]=f,y[11]=m,y[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Wi().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/bl.setFromMatrixColumn(t,0).length(),o=1/bl.setFromMatrixColumn(t,1).length(),s=1/bl.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,n=t.y,o=t.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(n),u=Math.sin(n),c=Math.cos(o),h=Math.sin(o);if(t.order==="XYZ"){const d=s*c,p=s*h,f=a*c,m=a*h;e[0]=l*c,e[4]=-l*h,e[8]=u,e[1]=p+f*u,e[5]=d-m*u,e[9]=-a*l,e[2]=m-d*u,e[6]=f+p*u,e[10]=s*l}else if(t.order==="YXZ"){const d=l*c,p=l*h,f=u*c,m=u*h;e[0]=d+m*a,e[4]=f*a-p,e[8]=s*u,e[1]=s*h,e[5]=s*c,e[9]=-a,e[2]=p*a-f,e[6]=m+d*a,e[10]=s*l}else if(t.order==="ZXY"){const d=l*c,p=l*h,f=u*c,m=u*h;e[0]=d-m*a,e[4]=-s*h,e[8]=f+p*a,e[1]=p+f*a,e[5]=s*c,e[9]=m-d*a,e[2]=-s*u,e[6]=a,e[10]=s*l}else if(t.order==="ZYX"){const d=s*c,p=s*h,f=a*c,m=a*h;e[0]=l*c,e[4]=f*u-p,e[8]=d*u+m,e[1]=l*h,e[5]=m*u+d,e[9]=p*u-f,e[2]=-u,e[6]=a*l,e[10]=s*l}else if(t.order==="YZX"){const d=s*l,p=s*u,f=a*l,m=a*u;e[0]=l*c,e[4]=m-d*h,e[8]=f*h+p,e[1]=h,e[5]=s*c,e[9]=-a*c,e[2]=-u*c,e[6]=p*h+f,e[10]=d-m*h}else if(t.order==="XZY"){const d=s*l,p=s*u,f=a*l,m=a*u;e[0]=l*c,e[4]=-h,e[8]=u*c,e[1]=d*h+m,e[5]=s*c,e[9]=p*h-f,e[2]=f*h-p,e[6]=a*c,e[10]=m*h+d}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(u2,t,c2)}lookAt(t,e,i){const n=this.elements;return Hn.subVectors(t,e),Hn.lengthSq()===0&&(Hn.z=1),Hn.normalize(),ps.crossVectors(i,Hn),ps.lengthSq()===0&&(Math.abs(i.z)===1?Hn.x+=1e-4:Hn.z+=1e-4,Hn.normalize(),ps.crossVectors(i,Hn)),ps.normalize(),Hd.crossVectors(Hn,ps),n[0]=ps.x,n[4]=Hd.x,n[8]=Hn.x,n[1]=ps.y,n[5]=Hd.y,n[9]=Hn.y,n[2]=ps.z,n[6]=Hd.z,n[10]=Hn.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],c=i[1],h=i[5],d=i[9],p=i[13],f=i[2],m=i[6],g=i[10],y=i[14],C=i[3],w=i[7],S=i[11],E=i[15],M=n[0],L=n[4],x=n[8],T=n[12],N=n[1],K=n[5],Q=n[9],z=n[13],V=n[2],W=n[6],q=n[10],Y=n[14],X=n[3],B=n[7],j=n[11],pt=n[15];return o[0]=s*M+a*N+l*V+u*X,o[4]=s*L+a*K+l*W+u*B,o[8]=s*x+a*Q+l*q+u*j,o[12]=s*T+a*z+l*Y+u*pt,o[1]=c*M+h*N+d*V+p*X,o[5]=c*L+h*K+d*W+p*B,o[9]=c*x+h*Q+d*q+p*j,o[13]=c*T+h*z+d*Y+p*pt,o[2]=f*M+m*N+g*V+y*X,o[6]=f*L+m*K+g*W+y*B,o[10]=f*x+m*Q+g*q+y*j,o[14]=f*T+m*z+g*Y+y*pt,o[3]=C*M+w*N+S*V+E*X,o[7]=C*L+w*K+S*W+E*B,o[11]=C*x+w*Q+S*q+E*j,o[15]=C*T+w*z+S*Y+E*pt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],o=t[12],s=t[1],a=t[5],l=t[9],u=t[13],c=t[2],h=t[6],d=t[10],p=t[14],f=t[3],m=t[7],g=t[11],y=t[15];return f*(+o*l*h-n*u*h-o*a*d+i*u*d+n*a*p-i*l*p)+m*(+e*l*p-e*u*d+o*s*d-n*s*p+n*u*c-o*l*c)+g*(+e*u*h-e*a*p-o*s*h+i*s*p+o*a*c-i*u*c)+y*(-n*a*c-e*l*h+e*a*d+n*s*h-i*s*d+i*l*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],C=h*g*u-m*d*u+m*l*p-a*g*p-h*l*y+a*d*y,w=f*d*u-c*g*u-f*l*p+s*g*p+c*l*y-s*d*y,S=c*m*u-f*h*u+f*a*p-s*m*p-c*a*y+s*h*y,E=f*h*l-c*m*l-f*a*d+s*m*d+c*a*g-s*h*g,M=e*C+i*w+n*S+o*E;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/M;return t[0]=C*L,t[1]=(m*d*o-h*g*o-m*n*p+i*g*p+h*n*y-i*d*y)*L,t[2]=(a*g*o-m*l*o+m*n*u-i*g*u-a*n*y+i*l*y)*L,t[3]=(h*l*o-a*d*o-h*n*u+i*d*u+a*n*p-i*l*p)*L,t[4]=w*L,t[5]=(c*g*o-f*d*o+f*n*p-e*g*p-c*n*y+e*d*y)*L,t[6]=(f*l*o-s*g*o-f*n*u+e*g*u+s*n*y-e*l*y)*L,t[7]=(s*d*o-c*l*o+c*n*u-e*d*u-s*n*p+e*l*p)*L,t[8]=S*L,t[9]=(f*h*o-c*m*o-f*i*p+e*m*p+c*i*y-e*h*y)*L,t[10]=(s*m*o-f*a*o+f*i*u-e*m*u-s*i*y+e*a*y)*L,t[11]=(c*a*o-s*h*o-c*i*u+e*h*u+s*i*p-e*a*p)*L,t[12]=E*L,t[13]=(c*m*n-f*h*n+f*i*d-e*m*d-c*i*g+e*h*g)*L,t[14]=(f*a*n-s*m*n-f*i*l+e*m*l+s*i*g-e*a*g)*L,t[15]=(s*h*n-c*a*n+c*i*l-e*h*l-s*i*d+e*a*d)*L,this}scale(t){const e=this.elements,i=t.x,n=t.y,o=t.z;return e[0]*=i,e[4]*=n,e[8]*=o,e[1]*=i,e[5]*=n,e[9]*=o,e[2]*=i,e[6]*=n,e[10]*=o,e[3]*=i,e[7]*=n,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),o=1-i,s=t.x,a=t.y,l=t.z,u=o*s,c=o*a;return this.set(u*s+i,u*a-n*l,u*l+n*a,0,u*a+n*l,c*a+i,c*l-n*s,0,u*l-n*a,c*l+n*s,o*l*l+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,o,s){return this.set(1,i,o,0,t,1,s,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,o=e._x,s=e._y,a=e._z,l=e._w,u=o+o,c=s+s,h=a+a,d=o*u,p=o*c,f=o*h,m=s*c,g=s*h,y=a*h,C=l*u,w=l*c,S=l*h,E=i.x,M=i.y,L=i.z;return n[0]=(1-(m+y))*E,n[1]=(p+S)*E,n[2]=(f-w)*E,n[3]=0,n[4]=(p-S)*M,n[5]=(1-(d+y))*M,n[6]=(g+C)*M,n[7]=0,n[8]=(f+w)*L,n[9]=(g-C)*L,n[10]=(1-(d+m))*L,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let o=bl.set(n[0],n[1],n[2]).length();const s=bl.set(n[4],n[5],n[6]).length(),a=bl.set(n[8],n[9],n[10]).length();this.determinant()<0&&(o=-o),t.x=n[12],t.y=n[13],t.z=n[14],Rr.copy(this);const u=1/o,c=1/s,h=1/a;return Rr.elements[0]*=u,Rr.elements[1]*=u,Rr.elements[2]*=u,Rr.elements[4]*=c,Rr.elements[5]*=c,Rr.elements[6]*=c,Rr.elements[8]*=h,Rr.elements[9]*=h,Rr.elements[10]*=h,e.setFromRotationMatrix(Rr),i.x=o,i.y=s,i.z=a,this}makePerspective(t,e,i,n,o,s){const a=this.elements,l=2*o/(e-t),u=2*o/(i-n),c=(e+t)/(e-t),h=(i+n)/(i-n),d=-(s+o)/(s-o),p=-2*s*o/(s-o);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,n,o,s){const a=this.elements,l=1/(e-t),u=1/(i-n),c=1/(s-o),h=(e+t)*l,d=(i+n)*u,p=(s+o)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const bl=new Z,Rr=new Wi,u2=new Z(0,0,0),c2=new Z(1,1,1),ps=new Z,Hd=new Z,Hn=new Z,PS=new Wi,OS=new $h;class Kh{constructor(t=0,e=0,i=0,n=Kh.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const n=t.elements,o=n[0],s=n[4],a=n[8],l=n[1],u=n[5],c=n[9],h=n[2],d=n[6],p=n[10];switch(e){case"XYZ":this._y=Math.asin(An(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-An(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(An(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-An(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(An(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-An(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return PS.makeRotationFromQuaternion(t),this.setFromRotationMatrix(PS,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return OS.setFromEuler(this),this.setFromQuaternion(OS,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Kh.DefaultOrder="XYZ";Kh.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class wC{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let h2=0;const AS=new Z,Ml=new $h,Oo=new Wi,Wd=new Z,hc=new Z,d2=new Z,p2=new $h,DS=new Z(1,0,0),LS=new Z(0,1,0),IS=new Z(0,0,1),f2={type:"added"},FS={type:"removed"};class bi extends ju{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:h2++}),this.uuid=$u(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bi.DefaultUp.clone();const t=new Z,e=new Kh,i=new $h,n=new Z(1,1,1);function o(){i.setFromEuler(e,!1)}function s(){e.setFromQuaternion(i,void 0,!1)}e._onChange(o),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Wi},normalMatrix:{value:new dr}}),this.matrix=new Wi,this.matrixWorld=new Wi,this.matrixAutoUpdate=bi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=bi.DefaultMatrixWorldAutoUpdate,this.layers=new wC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ml.setFromAxisAngle(t,e),this.quaternion.multiply(Ml),this}rotateOnWorldAxis(t,e){return Ml.setFromAxisAngle(t,e),this.quaternion.premultiply(Ml),this}rotateX(t){return this.rotateOnAxis(DS,t)}rotateY(t){return this.rotateOnAxis(LS,t)}rotateZ(t){return this.rotateOnAxis(IS,t)}translateOnAxis(t,e){return AS.copy(t).applyQuaternion(this.quaternion),this.position.add(AS.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(DS,t)}translateY(t){return this.translateOnAxis(LS,t)}translateZ(t){return this.translateOnAxis(IS,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Oo.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?Wd.copy(t):Wd.set(t,e,i);const n=this.parent;this.updateWorldMatrix(!0,!1),hc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Oo.lookAt(hc,Wd,this.up):Oo.lookAt(Wd,hc,this.up),this.quaternion.setFromRotationMatrix(Oo),n&&(Oo.extractRotation(n.matrixWorld),Ml.setFromRotationMatrix(Oo),this.quaternion.premultiply(Ml.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(f2)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(FS)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(FS)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Oo.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Oo.multiply(t.parent.matrixWorld)),t.applyMatrix4(Oo),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const s=this.children[i].getObjectByProperty(t,e);if(s!==void 0)return s}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hc,t,d2),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hc,p2,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++){const o=e[i];(o.matrixWorldAutoUpdate===!0||t===!0)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const n=this.children;for(let o=0,s=n.length;o<s;o++){const a=n[o];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=o(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];o(t.shapes,h)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(o(t.materials,this.material[l]));n.material=a}else n.material=o(t.materials,this.material);if(this.children.length>0){n.children=[];for(let a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];n.animations.push(o(t.animations,l))}}if(e){const a=s(t.geometries),l=s(t.materials),u=s(t.textures),c=s(t.images),h=s(t.shapes),d=s(t.skeletons),p=s(t.animations),f=s(t.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),c.length>0&&(i.images=c),h.length>0&&(i.shapes=h),d.length>0&&(i.skeletons=d),p.length>0&&(i.animations=p),f.length>0&&(i.nodes=f)}return i.object=n,i;function s(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const n=t.children[i];this.add(n.clone())}return this}}bi.DefaultUp=new Z(0,1,0);bi.DefaultMatrixAutoUpdate=!0;bi.DefaultMatrixWorldAutoUpdate=!0;const br=new Z,Ao=new Z,Im=new Z,Do=new Z,Tl=new Z,Pl=new Z,NS=new Z,Fm=new Z,Nm=new Z,Gm=new Z;class ao{constructor(t=new Z,e=new Z,i=new Z){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),br.subVectors(t,e),n.cross(br);const o=n.lengthSq();return o>0?n.multiplyScalar(1/Math.sqrt(o)):n.set(0,0,0)}static getBarycoord(t,e,i,n,o){br.subVectors(n,e),Ao.subVectors(i,e),Im.subVectors(t,e);const s=br.dot(br),a=br.dot(Ao),l=br.dot(Im),u=Ao.dot(Ao),c=Ao.dot(Im),h=s*u-a*a;if(h===0)return o.set(-2,-1,-1);const d=1/h,p=(u*l-a*c)*d,f=(s*c-a*l)*d;return o.set(1-p-f,f,p)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,Do),Do.x>=0&&Do.y>=0&&Do.x+Do.y<=1}static getUV(t,e,i,n,o,s,a,l){return this.getBarycoord(t,e,i,n,Do),l.set(0,0),l.addScaledVector(o,Do.x),l.addScaledVector(s,Do.y),l.addScaledVector(a,Do.z),l}static isFrontFacing(t,e,i,n){return br.subVectors(i,e),Ao.subVectors(t,e),br.cross(Ao).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return br.subVectors(this.c,this.b),Ao.subVectors(this.a,this.b),br.cross(Ao).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ao.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ao.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,o){return ao.getUV(t,this.a,this.b,this.c,e,i,n,o)}containsPoint(t){return ao.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ao.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,n=this.b,o=this.c;let s,a;Tl.subVectors(n,i),Pl.subVectors(o,i),Fm.subVectors(t,i);const l=Tl.dot(Fm),u=Pl.dot(Fm);if(l<=0&&u<=0)return e.copy(i);Nm.subVectors(t,n);const c=Tl.dot(Nm),h=Pl.dot(Nm);if(c>=0&&h<=c)return e.copy(n);const d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return s=l/(l-c),e.copy(i).addScaledVector(Tl,s);Gm.subVectors(t,o);const p=Tl.dot(Gm),f=Pl.dot(Gm);if(f>=0&&p<=f)return e.copy(o);const m=p*u-l*f;if(m<=0&&u>=0&&f<=0)return a=u/(u-f),e.copy(i).addScaledVector(Pl,a);const g=c*f-p*h;if(g<=0&&h-c>=0&&p-f>=0)return NS.subVectors(o,n),a=(h-c)/(h-c+(p-f)),e.copy(n).addScaledVector(NS,a);const y=1/(g+m+d);return s=m*y,a=d*y,e.copy(i).addScaledVector(Tl,s).addScaledVector(Pl,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let g2=0;class Xh extends ju{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:g2++}),this.uuid=$u(),this.name="",this.type="Material",this.blending=hu,this.side=wu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ub,this.blendDst=zb,this.blendEquation=Kl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ry,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jG,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Em,this.stencilZFail=Em,this.stencilZPass=Em,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const n=this[e];if(n===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==hu&&(i.blending=this.blending),this.side!==wu&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function n(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(e){const o=n(t.textures),s=n(t.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const n=e.length;i=new Array(n);for(let o=0;o!==n;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Ar extends Xh{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ti(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ci=new Z,Vd=new Ye;class fo{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i===!0,this.usage=RS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,o=this.itemSize;n<o;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Vd.fromBufferAttribute(this,e),Vd.applyMatrix3(t),this.setXY(e,Vd.x,Vd.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Ci.fromBufferAttribute(this,e),Ci.applyMatrix3(t),this.setXYZ(e,Ci.x,Ci.y,Ci.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Ci.fromBufferAttribute(this,e),Ci.applyMatrix4(t),this.setXYZ(e,Ci.x,Ci.y,Ci.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Ci.fromBufferAttribute(this,e),Ci.applyNormalMatrix(t),this.setXYZ(e,Ci.x,Ci.y,Ci.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Ci.fromBufferAttribute(this,e),Ci.transformDirection(t),this.setXYZ(e,Ci.x,Ci.y,Ci.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Vc(e,this.array)),e}setX(t,e){return this.normalized&&(e=bn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Vc(e,this.array)),e}setY(t,e){return this.normalized&&(e=bn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Vc(e,this.array)),e}setZ(t,e){return this.normalized&&(e=bn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Vc(e,this.array)),e}setW(t,e){return this.normalized&&(e=bn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=bn(e,this.array),i=bn(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=bn(e,this.array),i=bn(i,this.array),n=bn(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,o){return t*=this.itemSize,this.normalized&&(e=bn(e,this.array),i=bn(i,this.array),n=bn(n,this.array),o=bn(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==RS&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Qb extends fo{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class tM extends fo{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class sn extends fo{constructor(t,e,i){super(new Float32Array(t),e,i)}}let m2=0;const tr=new Wi,Hm=new bi,Ol=new Z,Wn=new Yh,dc=new Yh,Ai=new Z;class Qn extends ju{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:m2++}),this.uuid=$u(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Kb(t)?tM:Qb)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new dr().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(t),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return tr.makeRotationFromQuaternion(t),this.applyMatrix4(tr),this}rotateX(t){return tr.makeRotationX(t),this.applyMatrix4(tr),this}rotateY(t){return tr.makeRotationY(t),this.applyMatrix4(tr),this}rotateZ(t){return tr.makeRotationZ(t),this.applyMatrix4(tr),this}translate(t,e,i){return tr.makeTranslation(t,e,i),this.applyMatrix4(tr),this}scale(t,e,i){return tr.makeScale(t,e,i),this.applyMatrix4(tr),this}lookAt(t){return Hm.lookAt(t),Hm.updateMatrix(),this.applyMatrix4(Hm.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ol).negate(),this.translate(Ol.x,Ol.y,Ol.z),this}setFromPoints(t){const e=[];for(let i=0,n=t.length;i<n;i++){const o=t[i];e.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new sn(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yh);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,n=e.length;i<n;i++){const o=e[i];Wn.setFromBufferAttribute(o),this.morphTargetsRelative?(Ai.addVectors(this.boundingBox.min,Wn.min),this.boundingBox.expandByPoint(Ai),Ai.addVectors(this.boundingBox.max,Wn.max),this.boundingBox.expandByPoint(Ai)):(this.boundingBox.expandByPoint(Wn.min),this.boundingBox.expandByPoint(Wn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sg);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Z,1/0);return}if(t){const i=this.boundingSphere.center;if(Wn.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++){const a=e[o];dc.setFromBufferAttribute(a),this.morphTargetsRelative?(Ai.addVectors(Wn.min,dc.min),Wn.expandByPoint(Ai),Ai.addVectors(Wn.max,dc.max),Wn.expandByPoint(Ai)):(Wn.expandByPoint(dc.min),Wn.expandByPoint(dc.max))}Wn.getCenter(i);let n=0;for(let o=0,s=t.count;o<s;o++)Ai.fromBufferAttribute(t,o),n=Math.max(n,i.distanceToSquared(Ai));if(e)for(let o=0,s=e.length;o<s;o++){const a=e[o],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Ai.fromBufferAttribute(a,u),l&&(Ol.fromBufferAttribute(t,u),Ai.add(Ol)),n=Math.max(n,i.distanceToSquared(Ai))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.array,n=e.position.array,o=e.normal.array,s=e.uv.array,a=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fo(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let N=0;N<a;N++)u[N]=new Z,c[N]=new Z;const h=new Z,d=new Z,p=new Z,f=new Ye,m=new Ye,g=new Ye,y=new Z,C=new Z;function w(N,K,Q){h.fromArray(n,N*3),d.fromArray(n,K*3),p.fromArray(n,Q*3),f.fromArray(s,N*2),m.fromArray(s,K*2),g.fromArray(s,Q*2),d.sub(h),p.sub(h),m.sub(f),g.sub(f);const z=1/(m.x*g.y-g.x*m.y);!isFinite(z)||(y.copy(d).multiplyScalar(g.y).addScaledVector(p,-m.y).multiplyScalar(z),C.copy(p).multiplyScalar(m.x).addScaledVector(d,-g.x).multiplyScalar(z),u[N].add(y),u[K].add(y),u[Q].add(y),c[N].add(C),c[K].add(C),c[Q].add(C))}let S=this.groups;S.length===0&&(S=[{start:0,count:i.length}]);for(let N=0,K=S.length;N<K;++N){const Q=S[N],z=Q.start,V=Q.count;for(let W=z,q=z+V;W<q;W+=3)w(i[W+0],i[W+1],i[W+2])}const E=new Z,M=new Z,L=new Z,x=new Z;function T(N){L.fromArray(o,N*3),x.copy(L);const K=u[N];E.copy(K),E.sub(L.multiplyScalar(L.dot(K))).normalize(),M.crossVectors(x,K);const z=M.dot(c[N])<0?-1:1;l[N*4]=E.x,l[N*4+1]=E.y,l[N*4+2]=E.z,l[N*4+3]=z}for(let N=0,K=S.length;N<K;++N){const Q=S[N],z=Q.start,V=Q.count;for(let W=z,q=z+V;W<q;W+=3)T(i[W+0]),T(i[W+1]),T(i[W+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new fo(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let d=0,p=i.count;d<p;d++)i.setXYZ(d,0,0,0);const n=new Z,o=new Z,s=new Z,a=new Z,l=new Z,u=new Z,c=new Z,h=new Z;if(t)for(let d=0,p=t.count;d<p;d+=3){const f=t.getX(d+0),m=t.getX(d+1),g=t.getX(d+2);n.fromBufferAttribute(e,f),o.fromBufferAttribute(e,m),s.fromBufferAttribute(e,g),c.subVectors(s,o),h.subVectors(n,o),c.cross(h),a.fromBufferAttribute(i,f),l.fromBufferAttribute(i,m),u.fromBufferAttribute(i,g),a.add(c),l.add(c),u.add(c),i.setXYZ(f,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,u.x,u.y,u.z)}else for(let d=0,p=e.count;d<p;d+=3)n.fromBufferAttribute(e,d+0),o.fromBufferAttribute(e,d+1),s.fromBufferAttribute(e,d+2),c.subVectors(s,o),h.subVectors(n,o),c.cross(h),i.setXYZ(d+0,c.x,c.y,c.z),i.setXYZ(d+1,c.x,c.y,c.z),i.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Ai.fromBufferAttribute(t,e),Ai.normalize(),t.setXYZ(e,Ai.x,Ai.y,Ai.z)}toNonIndexed(){function t(a,l){const u=a.array,c=a.itemSize,h=a.normalized,d=new u.constructor(l.length*c);let p=0,f=0;for(let m=0,g=l.length;m<g;m++){a.isInterleavedBufferAttribute?p=l[m]*a.data.stride+a.offset:p=l[m]*c;for(let y=0;y<c;y++)d[f++]=u[p++]}return new fo(d,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Qn,i=this.index.array,n=this.attributes;for(const a in n){const l=n[a],u=t(l,i);e.setAttribute(a,u)}const o=this.morphAttributes;for(const a in o){const l=[],u=o[a];for(let c=0,h=u.length;c<h;c++){const d=u[c],p=t(d,i);l.push(p)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const u=s[a];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const l in i){const u=i[l];t.data.attributes[l]=u.toJSON(t.data)}const n={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,d=u.length;h<d;h++){const p=u[h];c.push(p.toJSON(t.data))}c.length>0&&(n[l]=c,o=!0)}o&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const n=t.attributes;for(const u in n){const c=n[u];this.setAttribute(u,c.clone(e))}const o=t.morphAttributes;for(const u in o){const c=[],h=o[u];for(let d=0,p=h.length;d<p;d++)c.push(h[d].clone(e));this.morphAttributes[u]=c}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let u=0,c=s.length;u<c;u++){const h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const GS=new Wi,Al=new CC,Wm=new Sg,fs=new Z,gs=new Z,ms=new Z,Vm=new Z,km=new Z,Bm=new Z,kd=new Z,Bd=new Z,Ud=new Z,zd=new Ye,jd=new Ye,$d=new Ye,Um=new Z,Yd=new Z;class Fi extends bi{constructor(t=new Qn,e=new Ar){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=n.length;o<s;o++){const a=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}raycast(t,e){const i=this.geometry,n=this.material,o=this.matrixWorld;if(n===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Wm.copy(i.boundingSphere),Wm.applyMatrix4(o),t.ray.intersectsSphere(Wm)===!1)||(GS.copy(o).invert(),Al.copy(t.ray).applyMatrix4(GS),i.boundingBox!==null&&Al.intersectsBox(i.boundingBox)===!1))return;let s;const a=i.index,l=i.attributes.position,u=i.morphAttributes.position,c=i.morphTargetsRelative,h=i.attributes.uv,d=i.attributes.uv2,p=i.groups,f=i.drawRange;if(a!==null)if(Array.isArray(n))for(let m=0,g=p.length;m<g;m++){const y=p[m],C=n[y.materialIndex],w=Math.max(y.start,f.start),S=Math.min(a.count,Math.min(y.start+y.count,f.start+f.count));for(let E=w,M=S;E<M;E+=3){const L=a.getX(E),x=a.getX(E+1),T=a.getX(E+2);s=Kd(this,C,t,Al,l,u,c,h,d,L,x,T),s&&(s.faceIndex=Math.floor(E/3),s.face.materialIndex=y.materialIndex,e.push(s))}}else{const m=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);for(let y=m,C=g;y<C;y+=3){const w=a.getX(y),S=a.getX(y+1),E=a.getX(y+2);s=Kd(this,n,t,Al,l,u,c,h,d,w,S,E),s&&(s.faceIndex=Math.floor(y/3),e.push(s))}}else if(l!==void 0)if(Array.isArray(n))for(let m=0,g=p.length;m<g;m++){const y=p[m],C=n[y.materialIndex],w=Math.max(y.start,f.start),S=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let E=w,M=S;E<M;E+=3){const L=E,x=E+1,T=E+2;s=Kd(this,C,t,Al,l,u,c,h,d,L,x,T),s&&(s.faceIndex=Math.floor(E/3),s.face.materialIndex=y.materialIndex,e.push(s))}}else{const m=Math.max(0,f.start),g=Math.min(l.count,f.start+f.count);for(let y=m,C=g;y<C;y+=3){const w=y,S=y+1,E=y+2;s=Kd(this,n,t,Al,l,u,c,h,d,w,S,E),s&&(s.faceIndex=Math.floor(y/3),e.push(s))}}}}function v2(r,t,e,i,n,o,s,a){let l;if(t.side===gr?l=i.intersectTriangle(s,o,n,!0,a):l=i.intersectTriangle(n,o,s,t.side!==zi,a),l===null)return null;Yd.copy(a),Yd.applyMatrix4(r.matrixWorld);const u=e.ray.origin.distanceTo(Yd);return u<e.near||u>e.far?null:{distance:u,point:Yd.clone(),object:r}}function Kd(r,t,e,i,n,o,s,a,l,u,c,h){fs.fromBufferAttribute(n,u),gs.fromBufferAttribute(n,c),ms.fromBufferAttribute(n,h);const d=r.morphTargetInfluences;if(o&&d){kd.set(0,0,0),Bd.set(0,0,0),Ud.set(0,0,0);for(let f=0,m=o.length;f<m;f++){const g=d[f],y=o[f];g!==0&&(Vm.fromBufferAttribute(y,u),km.fromBufferAttribute(y,c),Bm.fromBufferAttribute(y,h),s?(kd.addScaledVector(Vm,g),Bd.addScaledVector(km,g),Ud.addScaledVector(Bm,g)):(kd.addScaledVector(Vm.sub(fs),g),Bd.addScaledVector(km.sub(gs),g),Ud.addScaledVector(Bm.sub(ms),g)))}fs.add(kd),gs.add(Bd),ms.add(Ud)}r.isSkinnedMesh&&(r.boneTransform(u,fs),r.boneTransform(c,gs),r.boneTransform(h,ms));const p=v2(r,t,e,i,fs,gs,ms,Um);if(p){a&&(zd.fromBufferAttribute(a,u),jd.fromBufferAttribute(a,c),$d.fromBufferAttribute(a,h),p.uv=ao.getUV(Um,fs,gs,ms,zd,jd,$d,new Ye)),l&&(zd.fromBufferAttribute(l,u),jd.fromBufferAttribute(l,c),$d.fromBufferAttribute(l,h),p.uv2=ao.getUV(Um,fs,gs,ms,zd,jd,$d,new Ye));const f={a:u,b:c,c:h,normal:new Z,materialIndex:0};ao.getNormal(fs,gs,ms,f.normal),p.face=f}return p}class qh extends Qn{constructor(t=1,e=1,i=1,n=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:o,depthSegments:s};const a=this;n=Math.floor(n),o=Math.floor(o),s=Math.floor(s);const l=[],u=[],c=[],h=[];let d=0,p=0;f("z","y","x",-1,-1,i,e,t,s,o,0),f("z","y","x",1,-1,i,e,-t,s,o,1),f("x","z","y",1,1,t,i,e,n,s,2),f("x","z","y",1,-1,t,i,-e,n,s,3),f("x","y","z",1,-1,t,e,i,n,o,4),f("x","y","z",-1,-1,t,e,-i,n,o,5),this.setIndex(l),this.setAttribute("position",new sn(u,3)),this.setAttribute("normal",new sn(c,3)),this.setAttribute("uv",new sn(h,2));function f(m,g,y,C,w,S,E,M,L,x,T){const N=S/L,K=E/x,Q=S/2,z=E/2,V=M/2,W=L+1,q=x+1;let Y=0,X=0;const B=new Z;for(let j=0;j<q;j++){const pt=j*K-z;for(let G=0;G<W;G++){const vt=G*N-Q;B[m]=vt*C,B[g]=pt*w,B[y]=V,u.push(B.x,B.y,B.z),B[m]=0,B[g]=0,B[y]=M>0?1:-1,c.push(B.x,B.y,B.z),h.push(G/L),h.push(1-j/x),Y+=1}}for(let j=0;j<x;j++)for(let pt=0;pt<L;pt++){const G=d+pt+W*j,vt=d+pt+W*(j+1),mt=d+(pt+1)+W*(j+1),xt=d+(pt+1)+W*j;l.push(G,vt,xt),l.push(vt,mt,xt),X+=6}a.addGroup(p,X,T),p+=X,d+=Y}}static fromJSON(t){return new qh(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ru(r){const t={};for(const e in r){t[e]={};for(const i in r[e]){const n=r[e][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[e][i]=n.clone():Array.isArray(n)?t[e][i]=n.slice():t[e][i]=n}}return t}function dn(r){const t={};for(let e=0;e<r.length;e++){const i=Ru(r[e]);for(const n in i)t[n]=i[n]}return t}function y2(r){const t=[];for(let e=0;e<r.length;e++)t.push(r[e].clone());return t}const _2={clone:Ru,merge:dn};var C2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,w2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Qa extends Xh{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=C2,this.fragmentShader=w2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ru(t.uniforms),this.uniformsGroups=y2(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const s=this.uniforms[n].value;s&&s.isTexture?e.uniforms[n]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[n]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[n]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[n]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[n]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[n]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[n]={type:"m4",value:s.toArray()}:e.uniforms[n]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const n in this.extensions)this.extensions[n]===!0&&(i[n]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class eM extends bi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wi,this.projectionMatrix=new Wi,this.projectionMatrixInverse=new Wi}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ur extends eM{constructor(t=50,e=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=gf*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(pu*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return gf*2*Math.atan(Math.tan(pu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,o,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(pu*.5*this.fov)/this.zoom,i=2*e,n=this.aspect*i,o=-.5*n;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*n/l,e-=s.offsetY*i/u,n*=s.width/l,i*=s.height/u}const a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Dl=90,Ll=1;class S2 extends bi{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i;const n=new ur(Dl,Ll,t,e);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new Z(1,0,0)),this.add(n);const o=new ur(Dl,Ll,t,e);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Z(-1,0,0)),this.add(o);const s=new ur(Dl,Ll,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new Z(0,1,0)),this.add(s);const a=new ur(Dl,Ll,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Z(0,-1,0)),this.add(a);const l=new ur(Dl,Ll,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Z(0,0,1)),this.add(l);const u=new ur(Dl,Ll,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Z(0,0,-1)),this.add(u)}update(t,e){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[n,o,s,a,l,u]=this.children,c=t.getRenderTarget(),h=t.toneMapping,d=t.xr.enabled;t.toneMapping=Xo,t.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,o),t.setRenderTarget(i,2),t.render(e,s),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=p,t.setRenderTarget(i,5),t.render(e,u),t.setRenderTarget(c),t.toneMapping=h,t.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class iM extends vr{constructor(t,e,i,n,o,s,a,l,u,c){t=t!==void 0?t:[],e=e!==void 0?e:Su,super(t,e,i,n,o,s,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class E2 extends Ja{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},n=[i,i,i,i,i,i];this.texture=new iM(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:lr}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new qh(5,5,5),o=new Qa({name:"CubemapFromEquirect",uniforms:Ru(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:gr,blending:Bs});o.uniforms.tEquirect.value=e;const s=new Fi(n,o),a=e.minFilter;return e.minFilter===wg&&(e.minFilter=lr),new S2(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,i,n){const o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,i,n);t.setRenderTarget(o)}}const zm=new Z,x2=new Z,R2=new dr;class Sa{constructor(t=new Z(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const n=zm.subVectors(i,e).cross(x2.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(zm),n=this.normal.dot(i);if(n===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/n;return o<0||o>1?null:e.copy(i).multiplyScalar(o).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||R2.getNormalMatrix(t),n=this.coplanarPoint(zm).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Il=new Sg,Xd=new Z;class nM{constructor(t=new Sa,e=new Sa,i=new Sa,n=new Sa,o=new Sa,s=new Sa){this.planes=[t,e,i,n,o,s]}set(t,e,i,n,o,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(n),a[4].copy(o),a[5].copy(s),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,n=i[0],o=i[1],s=i[2],a=i[3],l=i[4],u=i[5],c=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],y=i[13],C=i[14],w=i[15];return e[0].setComponents(a-n,h-l,m-d,w-g).normalize(),e[1].setComponents(a+n,h+l,m+d,w+g).normalize(),e[2].setComponents(a+o,h+u,m+p,w+y).normalize(),e[3].setComponents(a-o,h-u,m-p,w-y).normalize(),e[4].setComponents(a-s,h-c,m-f,w-C).normalize(),e[5].setComponents(a+s,h+c,m+f,w+C).normalize(),this}intersectsObject(t){const e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),Il.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Il)}intersectsSprite(t){return Il.center.set(0,0,0),Il.radius=.7071067811865476,Il.applyMatrix4(t.matrixWorld),this.intersectsSphere(Il)}intersectsSphere(t){const e=this.planes,i=t.center,n=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(Xd.x=n.normal.x>0?t.max.x:t.min.x,Xd.y=n.normal.y>0?t.max.y:t.min.y,Xd.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Xd)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function rM(){let r=null,t=!1,e=null,i=null;function n(o,s){e(o,s),i=r.requestAnimationFrame(n)}return{start:function(){t!==!0&&e!==null&&(i=r.requestAnimationFrame(n),t=!0)},stop:function(){r.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){r=o}}}function b2(r,t){const e=t.isWebGL2,i=new WeakMap;function n(u,c){const h=u.array,d=u.usage,p=r.createBuffer();r.bindBuffer(c,p),r.bufferData(c,h,d),u.onUploadCallback();let f;if(h instanceof Float32Array)f=5126;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(e)f=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else f=5123;else if(h instanceof Int16Array)f=5122;else if(h instanceof Uint32Array)f=5125;else if(h instanceof Int32Array)f=5124;else if(h instanceof Int8Array)f=5120;else if(h instanceof Uint8Array)f=5121;else if(h instanceof Uint8ClampedArray)f=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:p,type:f,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function o(u,c,h){const d=c.array,p=c.updateRange;r.bindBuffer(h,u),p.count===-1?r.bufferSubData(h,0,d):(e?r.bufferSubData(h,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count):r.bufferSubData(h,p.offset*d.BYTES_PER_ELEMENT,d.subarray(p.offset,p.offset+p.count)),p.count=-1)}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=i.get(u);c&&(r.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=i.get(u);(!d||d.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);h===void 0?i.set(u,n(u,c)):h.version<u.version&&(o(h.buffer,u,c),h.version=u.version)}return{get:s,remove:a,update:l}}class Eg extends Qn{constructor(t=1,e=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};const o=t/2,s=e/2,a=Math.floor(i),l=Math.floor(n),u=a+1,c=l+1,h=t/a,d=e/l,p=[],f=[],m=[],g=[];for(let y=0;y<c;y++){const C=y*d-s;for(let w=0;w<u;w++){const S=w*h-o;f.push(S,-C,0),m.push(0,0,1),g.push(w/a),g.push(1-y/l)}}for(let y=0;y<l;y++)for(let C=0;C<a;C++){const w=C+u*y,S=C+u*(y+1),E=C+1+u*(y+1),M=C+1+u*y;p.push(w,S,M),p.push(S,E,M)}this.setIndex(p),this.setAttribute("position",new sn(f,3)),this.setAttribute("normal",new sn(m,3)),this.setAttribute("uv",new sn(g,2))}static fromJSON(t){return new Eg(t.width,t.height,t.widthSegments,t.heightSegments)}}var M2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,T2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,P2=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,O2=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,A2=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,D2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,L2="vec3 transformed = vec3( position );",I2=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,F2=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,N2=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,G2=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,H2=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,W2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,V2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,k2=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,B2=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,U2=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,z2=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,j2=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,$2=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Y2=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,K2=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,X2=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,q2=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Z2=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,J2=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Q2="gl_FragColor = linearToOutputTexel( gl_FragColor );",t3=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,e3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,i3=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,n3=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,r3=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,o3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,s3=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,a3=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,l3=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,u3=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,c3=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,h3=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,d3=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,p3=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,f3=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,g3=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,m3=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,v3=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,y3=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,_3=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,C3=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,w3=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,S3=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,E3=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,x3=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,R3=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,b3=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,M3=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,T3=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,P3=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,O3=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,A3=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,D3=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,L3=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,I3=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,F3=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,N3=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,G3=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,H3=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,W3=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,V3=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,k3=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,B3=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,U3=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,z3=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,j3=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,$3=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Y3=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,K3=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,X3=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,q3=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Z3=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,J3=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Q3=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rH=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,oH=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sH=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,aH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,cH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,pH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,gH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,vH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,yH=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,_H=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,CH=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,wH=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,SH=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,EH=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,xH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const RH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,bH=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,MH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,PH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,OH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,AH=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,DH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,LH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,IH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,FH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,NH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WH=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,VH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$H=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,YH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,tW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eW=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,nW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,fe={alphamap_fragment:M2,alphamap_pars_fragment:T2,alphatest_fragment:P2,alphatest_pars_fragment:O2,aomap_fragment:A2,aomap_pars_fragment:D2,begin_vertex:L2,beginnormal_vertex:I2,bsdfs:F2,iridescence_fragment:N2,bumpmap_pars_fragment:G2,clipping_planes_fragment:H2,clipping_planes_pars_fragment:W2,clipping_planes_pars_vertex:V2,clipping_planes_vertex:k2,color_fragment:B2,color_pars_fragment:U2,color_pars_vertex:z2,color_vertex:j2,common:$2,cube_uv_reflection_fragment:Y2,defaultnormal_vertex:K2,displacementmap_pars_vertex:X2,displacementmap_vertex:q2,emissivemap_fragment:Z2,emissivemap_pars_fragment:J2,encodings_fragment:Q2,encodings_pars_fragment:t3,envmap_fragment:e3,envmap_common_pars_fragment:i3,envmap_pars_fragment:n3,envmap_pars_vertex:r3,envmap_physical_pars_fragment:m3,envmap_vertex:o3,fog_vertex:s3,fog_pars_vertex:a3,fog_fragment:l3,fog_pars_fragment:u3,gradientmap_pars_fragment:c3,lightmap_fragment:h3,lightmap_pars_fragment:d3,lights_lambert_fragment:p3,lights_lambert_pars_fragment:f3,lights_pars_begin:g3,lights_toon_fragment:v3,lights_toon_pars_fragment:y3,lights_phong_fragment:_3,lights_phong_pars_fragment:C3,lights_physical_fragment:w3,lights_physical_pars_fragment:S3,lights_fragment_begin:E3,lights_fragment_maps:x3,lights_fragment_end:R3,logdepthbuf_fragment:b3,logdepthbuf_pars_fragment:M3,logdepthbuf_pars_vertex:T3,logdepthbuf_vertex:P3,map_fragment:O3,map_pars_fragment:A3,map_particle_fragment:D3,map_particle_pars_fragment:L3,metalnessmap_fragment:I3,metalnessmap_pars_fragment:F3,morphcolor_vertex:N3,morphnormal_vertex:G3,morphtarget_pars_vertex:H3,morphtarget_vertex:W3,normal_fragment_begin:V3,normal_fragment_maps:k3,normal_pars_fragment:B3,normal_pars_vertex:U3,normal_vertex:z3,normalmap_pars_fragment:j3,clearcoat_normal_fragment_begin:$3,clearcoat_normal_fragment_maps:Y3,clearcoat_pars_fragment:K3,iridescence_pars_fragment:X3,output_fragment:q3,packing:Z3,premultiplied_alpha_fragment:J3,project_vertex:Q3,dithering_fragment:tH,dithering_pars_fragment:eH,roughnessmap_fragment:iH,roughnessmap_pars_fragment:nH,shadowmap_pars_fragment:rH,shadowmap_pars_vertex:oH,shadowmap_vertex:sH,shadowmask_pars_fragment:aH,skinbase_vertex:lH,skinning_pars_vertex:uH,skinning_vertex:cH,skinnormal_vertex:hH,specularmap_fragment:dH,specularmap_pars_fragment:pH,tonemapping_fragment:fH,tonemapping_pars_fragment:gH,transmission_fragment:mH,transmission_pars_fragment:vH,uv_pars_fragment:yH,uv_pars_vertex:_H,uv_vertex:CH,uv2_pars_fragment:wH,uv2_pars_vertex:SH,uv2_vertex:EH,worldpos_vertex:xH,background_vert:RH,background_frag:bH,backgroundCube_vert:MH,backgroundCube_frag:TH,cube_vert:PH,cube_frag:OH,depth_vert:AH,depth_frag:DH,distanceRGBA_vert:LH,distanceRGBA_frag:IH,equirect_vert:FH,equirect_frag:NH,linedashed_vert:GH,linedashed_frag:HH,meshbasic_vert:WH,meshbasic_frag:VH,meshlambert_vert:kH,meshlambert_frag:BH,meshmatcap_vert:UH,meshmatcap_frag:zH,meshnormal_vert:jH,meshnormal_frag:$H,meshphong_vert:YH,meshphong_frag:KH,meshphysical_vert:XH,meshphysical_frag:qH,meshtoon_vert:ZH,meshtoon_frag:JH,points_vert:QH,points_frag:tW,shadow_vert:eW,shadow_frag:iW,sprite_vert:nW,sprite_frag:rW},Mt={common:{diffuse:{value:new ti(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new dr},uv2Transform:{value:new dr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ti(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ti(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new dr}},sprite:{diffuse:{value:new ti(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new dr}}},io={basic:{uniforms:dn([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.fog]),vertexShader:fe.meshbasic_vert,fragmentShader:fe.meshbasic_frag},lambert:{uniforms:dn([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new ti(0)}}]),vertexShader:fe.meshlambert_vert,fragmentShader:fe.meshlambert_frag},phong:{uniforms:dn([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new ti(0)},specular:{value:new ti(1118481)},shininess:{value:30}}]),vertexShader:fe.meshphong_vert,fragmentShader:fe.meshphong_frag},standard:{uniforms:dn([Mt.common,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.roughnessmap,Mt.metalnessmap,Mt.fog,Mt.lights,{emissive:{value:new ti(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fe.meshphysical_vert,fragmentShader:fe.meshphysical_frag},toon:{uniforms:dn([Mt.common,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.gradientmap,Mt.fog,Mt.lights,{emissive:{value:new ti(0)}}]),vertexShader:fe.meshtoon_vert,fragmentShader:fe.meshtoon_frag},matcap:{uniforms:dn([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,{matcap:{value:null}}]),vertexShader:fe.meshmatcap_vert,fragmentShader:fe.meshmatcap_frag},points:{uniforms:dn([Mt.points,Mt.fog]),vertexShader:fe.points_vert,fragmentShader:fe.points_frag},dashed:{uniforms:dn([Mt.common,Mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fe.linedashed_vert,fragmentShader:fe.linedashed_frag},depth:{uniforms:dn([Mt.common,Mt.displacementmap]),vertexShader:fe.depth_vert,fragmentShader:fe.depth_frag},normal:{uniforms:dn([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,{opacity:{value:1}}]),vertexShader:fe.meshnormal_vert,fragmentShader:fe.meshnormal_frag},sprite:{uniforms:dn([Mt.sprite,Mt.fog]),vertexShader:fe.sprite_vert,fragmentShader:fe.sprite_frag},background:{uniforms:{uvTransform:{value:new dr},t2D:{value:null}},vertexShader:fe.background_vert,fragmentShader:fe.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:fe.backgroundCube_vert,fragmentShader:fe.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fe.cube_vert,fragmentShader:fe.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fe.equirect_vert,fragmentShader:fe.equirect_frag},distanceRGBA:{uniforms:dn([Mt.common,Mt.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fe.distanceRGBA_vert,fragmentShader:fe.distanceRGBA_frag},shadow:{uniforms:dn([Mt.lights,Mt.fog,{color:{value:new ti(0)},opacity:{value:1}}]),vertexShader:fe.shadow_vert,fragmentShader:fe.shadow_frag}};io.physical={uniforms:dn([io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ti(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ti(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ti(1,1,1)},specularColorMap:{value:null}}]),vertexShader:fe.meshphysical_vert,fragmentShader:fe.meshphysical_frag};function oW(r,t,e,i,n,o,s){const a=new ti(0);let l=o===!0?0:1,u,c,h=null,d=0,p=null;function f(g,y){let C=!1,w=y.isScene===!0?y.background:null;w&&w.isTexture&&(w=(y.backgroundBlurriness>0?e:t).get(w));const S=r.xr,E=S.getSession&&S.getSession();E&&E.environmentBlendMode==="additive"&&(w=null),w===null?m(a,l):w&&w.isColor&&(m(w,1),C=!0),(r.autoClear||C)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),w&&(w.isCubeTexture||w.mapping===Cg)?(c===void 0&&(c=new Fi(new qh(1,1,1),new Qa({name:"BackgroundCubeMaterial",uniforms:Ru(io.backgroundCube.uniforms),vertexShader:io.backgroundCube.vertexShader,fragmentShader:io.backgroundCube.fragmentShader,side:gr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(M,L,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,(h!==w||d!==w.version||p!==r.toneMapping)&&(c.material.needsUpdate=!0,h=w,d=w.version,p=r.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Fi(new Eg(2,2),new Qa({name:"BackgroundMaterial",uniforms:Ru(io.background.uniforms),vertexShader:io.background.vertexShader,fragmentShader:io.background.fragmentShader,side:wu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(u)),u.material.uniforms.t2D.value=w,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(h!==w||d!==w.version||p!==r.toneMapping)&&(u.material.needsUpdate=!0,h=w,d=w.version,p=r.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null))}function m(g,y){i.buffers.color.setClear(g.r,g.g,g.b,y,s)}return{getClearColor:function(){return a},setClearColor:function(g,y=1){a.set(g),l=y,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(a,l)},render:f}}function sW(r,t,e,i){const n=r.getParameter(34921),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||o!==null,a={},l=g(null);let u=l,c=!1;function h(V,W,q,Y,X){let B=!1;if(s){const j=m(Y,q,W);u!==j&&(u=j,p(u.object)),B=y(V,Y,q,X),B&&C(V,Y,q,X)}else{const j=W.wireframe===!0;(u.geometry!==Y.id||u.program!==q.id||u.wireframe!==j)&&(u.geometry=Y.id,u.program=q.id,u.wireframe=j,B=!0)}X!==null&&e.update(X,34963),(B||c)&&(c=!1,x(V,W,q,Y),X!==null&&r.bindBuffer(34963,e.get(X).buffer))}function d(){return i.isWebGL2?r.createVertexArray():o.createVertexArrayOES()}function p(V){return i.isWebGL2?r.bindVertexArray(V):o.bindVertexArrayOES(V)}function f(V){return i.isWebGL2?r.deleteVertexArray(V):o.deleteVertexArrayOES(V)}function m(V,W,q){const Y=q.wireframe===!0;let X=a[V.id];X===void 0&&(X={},a[V.id]=X);let B=X[W.id];B===void 0&&(B={},X[W.id]=B);let j=B[Y];return j===void 0&&(j=g(d()),B[Y]=j),j}function g(V){const W=[],q=[],Y=[];for(let X=0;X<n;X++)W[X]=0,q[X]=0,Y[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:q,attributeDivisors:Y,object:V,attributes:{},index:null}}function y(V,W,q,Y){const X=u.attributes,B=W.attributes;let j=0;const pt=q.getAttributes();for(const G in pt)if(pt[G].location>=0){const mt=X[G];let xt=B[G];if(xt===void 0&&(G==="instanceMatrix"&&V.instanceMatrix&&(xt=V.instanceMatrix),G==="instanceColor"&&V.instanceColor&&(xt=V.instanceColor)),mt===void 0||mt.attribute!==xt||xt&&mt.data!==xt.data)return!0;j++}return u.attributesNum!==j||u.index!==Y}function C(V,W,q,Y){const X={},B=W.attributes;let j=0;const pt=q.getAttributes();for(const G in pt)if(pt[G].location>=0){let mt=B[G];mt===void 0&&(G==="instanceMatrix"&&V.instanceMatrix&&(mt=V.instanceMatrix),G==="instanceColor"&&V.instanceColor&&(mt=V.instanceColor));const xt={};xt.attribute=mt,mt&&mt.data&&(xt.data=mt.data),X[G]=xt,j++}u.attributes=X,u.attributesNum=j,u.index=Y}function w(){const V=u.newAttributes;for(let W=0,q=V.length;W<q;W++)V[W]=0}function S(V){E(V,0)}function E(V,W){const q=u.newAttributes,Y=u.enabledAttributes,X=u.attributeDivisors;q[V]=1,Y[V]===0&&(r.enableVertexAttribArray(V),Y[V]=1),X[V]!==W&&((i.isWebGL2?r:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,W),X[V]=W)}function M(){const V=u.newAttributes,W=u.enabledAttributes;for(let q=0,Y=W.length;q<Y;q++)W[q]!==V[q]&&(r.disableVertexAttribArray(q),W[q]=0)}function L(V,W,q,Y,X,B){i.isWebGL2===!0&&(q===5124||q===5125)?r.vertexAttribIPointer(V,W,q,X,B):r.vertexAttribPointer(V,W,q,Y,X,B)}function x(V,W,q,Y){if(i.isWebGL2===!1&&(V.isInstancedMesh||Y.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;w();const X=Y.attributes,B=q.getAttributes(),j=W.defaultAttributeValues;for(const pt in B){const G=B[pt];if(G.location>=0){let vt=X[pt];if(vt===void 0&&(pt==="instanceMatrix"&&V.instanceMatrix&&(vt=V.instanceMatrix),pt==="instanceColor"&&V.instanceColor&&(vt=V.instanceColor)),vt!==void 0){const mt=vt.normalized,xt=vt.itemSize,st=e.get(vt);if(st===void 0)continue;const ne=st.buffer,Lt=st.type,Ft=st.bytesPerElement;if(vt.isInterleavedBufferAttribute){const Rt=vt.data,De=Rt.stride,Ut=vt.offset;if(Rt.isInstancedInterleavedBuffer){for(let zt=0;zt<G.locationSize;zt++)E(G.location+zt,Rt.meshPerAttribute);V.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=Rt.meshPerAttribute*Rt.count)}else for(let zt=0;zt<G.locationSize;zt++)S(G.location+zt);r.bindBuffer(34962,ne);for(let zt=0;zt<G.locationSize;zt++)L(G.location+zt,xt/G.locationSize,Lt,mt,De*Ft,(Ut+xt/G.locationSize*zt)*Ft)}else{if(vt.isInstancedBufferAttribute){for(let Rt=0;Rt<G.locationSize;Rt++)E(G.location+Rt,vt.meshPerAttribute);V.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=vt.meshPerAttribute*vt.count)}else for(let Rt=0;Rt<G.locationSize;Rt++)S(G.location+Rt);r.bindBuffer(34962,ne);for(let Rt=0;Rt<G.locationSize;Rt++)L(G.location+Rt,xt/G.locationSize,Lt,mt,xt*Ft,xt/G.locationSize*Rt*Ft)}}else if(j!==void 0){const mt=j[pt];if(mt!==void 0)switch(mt.length){case 2:r.vertexAttrib2fv(G.location,mt);break;case 3:r.vertexAttrib3fv(G.location,mt);break;case 4:r.vertexAttrib4fv(G.location,mt);break;default:r.vertexAttrib1fv(G.location,mt)}}}}M()}function T(){Q();for(const V in a){const W=a[V];for(const q in W){const Y=W[q];for(const X in Y)f(Y[X].object),delete Y[X];delete W[q]}delete a[V]}}function N(V){if(a[V.id]===void 0)return;const W=a[V.id];for(const q in W){const Y=W[q];for(const X in Y)f(Y[X].object),delete Y[X];delete W[q]}delete a[V.id]}function K(V){for(const W in a){const q=a[W];if(q[V.id]===void 0)continue;const Y=q[V.id];for(const X in Y)f(Y[X].object),delete Y[X];delete q[V.id]}}function Q(){z(),c=!0,u!==l&&(u=l,p(u.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:Q,resetDefaultState:z,dispose:T,releaseStatesOfGeometry:N,releaseStatesOfProgram:K,initAttributes:w,enableAttribute:S,disableUnusedAttributes:M}}function aW(r,t,e,i){const n=i.isWebGL2;let o;function s(u){o=u}function a(u,c){r.drawArrays(o,u,c),e.update(c,o,1)}function l(u,c,h){if(h===0)return;let d,p;if(n)d=r,p="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](o,u,c,h),e.update(c,o,h)}this.setMode=s,this.render=a,this.renderInstances=l}function lW(r,t,e){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){const L=t.get("EXT_texture_filter_anisotropic");i=r.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(L){if(L==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";L="mediump"}return L==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let a=e.precision!==void 0?e.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=s||t.has("WEBGL_draw_buffers"),c=e.logarithmicDepthBuffer===!0,h=r.getParameter(34930),d=r.getParameter(35660),p=r.getParameter(3379),f=r.getParameter(34076),m=r.getParameter(34921),g=r.getParameter(36347),y=r.getParameter(36348),C=r.getParameter(36349),w=d>0,S=s||t.has("OES_texture_float"),E=w&&S,M=s?r.getParameter(36183):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:n,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:y,maxFragmentUniforms:C,vertexTextures:w,floatFragmentTextures:S,floatVertexTextures:E,maxSamples:M}}function uW(r){const t=this;let e=null,i=0,n=!1,o=!1;const s=new Sa,a=new dr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d,p){const f=h.length!==0||d||i!==0||n;return n=d,e=c(h,p,0),i=h.length,f},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,u()},this.setState=function(h,d,p){const f=h.clippingPlanes,m=h.clipIntersection,g=h.clipShadows,y=r.get(h);if(!n||f===null||f.length===0||o&&!g)o?c(null):u();else{const C=o?0:i,w=C*4;let S=y.clippingState||null;l.value=S,S=c(f,d,w,p);for(let E=0;E!==w;++E)S[E]=e[E];y.clippingState=S,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=C}};function u(){l.value!==e&&(l.value=e,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(h,d,p,f){const m=h!==null?h.length:0;let g=null;if(m!==0){if(g=l.value,f!==!0||g===null){const y=p+m*4,C=d.matrixWorldInverse;a.getNormalMatrix(C),(g===null||g.length<y)&&(g=new Float32Array(y));for(let w=0,S=p;w!==m;++w,S+=4)s.copy(h[w]).applyMatrix4(C,a),s.normal.toArray(g,S),g[S+3]=s.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,g}}function cW(r){let t=new WeakMap;function e(s,a){return a===by?s.mapping=Su:a===My&&(s.mapping=Eu),s}function i(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const a=s.mapping;if(a===by||a===My)if(t.has(s)){const l=t.get(s).texture;return e(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new E2(l.height/2);return u.fromEquirectangularTexture(r,s),t.set(s,u),s.addEventListener("dispose",n),e(u.texture,s.mapping)}else return null}}return s}function n(s){const a=s.target;a.removeEventListener("dispose",n);const l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}class hW extends eM{constructor(t=-1,e=1,i=1,n=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let o=i-t,s=i+t,a=n+e,l=n-e;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}const Ql=4,HS=[.125,.215,.35,.446,.526,.582],ba=20,jm=new hW,WS=new ti;let $m=null;const Ea=(1+Math.sqrt(5))/2,Fl=1/Ea,VS=[new Z(1,1,1),new Z(-1,1,1),new Z(1,1,-1),new Z(-1,1,-1),new Z(0,Ea,Fl),new Z(0,Ea,-Fl),new Z(Fl,0,Ea),new Z(-Fl,0,Ea),new Z(Ea,Fl,0),new Z(-Ea,Fl,0)];class kS{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){$m=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,i,n,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=zS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=US(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget($m),t.scissorTest=!1,qd(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Su||t.mapping===Eu?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),$m=this._renderer.getRenderTarget();const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:lr,minFilter:lr,generateMipmaps:!1,type:xh,format:Lr,encoding:Za,depthBuffer:!1},n=BS(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=BS(t,e,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dW(o)),this._blurMaterial=pW(o,t,e)}return n}_compileMaterial(t){const e=new Fi(this._lodPlanes[0],t);this._renderer.compile(e,jm)}_sceneToCubeUV(t,e,i,n){const a=new ur(90,1,e,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,d=c.toneMapping;c.getClearColor(WS),c.toneMapping=Xo,c.autoClear=!1;const p=new Ar({name:"PMREM.Background",side:gr,depthWrite:!1,depthTest:!1}),f=new Fi(new qh,p);let m=!1;const g=t.background;g?g.isColor&&(p.color.copy(g),t.background=null,m=!0):(p.color.copy(WS),m=!0);for(let y=0;y<6;y++){const C=y%3;C===0?(a.up.set(0,l[y],0),a.lookAt(u[y],0,0)):C===1?(a.up.set(0,0,l[y]),a.lookAt(0,u[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,u[y]));const w=this._cubeSize;qd(n,C*w,y>2?w:0,w,w),c.setRenderTarget(n),m&&c.render(f,a),c.render(t,a)}f.geometry.dispose(),f.material.dispose(),c.toneMapping=d,c.autoClear=h,t.background=g}_textureToCubeUV(t,e){const i=this._renderer,n=t.mapping===Su||t.mapping===Eu;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=zS()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=US());const o=n?this._cubemapMaterial:this._equirectMaterial,s=new Fi(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=t;const l=this._cubeSize;qd(e,0,0,3*l,2*l),i.setRenderTarget(e),i.render(s,jm)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const o=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),s=VS[(n-1)%VS.length];this._blur(t,n-1,n,o,s)}e.autoClear=i}_blur(t,e,i,n,o){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,n,"latitudinal",o),this._halfBlur(s,t,i,i,n,"longitudinal",o)}_halfBlur(t,e,i,n,o,s,a){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new Fi(this._lodPlanes[n],u),d=u.uniforms,p=this._sizeLods[i]-1,f=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*ba-1),m=o/f,g=isFinite(o)?1+Math.floor(c*m):ba;g>ba&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${ba}`);const y=[];let C=0;for(let L=0;L<ba;++L){const x=L/m,T=Math.exp(-x*x/2);y.push(T),L===0?C+=T:L<g&&(C+=2*T)}for(let L=0;L<y.length;L++)y[L]=y[L]/C;d.envMap.value=t.texture,d.samples.value=g,d.weights.value=y,d.latitudinal.value=s==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:w}=this;d.dTheta.value=f,d.mipInt.value=w-i;const S=this._sizeLods[n],E=3*S*(n>w-Ql?n-w+Ql:0),M=4*(this._cubeSize-S);qd(e,E,M,3*S,2*S),l.setRenderTarget(e),l.render(h,jm)}}function dW(r){const t=[],e=[],i=[];let n=r;const o=r-Ql+1+HS.length;for(let s=0;s<o;s++){const a=Math.pow(2,n);e.push(a);let l=1/a;s>r-Ql?l=HS[s-r+Ql-1]:s===0&&(l=0),i.push(l);const u=1/(a-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],p=6,f=6,m=3,g=2,y=1,C=new Float32Array(m*f*p),w=new Float32Array(g*f*p),S=new Float32Array(y*f*p);for(let M=0;M<p;M++){const L=M%3*2/3-1,x=M>2?0:-1,T=[L,x,0,L+2/3,x,0,L+2/3,x+1,0,L,x,0,L+2/3,x+1,0,L,x+1,0];C.set(T,m*f*M),w.set(d,g*f*M);const N=[M,M,M,M,M,M];S.set(N,y*f*M)}const E=new Qn;E.setAttribute("position",new fo(C,m)),E.setAttribute("uv",new fo(w,g)),E.setAttribute("faceIndex",new fo(S,y)),t.push(E),n>Ql&&n--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function BS(r,t,e){const i=new Ja(r,t,e);return i.texture.mapping=Cg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function qd(r,t,e,i,n){r.viewport.set(t,e,i,n),r.scissor.set(t,e,i,n)}function pW(r,t,e){const i=new Float32Array(ba),n=new Z(0,1,0);return new Qa({name:"SphericalGaussianBlur",defines:{n:ba,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:SC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Bs,depthTest:!1,depthWrite:!1})}function US(){return new Qa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:SC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Bs,depthTest:!1,depthWrite:!1})}function zS(){return new Qa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:SC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Bs,depthTest:!1,depthWrite:!1})}function SC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function fW(r){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===by||l===My,c=l===Su||l===Eu;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=t.get(a);return e===null&&(e=new kS(r)),h=u?e.fromEquirectangular(a,h):e.fromCubemap(a,h),t.set(a,h),h.texture}else{if(t.has(a))return t.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||c&&h&&n(h)){e===null&&(e=new kS(r));const d=u?e.fromEquirectangular(a):e.fromCubemap(a);return t.set(a,d),a.addEventListener("dispose",o),d.texture}else return null}}}return a}function n(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function o(a){const l=a.target;l.removeEventListener("dispose",o);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function s(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:s}}function gW(r){const t={};function e(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=r.getExtension(i)}return t[i]=n,n}return{has:function(i){return e(i)!==null},init:function(i){i.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(i){const n=e(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function mW(r,t,e,i){const n={},o=new WeakMap;function s(h){const d=h.target;d.index!==null&&t.remove(d.index);for(const f in d.attributes)t.remove(d.attributes[f]);d.removeEventListener("dispose",s),delete n[d.id];const p=o.get(d);p&&(t.remove(p),o.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,e.memory.geometries--}function a(h,d){return n[d.id]===!0||(d.addEventListener("dispose",s),n[d.id]=!0,e.memory.geometries++),d}function l(h){const d=h.attributes;for(const f in d)t.update(d[f],34962);const p=h.morphAttributes;for(const f in p){const m=p[f];for(let g=0,y=m.length;g<y;g++)t.update(m[g],34962)}}function u(h){const d=[],p=h.index,f=h.attributes.position;let m=0;if(p!==null){const C=p.array;m=p.version;for(let w=0,S=C.length;w<S;w+=3){const E=C[w+0],M=C[w+1],L=C[w+2];d.push(E,M,M,L,L,E)}}else{const C=f.array;m=f.version;for(let w=0,S=C.length/3-1;w<S;w+=3){const E=w+0,M=w+1,L=w+2;d.push(E,M,M,L,L,E)}}const g=new(Kb(d)?tM:Qb)(d,1);g.version=m;const y=o.get(h);y&&t.remove(y),o.set(h,g)}function c(h){const d=o.get(h);if(d){const p=h.index;p!==null&&d.version<p.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:c}}function vW(r,t,e,i){const n=i.isWebGL2;let o;function s(d){o=d}let a,l;function u(d){a=d.type,l=d.bytesPerElement}function c(d,p){r.drawElements(o,p,a,d*l),e.update(p,o,1)}function h(d,p,f){if(f===0)return;let m,g;if(n)m=r,g="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](o,p,a,d*l,f),e.update(p,o,f)}this.setMode=s,this.setIndex=u,this.render=c,this.renderInstances=h}function yW(r){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(e.calls++,s){case 4:e.triangles+=a*(o/3);break;case 1:e.lines+=a*(o/2);break;case 3:e.lines+=a*(o-1);break;case 2:e.lines+=a*o;break;case 0:e.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function n(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:n,update:i}}function _W(r,t){return r[0]-t[0]}function CW(r,t){return Math.abs(t[1])-Math.abs(r[1])}function wW(r,t,e){const i={},n=new Float32Array(8),o=new WeakMap,s=new $i,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,h,d){const p=u.morphTargetInfluences;if(t.isWebGL2===!0){const f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=f!==void 0?f.length:0;let g=o.get(c);if(g===void 0||g.count!==m){let W=function(){z.dispose(),o.delete(c),c.removeEventListener("dispose",W)};g!==void 0&&g.texture.dispose();const w=c.morphAttributes.position!==void 0,S=c.morphAttributes.normal!==void 0,E=c.morphAttributes.color!==void 0,M=c.morphAttributes.position||[],L=c.morphAttributes.normal||[],x=c.morphAttributes.color||[];let T=0;w===!0&&(T=1),S===!0&&(T=2),E===!0&&(T=3);let N=c.attributes.position.count*T,K=1;N>t.maxTextureSize&&(K=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const Q=new Float32Array(N*K*4*m),z=new Jb(Q,N,K,m);z.type=La,z.needsUpdate=!0;const V=T*4;for(let q=0;q<m;q++){const Y=M[q],X=L[q],B=x[q],j=N*K*4*q;for(let pt=0;pt<Y.count;pt++){const G=pt*V;w===!0&&(s.fromBufferAttribute(Y,pt),Q[j+G+0]=s.x,Q[j+G+1]=s.y,Q[j+G+2]=s.z,Q[j+G+3]=0),S===!0&&(s.fromBufferAttribute(X,pt),Q[j+G+4]=s.x,Q[j+G+5]=s.y,Q[j+G+6]=s.z,Q[j+G+7]=0),E===!0&&(s.fromBufferAttribute(B,pt),Q[j+G+8]=s.x,Q[j+G+9]=s.y,Q[j+G+10]=s.z,Q[j+G+11]=B.itemSize===4?s.w:1)}}g={count:m,texture:z,size:new Ye(N,K)},o.set(c,g),c.addEventListener("dispose",W)}let y=0;for(let w=0;w<p.length;w++)y+=p[w];const C=c.morphTargetsRelative?1:1-y;d.getUniforms().setValue(r,"morphTargetBaseInfluence",C),d.getUniforms().setValue(r,"morphTargetInfluences",p),d.getUniforms().setValue(r,"morphTargetsTexture",g.texture,e),d.getUniforms().setValue(r,"morphTargetsTextureSize",g.size)}else{const f=p===void 0?0:p.length;let m=i[c.id];if(m===void 0||m.length!==f){m=[];for(let S=0;S<f;S++)m[S]=[S,0];i[c.id]=m}for(let S=0;S<f;S++){const E=m[S];E[0]=S,E[1]=p[S]}m.sort(CW);for(let S=0;S<8;S++)S<f&&m[S][1]?(a[S][0]=m[S][0],a[S][1]=m[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(_W);const g=c.morphAttributes.position,y=c.morphAttributes.normal;let C=0;for(let S=0;S<8;S++){const E=a[S],M=E[0],L=E[1];M!==Number.MAX_SAFE_INTEGER&&L?(g&&c.getAttribute("morphTarget"+S)!==g[M]&&c.setAttribute("morphTarget"+S,g[M]),y&&c.getAttribute("morphNormal"+S)!==y[M]&&c.setAttribute("morphNormal"+S,y[M]),n[S]=L,C+=L):(g&&c.hasAttribute("morphTarget"+S)===!0&&c.deleteAttribute("morphTarget"+S),y&&c.hasAttribute("morphNormal"+S)===!0&&c.deleteAttribute("morphNormal"+S),n[S]=0)}const w=c.morphTargetsRelative?1:1-C;d.getUniforms().setValue(r,"morphTargetBaseInfluence",w),d.getUniforms().setValue(r,"morphTargetInfluences",n)}}return{update:l}}function SW(r,t,e,i){let n=new WeakMap;function o(l){const u=i.render.frame,c=l.geometry,h=t.get(l,c);return n.get(h)!==u&&(t.update(h),n.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),e.update(l.instanceMatrix,34962),l.instanceColor!==null&&e.update(l.instanceColor,34962)),h}function s(){n=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),e.remove(u.instanceMatrix),u.instanceColor!==null&&e.remove(u.instanceColor)}return{update:o,dispose:s}}const oM=new vr,sM=new Jb,aM=new a2,lM=new iM,jS=[],$S=[],YS=new Float32Array(16),KS=new Float32Array(9),XS=new Float32Array(4);function Yu(r,t,e){const i=r[0];if(i<=0||i>0)return r;const n=t*e;let o=jS[n];if(o===void 0&&(o=new Float32Array(n),jS[n]=o),t!==0){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=e,r[s].toArray(o,a)}return o}function Mi(r,t){if(r.length!==t.length)return!1;for(let e=0,i=r.length;e<i;e++)if(r[e]!==t[e])return!1;return!0}function Ti(r,t){for(let e=0,i=t.length;e<i;e++)r[e]=t[e]}function xg(r,t){let e=$S[t];e===void 0&&(e=new Int32Array(t),$S[t]=e);for(let i=0;i!==t;++i)e[i]=r.allocateTextureUnit();return e}function EW(r,t){const e=this.cache;e[0]!==t&&(r.uniform1f(this.addr,t),e[0]=t)}function xW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Mi(e,t))return;r.uniform2fv(this.addr,t),Ti(e,t)}}function RW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(r.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Mi(e,t))return;r.uniform3fv(this.addr,t),Ti(e,t)}}function bW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Mi(e,t))return;r.uniform4fv(this.addr,t),Ti(e,t)}}function MW(r,t){const e=this.cache,i=t.elements;if(i===void 0){if(Mi(e,t))return;r.uniformMatrix2fv(this.addr,!1,t),Ti(e,t)}else{if(Mi(e,i))return;XS.set(i),r.uniformMatrix2fv(this.addr,!1,XS),Ti(e,i)}}function TW(r,t){const e=this.cache,i=t.elements;if(i===void 0){if(Mi(e,t))return;r.uniformMatrix3fv(this.addr,!1,t),Ti(e,t)}else{if(Mi(e,i))return;KS.set(i),r.uniformMatrix3fv(this.addr,!1,KS),Ti(e,i)}}function PW(r,t){const e=this.cache,i=t.elements;if(i===void 0){if(Mi(e,t))return;r.uniformMatrix4fv(this.addr,!1,t),Ti(e,t)}else{if(Mi(e,i))return;YS.set(i),r.uniformMatrix4fv(this.addr,!1,YS),Ti(e,i)}}function OW(r,t){const e=this.cache;e[0]!==t&&(r.uniform1i(this.addr,t),e[0]=t)}function AW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Mi(e,t))return;r.uniform2iv(this.addr,t),Ti(e,t)}}function DW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Mi(e,t))return;r.uniform3iv(this.addr,t),Ti(e,t)}}function LW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Mi(e,t))return;r.uniform4iv(this.addr,t),Ti(e,t)}}function IW(r,t){const e=this.cache;e[0]!==t&&(r.uniform1ui(this.addr,t),e[0]=t)}function FW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Mi(e,t))return;r.uniform2uiv(this.addr,t),Ti(e,t)}}function NW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Mi(e,t))return;r.uniform3uiv(this.addr,t),Ti(e,t)}}function GW(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Mi(e,t))return;r.uniform4uiv(this.addr,t),Ti(e,t)}}function HW(r,t,e){const i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTexture2D(t||oM,n)}function WW(r,t,e){const i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTexture3D(t||aM,n)}function VW(r,t,e){const i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTextureCube(t||lM,n)}function kW(r,t,e){const i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTexture2DArray(t||sM,n)}function BW(r){switch(r){case 5126:return EW;case 35664:return xW;case 35665:return RW;case 35666:return bW;case 35674:return MW;case 35675:return TW;case 35676:return PW;case 5124:case 35670:return OW;case 35667:case 35671:return AW;case 35668:case 35672:return DW;case 35669:case 35673:return LW;case 5125:return IW;case 36294:return FW;case 36295:return NW;case 36296:return GW;case 35678:case 36198:case 36298:case 36306:case 35682:return HW;case 35679:case 36299:case 36307:return WW;case 35680:case 36300:case 36308:case 36293:return VW;case 36289:case 36303:case 36311:case 36292:return kW}}function UW(r,t){r.uniform1fv(this.addr,t)}function zW(r,t){const e=Yu(t,this.size,2);r.uniform2fv(this.addr,e)}function jW(r,t){const e=Yu(t,this.size,3);r.uniform3fv(this.addr,e)}function $W(r,t){const e=Yu(t,this.size,4);r.uniform4fv(this.addr,e)}function YW(r,t){const e=Yu(t,this.size,4);r.uniformMatrix2fv(this.addr,!1,e)}function KW(r,t){const e=Yu(t,this.size,9);r.uniformMatrix3fv(this.addr,!1,e)}function XW(r,t){const e=Yu(t,this.size,16);r.uniformMatrix4fv(this.addr,!1,e)}function qW(r,t){r.uniform1iv(this.addr,t)}function ZW(r,t){r.uniform2iv(this.addr,t)}function JW(r,t){r.uniform3iv(this.addr,t)}function QW(r,t){r.uniform4iv(this.addr,t)}function tV(r,t){r.uniform1uiv(this.addr,t)}function eV(r,t){r.uniform2uiv(this.addr,t)}function iV(r,t){r.uniform3uiv(this.addr,t)}function nV(r,t){r.uniform4uiv(this.addr,t)}function rV(r,t,e){const i=this.cache,n=t.length,o=xg(e,n);Mi(i,o)||(r.uniform1iv(this.addr,o),Ti(i,o));for(let s=0;s!==n;++s)e.setTexture2D(t[s]||oM,o[s])}function oV(r,t,e){const i=this.cache,n=t.length,o=xg(e,n);Mi(i,o)||(r.uniform1iv(this.addr,o),Ti(i,o));for(let s=0;s!==n;++s)e.setTexture3D(t[s]||aM,o[s])}function sV(r,t,e){const i=this.cache,n=t.length,o=xg(e,n);Mi(i,o)||(r.uniform1iv(this.addr,o),Ti(i,o));for(let s=0;s!==n;++s)e.setTextureCube(t[s]||lM,o[s])}function aV(r,t,e){const i=this.cache,n=t.length,o=xg(e,n);Mi(i,o)||(r.uniform1iv(this.addr,o),Ti(i,o));for(let s=0;s!==n;++s)e.setTexture2DArray(t[s]||sM,o[s])}function lV(r){switch(r){case 5126:return UW;case 35664:return zW;case 35665:return jW;case 35666:return $W;case 35674:return YW;case 35675:return KW;case 35676:return XW;case 5124:case 35670:return qW;case 35667:case 35671:return ZW;case 35668:case 35672:return JW;case 35669:case 35673:return QW;case 5125:return tV;case 36294:return eV;case 36295:return iV;case 36296:return nV;case 35678:case 36198:case 36298:case 36306:case 35682:return rV;case 35679:case 36299:case 36307:return oV;case 35680:case 36300:case 36308:case 36293:return sV;case 36289:case 36303:case 36311:case 36292:return aV}}class uV{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=BW(e.type)}}class cV{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=lV(e.type)}}class hV{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const n=this.seq;for(let o=0,s=n.length;o!==s;++o){const a=n[o];a.setValue(t,e[a.id],i)}}}const Ym=/(\w+)(\])?(\[|\.)?/g;function qS(r,t){r.seq.push(t),r.map[t.id]=t}function dV(r,t,e){const i=r.name,n=i.length;for(Ym.lastIndex=0;;){const o=Ym.exec(i),s=Ym.lastIndex;let a=o[1];const l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===n){qS(e,u===void 0?new uV(a,r,t):new cV(a,r,t));break}else{let h=e.map[a];h===void 0&&(h=new hV(a),qS(e,h)),e=h}}}class Hp{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,35718);for(let n=0;n<i;++n){const o=t.getActiveUniform(e,n),s=t.getUniformLocation(e,o.name);dV(o,s,this)}}setValue(t,e,i,n){const o=this.map[e];o!==void 0&&o.setValue(t,i,n)}setOptional(t,e,i){const n=e[i];n!==void 0&&this.setValue(t,i,n)}static upload(t,e,i,n){for(let o=0,s=e.length;o!==s;++o){const a=e[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(t,l.value,n)}}static seqWithValue(t,e){const i=[];for(let n=0,o=t.length;n!==o;++n){const s=t[n];s.id in e&&i.push(s)}return i}}function ZS(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}let pV=0;function fV(r,t){const e=r.split(`
`),i=[],n=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=n;s<o;s++){const a=s+1;i.push(`${a===t?">":" "} ${a}: ${e[s]}`)}return i.join(`
`)}function gV(r){switch(r){case Za:return["Linear","( value )"];case di:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function JS(r,t,e){const i=r.getShaderParameter(t,35713),n=r.getShaderInfoLog(t).trim();if(i&&n==="")return"";const o=/ERROR: 0:(\d+)/.exec(n);if(o){const s=parseInt(o[1]);return e.toUpperCase()+`

`+n+`

`+fV(r.getShaderSource(t),s)}else return n}function mV(r,t){const e=gV(t);return"vec4 "+r+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function vV(r,t){let e;switch(t){case CG:e="Linear";break;case wG:e="Reinhard";break;case SG:e="OptimizedCineon";break;case EG:e="ACESFilmic";break;case xG:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+r+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function yV(r){return[r.extensionDerivatives||!!r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(kc).join(`
`)}function _V(r){const t=[];for(const e in r){const i=r[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function CV(r,t){const e={},i=r.getProgramParameter(t,35721);for(let n=0;n<i;n++){const o=r.getActiveAttrib(t,n),s=o.name;let a=1;o.type===35674&&(a=2),o.type===35675&&(a=3),o.type===35676&&(a=4),e[s]={type:o.type,location:r.getAttribLocation(t,s),locationSize:a}}return e}function kc(r){return r!==""}function QS(r,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function tE(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const wV=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ly(r){return r.replace(wV,SV)}function SV(r,t){const e=fe[t];if(e===void 0)throw new Error("Can not resolve #include <"+t+">");return Ly(e)}const EV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eE(r){return r.replace(EV,xV)}function xV(r,t,e,i){let n="";for(let o=parseInt(t);o<parseInt(e);o++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return n}function iE(r){let t="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?t+=`
#define HIGH_PRECISION`:r.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function RV(r){let t="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Bb?t="SHADOWMAP_TYPE_PCF":r.shadowMapType===JN?t="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Wc&&(t="SHADOWMAP_TYPE_VSM"),t}function bV(r){let t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Su:case Eu:t="ENVMAP_TYPE_CUBE";break;case Cg:t="ENVMAP_TYPE_CUBE_UV";break}return t}function MV(r){let t="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Eu:t="ENVMAP_MODE_REFRACTION";break}return t}function TV(r){let t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case jb:t="ENVMAP_BLENDING_MULTIPLY";break;case yG:t="ENVMAP_BLENDING_MIX";break;case _G:t="ENVMAP_BLENDING_ADD";break}return t}function PV(r){const t=r.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function OV(r,t,e,i){const n=r.getContext(),o=e.defines;let s=e.vertexShader,a=e.fragmentShader;const l=RV(e),u=bV(e),c=MV(e),h=TV(e),d=PV(e),p=e.isWebGL2?"":yV(e),f=_V(o),m=n.createProgram();let g,y,C=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(g=[f].filter(kc).join(`
`),g.length>0&&(g+=`
`),y=[p,f].filter(kc).join(`
`),y.length>0&&(y+=`
`)):(g=[iE(e),"#define SHADER_NAME "+e.shaderName,f,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(kc).join(`
`),y=[p,iE(e),"#define SHADER_NAME "+e.shaderName,f,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.envMap?"#define "+c:"",e.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Xo?"#define TONE_MAPPING":"",e.toneMapping!==Xo?fe.tonemapping_pars_fragment:"",e.toneMapping!==Xo?vV("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",fe.encodings_pars_fragment,mV("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(kc).join(`
`)),s=Ly(s),s=QS(s,e),s=tE(s,e),a=Ly(a),a=QS(a,e),a=tE(a,e),s=eE(s),a=eE(a),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,y=["#define varying in",e.glslVersion===bS?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===bS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const w=C+g+s,S=C+y+a,E=ZS(n,35633,w),M=ZS(n,35632,S);if(n.attachShader(m,E),n.attachShader(m,M),e.index0AttributeName!==void 0?n.bindAttribLocation(m,0,e.index0AttributeName):e.morphTargets===!0&&n.bindAttribLocation(m,0,"position"),n.linkProgram(m),r.debug.checkShaderErrors){const T=n.getProgramInfoLog(m).trim(),N=n.getShaderInfoLog(E).trim(),K=n.getShaderInfoLog(M).trim();let Q=!0,z=!0;if(n.getProgramParameter(m,35714)===!1){Q=!1;const V=JS(n,E,"vertex"),W=JS(n,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(m,35715)+`

Program Info Log: `+T+`
`+V+`
`+W)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(N===""||K==="")&&(z=!1);z&&(this.diagnostics={runnable:Q,programLog:T,vertexShader:{log:N,prefix:g},fragmentShader:{log:K,prefix:y}})}n.deleteShader(E),n.deleteShader(M);let L;this.getUniforms=function(){return L===void 0&&(L=new Hp(n,m)),L};let x;return this.getAttributes=function(){return x===void 0&&(x=CV(n,m)),x},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(m),this.program=void 0},this.name=e.shaderName,this.id=pV++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=E,this.fragmentShader=M,this}let AV=0;class DV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(e),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return s.has(n)===!1&&(s.add(n),n.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return i===void 0&&(i=new LV(t),e.set(t,i)),i}}class LV{constructor(t){this.id=AV++,this.code=t,this.usedTimes=0}}function IV(r,t,e,i,n,o,s){const a=new wC,l=new DV,u=[],c=n.isWebGL2,h=n.logarithmicDepthBuffer,d=n.vertexTextures;let p=n.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(x,T,N,K,Q){const z=K.fog,V=Q.geometry,W=x.isMeshStandardMaterial?K.environment:null,q=(x.isMeshStandardMaterial?e:t).get(x.envMap||W),Y=!!q&&q.mapping===Cg?q.image.height:null,X=f[x.type];x.precision!==null&&(p=n.getMaxPrecision(x.precision),p!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",p,"instead."));const B=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,j=B!==void 0?B.length:0;let pt=0;V.morphAttributes.position!==void 0&&(pt=1),V.morphAttributes.normal!==void 0&&(pt=2),V.morphAttributes.color!==void 0&&(pt=3);let G,vt,mt,xt;if(X){const De=io[X];G=De.vertexShader,vt=De.fragmentShader}else G=x.vertexShader,vt=x.fragmentShader,l.update(x),mt=l.getVertexShaderID(x),xt=l.getFragmentShaderID(x);const st=r.getRenderTarget(),ne=x.alphaTest>0,Lt=x.clearcoat>0,Ft=x.iridescence>0;return{isWebGL2:c,shaderID:X,shaderName:x.type,vertexShader:G,fragmentShader:vt,defines:x.defines,customVertexShaderID:mt,customFragmentShaderID:xt,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:p,instancing:Q.isInstancedMesh===!0,instancingColor:Q.isInstancedMesh===!0&&Q.instanceColor!==null,supportsVertexTextures:d,outputEncoding:st===null?r.outputEncoding:st.isXRRenderTarget===!0?st.texture.encoding:Za,map:!!x.map,matcap:!!x.matcap,envMap:!!q,envMapMode:q&&q.mapping,envMapCubeUVHeight:Y,lightMap:!!x.lightMap,aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:x.normalMapType===zG,tangentSpaceNormalMap:x.normalMapType===UG,decodeVideoTexture:!!x.map&&x.map.isVideoTexture===!0&&x.map.encoding===di,clearcoat:Lt,clearcoatMap:Lt&&!!x.clearcoatMap,clearcoatRoughnessMap:Lt&&!!x.clearcoatRoughnessMap,clearcoatNormalMap:Lt&&!!x.clearcoatNormalMap,iridescence:Ft,iridescenceMap:Ft&&!!x.iridescenceMap,iridescenceThicknessMap:Ft&&!!x.iridescenceThicknessMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,specularIntensityMap:!!x.specularIntensityMap,specularColorMap:!!x.specularColorMap,opaque:x.transparent===!1&&x.blending===hu,alphaMap:!!x.alphaMap,alphaTest:ne,gradientMap:!!x.gradientMap,sheen:x.sheen>0,sheenColorMap:!!x.sheenColorMap,sheenRoughnessMap:!!x.sheenRoughnessMap,transmission:x.transmission>0,transmissionMap:!!x.transmissionMap,thicknessMap:!!x.thicknessMap,combine:x.combine,vertexTangents:!!x.normalMap&&!!V.attributes.tangent,vertexColors:x.vertexColors,vertexAlphas:x.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,vertexUvs:!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatMap||!!x.clearcoatRoughnessMap||!!x.clearcoatNormalMap||!!x.iridescenceMap||!!x.iridescenceThicknessMap||!!x.displacementMap||!!x.transmissionMap||!!x.thicknessMap||!!x.specularIntensityMap||!!x.specularColorMap||!!x.sheenColorMap||!!x.sheenRoughnessMap,uvsVertexOnly:!(!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatNormalMap||!!x.iridescenceMap||!!x.iridescenceThicknessMap||x.transmission>0||!!x.transmissionMap||!!x.thicknessMap||!!x.specularIntensityMap||!!x.specularColorMap||x.sheen>0||!!x.sheenColorMap||!!x.sheenRoughnessMap)&&!!x.displacementMap,fog:!!z,useFog:x.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:!!x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:h,skinning:Q.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:pt,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:x.dithering,shadowMapEnabled:r.shadowMap.enabled&&N.length>0,shadowMapType:r.shadowMap.type,toneMapping:x.toneMapped?r.toneMapping:Xo,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===zi,flipSided:x.side===gr,useDepthPacking:!!x.depthPacking,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.fragDepth,extensionDrawBuffers:x.extensions&&x.extensions.drawBuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}}function g(x){const T=[];if(x.shaderID?T.push(x.shaderID):(T.push(x.customVertexShaderID),T.push(x.customFragmentShaderID)),x.defines!==void 0)for(const N in x.defines)T.push(N),T.push(x.defines[N]);return x.isRawShaderMaterial===!1&&(y(T,x),C(T,x),T.push(r.outputEncoding)),T.push(x.customProgramCacheKey),T.join()}function y(x,T){x.push(T.precision),x.push(T.outputEncoding),x.push(T.envMapMode),x.push(T.envMapCubeUVHeight),x.push(T.combine),x.push(T.vertexUvs),x.push(T.fogExp2),x.push(T.sizeAttenuation),x.push(T.morphTargetsCount),x.push(T.morphAttributeCount),x.push(T.numDirLights),x.push(T.numPointLights),x.push(T.numSpotLights),x.push(T.numSpotLightMaps),x.push(T.numHemiLights),x.push(T.numRectAreaLights),x.push(T.numDirLightShadows),x.push(T.numPointLightShadows),x.push(T.numSpotLightShadows),x.push(T.numSpotLightShadowsWithMaps),x.push(T.shadowMapType),x.push(T.toneMapping),x.push(T.numClippingPlanes),x.push(T.numClipIntersection),x.push(T.depthPacking)}function C(x,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.map&&a.enable(4),T.matcap&&a.enable(5),T.envMap&&a.enable(6),T.lightMap&&a.enable(7),T.aoMap&&a.enable(8),T.emissiveMap&&a.enable(9),T.bumpMap&&a.enable(10),T.normalMap&&a.enable(11),T.objectSpaceNormalMap&&a.enable(12),T.tangentSpaceNormalMap&&a.enable(13),T.clearcoat&&a.enable(14),T.clearcoatMap&&a.enable(15),T.clearcoatRoughnessMap&&a.enable(16),T.clearcoatNormalMap&&a.enable(17),T.iridescence&&a.enable(18),T.iridescenceMap&&a.enable(19),T.iridescenceThicknessMap&&a.enable(20),T.displacementMap&&a.enable(21),T.specularMap&&a.enable(22),T.roughnessMap&&a.enable(23),T.metalnessMap&&a.enable(24),T.gradientMap&&a.enable(25),T.alphaMap&&a.enable(26),T.alphaTest&&a.enable(27),T.vertexColors&&a.enable(28),T.vertexAlphas&&a.enable(29),T.vertexUvs&&a.enable(30),T.vertexTangents&&a.enable(31),T.uvsVertexOnly&&a.enable(32),x.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.physicallyCorrectLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.specularIntensityMap&&a.enable(15),T.specularColorMap&&a.enable(16),T.transmission&&a.enable(17),T.transmissionMap&&a.enable(18),T.thicknessMap&&a.enable(19),T.sheen&&a.enable(20),T.sheenColorMap&&a.enable(21),T.sheenRoughnessMap&&a.enable(22),T.decodeVideoTexture&&a.enable(23),T.opaque&&a.enable(24),x.push(a.mask)}function w(x){const T=f[x.type];let N;if(T){const K=io[T];N=_2.clone(K.uniforms)}else N=x.uniforms;return N}function S(x,T){let N;for(let K=0,Q=u.length;K<Q;K++){const z=u[K];if(z.cacheKey===T){N=z,++N.usedTimes;break}}return N===void 0&&(N=new OV(r,T,x,o),u.push(N)),N}function E(x){if(--x.usedTimes===0){const T=u.indexOf(x);u[T]=u[u.length-1],u.pop(),x.destroy()}}function M(x){l.remove(x)}function L(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:w,acquireProgram:S,releaseProgram:E,releaseShaderCache:M,programs:u,dispose:L}}function FV(){let r=new WeakMap;function t(o){let s=r.get(o);return s===void 0&&(s={},r.set(o,s)),s}function e(o){r.delete(o)}function i(o,s,a){r.get(o)[s]=a}function n(){r=new WeakMap}return{get:t,remove:e,update:i,dispose:n}}function NV(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.material.id!==t.material.id?r.material.id-t.material.id:r.z!==t.z?r.z-t.z:r.id-t.id}function nE(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.z!==t.z?t.z-r.z:r.id-t.id}function rE(){const r=[];let t=0;const e=[],i=[],n=[];function o(){t=0,e.length=0,i.length=0,n.length=0}function s(h,d,p,f,m,g){let y=r[t];return y===void 0?(y={id:h.id,object:h,geometry:d,material:p,groupOrder:f,renderOrder:h.renderOrder,z:m,group:g},r[t]=y):(y.id=h.id,y.object=h,y.geometry=d,y.material=p,y.groupOrder=f,y.renderOrder=h.renderOrder,y.z=m,y.group=g),t++,y}function a(h,d,p,f,m,g){const y=s(h,d,p,f,m,g);p.transmission>0?i.push(y):p.transparent===!0?n.push(y):e.push(y)}function l(h,d,p,f,m,g){const y=s(h,d,p,f,m,g);p.transmission>0?i.unshift(y):p.transparent===!0?n.unshift(y):e.unshift(y)}function u(h,d){e.length>1&&e.sort(h||NV),i.length>1&&i.sort(d||nE),n.length>1&&n.sort(d||nE)}function c(){for(let h=t,d=r.length;h<d;h++){const p=r[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:e,transmissive:i,transparent:n,init:o,push:a,unshift:l,finish:c,sort:u}}function GV(){let r=new WeakMap;function t(i,n){const o=r.get(i);let s;return o===void 0?(s=new rE,r.set(i,[s])):n>=o.length?(s=new rE,o.push(s)):s=o[n],s}function e(){r=new WeakMap}return{get:t,dispose:e}}function HV(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new Z,color:new ti};break;case"SpotLight":e={position:new Z,direction:new Z,color:new ti,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Z,color:new ti,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Z,skyColor:new ti,groundColor:new ti};break;case"RectAreaLight":e={color:new ti,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return r[t.id]=e,e}}}function WV(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[t.id]=e,e}}}let VV=0;function kV(r,t){return(t.castShadow?2:0)-(r.castShadow?2:0)+(t.map?1:0)-(r.map?1:0)}function BV(r,t){const e=new HV,i=WV(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)n.probe.push(new Z);const o=new Z,s=new Wi,a=new Wi;function l(c,h){let d=0,p=0,f=0;for(let K=0;K<9;K++)n.probe[K].set(0,0,0);let m=0,g=0,y=0,C=0,w=0,S=0,E=0,M=0,L=0,x=0;c.sort(kV);const T=h!==!0?Math.PI:1;for(let K=0,Q=c.length;K<Q;K++){const z=c[K],V=z.color,W=z.intensity,q=z.distance,Y=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)d+=V.r*W*T,p+=V.g*W*T,f+=V.b*W*T;else if(z.isLightProbe)for(let X=0;X<9;X++)n.probe[X].addScaledVector(z.sh.coefficients[X],W);else if(z.isDirectionalLight){const X=e.get(z);if(X.color.copy(z.color).multiplyScalar(z.intensity*T),z.castShadow){const B=z.shadow,j=i.get(z);j.shadowBias=B.bias,j.shadowNormalBias=B.normalBias,j.shadowRadius=B.radius,j.shadowMapSize=B.mapSize,n.directionalShadow[m]=j,n.directionalShadowMap[m]=Y,n.directionalShadowMatrix[m]=z.shadow.matrix,S++}n.directional[m]=X,m++}else if(z.isSpotLight){const X=e.get(z);X.position.setFromMatrixPosition(z.matrixWorld),X.color.copy(V).multiplyScalar(W*T),X.distance=q,X.coneCos=Math.cos(z.angle),X.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),X.decay=z.decay,n.spot[y]=X;const B=z.shadow;if(z.map&&(n.spotLightMap[L]=z.map,L++,B.updateMatrices(z),z.castShadow&&x++),n.spotLightMatrix[y]=B.matrix,z.castShadow){const j=i.get(z);j.shadowBias=B.bias,j.shadowNormalBias=B.normalBias,j.shadowRadius=B.radius,j.shadowMapSize=B.mapSize,n.spotShadow[y]=j,n.spotShadowMap[y]=Y,M++}y++}else if(z.isRectAreaLight){const X=e.get(z);X.color.copy(V).multiplyScalar(W),X.halfWidth.set(z.width*.5,0,0),X.halfHeight.set(0,z.height*.5,0),n.rectArea[C]=X,C++}else if(z.isPointLight){const X=e.get(z);if(X.color.copy(z.color).multiplyScalar(z.intensity*T),X.distance=z.distance,X.decay=z.decay,z.castShadow){const B=z.shadow,j=i.get(z);j.shadowBias=B.bias,j.shadowNormalBias=B.normalBias,j.shadowRadius=B.radius,j.shadowMapSize=B.mapSize,j.shadowCameraNear=B.camera.near,j.shadowCameraFar=B.camera.far,n.pointShadow[g]=j,n.pointShadowMap[g]=Y,n.pointShadowMatrix[g]=z.shadow.matrix,E++}n.point[g]=X,g++}else if(z.isHemisphereLight){const X=e.get(z);X.skyColor.copy(z.color).multiplyScalar(W*T),X.groundColor.copy(z.groundColor).multiplyScalar(W*T),n.hemi[w]=X,w++}}C>0&&(t.isWebGL2||r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Mt.LTC_FLOAT_1,n.rectAreaLTC2=Mt.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Mt.LTC_HALF_1,n.rectAreaLTC2=Mt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=p,n.ambient[2]=f;const N=n.hash;(N.directionalLength!==m||N.pointLength!==g||N.spotLength!==y||N.rectAreaLength!==C||N.hemiLength!==w||N.numDirectionalShadows!==S||N.numPointShadows!==E||N.numSpotShadows!==M||N.numSpotMaps!==L)&&(n.directional.length=m,n.spot.length=y,n.rectArea.length=C,n.point.length=g,n.hemi.length=w,n.directionalShadow.length=S,n.directionalShadowMap.length=S,n.pointShadow.length=E,n.pointShadowMap.length=E,n.spotShadow.length=M,n.spotShadowMap.length=M,n.directionalShadowMatrix.length=S,n.pointShadowMatrix.length=E,n.spotLightMatrix.length=M+L-x,n.spotLightMap.length=L,n.numSpotLightShadowsWithMaps=x,N.directionalLength=m,N.pointLength=g,N.spotLength=y,N.rectAreaLength=C,N.hemiLength=w,N.numDirectionalShadows=S,N.numPointShadows=E,N.numSpotShadows=M,N.numSpotMaps=L,n.version=VV++)}function u(c,h){let d=0,p=0,f=0,m=0,g=0;const y=h.matrixWorldInverse;for(let C=0,w=c.length;C<w;C++){const S=c[C];if(S.isDirectionalLight){const E=n.directional[d];E.direction.setFromMatrixPosition(S.matrixWorld),o.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(o),E.direction.transformDirection(y),d++}else if(S.isSpotLight){const E=n.spot[f];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(S.matrixWorld),o.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(o),E.direction.transformDirection(y),f++}else if(S.isRectAreaLight){const E=n.rectArea[m];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),a.identity(),s.copy(S.matrixWorld),s.premultiply(y),a.extractRotation(s),E.halfWidth.set(S.width*.5,0,0),E.halfHeight.set(0,S.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),m++}else if(S.isPointLight){const E=n.point[p];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),p++}else if(S.isHemisphereLight){const E=n.hemi[g];E.direction.setFromMatrixPosition(S.matrixWorld),E.direction.transformDirection(y),g++}}}return{setup:l,setupView:u,state:n}}function oE(r,t){const e=new BV(r,t),i=[],n=[];function o(){i.length=0,n.length=0}function s(h){i.push(h)}function a(h){n.push(h)}function l(h){e.setup(i,h)}function u(h){e.setupView(i,h)}return{init:o,state:{lightsArray:i,shadowsArray:n,lights:e},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:a}}function UV(r,t){let e=new WeakMap;function i(o,s=0){const a=e.get(o);let l;return a===void 0?(l=new oE(r,t),e.set(o,[l])):s>=a.length?(l=new oE(r,t),a.push(l)):l=a[s],l}function n(){e=new WeakMap}return{get:i,dispose:n}}class zV extends Xh{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=kG,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class jV extends Xh{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Z,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const $V=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,YV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function KV(r,t,e){let i=new nM;const n=new Ye,o=new Ye,s=new $i,a=new zV({depthPacking:BG}),l=new jV,u={},c=e.maxTextureSize,h={0:gr,1:wu,2:zi},d=new Qa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:$V,fragmentShader:YV}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new Qn;f.setAttribute("position",new fo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Fi(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bb,this.render=function(S,E,M){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||S.length===0)return;const L=r.getRenderTarget(),x=r.getActiveCubeFace(),T=r.getActiveMipmapLevel(),N=r.state;N.setBlending(Bs),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let K=0,Q=S.length;K<Q;K++){const z=S[K],V=z.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;n.copy(V.mapSize);const W=V.getFrameExtents();if(n.multiply(W),o.copy(V.mapSize),(n.x>c||n.y>c)&&(n.x>c&&(o.x=Math.floor(c/W.x),n.x=o.x*W.x,V.mapSize.x=o.x),n.y>c&&(o.y=Math.floor(c/W.y),n.y=o.y*W.y,V.mapSize.y=o.y)),V.map===null){const Y=this.type!==Wc?{minFilter:On,magFilter:On}:{};V.map=new Ja(n.x,n.y,Y),V.map.texture.name=z.name+".shadowMap",V.camera.updateProjectionMatrix()}r.setRenderTarget(V.map),r.clear();const q=V.getViewportCount();for(let Y=0;Y<q;Y++){const X=V.getViewport(Y);s.set(o.x*X.x,o.y*X.y,o.x*X.z,o.y*X.w),N.viewport(s),V.updateMatrices(z,Y),i=V.getFrustum(),w(E,M,V.camera,z,this.type)}V.isPointLightShadow!==!0&&this.type===Wc&&y(V,M),V.needsUpdate=!1}g.needsUpdate=!1,r.setRenderTarget(L,x,T)};function y(S,E){const M=t.update(m);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,p.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Ja(n.x,n.y)),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,r.setRenderTarget(S.mapPass),r.clear(),r.renderBufferDirect(E,null,M,d,m,null),p.uniforms.shadow_pass.value=S.mapPass.texture,p.uniforms.resolution.value=S.mapSize,p.uniforms.radius.value=S.radius,r.setRenderTarget(S.map),r.clear(),r.renderBufferDirect(E,null,M,p,m,null)}function C(S,E,M,L,x,T){let N=null;const K=M.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(K!==void 0?N=K:N=M.isPointLight===!0?l:a,r.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0){const Q=N.uuid,z=E.uuid;let V=u[Q];V===void 0&&(V={},u[Q]=V);let W=V[z];W===void 0&&(W=N.clone(),V[z]=W),N=W}return N.visible=E.visible,N.wireframe=E.wireframe,T===Wc?N.side=E.shadowSide!==null?E.shadowSide:E.side:N.side=E.shadowSide!==null?E.shadowSide:h[E.side],N.alphaMap=E.alphaMap,N.alphaTest=E.alphaTest,N.clipShadows=E.clipShadows,N.clippingPlanes=E.clippingPlanes,N.clipIntersection=E.clipIntersection,N.displacementMap=E.displacementMap,N.displacementScale=E.displacementScale,N.displacementBias=E.displacementBias,N.wireframeLinewidth=E.wireframeLinewidth,N.linewidth=E.linewidth,M.isPointLight===!0&&N.isMeshDistanceMaterial===!0&&(N.referencePosition.setFromMatrixPosition(M.matrixWorld),N.nearDistance=L,N.farDistance=x),N}function w(S,E,M,L,x){if(S.visible===!1)return;if(S.layers.test(E.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&x===Wc)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,S.matrixWorld);const K=t.update(S),Q=S.material;if(Array.isArray(Q)){const z=K.groups;for(let V=0,W=z.length;V<W;V++){const q=z[V],Y=Q[q.materialIndex];if(Y&&Y.visible){const X=C(S,Y,L,M.near,M.far,x);r.renderBufferDirect(M,null,K,X,S,q)}}}else if(Q.visible){const z=C(S,Q,L,M.near,M.far,x);r.renderBufferDirect(M,null,K,z,S,null)}}const N=S.children;for(let K=0,Q=N.length;K<Q;K++)w(N[K],E,M,L,x)}}function XV(r,t,e){const i=e.isWebGL2;function n(){let k=!1;const rt=new $i;let _t=null;const Pt=new $i(0,0,0,0);return{setMask:function(Ht){_t!==Ht&&!k&&(r.colorMask(Ht,Ht,Ht,Ht),_t=Ht)},setLocked:function(Ht){k=Ht},setClear:function(Ht,be,Pe,je,ui){ui===!0&&(Ht*=je,be*=je,Pe*=je),rt.set(Ht,be,Pe,je),Pt.equals(rt)===!1&&(r.clearColor(Ht,be,Pe,je),Pt.copy(rt))},reset:function(){k=!1,_t=null,Pt.set(-1,0,0,0)}}}function o(){let k=!1,rt=null,_t=null,Pt=null;return{setTest:function(Ht){Ht?ne(2929):Lt(2929)},setMask:function(Ht){rt!==Ht&&!k&&(r.depthMask(Ht),rt=Ht)},setFunc:function(Ht){if(_t!==Ht){switch(Ht){case hG:r.depthFunc(512);break;case dG:r.depthFunc(519);break;case pG:r.depthFunc(513);break;case Ry:r.depthFunc(515);break;case fG:r.depthFunc(514);break;case gG:r.depthFunc(518);break;case mG:r.depthFunc(516);break;case vG:r.depthFunc(517);break;default:r.depthFunc(515)}_t=Ht}},setLocked:function(Ht){k=Ht},setClear:function(Ht){Pt!==Ht&&(r.clearDepth(Ht),Pt=Ht)},reset:function(){k=!1,rt=null,_t=null,Pt=null}}}function s(){let k=!1,rt=null,_t=null,Pt=null,Ht=null,be=null,Pe=null,je=null,ui=null;return{setTest:function(Se){k||(Se?ne(2960):Lt(2960))},setMask:function(Se){rt!==Se&&!k&&(r.stencilMask(Se),rt=Se)},setFunc:function(Se,Je,Si){(_t!==Se||Pt!==Je||Ht!==Si)&&(r.stencilFunc(Se,Je,Si),_t=Se,Pt=Je,Ht=Si)},setOp:function(Se,Je,Si){(be!==Se||Pe!==Je||je!==Si)&&(r.stencilOp(Se,Je,Si),be=Se,Pe=Je,je=Si)},setLocked:function(Se){k=Se},setClear:function(Se){ui!==Se&&(r.clearStencil(Se),ui=Se)},reset:function(){k=!1,rt=null,_t=null,Pt=null,Ht=null,be=null,Pe=null,je=null,ui=null}}}const a=new n,l=new o,u=new s,c=new WeakMap,h=new WeakMap;let d={},p={},f=new WeakMap,m=[],g=null,y=!1,C=null,w=null,S=null,E=null,M=null,L=null,x=null,T=!1,N=null,K=null,Q=null,z=null,V=null;const W=r.getParameter(35661);let q=!1,Y=0;const X=r.getParameter(7938);X.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec(X)[1]),q=Y>=1):X.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),q=Y>=2);let B=null,j={};const pt=r.getParameter(3088),G=r.getParameter(2978),vt=new $i().fromArray(pt),mt=new $i().fromArray(G);function xt(k,rt,_t){const Pt=new Uint8Array(4),Ht=r.createTexture();r.bindTexture(k,Ht),r.texParameteri(k,10241,9728),r.texParameteri(k,10240,9728);for(let be=0;be<_t;be++)r.texImage2D(rt+be,0,6408,1,1,0,6408,5121,Pt);return Ht}const st={};st[3553]=xt(3553,3553,1),st[34067]=xt(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ne(2929),l.setFunc(Ry),Bt(!1),Xe(q0),ne(2884),ze(Bs);function ne(k){d[k]!==!0&&(r.enable(k),d[k]=!0)}function Lt(k){d[k]!==!1&&(r.disable(k),d[k]=!1)}function Ft(k,rt){return p[k]!==rt?(r.bindFramebuffer(k,rt),p[k]=rt,i&&(k===36009&&(p[36160]=rt),k===36160&&(p[36009]=rt)),!0):!1}function Rt(k,rt){let _t=m,Pt=!1;if(k)if(_t=f.get(rt),_t===void 0&&(_t=[],f.set(rt,_t)),k.isWebGLMultipleRenderTargets){const Ht=k.texture;if(_t.length!==Ht.length||_t[0]!==36064){for(let be=0,Pe=Ht.length;be<Pe;be++)_t[be]=36064+be;_t.length=Ht.length,Pt=!0}}else _t[0]!==36064&&(_t[0]=36064,Pt=!0);else _t[0]!==1029&&(_t[0]=1029,Pt=!0);Pt&&(e.isWebGL2?r.drawBuffers(_t):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(_t))}function De(k){return g!==k?(r.useProgram(k),g=k,!0):!1}const Ut={[Kl]:32774,[tG]:32778,[eG]:32779};if(i)Ut[tS]=32775,Ut[eS]=32776;else{const k=t.get("EXT_blend_minmax");k!==null&&(Ut[tS]=k.MIN_EXT,Ut[eS]=k.MAX_EXT)}const zt={[iG]:0,[nG]:1,[rG]:768,[Ub]:770,[cG]:776,[lG]:774,[sG]:772,[oG]:769,[zb]:771,[uG]:775,[aG]:773};function ze(k,rt,_t,Pt,Ht,be,Pe,je){if(k===Bs){y===!0&&(Lt(3042),y=!1);return}if(y===!1&&(ne(3042),y=!0),k!==QN){if(k!==C||je!==T){if((w!==Kl||M!==Kl)&&(r.blendEquation(32774),w=Kl,M=Kl),je)switch(k){case hu:r.blendFuncSeparate(1,771,1,771);break;case Z0:r.blendFunc(1,1);break;case J0:r.blendFuncSeparate(0,769,0,1);break;case Q0:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}else switch(k){case hu:r.blendFuncSeparate(770,771,1,771);break;case Z0:r.blendFunc(770,1);break;case J0:r.blendFuncSeparate(0,769,0,1);break;case Q0:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}S=null,E=null,L=null,x=null,C=k,T=je}return}Ht=Ht||rt,be=be||_t,Pe=Pe||Pt,(rt!==w||Ht!==M)&&(r.blendEquationSeparate(Ut[rt],Ut[Ht]),w=rt,M=Ht),(_t!==S||Pt!==E||be!==L||Pe!==x)&&(r.blendFuncSeparate(zt[_t],zt[Pt],zt[be],zt[Pe]),S=_t,E=Pt,L=be,x=Pe),C=k,T=null}function ni(k,rt){k.side===zi?Lt(2884):ne(2884);let _t=k.side===gr;rt&&(_t=!_t),Bt(_t),k.blending===hu&&k.transparent===!1?ze(Bs):ze(k.blending,k.blendEquation,k.blendSrc,k.blendDst,k.blendEquationAlpha,k.blendSrcAlpha,k.blendDstAlpha,k.premultipliedAlpha),l.setFunc(k.depthFunc),l.setTest(k.depthTest),l.setMask(k.depthWrite),a.setMask(k.colorWrite);const Pt=k.stencilWrite;u.setTest(Pt),Pt&&(u.setMask(k.stencilWriteMask),u.setFunc(k.stencilFunc,k.stencilRef,k.stencilFuncMask),u.setOp(k.stencilFail,k.stencilZFail,k.stencilZPass)),de(k.polygonOffset,k.polygonOffsetFactor,k.polygonOffsetUnits),k.alphaToCoverage===!0?ne(32926):Lt(32926)}function Bt(k){N!==k&&(k?r.frontFace(2304):r.frontFace(2305),N=k)}function Xe(k){k!==qN?(ne(2884),k!==K&&(k===q0?r.cullFace(1029):k===ZN?r.cullFace(1028):r.cullFace(1032))):Lt(2884),K=k}function Ge(k){k!==Q&&(q&&r.lineWidth(k),Q=k)}function de(k,rt,_t){k?(ne(32823),(z!==rt||V!==_t)&&(r.polygonOffset(rt,_t),z=rt,V=_t)):Lt(32823)}function Te(k){k?ne(3089):Lt(3089)}function Ve(k){k===void 0&&(k=33984+W-1),B!==k&&(r.activeTexture(k),B=k)}function I(k,rt,_t){_t===void 0&&(B===null?_t=33984+W-1:_t=B);let Pt=j[_t];Pt===void 0&&(Pt={type:void 0,texture:void 0},j[_t]=Pt),(Pt.type!==k||Pt.texture!==rt)&&(B!==_t&&(r.activeTexture(_t),B=_t),r.bindTexture(k,rt||st[k]),Pt.type=k,Pt.texture=rt)}function P(){const k=j[B];k!==void 0&&k.type!==void 0&&(r.bindTexture(k.type,null),k.type=void 0,k.texture=void 0)}function et(){try{r.compressedTexImage2D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function yt(){try{r.compressedTexImage3D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function St(){try{r.texSubImage2D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function bt(){try{r.texSubImage3D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function $t(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Tt(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function ct(){try{r.texStorage2D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function gt(){try{r.texStorage3D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Kt(){try{r.texImage2D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Wt(){try{r.texImage3D.apply(r,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Yt(k){vt.equals(k)===!1&&(r.scissor(k.x,k.y,k.z,k.w),vt.copy(k))}function jt(k){mt.equals(k)===!1&&(r.viewport(k.x,k.y,k.z,k.w),mt.copy(k))}function _e(k,rt){let _t=h.get(rt);_t===void 0&&(_t=new WeakMap,h.set(rt,_t));let Pt=_t.get(k);Pt===void 0&&(Pt=r.getUniformBlockIndex(rt,k.name),_t.set(k,Pt))}function we(k,rt){const Pt=h.get(rt).get(k);c.get(k)!==Pt&&(r.uniformBlockBinding(rt,Pt,k.__bindingPointIndex),c.set(k,Pt))}function ri(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),i===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),d={},B=null,j={},p={},f=new WeakMap,m=[],g=null,y=!1,C=null,w=null,S=null,E=null,M=null,L=null,x=null,T=!1,N=null,K=null,Q=null,z=null,V=null,vt.set(0,0,r.canvas.width,r.canvas.height),mt.set(0,0,r.canvas.width,r.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:ne,disable:Lt,bindFramebuffer:Ft,drawBuffers:Rt,useProgram:De,setBlending:ze,setMaterial:ni,setFlipSided:Bt,setCullFace:Xe,setLineWidth:Ge,setPolygonOffset:de,setScissorTest:Te,activeTexture:Ve,bindTexture:I,unbindTexture:P,compressedTexImage2D:et,compressedTexImage3D:yt,texImage2D:Kt,texImage3D:Wt,updateUBOMapping:_e,uniformBlockBinding:we,texStorage2D:ct,texStorage3D:gt,texSubImage2D:St,texSubImage3D:bt,compressedTexSubImage2D:$t,compressedTexSubImage3D:Tt,scissor:Yt,viewport:jt,reset:ri}}function qV(r,t,e,i,n,o,s){const a=n.isWebGL2,l=n.maxTextures,u=n.maxCubemapSize,c=n.maxTextureSize,h=n.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function C(I,P){return y?new OffscreenCanvas(I,P):Rh("canvas")}function w(I,P,et,yt){let St=1;if((I.width>yt||I.height>yt)&&(St=yt/Math.max(I.width,I.height)),St<1||P===!0)if(typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&I instanceof ImageBitmap){const bt=P?mf:Math.floor,$t=bt(St*I.width),Tt=bt(St*I.height);m===void 0&&(m=C($t,Tt));const ct=et?C($t,Tt):m;return ct.width=$t,ct.height=Tt,ct.getContext("2d").drawImage(I,0,0,$t,Tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+I.width+"x"+I.height+") to ("+$t+"x"+Tt+")."),ct}else return"data"in I&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+I.width+"x"+I.height+")."),I;return I}function S(I){return Ay(I.width)&&Ay(I.height)}function E(I){return a?!1:I.wrapS!==Dr||I.wrapT!==Dr||I.minFilter!==On&&I.minFilter!==lr}function M(I,P){return I.generateMipmaps&&P&&I.minFilter!==On&&I.minFilter!==lr}function L(I){r.generateMipmap(I)}function x(I,P,et,yt,St=!1){if(a===!1)return P;if(I!==null){if(r[I]!==void 0)return r[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let bt=P;return P===6403&&(et===5126&&(bt=33326),et===5131&&(bt=33325),et===5121&&(bt=33321)),P===33319&&(et===5126&&(bt=33328),et===5131&&(bt=33327),et===5121&&(bt=33323)),P===6408&&(et===5126&&(bt=34836),et===5131&&(bt=34842),et===5121&&(bt=yt===di&&St===!1?35907:32856),et===32819&&(bt=32854),et===32820&&(bt=32855)),(bt===33325||bt===33326||bt===33327||bt===33328||bt===34842||bt===34836)&&t.get("EXT_color_buffer_float"),bt}function T(I,P,et){return M(I,et)===!0||I.isFramebufferTexture&&I.minFilter!==On&&I.minFilter!==lr?Math.log2(Math.max(P.width,P.height))+1:I.mipmaps!==void 0&&I.mipmaps.length>0?I.mipmaps.length:I.isCompressedTexture&&Array.isArray(I.image)?P.mipmaps.length:1}function N(I){return I===On||I===iS||I===nS?9728:9729}function K(I){const P=I.target;P.removeEventListener("dispose",K),z(P),P.isVideoTexture&&f.delete(P)}function Q(I){const P=I.target;P.removeEventListener("dispose",Q),W(P)}function z(I){const P=i.get(I);if(P.__webglInit===void 0)return;const et=I.source,yt=g.get(et);if(yt){const St=yt[P.__cacheKey];St.usedTimes--,St.usedTimes===0&&V(I),Object.keys(yt).length===0&&g.delete(et)}i.remove(I)}function V(I){const P=i.get(I);r.deleteTexture(P.__webglTexture);const et=I.source,yt=g.get(et);delete yt[P.__cacheKey],s.memory.textures--}function W(I){const P=I.texture,et=i.get(I),yt=i.get(P);if(yt.__webglTexture!==void 0&&(r.deleteTexture(yt.__webglTexture),s.memory.textures--),I.depthTexture&&I.depthTexture.dispose(),I.isWebGLCubeRenderTarget)for(let St=0;St<6;St++)r.deleteFramebuffer(et.__webglFramebuffer[St]),et.__webglDepthbuffer&&r.deleteRenderbuffer(et.__webglDepthbuffer[St]);else{if(r.deleteFramebuffer(et.__webglFramebuffer),et.__webglDepthbuffer&&r.deleteRenderbuffer(et.__webglDepthbuffer),et.__webglMultisampledFramebuffer&&r.deleteFramebuffer(et.__webglMultisampledFramebuffer),et.__webglColorRenderbuffer)for(let St=0;St<et.__webglColorRenderbuffer.length;St++)et.__webglColorRenderbuffer[St]&&r.deleteRenderbuffer(et.__webglColorRenderbuffer[St]);et.__webglDepthRenderbuffer&&r.deleteRenderbuffer(et.__webglDepthRenderbuffer)}if(I.isWebGLMultipleRenderTargets)for(let St=0,bt=P.length;St<bt;St++){const $t=i.get(P[St]);$t.__webglTexture&&(r.deleteTexture($t.__webglTexture),s.memory.textures--),i.remove(P[St])}i.remove(P),i.remove(I)}let q=0;function Y(){q=0}function X(){const I=q;return I>=l&&console.warn("THREE.WebGLTextures: Trying to use "+I+" texture units while this GPU supports only "+l),q+=1,I}function B(I){const P=[];return P.push(I.wrapS),P.push(I.wrapT),P.push(I.wrapR||0),P.push(I.magFilter),P.push(I.minFilter),P.push(I.anisotropy),P.push(I.internalFormat),P.push(I.format),P.push(I.type),P.push(I.generateMipmaps),P.push(I.premultiplyAlpha),P.push(I.flipY),P.push(I.unpackAlignment),P.push(I.encoding),P.join()}function j(I,P){const et=i.get(I);if(I.isVideoTexture&&Te(I),I.isRenderTargetTexture===!1&&I.version>0&&et.__version!==I.version){const yt=I.image;if(yt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(yt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Lt(et,I,P);return}}e.bindTexture(3553,et.__webglTexture,33984+P)}function pt(I,P){const et=i.get(I);if(I.version>0&&et.__version!==I.version){Lt(et,I,P);return}e.bindTexture(35866,et.__webglTexture,33984+P)}function G(I,P){const et=i.get(I);if(I.version>0&&et.__version!==I.version){Lt(et,I,P);return}e.bindTexture(32879,et.__webglTexture,33984+P)}function vt(I,P){const et=i.get(I);if(I.version>0&&et.__version!==I.version){Ft(et,I,P);return}e.bindTexture(34067,et.__webglTexture,33984+P)}const mt={[Ty]:10497,[Dr]:33071,[Py]:33648},xt={[On]:9728,[iS]:9984,[nS]:9986,[lr]:9729,[RG]:9985,[wg]:9987};function st(I,P,et){if(et?(r.texParameteri(I,10242,mt[P.wrapS]),r.texParameteri(I,10243,mt[P.wrapT]),(I===32879||I===35866)&&r.texParameteri(I,32882,mt[P.wrapR]),r.texParameteri(I,10240,xt[P.magFilter]),r.texParameteri(I,10241,xt[P.minFilter])):(r.texParameteri(I,10242,33071),r.texParameteri(I,10243,33071),(I===32879||I===35866)&&r.texParameteri(I,32882,33071),(P.wrapS!==Dr||P.wrapT!==Dr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(I,10240,N(P.magFilter)),r.texParameteri(I,10241,N(P.minFilter)),P.minFilter!==On&&P.minFilter!==lr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const yt=t.get("EXT_texture_filter_anisotropic");if(P.type===La&&t.has("OES_texture_float_linear")===!1||a===!1&&P.type===xh&&t.has("OES_texture_half_float_linear")===!1)return;(P.anisotropy>1||i.get(P).__currentAnisotropy)&&(r.texParameterf(I,yt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,n.getMaxAnisotropy())),i.get(P).__currentAnisotropy=P.anisotropy)}}function ne(I,P){let et=!1;I.__webglInit===void 0&&(I.__webglInit=!0,P.addEventListener("dispose",K));const yt=P.source;let St=g.get(yt);St===void 0&&(St={},g.set(yt,St));const bt=B(P);if(bt!==I.__cacheKey){St[bt]===void 0&&(St[bt]={texture:r.createTexture(),usedTimes:0},s.memory.textures++,et=!0),St[bt].usedTimes++;const $t=St[I.__cacheKey];$t!==void 0&&(St[I.__cacheKey].usedTimes--,$t.usedTimes===0&&V(P)),I.__cacheKey=bt,I.__webglTexture=St[bt].texture}return et}function Lt(I,P,et){let yt=3553;(P.isDataArrayTexture||P.isCompressedArrayTexture)&&(yt=35866),P.isData3DTexture&&(yt=32879);const St=ne(I,P),bt=P.source;e.bindTexture(yt,I.__webglTexture,33984+et);const $t=i.get(bt);if(bt.version!==$t.__version||St===!0){e.activeTexture(33984+et),r.pixelStorei(37440,P.flipY),r.pixelStorei(37441,P.premultiplyAlpha),r.pixelStorei(3317,P.unpackAlignment),r.pixelStorei(37443,0);const Tt=E(P)&&S(P.image)===!1;let ct=w(P.image,Tt,!1,c);ct=Ve(P,ct);const gt=S(ct)||a,Kt=o.convert(P.format,P.encoding);let Wt=o.convert(P.type),Yt=x(P.internalFormat,Kt,Wt,P.encoding,P.isVideoTexture);st(yt,P,gt);let jt;const _e=P.mipmaps,we=a&&P.isVideoTexture!==!0,ri=$t.__version===void 0||St===!0,k=T(P,ct,gt);if(P.isDepthTexture)Yt=6402,a?P.type===La?Yt=36012:P.type===Da?Yt=33190:P.type===du?Yt=35056:Yt=33189:P.type===La&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===Va&&Yt===6402&&P.type!==Yb&&P.type!==Da&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=Da,Wt=o.convert(P.type)),P.format===xu&&Yt===6402&&(Yt=34041,P.type!==du&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=du,Wt=o.convert(P.type))),ri&&(we?e.texStorage2D(3553,1,Yt,ct.width,ct.height):e.texImage2D(3553,0,Yt,ct.width,ct.height,0,Kt,Wt,null));else if(P.isDataTexture)if(_e.length>0&&gt){we&&ri&&e.texStorage2D(3553,k,Yt,_e[0].width,_e[0].height);for(let rt=0,_t=_e.length;rt<_t;rt++)jt=_e[rt],we?e.texSubImage2D(3553,rt,0,0,jt.width,jt.height,Kt,Wt,jt.data):e.texImage2D(3553,rt,Yt,jt.width,jt.height,0,Kt,Wt,jt.data);P.generateMipmaps=!1}else we?(ri&&e.texStorage2D(3553,k,Yt,ct.width,ct.height),e.texSubImage2D(3553,0,0,0,ct.width,ct.height,Kt,Wt,ct.data)):e.texImage2D(3553,0,Yt,ct.width,ct.height,0,Kt,Wt,ct.data);else if(P.isCompressedTexture)if(P.isCompressedArrayTexture){we&&ri&&e.texStorage3D(35866,k,Yt,_e[0].width,_e[0].height,ct.depth);for(let rt=0,_t=_e.length;rt<_t;rt++)jt=_e[rt],P.format!==Lr?Kt!==null?we?e.compressedTexSubImage3D(35866,rt,0,0,0,jt.width,jt.height,ct.depth,Kt,jt.data,0,0):e.compressedTexImage3D(35866,rt,Yt,jt.width,jt.height,ct.depth,0,jt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?e.texSubImage3D(35866,rt,0,0,0,jt.width,jt.height,ct.depth,Kt,Wt,jt.data):e.texImage3D(35866,rt,Yt,jt.width,jt.height,ct.depth,0,Kt,Wt,jt.data)}else{we&&ri&&e.texStorage2D(3553,k,Yt,_e[0].width,_e[0].height);for(let rt=0,_t=_e.length;rt<_t;rt++)jt=_e[rt],P.format!==Lr?Kt!==null?we?e.compressedTexSubImage2D(3553,rt,0,0,jt.width,jt.height,Kt,jt.data):e.compressedTexImage2D(3553,rt,Yt,jt.width,jt.height,0,jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?e.texSubImage2D(3553,rt,0,0,jt.width,jt.height,Kt,Wt,jt.data):e.texImage2D(3553,rt,Yt,jt.width,jt.height,0,Kt,Wt,jt.data)}else if(P.isDataArrayTexture)we?(ri&&e.texStorage3D(35866,k,Yt,ct.width,ct.height,ct.depth),e.texSubImage3D(35866,0,0,0,0,ct.width,ct.height,ct.depth,Kt,Wt,ct.data)):e.texImage3D(35866,0,Yt,ct.width,ct.height,ct.depth,0,Kt,Wt,ct.data);else if(P.isData3DTexture)we?(ri&&e.texStorage3D(32879,k,Yt,ct.width,ct.height,ct.depth),e.texSubImage3D(32879,0,0,0,0,ct.width,ct.height,ct.depth,Kt,Wt,ct.data)):e.texImage3D(32879,0,Yt,ct.width,ct.height,ct.depth,0,Kt,Wt,ct.data);else if(P.isFramebufferTexture){if(ri)if(we)e.texStorage2D(3553,k,Yt,ct.width,ct.height);else{let rt=ct.width,_t=ct.height;for(let Pt=0;Pt<k;Pt++)e.texImage2D(3553,Pt,Yt,rt,_t,0,Kt,Wt,null),rt>>=1,_t>>=1}}else if(_e.length>0&&gt){we&&ri&&e.texStorage2D(3553,k,Yt,_e[0].width,_e[0].height);for(let rt=0,_t=_e.length;rt<_t;rt++)jt=_e[rt],we?e.texSubImage2D(3553,rt,0,0,Kt,Wt,jt):e.texImage2D(3553,rt,Yt,Kt,Wt,jt);P.generateMipmaps=!1}else we?(ri&&e.texStorage2D(3553,k,Yt,ct.width,ct.height),e.texSubImage2D(3553,0,0,0,Kt,Wt,ct)):e.texImage2D(3553,0,Yt,Kt,Wt,ct);M(P,gt)&&L(yt),$t.__version=bt.version,P.onUpdate&&P.onUpdate(P)}I.__version=P.version}function Ft(I,P,et){if(P.image.length!==6)return;const yt=ne(I,P),St=P.source;e.bindTexture(34067,I.__webglTexture,33984+et);const bt=i.get(St);if(St.version!==bt.__version||yt===!0){e.activeTexture(33984+et),r.pixelStorei(37440,P.flipY),r.pixelStorei(37441,P.premultiplyAlpha),r.pixelStorei(3317,P.unpackAlignment),r.pixelStorei(37443,0);const $t=P.isCompressedTexture||P.image[0].isCompressedTexture,Tt=P.image[0]&&P.image[0].isDataTexture,ct=[];for(let rt=0;rt<6;rt++)!$t&&!Tt?ct[rt]=w(P.image[rt],!1,!0,u):ct[rt]=Tt?P.image[rt].image:P.image[rt],ct[rt]=Ve(P,ct[rt]);const gt=ct[0],Kt=S(gt)||a,Wt=o.convert(P.format,P.encoding),Yt=o.convert(P.type),jt=x(P.internalFormat,Wt,Yt,P.encoding),_e=a&&P.isVideoTexture!==!0,we=bt.__version===void 0||yt===!0;let ri=T(P,gt,Kt);st(34067,P,Kt);let k;if($t){_e&&we&&e.texStorage2D(34067,ri,jt,gt.width,gt.height);for(let rt=0;rt<6;rt++){k=ct[rt].mipmaps;for(let _t=0;_t<k.length;_t++){const Pt=k[_t];P.format!==Lr?Wt!==null?_e?e.compressedTexSubImage2D(34069+rt,_t,0,0,Pt.width,Pt.height,Wt,Pt.data):e.compressedTexImage2D(34069+rt,_t,jt,Pt.width,Pt.height,0,Pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_e?e.texSubImage2D(34069+rt,_t,0,0,Pt.width,Pt.height,Wt,Yt,Pt.data):e.texImage2D(34069+rt,_t,jt,Pt.width,Pt.height,0,Wt,Yt,Pt.data)}}}else{k=P.mipmaps,_e&&we&&(k.length>0&&ri++,e.texStorage2D(34067,ri,jt,ct[0].width,ct[0].height));for(let rt=0;rt<6;rt++)if(Tt){_e?e.texSubImage2D(34069+rt,0,0,0,ct[rt].width,ct[rt].height,Wt,Yt,ct[rt].data):e.texImage2D(34069+rt,0,jt,ct[rt].width,ct[rt].height,0,Wt,Yt,ct[rt].data);for(let _t=0;_t<k.length;_t++){const Ht=k[_t].image[rt].image;_e?e.texSubImage2D(34069+rt,_t+1,0,0,Ht.width,Ht.height,Wt,Yt,Ht.data):e.texImage2D(34069+rt,_t+1,jt,Ht.width,Ht.height,0,Wt,Yt,Ht.data)}}else{_e?e.texSubImage2D(34069+rt,0,0,0,Wt,Yt,ct[rt]):e.texImage2D(34069+rt,0,jt,Wt,Yt,ct[rt]);for(let _t=0;_t<k.length;_t++){const Pt=k[_t];_e?e.texSubImage2D(34069+rt,_t+1,0,0,Wt,Yt,Pt.image[rt]):e.texImage2D(34069+rt,_t+1,jt,Wt,Yt,Pt.image[rt])}}}M(P,Kt)&&L(34067),bt.__version=St.version,P.onUpdate&&P.onUpdate(P)}I.__version=P.version}function Rt(I,P,et,yt,St){const bt=o.convert(et.format,et.encoding),$t=o.convert(et.type),Tt=x(et.internalFormat,bt,$t,et.encoding);i.get(P).__hasExternalTextures||(St===32879||St===35866?e.texImage3D(St,0,Tt,P.width,P.height,P.depth,0,bt,$t,null):e.texImage2D(St,0,Tt,P.width,P.height,0,bt,$t,null)),e.bindFramebuffer(36160,I),de(P)?d.framebufferTexture2DMultisampleEXT(36160,yt,St,i.get(et).__webglTexture,0,Ge(P)):(St===3553||St>=34069&&St<=34074)&&r.framebufferTexture2D(36160,yt,St,i.get(et).__webglTexture,0),e.bindFramebuffer(36160,null)}function De(I,P,et){if(r.bindRenderbuffer(36161,I),P.depthBuffer&&!P.stencilBuffer){let yt=33189;if(et||de(P)){const St=P.depthTexture;St&&St.isDepthTexture&&(St.type===La?yt=36012:St.type===Da&&(yt=33190));const bt=Ge(P);de(P)?d.renderbufferStorageMultisampleEXT(36161,bt,yt,P.width,P.height):r.renderbufferStorageMultisample(36161,bt,yt,P.width,P.height)}else r.renderbufferStorage(36161,yt,P.width,P.height);r.framebufferRenderbuffer(36160,36096,36161,I)}else if(P.depthBuffer&&P.stencilBuffer){const yt=Ge(P);et&&de(P)===!1?r.renderbufferStorageMultisample(36161,yt,35056,P.width,P.height):de(P)?d.renderbufferStorageMultisampleEXT(36161,yt,35056,P.width,P.height):r.renderbufferStorage(36161,34041,P.width,P.height),r.framebufferRenderbuffer(36160,33306,36161,I)}else{const yt=P.isWebGLMultipleRenderTargets===!0?P.texture:[P.texture];for(let St=0;St<yt.length;St++){const bt=yt[St],$t=o.convert(bt.format,bt.encoding),Tt=o.convert(bt.type),ct=x(bt.internalFormat,$t,Tt,bt.encoding),gt=Ge(P);et&&de(P)===!1?r.renderbufferStorageMultisample(36161,gt,ct,P.width,P.height):de(P)?d.renderbufferStorageMultisampleEXT(36161,gt,ct,P.width,P.height):r.renderbufferStorage(36161,ct,P.width,P.height)}}r.bindRenderbuffer(36161,null)}function Ut(I,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,I),!(P.depthTexture&&P.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),j(P.depthTexture,0);const yt=i.get(P.depthTexture).__webglTexture,St=Ge(P);if(P.depthTexture.format===Va)de(P)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,yt,0,St):r.framebufferTexture2D(36160,36096,3553,yt,0);else if(P.depthTexture.format===xu)de(P)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,yt,0,St):r.framebufferTexture2D(36160,33306,3553,yt,0);else throw new Error("Unknown depthTexture format")}function zt(I){const P=i.get(I),et=I.isWebGLCubeRenderTarget===!0;if(I.depthTexture&&!P.__autoAllocateDepthBuffer){if(et)throw new Error("target.depthTexture not supported in Cube render targets");Ut(P.__webglFramebuffer,I)}else if(et){P.__webglDepthbuffer=[];for(let yt=0;yt<6;yt++)e.bindFramebuffer(36160,P.__webglFramebuffer[yt]),P.__webglDepthbuffer[yt]=r.createRenderbuffer(),De(P.__webglDepthbuffer[yt],I,!1)}else e.bindFramebuffer(36160,P.__webglFramebuffer),P.__webglDepthbuffer=r.createRenderbuffer(),De(P.__webglDepthbuffer,I,!1);e.bindFramebuffer(36160,null)}function ze(I,P,et){const yt=i.get(I);P!==void 0&&Rt(yt.__webglFramebuffer,I,I.texture,36064,3553),et!==void 0&&zt(I)}function ni(I){const P=I.texture,et=i.get(I),yt=i.get(P);I.addEventListener("dispose",Q),I.isWebGLMultipleRenderTargets!==!0&&(yt.__webglTexture===void 0&&(yt.__webglTexture=r.createTexture()),yt.__version=P.version,s.memory.textures++);const St=I.isWebGLCubeRenderTarget===!0,bt=I.isWebGLMultipleRenderTargets===!0,$t=S(I)||a;if(St){et.__webglFramebuffer=[];for(let Tt=0;Tt<6;Tt++)et.__webglFramebuffer[Tt]=r.createFramebuffer()}else{if(et.__webglFramebuffer=r.createFramebuffer(),bt)if(n.drawBuffers){const Tt=I.texture;for(let ct=0,gt=Tt.length;ct<gt;ct++){const Kt=i.get(Tt[ct]);Kt.__webglTexture===void 0&&(Kt.__webglTexture=r.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&I.samples>0&&de(I)===!1){const Tt=bt?P:[P];et.__webglMultisampledFramebuffer=r.createFramebuffer(),et.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,et.__webglMultisampledFramebuffer);for(let ct=0;ct<Tt.length;ct++){const gt=Tt[ct];et.__webglColorRenderbuffer[ct]=r.createRenderbuffer(),r.bindRenderbuffer(36161,et.__webglColorRenderbuffer[ct]);const Kt=o.convert(gt.format,gt.encoding),Wt=o.convert(gt.type),Yt=x(gt.internalFormat,Kt,Wt,gt.encoding,I.isXRRenderTarget===!0),jt=Ge(I);r.renderbufferStorageMultisample(36161,jt,Yt,I.width,I.height),r.framebufferRenderbuffer(36160,36064+ct,36161,et.__webglColorRenderbuffer[ct])}r.bindRenderbuffer(36161,null),I.depthBuffer&&(et.__webglDepthRenderbuffer=r.createRenderbuffer(),De(et.__webglDepthRenderbuffer,I,!0)),e.bindFramebuffer(36160,null)}}if(St){e.bindTexture(34067,yt.__webglTexture),st(34067,P,$t);for(let Tt=0;Tt<6;Tt++)Rt(et.__webglFramebuffer[Tt],I,P,36064,34069+Tt);M(P,$t)&&L(34067),e.unbindTexture()}else if(bt){const Tt=I.texture;for(let ct=0,gt=Tt.length;ct<gt;ct++){const Kt=Tt[ct],Wt=i.get(Kt);e.bindTexture(3553,Wt.__webglTexture),st(3553,Kt,$t),Rt(et.__webglFramebuffer,I,Kt,36064+ct,3553),M(Kt,$t)&&L(3553)}e.unbindTexture()}else{let Tt=3553;(I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&&(a?Tt=I.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(Tt,yt.__webglTexture),st(Tt,P,$t),Rt(et.__webglFramebuffer,I,P,36064,Tt),M(P,$t)&&L(Tt),e.unbindTexture()}I.depthBuffer&&zt(I)}function Bt(I){const P=S(I)||a,et=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let yt=0,St=et.length;yt<St;yt++){const bt=et[yt];if(M(bt,P)){const $t=I.isWebGLCubeRenderTarget?34067:3553,Tt=i.get(bt).__webglTexture;e.bindTexture($t,Tt),L($t),e.unbindTexture()}}}function Xe(I){if(a&&I.samples>0&&de(I)===!1){const P=I.isWebGLMultipleRenderTargets?I.texture:[I.texture],et=I.width,yt=I.height;let St=16384;const bt=[],$t=I.stencilBuffer?33306:36096,Tt=i.get(I),ct=I.isWebGLMultipleRenderTargets===!0;if(ct)for(let gt=0;gt<P.length;gt++)e.bindFramebuffer(36160,Tt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+gt,36161,null),e.bindFramebuffer(36160,Tt.__webglFramebuffer),r.framebufferTexture2D(36009,36064+gt,3553,null,0);e.bindFramebuffer(36008,Tt.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,Tt.__webglFramebuffer);for(let gt=0;gt<P.length;gt++){bt.push(36064+gt),I.depthBuffer&&bt.push($t);const Kt=Tt.__ignoreDepthValues!==void 0?Tt.__ignoreDepthValues:!1;if(Kt===!1&&(I.depthBuffer&&(St|=256),I.stencilBuffer&&(St|=1024)),ct&&r.framebufferRenderbuffer(36008,36064,36161,Tt.__webglColorRenderbuffer[gt]),Kt===!0&&(r.invalidateFramebuffer(36008,[$t]),r.invalidateFramebuffer(36009,[$t])),ct){const Wt=i.get(P[gt]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,Wt,0)}r.blitFramebuffer(0,0,et,yt,0,0,et,yt,St,9728),p&&r.invalidateFramebuffer(36008,bt)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),ct)for(let gt=0;gt<P.length;gt++){e.bindFramebuffer(36160,Tt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+gt,36161,Tt.__webglColorRenderbuffer[gt]);const Kt=i.get(P[gt]).__webglTexture;e.bindFramebuffer(36160,Tt.__webglFramebuffer),r.framebufferTexture2D(36009,36064+gt,3553,Kt,0)}e.bindFramebuffer(36009,Tt.__webglMultisampledFramebuffer)}}function Ge(I){return Math.min(h,I.samples)}function de(I){const P=i.get(I);return a&&I.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&P.__useRenderToTexture!==!1}function Te(I){const P=s.render.frame;f.get(I)!==P&&(f.set(I,P),I.update())}function Ve(I,P){const et=I.encoding,yt=I.format,St=I.type;return I.isCompressedTexture===!0||I.isVideoTexture===!0||I.format===Oy||et!==Za&&(et===di?a===!1?t.has("EXT_sRGB")===!0&&yt===Lr?(I.format=Oy,I.minFilter=lr,I.generateMipmaps=!1):P=qb.sRGBToLinear(P):(yt!==Lr||St!==qa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",et)),P}this.allocateTextureUnit=X,this.resetTextureUnits=Y,this.setTexture2D=j,this.setTexture2DArray=pt,this.setTexture3D=G,this.setTextureCube=vt,this.rebindTextures=ze,this.setupRenderTarget=ni,this.updateRenderTargetMipmap=Bt,this.updateMultisampleRenderTarget=Xe,this.setupDepthRenderbuffer=zt,this.setupFrameBufferTexture=Rt,this.useMultisampledRTT=de}function ZV(r,t,e){const i=e.isWebGL2;function n(o,s=null){let a;if(o===qa)return 5121;if(o===PG)return 32819;if(o===OG)return 32820;if(o===bG)return 5120;if(o===MG)return 5122;if(o===Yb)return 5123;if(o===TG)return 5124;if(o===Da)return 5125;if(o===La)return 5126;if(o===xh)return i?5131:(a=t.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===AG)return 6406;if(o===Lr)return 6408;if(o===LG)return 6409;if(o===IG)return 6410;if(o===Va)return 6402;if(o===xu)return 34041;if(o===FG)return 6403;if(o===DG)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===Oy)return a=t.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(o===NG)return 36244;if(o===GG)return 33319;if(o===HG)return 33320;if(o===WG)return 36249;if(o===_m||o===Cm||o===wm||o===Sm)if(s===di)if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(o===_m)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===Cm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===wm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===Sm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===_m)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===Cm)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===wm)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Sm)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===rS||o===oS||o===sS||o===aS)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===rS)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===oS)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===sS)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===aS)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===VG)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===lS||o===uS)if(a=t.get("WEBGL_compressed_texture_etc"),a!==null){if(o===lS)return s===di?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(o===uS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===cS||o===hS||o===dS||o===pS||o===fS||o===gS||o===mS||o===vS||o===yS||o===_S||o===CS||o===wS||o===SS||o===ES)if(a=t.get("WEBGL_compressed_texture_astc"),a!==null){if(o===cS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===hS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===dS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===pS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===fS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===gS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===mS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===vS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===yS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===_S)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===CS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===wS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===SS)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===ES)return s===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===xS)if(a=t.get("EXT_texture_compression_bptc"),a!==null){if(o===xS)return s===di?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===du?i?34042:(a=t.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[o]!==void 0?r[o]:null}return{convert:n}}class JV extends ur{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Ns extends bi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const QV={type:"move"};class Km{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ns,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ns,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ns,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let n=null,o=null,s=null;const a=this._targetRay,l=this._grip,u=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(u&&t.hand){s=!0;for(const m of t.hand.values()){const g=e.getJointPose(m,i);if(u.joints[m.jointName]===void 0){const C=new Ns;C.matrixAutoUpdate=!1,C.visible=!1,u.joints[m.jointName]=C,u.add(C)}const y=u.joints[m.jointName];g!==null&&(y.matrix.fromArray(g.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=g.radius),y.visible=g!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],d=c.position.distanceTo(h.position),p=.02,f=.005;u.inputState.pinching&&d>p+f?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&d<=p-f&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(n=e.getPose(t.targetRaySpace,i),n===null&&o!==null&&(n=o),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(QV)))}return a!==null&&(a.visible=n!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}}class tk extends vr{constructor(t,e,i,n,o,s,a,l,u,c){if(c=c!==void 0?c:Va,c!==Va&&c!==xu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===Va&&(i=Da),i===void 0&&c===xu&&(i=du),super(null,n,o,s,a,l,c,i,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:On,this.minFilter=l!==void 0?l:On,this.flipY=!1,this.generateMipmaps=!1}}class ek extends ju{constructor(t,e){super();const i=this;let n=null,o=1,s=null,a="local-floor",l=null,u=null,c=null,h=null,d=null,p=null;const f=e.getContextAttributes();let m=null,g=null;const y=[],C=[],w=new ur;w.layers.enable(1),w.viewport=new $i;const S=new ur;S.layers.enable(2),S.viewport=new $i;const E=[w,S],M=new JV;M.layers.enable(1),M.layers.enable(2);let L=null,x=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let j=y[B];return j===void 0&&(j=new Km,y[B]=j),j.getTargetRaySpace()},this.getControllerGrip=function(B){let j=y[B];return j===void 0&&(j=new Km,y[B]=j),j.getGripSpace()},this.getHand=function(B){let j=y[B];return j===void 0&&(j=new Km,y[B]=j),j.getHandSpace()};function T(B){const j=C.indexOf(B.inputSource);if(j===-1)return;const pt=y[j];pt!==void 0&&pt.dispatchEvent({type:B.type,data:B.inputSource})}function N(){n.removeEventListener("select",T),n.removeEventListener("selectstart",T),n.removeEventListener("selectend",T),n.removeEventListener("squeeze",T),n.removeEventListener("squeezestart",T),n.removeEventListener("squeezeend",T),n.removeEventListener("end",N),n.removeEventListener("inputsourceschange",K);for(let B=0;B<y.length;B++){const j=C[B];j!==null&&(C[B]=null,y[B].disconnect(j))}L=null,x=null,t.setRenderTarget(m),d=null,h=null,c=null,n=null,g=null,X.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){o=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){a=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(B){l=B},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return n},this.setSession=async function(B){if(n=B,n!==null){if(m=t.getRenderTarget(),n.addEventListener("select",T),n.addEventListener("selectstart",T),n.addEventListener("selectend",T),n.addEventListener("squeeze",T),n.addEventListener("squeezestart",T),n.addEventListener("squeezeend",T),n.addEventListener("end",N),n.addEventListener("inputsourceschange",K),f.xrCompatible!==!0&&await e.makeXRCompatible(),n.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const j={antialias:n.renderState.layers===void 0?f.antialias:!0,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(n,e,j),n.updateRenderState({baseLayer:d}),g=new Ja(d.framebufferWidth,d.framebufferHeight,{format:Lr,type:qa,encoding:t.outputEncoding,stencilBuffer:f.stencil})}else{let j=null,pt=null,G=null;f.depth&&(G=f.stencil?35056:33190,j=f.stencil?xu:Va,pt=f.stencil?du:Da);const vt={colorFormat:32856,depthFormat:G,scaleFactor:o};c=new XRWebGLBinding(n,e),h=c.createProjectionLayer(vt),n.updateRenderState({layers:[h]}),g=new Ja(h.textureWidth,h.textureHeight,{format:Lr,type:qa,depthTexture:new tk(h.textureWidth,h.textureHeight,pt,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:f.stencil,encoding:t.outputEncoding,samples:f.antialias?4:0});const mt=t.properties.get(g);mt.__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,s=await n.requestReferenceSpace(a),X.setContext(n),X.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function K(B){for(let j=0;j<B.removed.length;j++){const pt=B.removed[j],G=C.indexOf(pt);G>=0&&(C[G]=null,y[G].dispatchEvent({type:"disconnected",data:pt}))}for(let j=0;j<B.added.length;j++){const pt=B.added[j];let G=C.indexOf(pt);if(G===-1){for(let mt=0;mt<y.length;mt++)if(mt>=C.length){C.push(pt),G=mt;break}else if(C[mt]===null){C[mt]=pt,G=mt;break}if(G===-1)break}const vt=y[G];vt&&vt.dispatchEvent({type:"connected",data:pt})}}const Q=new Z,z=new Z;function V(B,j,pt){Q.setFromMatrixPosition(j.matrixWorld),z.setFromMatrixPosition(pt.matrixWorld);const G=Q.distanceTo(z),vt=j.projectionMatrix.elements,mt=pt.projectionMatrix.elements,xt=vt[14]/(vt[10]-1),st=vt[14]/(vt[10]+1),ne=(vt[9]+1)/vt[5],Lt=(vt[9]-1)/vt[5],Ft=(vt[8]-1)/vt[0],Rt=(mt[8]+1)/mt[0],De=xt*Ft,Ut=xt*Rt,zt=G/(-Ft+Rt),ze=zt*-Ft;j.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(ze),B.translateZ(zt),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const ni=xt+zt,Bt=st+zt,Xe=De-ze,Ge=Ut+(G-ze),de=ne*st/Bt*ni,Te=Lt*st/Bt*ni;B.projectionMatrix.makePerspective(Xe,Ge,de,Te,ni,Bt)}function W(B,j){j===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(j.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(n===null)return;M.near=S.near=w.near=B.near,M.far=S.far=w.far=B.far,(L!==M.near||x!==M.far)&&(n.updateRenderState({depthNear:M.near,depthFar:M.far}),L=M.near,x=M.far);const j=B.parent,pt=M.cameras;W(M,j);for(let vt=0;vt<pt.length;vt++)W(pt[vt],j);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),B.matrix.copy(M.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale);const G=B.children;for(let vt=0,mt=G.length;vt<mt;vt++)G[vt].updateMatrixWorld(!0);pt.length===2?V(M,w,S):M.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(B){h!==null&&(h.fixedFoveation=B),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=B)};let q=null;function Y(B,j){if(u=j.getViewerPose(l||s),p=j,u!==null){const pt=u.views;d!==null&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let G=!1;pt.length!==M.cameras.length&&(M.cameras.length=0,G=!0);for(let vt=0;vt<pt.length;vt++){const mt=pt[vt];let xt=null;if(d!==null)xt=d.getViewport(mt);else{const ne=c.getViewSubImage(h,mt);xt=ne.viewport,vt===0&&(t.setRenderTargetTextures(g,ne.colorTexture,h.ignoreDepthValues?void 0:ne.depthStencilTexture),t.setRenderTarget(g))}let st=E[vt];st===void 0&&(st=new ur,st.layers.enable(vt),st.viewport=new $i,E[vt]=st),st.matrix.fromArray(mt.transform.matrix),st.projectionMatrix.fromArray(mt.projectionMatrix),st.viewport.set(xt.x,xt.y,xt.width,xt.height),vt===0&&M.matrix.copy(st.matrix),G===!0&&M.cameras.push(st)}}for(let pt=0;pt<y.length;pt++){const G=C[pt],vt=y[pt];G!==null&&vt!==void 0&&vt.update(G,j,l||s)}q&&q(B,j),p=null}const X=new rM;X.setAnimationLoop(Y),this.setAnimationLoop=function(B){q=B},this.dispose=function(){}}}function ik(r,t){function e(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,y,C,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?n(m,g):g.isMeshToonMaterial?(n(m,g),c(m,g)):g.isMeshPhongMaterial?(n(m,g),u(m,g)):g.isMeshStandardMaterial?(n(m,g),h(m,g),g.isMeshPhysicalMaterial&&d(m,g,w)):g.isMeshMatcapMaterial?(n(m,g),p(m,g)):g.isMeshDepthMaterial?n(m,g):g.isMeshDistanceMaterial?(n(m,g),f(m,g)):g.isMeshNormalMaterial?n(m,g):g.isLineBasicMaterial?(o(m,g),g.isLineDashedMaterial&&s(m,g)):g.isPointsMaterial?a(m,g,y,C):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function n(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===gr&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===gr&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const y=t.get(g).envMap;if(y&&(m.envMap.value=y,m.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const S=r.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*S}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let C;g.map?C=g.map:g.specularMap?C=g.specularMap:g.displacementMap?C=g.displacementMap:g.normalMap?C=g.normalMap:g.bumpMap?C=g.bumpMap:g.roughnessMap?C=g.roughnessMap:g.metalnessMap?C=g.metalnessMap:g.alphaMap?C=g.alphaMap:g.emissiveMap?C=g.emissiveMap:g.clearcoatMap?C=g.clearcoatMap:g.clearcoatNormalMap?C=g.clearcoatNormalMap:g.clearcoatRoughnessMap?C=g.clearcoatRoughnessMap:g.iridescenceMap?C=g.iridescenceMap:g.iridescenceThicknessMap?C=g.iridescenceThicknessMap:g.specularIntensityMap?C=g.specularIntensityMap:g.specularColorMap?C=g.specularColorMap:g.transmissionMap?C=g.transmissionMap:g.thicknessMap?C=g.thicknessMap:g.sheenColorMap?C=g.sheenColorMap:g.sheenRoughnessMap&&(C=g.sheenRoughnessMap),C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),m.uvTransform.value.copy(C.matrix));let w;g.aoMap?w=g.aoMap:g.lightMap&&(w=g.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),m.uv2Transform.value.copy(w.matrix))}function o(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function s(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function a(m,g,y,C){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*y,m.scale.value=C*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let w;g.map?w=g.map:g.alphaMap&&(w=g.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),m.uvTransform.value.copy(w.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let y;g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function c(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function h(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function d(m,g,y){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===gr&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=y.texture,m.transmissionSamplerSize.value.set(y.width,y.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}function f(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:e,refreshMaterialUniforms:i}}function nk(r,t,e,i){let n={},o={},s=[];const a=e.isWebGL2?r.getParameter(35375):0;function l(C,w){const S=w.program;i.uniformBlockBinding(C,S)}function u(C,w){let S=n[C.id];S===void 0&&(f(C),S=c(C),n[C.id]=S,C.addEventListener("dispose",g));const E=w.program;i.updateUBOMapping(C,E);const M=t.render.frame;o[C.id]!==M&&(d(C),o[C.id]=M)}function c(C){const w=h();C.__bindingPointIndex=w;const S=r.createBuffer(),E=C.__size,M=C.usage;return r.bindBuffer(35345,S),r.bufferData(35345,E,M),r.bindBuffer(35345,null),r.bindBufferBase(35345,w,S),S}function h(){for(let C=0;C<a;C++)if(s.indexOf(C)===-1)return s.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(C){const w=n[C.id],S=C.uniforms,E=C.__cache;r.bindBuffer(35345,w);for(let M=0,L=S.length;M<L;M++){const x=S[M];if(p(x,M,E)===!0){const T=x.value,N=x.__offset;typeof T=="number"?(x.__data[0]=T,r.bufferSubData(35345,N,x.__data)):(x.value.isMatrix3?(x.__data[0]=x.value.elements[0],x.__data[1]=x.value.elements[1],x.__data[2]=x.value.elements[2],x.__data[3]=x.value.elements[0],x.__data[4]=x.value.elements[3],x.__data[5]=x.value.elements[4],x.__data[6]=x.value.elements[5],x.__data[7]=x.value.elements[0],x.__data[8]=x.value.elements[6],x.__data[9]=x.value.elements[7],x.__data[10]=x.value.elements[8],x.__data[11]=x.value.elements[0]):T.toArray(x.__data),r.bufferSubData(35345,N,x.__data))}}r.bindBuffer(35345,null)}function p(C,w,S){const E=C.value;if(S[w]===void 0)return typeof E=="number"?S[w]=E:S[w]=E.clone(),!0;if(typeof E=="number"){if(S[w]!==E)return S[w]=E,!0}else{const M=S[w];if(M.equals(E)===!1)return M.copy(E),!0}return!1}function f(C){const w=C.uniforms;let S=0;const E=16;let M=0;for(let L=0,x=w.length;L<x;L++){const T=w[L],N=m(T);if(T.__data=new Float32Array(N.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=S,L>0){M=S%E;const K=E-M;M!==0&&K-N.boundary<0&&(S+=E-M,T.__offset=S)}S+=N.storage}return M=S%E,M>0&&(S+=E-M),C.__size=S,C.__cache={},this}function m(C){const w=C.value,S={boundary:0,storage:0};return typeof w=="number"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function g(C){const w=C.target;w.removeEventListener("dispose",g);const S=s.indexOf(w.__bindingPointIndex);s.splice(S,1),r.deleteBuffer(n[w.id]),delete n[w.id],delete o[w.id]}function y(){for(const C in n)r.deleteBuffer(n[C]);s=[],n={},o={}}return{bind:l,update:u,dispose:y}}function rk(){const r=Rh("canvas");return r.style.display="block",r}function uM(r={}){this.isWebGLRenderer=!0;const t=r.canvas!==void 0?r.canvas:rk(),e=r.context!==void 0?r.context:null,i=r.depth!==void 0?r.depth:!0,n=r.stencil!==void 0?r.stencil:!0,o=r.antialias!==void 0?r.antialias:!1,s=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,a=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,l=r.powerPreference!==void 0?r.powerPreference:"default",u=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let c;e!==null?c=e.getContextAttributes().alpha:c=r.alpha!==void 0?r.alpha:!1;let h=null,d=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Za,this.physicallyCorrectLights=!1,this.toneMapping=Xo,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,y=0,C=0,w=null,S=-1,E=null;const M=new $i,L=new $i;let x=null,T=t.width,N=t.height,K=1,Q=null,z=null;const V=new $i(0,0,T,N),W=new $i(0,0,T,N);let q=!1;const Y=new nM;let X=!1,B=!1,j=null;const pt=new Wi,G=new Ye,vt=new Z,mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xt(){return w===null?K:1}let st=e;function ne(D,tt){for(let at=0;at<D.length;at++){const J=D[at],ht=t.getContext(J,tt);if(ht!==null)return ht}return null}try{const D={alpha:!0,depth:i,stencil:n,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${yC}`),t.addEventListener("webglcontextlost",Yt,!1),t.addEventListener("webglcontextrestored",jt,!1),t.addEventListener("webglcontextcreationerror",_e,!1),st===null){const tt=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&tt.shift(),st=ne(tt,D),st===null)throw ne(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}st.getShaderPrecisionFormat===void 0&&(st.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let Lt,Ft,Rt,De,Ut,zt,ze,ni,Bt,Xe,Ge,de,Te,Ve,I,P,et,yt,St,bt,$t,Tt,ct,gt;function Kt(){Lt=new gW(st),Ft=new lW(st,Lt,r),Lt.init(Ft),Tt=new ZV(st,Lt,Ft),Rt=new XV(st,Lt,Ft),De=new yW,Ut=new FV,zt=new qV(st,Lt,Rt,Ut,Ft,Tt,De),ze=new cW(m),ni=new fW(m),Bt=new b2(st,Ft),ct=new sW(st,Lt,Bt,Ft),Xe=new mW(st,Bt,De,ct),Ge=new SW(st,Xe,Bt,De),St=new wW(st,Ft,zt),P=new uW(Ut),de=new IV(m,ze,ni,Lt,Ft,ct,P),Te=new ik(m,Ut),Ve=new GV,I=new UV(Lt,Ft),yt=new oW(m,ze,ni,Rt,Ge,c,s),et=new KV(m,Ge,Ft),gt=new nk(st,De,Ft,Rt),bt=new aW(st,Lt,De,Ft),$t=new vW(st,Lt,De,Ft),De.programs=de.programs,m.capabilities=Ft,m.extensions=Lt,m.properties=Ut,m.renderLists=Ve,m.shadowMap=et,m.state=Rt,m.info=De}Kt();const Wt=new ek(m,st);this.xr=Wt,this.getContext=function(){return st},this.getContextAttributes=function(){return st.getContextAttributes()},this.forceContextLoss=function(){const D=Lt.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=Lt.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(D){D!==void 0&&(K=D,this.setSize(T,N,!1))},this.getSize=function(D){return D.set(T,N)},this.setSize=function(D,tt,at){if(Wt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}T=D,N=tt,t.width=Math.floor(D*K),t.height=Math.floor(tt*K),at!==!1&&(t.style.width=D+"px",t.style.height=tt+"px"),this.setViewport(0,0,D,tt)},this.getDrawingBufferSize=function(D){return D.set(T*K,N*K).floor()},this.setDrawingBufferSize=function(D,tt,at){T=D,N=tt,K=at,t.width=Math.floor(D*at),t.height=Math.floor(tt*at),this.setViewport(0,0,D,tt)},this.getCurrentViewport=function(D){return D.copy(M)},this.getViewport=function(D){return D.copy(V)},this.setViewport=function(D,tt,at,J){D.isVector4?V.set(D.x,D.y,D.z,D.w):V.set(D,tt,at,J),Rt.viewport(M.copy(V).multiplyScalar(K).floor())},this.getScissor=function(D){return D.copy(W)},this.setScissor=function(D,tt,at,J){D.isVector4?W.set(D.x,D.y,D.z,D.w):W.set(D,tt,at,J),Rt.scissor(L.copy(W).multiplyScalar(K).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(D){Rt.setScissorTest(q=D)},this.setOpaqueSort=function(D){Q=D},this.setTransparentSort=function(D){z=D},this.getClearColor=function(D){return D.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor.apply(yt,arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha.apply(yt,arguments)},this.clear=function(D=!0,tt=!0,at=!0){let J=0;D&&(J|=16384),tt&&(J|=256),at&&(J|=1024),st.clear(J)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Yt,!1),t.removeEventListener("webglcontextrestored",jt,!1),t.removeEventListener("webglcontextcreationerror",_e,!1),Ve.dispose(),I.dispose(),Ut.dispose(),ze.dispose(),ni.dispose(),Ge.dispose(),ct.dispose(),gt.dispose(),de.dispose(),Wt.dispose(),Wt.removeEventListener("sessionstart",Pt),Wt.removeEventListener("sessionend",Ht),j&&(j.dispose(),j=null),be.stop()};function Yt(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function jt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const D=De.autoReset,tt=et.enabled,at=et.autoUpdate,J=et.needsUpdate,ht=et.type;Kt(),De.autoReset=D,et.enabled=tt,et.autoUpdate=at,et.needsUpdate=J,et.type=ht}function _e(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function we(D){const tt=D.target;tt.removeEventListener("dispose",we),ri(tt)}function ri(D){k(D),Ut.remove(D)}function k(D){const tt=Ut.get(D).programs;tt!==void 0&&(tt.forEach(function(at){de.releaseProgram(at)}),D.isShaderMaterial&&de.releaseShaderCache(D))}this.renderBufferDirect=function(D,tt,at,J,ht,Xt){tt===null&&(tt=mt);const ie=ht.isMesh&&ht.matrixWorld.determinant()<0,he=Oi(D,tt,at,J,ht);Rt.setMaterial(J,ie);let oe=at.index;const Ee=at.attributes.position;if(oe===null){if(Ee===void 0||Ee.count===0)return}else if(oe.count===0)return;let pe=1;J.wireframe===!0&&(oe=Xe.getWireframeAttribute(at),pe=2),ct.setup(ht,J,he,at,oe);let ye,Ce=bt;oe!==null&&(ye=Bt.get(oe),Ce=$t,Ce.setIndex(ye));const xo=oe!==null?oe.count:Ee.count,es=at.drawRange.start*pe,is=at.drawRange.count*pe,Gn=Xt!==null?Xt.start*pe:0,Fe=Xt!==null?Xt.count*pe:1/0,ns=Math.max(es,Gn),ci=Math.min(xo,es+is,Gn+Fe)-1,un=Math.max(0,ci-ns+1);if(un!==0){if(ht.isMesh)J.wireframe===!0?(Rt.setLineWidth(J.wireframeLinewidth*xt()),Ce.setMode(1)):Ce.setMode(4);else if(ht.isLine){let Kr=J.linewidth;Kr===void 0&&(Kr=1),Rt.setLineWidth(Kr*xt()),ht.isLineSegments?Ce.setMode(1):ht.isLineLoop?Ce.setMode(2):Ce.setMode(3)}else ht.isPoints?Ce.setMode(0):ht.isSprite&&Ce.setMode(4);if(ht.isInstancedMesh)Ce.renderInstances(ns,un,ht.count);else if(at.isInstancedBufferGeometry){const Kr=Math.min(at.instanceCount,at._maxInstanceCount);Ce.renderInstances(ns,un,Kr)}else Ce.render(ns,un)}},this.compile=function(D,tt){function at(J,ht,Xt){J.transparent===!0&&J.side===zi?(J.side=gr,J.needsUpdate=!0,Si(J,ht,Xt),J.side=wu,J.needsUpdate=!0,Si(J,ht,Xt),J.side=zi):Si(J,ht,Xt)}d=I.get(D),d.init(),f.push(d),D.traverseVisible(function(J){J.isLight&&J.layers.test(tt.layers)&&(d.pushLight(J),J.castShadow&&d.pushShadow(J))}),d.setupLights(m.physicallyCorrectLights),D.traverse(function(J){const ht=J.material;if(ht)if(Array.isArray(ht))for(let Xt=0;Xt<ht.length;Xt++){const ie=ht[Xt];at(ie,D,J)}else at(ht,D,J)}),f.pop(),d=null};let rt=null;function _t(D){rt&&rt(D)}function Pt(){be.stop()}function Ht(){be.start()}const be=new rM;be.setAnimationLoop(_t),typeof self<"u"&&be.setContext(self),this.setAnimationLoop=function(D){rt=D,Wt.setAnimationLoop(D),D===null?be.stop():be.start()},Wt.addEventListener("sessionstart",Pt),Wt.addEventListener("sessionend",Ht),this.render=function(D,tt){if(tt!==void 0&&tt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),tt.parent===null&&tt.matrixWorldAutoUpdate===!0&&tt.updateMatrixWorld(),Wt.enabled===!0&&Wt.isPresenting===!0&&(Wt.cameraAutoUpdate===!0&&Wt.updateCamera(tt),tt=Wt.getCamera()),D.isScene===!0&&D.onBeforeRender(m,D,tt,w),d=I.get(D,f.length),d.init(),f.push(d),pt.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),Y.setFromProjectionMatrix(pt),B=this.localClippingEnabled,X=P.init(this.clippingPlanes,B,tt),h=Ve.get(D,p.length),h.init(),p.push(h),Pe(D,tt,0,m.sortObjects),h.finish(),m.sortObjects===!0&&h.sort(Q,z),X===!0&&P.beginShadows();const at=d.state.shadowsArray;if(et.render(at,D,tt),X===!0&&P.endShadows(),this.info.autoReset===!0&&this.info.reset(),yt.render(h,D),d.setupLights(m.physicallyCorrectLights),tt.isArrayCamera){const J=tt.cameras;for(let ht=0,Xt=J.length;ht<Xt;ht++){const ie=J[ht];je(h,D,ie,ie.viewport)}}else je(h,D,tt);w!==null&&(zt.updateMultisampleRenderTarget(w),zt.updateRenderTargetMipmap(w)),D.isScene===!0&&D.onAfterRender(m,D,tt),ct.resetDefaultState(),S=-1,E=null,f.pop(),f.length>0?d=f[f.length-1]:d=null,p.pop(),p.length>0?h=p[p.length-1]:h=null};function Pe(D,tt,at,J){if(D.visible===!1)return;if(D.layers.test(tt.layers)){if(D.isGroup)at=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(tt);else if(D.isLight)d.pushLight(D),D.castShadow&&d.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||Y.intersectsSprite(D)){J&&vt.setFromMatrixPosition(D.matrixWorld).applyMatrix4(pt);const ie=Ge.update(D),he=D.material;he.visible&&h.push(D,ie,he,at,vt.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(D.isSkinnedMesh&&D.skeleton.frame!==De.render.frame&&(D.skeleton.update(),D.skeleton.frame=De.render.frame),!D.frustumCulled||Y.intersectsObject(D))){J&&vt.setFromMatrixPosition(D.matrixWorld).applyMatrix4(pt);const ie=Ge.update(D),he=D.material;if(Array.isArray(he)){const oe=ie.groups;for(let Ee=0,pe=oe.length;Ee<pe;Ee++){const ye=oe[Ee],Ce=he[ye.materialIndex];Ce&&Ce.visible&&h.push(D,ie,Ce,at,vt.z,ye)}}else he.visible&&h.push(D,ie,he,at,vt.z,null)}}const Xt=D.children;for(let ie=0,he=Xt.length;ie<he;ie++)Pe(Xt[ie],tt,at,J)}function je(D,tt,at,J){const ht=D.opaque,Xt=D.transmissive,ie=D.transparent;d.setupLightsView(at),Xt.length>0&&ui(ht,tt,at),J&&Rt.viewport(M.copy(J)),ht.length>0&&Se(ht,tt,at),Xt.length>0&&Se(Xt,tt,at),ie.length>0&&Se(ie,tt,at),Rt.buffers.depth.setTest(!0),Rt.buffers.depth.setMask(!0),Rt.buffers.color.setMask(!0),Rt.setPolygonOffset(!1)}function ui(D,tt,at){const J=Ft.isWebGL2;j===null&&(j=new Ja(1,1,{generateMipmaps:!0,type:Lt.has("EXT_color_buffer_half_float")?xh:qa,minFilter:wg,samples:J&&o===!0?4:0})),m.getDrawingBufferSize(G),J?j.setSize(G.x,G.y):j.setSize(mf(G.x),mf(G.y));const ht=m.getRenderTarget();m.setRenderTarget(j),m.clear();const Xt=m.toneMapping;m.toneMapping=Xo,Se(D,tt,at),m.toneMapping=Xt,zt.updateMultisampleRenderTarget(j),zt.updateRenderTargetMipmap(j),m.setRenderTarget(ht)}function Se(D,tt,at){const J=tt.isScene===!0?tt.overrideMaterial:null;for(let ht=0,Xt=D.length;ht<Xt;ht++){const ie=D[ht],he=ie.object,oe=ie.geometry,Ee=J===null?ie.material:J,pe=ie.group;he.layers.test(at.layers)&&Je(he,tt,at,oe,Ee,pe)}}function Je(D,tt,at,J,ht,Xt){D.onBeforeRender(m,tt,at,J,ht,Xt),D.modelViewMatrix.multiplyMatrices(at.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),ht.onBeforeRender(m,tt,at,J,D,Xt),ht.transparent===!0&&ht.side===zi?(ht.side=gr,ht.needsUpdate=!0,m.renderBufferDirect(at,tt,J,ht,D,Xt),ht.side=wu,ht.needsUpdate=!0,m.renderBufferDirect(at,tt,J,ht,D,Xt),ht.side=zi):m.renderBufferDirect(at,tt,J,ht,D,Xt),D.onAfterRender(m,tt,at,J,ht,Xt)}function Si(D,tt,at){tt.isScene!==!0&&(tt=mt);const J=Ut.get(D),ht=d.state.lights,Xt=d.state.shadowsArray,ie=ht.state.version,he=de.getParameters(D,ht.state,Xt,tt,at),oe=de.getProgramCacheKey(he);let Ee=J.programs;J.environment=D.isMeshStandardMaterial?tt.environment:null,J.fog=tt.fog,J.envMap=(D.isMeshStandardMaterial?ni:ze).get(D.envMap||J.environment),Ee===void 0&&(D.addEventListener("dispose",we),Ee=new Map,J.programs=Ee);let pe=Ee.get(oe);if(pe!==void 0){if(J.currentProgram===pe&&J.lightsStateVersion===ie)return Cr(D,he),pe}else he.uniforms=de.getUniforms(D),D.onBuild(at,he,m),D.onBeforeCompile(he,m),pe=de.acquireProgram(he,oe),Ee.set(oe,pe),J.uniforms=he.uniforms;const ye=J.uniforms;(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(ye.clippingPlanes=P.uniform),Cr(D,he),J.needsLights=Nn(D),J.lightsStateVersion=ie,J.needsLights&&(ye.ambientLightColor.value=ht.state.ambient,ye.lightProbe.value=ht.state.probe,ye.directionalLights.value=ht.state.directional,ye.directionalLightShadows.value=ht.state.directionalShadow,ye.spotLights.value=ht.state.spot,ye.spotLightShadows.value=ht.state.spotShadow,ye.rectAreaLights.value=ht.state.rectArea,ye.ltc_1.value=ht.state.rectAreaLTC1,ye.ltc_2.value=ht.state.rectAreaLTC2,ye.pointLights.value=ht.state.point,ye.pointLightShadows.value=ht.state.pointShadow,ye.hemisphereLights.value=ht.state.hemi,ye.directionalShadowMap.value=ht.state.directionalShadowMap,ye.directionalShadowMatrix.value=ht.state.directionalShadowMatrix,ye.spotShadowMap.value=ht.state.spotShadowMap,ye.spotLightMatrix.value=ht.state.spotLightMatrix,ye.spotLightMap.value=ht.state.spotLightMap,ye.pointShadowMap.value=ht.state.pointShadowMap,ye.pointShadowMatrix.value=ht.state.pointShadowMatrix);const Ce=pe.getUniforms(),xo=Hp.seqWithValue(Ce.seq,ye);return J.currentProgram=pe,J.uniformsList=xo,pe}function Cr(D,tt){const at=Ut.get(D);at.outputEncoding=tt.outputEncoding,at.instancing=tt.instancing,at.skinning=tt.skinning,at.morphTargets=tt.morphTargets,at.morphNormals=tt.morphNormals,at.morphColors=tt.morphColors,at.morphTargetsCount=tt.morphTargetsCount,at.numClippingPlanes=tt.numClippingPlanes,at.numIntersection=tt.numClipIntersection,at.vertexAlphas=tt.vertexAlphas,at.vertexTangents=tt.vertexTangents,at.toneMapping=tt.toneMapping}function Oi(D,tt,at,J,ht){tt.isScene!==!0&&(tt=mt),zt.resetTextureUnits();const Xt=tt.fog,ie=J.isMeshStandardMaterial?tt.environment:null,he=w===null?m.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:Za,oe=(J.isMeshStandardMaterial?ni:ze).get(J.envMap||ie),Ee=J.vertexColors===!0&&!!at.attributes.color&&at.attributes.color.itemSize===4,pe=!!J.normalMap&&!!at.attributes.tangent,ye=!!at.morphAttributes.position,Ce=!!at.morphAttributes.normal,xo=!!at.morphAttributes.color,es=J.toneMapped?m.toneMapping:Xo,is=at.morphAttributes.position||at.morphAttributes.normal||at.morphAttributes.color,Gn=is!==void 0?is.length:0,Fe=Ut.get(J),ns=d.state.lights;if(X===!0&&(B===!0||D!==E)){const cn=D===E&&J.id===S;P.setState(J,D,cn)}let ci=!1;J.version===Fe.__version?(Fe.needsLights&&Fe.lightsStateVersion!==ns.state.version||Fe.outputEncoding!==he||ht.isInstancedMesh&&Fe.instancing===!1||!ht.isInstancedMesh&&Fe.instancing===!0||ht.isSkinnedMesh&&Fe.skinning===!1||!ht.isSkinnedMesh&&Fe.skinning===!0||Fe.envMap!==oe||J.fog===!0&&Fe.fog!==Xt||Fe.numClippingPlanes!==void 0&&(Fe.numClippingPlanes!==P.numPlanes||Fe.numIntersection!==P.numIntersection)||Fe.vertexAlphas!==Ee||Fe.vertexTangents!==pe||Fe.morphTargets!==ye||Fe.morphNormals!==Ce||Fe.morphColors!==xo||Fe.toneMapping!==es||Ft.isWebGL2===!0&&Fe.morphTargetsCount!==Gn)&&(ci=!0):(ci=!0,Fe.__version=J.version);let un=Fe.currentProgram;ci===!0&&(un=Si(J,tt,ht));let Kr=!1,rs=!1,ec=!1;const ki=un.getUniforms(),Ro=Fe.uniforms;if(Rt.useProgram(un.program)&&(Kr=!0,rs=!0,ec=!0),J.id!==S&&(S=J.id,rs=!0),Kr||E!==D){if(ki.setValue(st,"projectionMatrix",D.projectionMatrix),Ft.logarithmicDepthBuffer&&ki.setValue(st,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),E!==D&&(E=D,rs=!0,ec=!0),J.isShaderMaterial||J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshStandardMaterial||J.envMap){const cn=ki.map.cameraPosition;cn!==void 0&&cn.setValue(st,vt.setFromMatrixPosition(D.matrixWorld))}(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial)&&ki.setValue(st,"isOrthographic",D.isOrthographicCamera===!0),(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial||J.isShadowMaterial||ht.isSkinnedMesh)&&ki.setValue(st,"viewMatrix",D.matrixWorldInverse)}if(ht.isSkinnedMesh){ki.setOptional(st,ht,"bindMatrix"),ki.setOptional(st,ht,"bindMatrixInverse");const cn=ht.skeleton;cn&&(Ft.floatVertexTextures?(cn.boneTexture===null&&cn.computeBoneTexture(),ki.setValue(st,"boneTexture",cn.boneTexture,zt),ki.setValue(st,"boneTextureSize",cn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ic=at.morphAttributes;if((ic.position!==void 0||ic.normal!==void 0||ic.color!==void 0&&Ft.isWebGL2===!0)&&St.update(ht,at,J,un),(rs||Fe.receiveShadow!==ht.receiveShadow)&&(Fe.receiveShadow=ht.receiveShadow,ki.setValue(st,"receiveShadow",ht.receiveShadow)),J.isMeshGouraudMaterial&&J.envMap!==null&&(Ro.envMap.value=oe,Ro.flipEnvMap.value=oe.isCubeTexture&&oe.isRenderTargetTexture===!1?-1:1),rs&&(ki.setValue(st,"toneMappingExposure",m.toneMappingExposure),Fe.needsLights&&Ki(Ro,ec),Xt&&J.fog===!0&&Te.refreshFogUniforms(Ro,Xt),Te.refreshMaterialUniforms(Ro,J,K,N,j),Hp.upload(st,Fe.uniformsList,Ro,zt)),J.isShaderMaterial&&J.uniformsNeedUpdate===!0&&(Hp.upload(st,Fe.uniformsList,Ro,zt),J.uniformsNeedUpdate=!1),J.isSpriteMaterial&&ki.setValue(st,"center",ht.center),ki.setValue(st,"modelViewMatrix",ht.modelViewMatrix),ki.setValue(st,"normalMatrix",ht.normalMatrix),ki.setValue(st,"modelMatrix",ht.matrixWorld),J.isShaderMaterial||J.isRawShaderMaterial){const cn=J.uniformsGroups;for(let nc=0,$g=cn.length;nc<$g;nc++)if(Ft.isWebGL2){const rc=cn[nc];gt.update(rc,un),gt.bind(rc,un)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return un}function Ki(D,tt){D.ambientLightColor.needsUpdate=tt,D.lightProbe.needsUpdate=tt,D.directionalLights.needsUpdate=tt,D.directionalLightShadows.needsUpdate=tt,D.pointLights.needsUpdate=tt,D.pointLightShadows.needsUpdate=tt,D.spotLights.needsUpdate=tt,D.spotLightShadows.needsUpdate=tt,D.rectAreaLights.needsUpdate=tt,D.hemisphereLights.needsUpdate=tt}function Nn(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(D,tt,at){Ut.get(D.texture).__webglTexture=tt,Ut.get(D.depthTexture).__webglTexture=at;const J=Ut.get(D);J.__hasExternalTextures=!0,J.__hasExternalTextures&&(J.__autoAllocateDepthBuffer=at===void 0,J.__autoAllocateDepthBuffer||Lt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),J.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(D,tt){const at=Ut.get(D);at.__webglFramebuffer=tt,at.__useDefaultFramebuffer=tt===void 0},this.setRenderTarget=function(D,tt=0,at=0){w=D,y=tt,C=at;let J=!0,ht=null,Xt=!1,ie=!1;if(D){const oe=Ut.get(D);oe.__useDefaultFramebuffer!==void 0?(Rt.bindFramebuffer(36160,null),J=!1):oe.__webglFramebuffer===void 0?zt.setupRenderTarget(D):oe.__hasExternalTextures&&zt.rebindTextures(D,Ut.get(D.texture).__webglTexture,Ut.get(D.depthTexture).__webglTexture);const Ee=D.texture;(Ee.isData3DTexture||Ee.isDataArrayTexture||Ee.isCompressedArrayTexture)&&(ie=!0);const pe=Ut.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(ht=pe[tt],Xt=!0):Ft.isWebGL2&&D.samples>0&&zt.useMultisampledRTT(D)===!1?ht=Ut.get(D).__webglMultisampledFramebuffer:ht=pe,M.copy(D.viewport),L.copy(D.scissor),x=D.scissorTest}else M.copy(V).multiplyScalar(K).floor(),L.copy(W).multiplyScalar(K).floor(),x=q;if(Rt.bindFramebuffer(36160,ht)&&Ft.drawBuffers&&J&&Rt.drawBuffers(D,ht),Rt.viewport(M),Rt.scissor(L),Rt.setScissorTest(x),Xt){const oe=Ut.get(D.texture);st.framebufferTexture2D(36160,36064,34069+tt,oe.__webglTexture,at)}else if(ie){const oe=Ut.get(D.texture),Ee=tt||0;st.framebufferTextureLayer(36160,36064,oe.__webglTexture,at||0,Ee)}S=-1},this.readRenderTargetPixels=function(D,tt,at,J,ht,Xt,ie){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let he=Ut.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&ie!==void 0&&(he=he[ie]),he){Rt.bindFramebuffer(36160,he);try{const oe=D.texture,Ee=oe.format,pe=oe.type;if(Ee!==Lr&&Tt.convert(Ee)!==st.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ye=pe===xh&&(Lt.has("EXT_color_buffer_half_float")||Ft.isWebGL2&&Lt.has("EXT_color_buffer_float"));if(pe!==qa&&Tt.convert(pe)!==st.getParameter(35738)&&!(pe===La&&(Ft.isWebGL2||Lt.has("OES_texture_float")||Lt.has("WEBGL_color_buffer_float")))&&!ye){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}tt>=0&&tt<=D.width-J&&at>=0&&at<=D.height-ht&&st.readPixels(tt,at,J,ht,Tt.convert(Ee),Tt.convert(pe),Xt)}finally{const oe=w!==null?Ut.get(w).__webglFramebuffer:null;Rt.bindFramebuffer(36160,oe)}}},this.copyFramebufferToTexture=function(D,tt,at=0){const J=Math.pow(2,-at),ht=Math.floor(tt.image.width*J),Xt=Math.floor(tt.image.height*J);zt.setTexture2D(tt,0),st.copyTexSubImage2D(3553,at,0,0,D.x,D.y,ht,Xt),Rt.unbindTexture()},this.copyTextureToTexture=function(D,tt,at,J=0){const ht=tt.image.width,Xt=tt.image.height,ie=Tt.convert(at.format),he=Tt.convert(at.type);zt.setTexture2D(at,0),st.pixelStorei(37440,at.flipY),st.pixelStorei(37441,at.premultiplyAlpha),st.pixelStorei(3317,at.unpackAlignment),tt.isDataTexture?st.texSubImage2D(3553,J,D.x,D.y,ht,Xt,ie,he,tt.image.data):tt.isCompressedTexture?st.compressedTexSubImage2D(3553,J,D.x,D.y,tt.mipmaps[0].width,tt.mipmaps[0].height,ie,tt.mipmaps[0].data):st.texSubImage2D(3553,J,D.x,D.y,ie,he,tt.image),J===0&&at.generateMipmaps&&st.generateMipmap(3553),Rt.unbindTexture()},this.copyTextureToTexture3D=function(D,tt,at,J,ht=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Xt=D.max.x-D.min.x+1,ie=D.max.y-D.min.y+1,he=D.max.z-D.min.z+1,oe=Tt.convert(J.format),Ee=Tt.convert(J.type);let pe;if(J.isData3DTexture)zt.setTexture3D(J,0),pe=32879;else if(J.isDataArrayTexture)zt.setTexture2DArray(J,0),pe=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}st.pixelStorei(37440,J.flipY),st.pixelStorei(37441,J.premultiplyAlpha),st.pixelStorei(3317,J.unpackAlignment);const ye=st.getParameter(3314),Ce=st.getParameter(32878),xo=st.getParameter(3316),es=st.getParameter(3315),is=st.getParameter(32877),Gn=at.isCompressedTexture?at.mipmaps[0]:at.image;st.pixelStorei(3314,Gn.width),st.pixelStorei(32878,Gn.height),st.pixelStorei(3316,D.min.x),st.pixelStorei(3315,D.min.y),st.pixelStorei(32877,D.min.z),at.isDataTexture||at.isData3DTexture?st.texSubImage3D(pe,ht,tt.x,tt.y,tt.z,Xt,ie,he,oe,Ee,Gn.data):at.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),st.compressedTexSubImage3D(pe,ht,tt.x,tt.y,tt.z,Xt,ie,he,oe,Gn.data)):st.texSubImage3D(pe,ht,tt.x,tt.y,tt.z,Xt,ie,he,oe,Ee,Gn),st.pixelStorei(3314,ye),st.pixelStorei(32878,Ce),st.pixelStorei(3316,xo),st.pixelStorei(3315,es),st.pixelStorei(32877,is),ht===0&&J.generateMipmaps&&st.generateMipmap(pe),Rt.unbindTexture()},this.initTexture=function(D){D.isCubeTexture?zt.setTextureCube(D,0):D.isData3DTexture?zt.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?zt.setTexture2DArray(D,0):zt.setTexture2D(D,0),Rt.unbindTexture()},this.resetState=function(){y=0,C=0,w=null,Rt.reset(),ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class ok extends uM{}ok.prototype.isWebGL1Renderer=!0;class sk extends bi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Rg extends Xh{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ti(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const sE=new Z,aE=new Z,lE=new Wi,Xm=new CC,Zd=new Sg;class vf extends bi{constructor(t=new Qn,e=new Rg){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let n=1,o=e.count;n<o;n++)sE.fromBufferAttribute(e,n-1),aE.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=sE.distanceTo(aE);t.setAttribute("lineDistance",new sn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,o=t.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Zd.copy(i.boundingSphere),Zd.applyMatrix4(n),Zd.radius+=o,t.ray.intersectsSphere(Zd)===!1)return;lE.copy(n).invert(),Xm.copy(t.ray).applyMatrix4(lE);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new Z,c=new Z,h=new Z,d=new Z,p=this.isLineSegments?2:1,f=i.index,g=i.attributes.position;if(f!==null){const y=Math.max(0,s.start),C=Math.min(f.count,s.start+s.count);for(let w=y,S=C-1;w<S;w+=p){const E=f.getX(w),M=f.getX(w+1);if(u.fromBufferAttribute(g,E),c.fromBufferAttribute(g,M),Xm.distanceSqToSegment(u,c,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const x=t.ray.origin.distanceTo(d);x<t.near||x>t.far||e.push({distance:x,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,s.start),C=Math.min(g.count,s.start+s.count);for(let w=y,S=C-1;w<S;w+=p){if(u.fromBufferAttribute(g,w),c.fromBufferAttribute(g,w+1),Xm.distanceSqToSegment(u,c,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const M=t.ray.origin.distanceTo(d);M<t.near||M>t.far||e.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=n.length;o<s;o++){const a=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}const uE=new Z,cE=new Z;class ak extends vf{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let n=0,o=e.count;n<o;n+=2)uE.fromBufferAttribute(e,n),cE.fromBufferAttribute(e,n+1),i[n]=n===0?0:i[n-1],i[n+1]=i[n]+uE.distanceTo(cE);t.setAttribute("lineDistance",new sn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lk extends vf{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Or extends Qn{constructor(t=1,e=8,i=0,n=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},e=Math.max(3,e);const o=[],s=[],a=[],l=[],u=new Z,c=new Ye;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=e;h++,d+=3){const p=i+h/e*n;u.x=t*Math.cos(p),u.y=t*Math.sin(p),s.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(s[d]/t+1)/2,c.y=(s[d+1]/t+1)/2,l.push(c.x,c.y)}for(let h=1;h<=e;h++)o.push(h,h+1,0);this.setIndex(o),this.setAttribute("position",new sn(s,3)),this.setAttribute("normal",new sn(a,3)),this.setAttribute("uv",new sn(l,2))}static fromJSON(t){return new Or(t.radius,t.segments,t.thetaStart,t.thetaLength)}}const Jd=new Z,Qd=new Z,qm=new Z,tp=new ao;class uk extends Qn{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const n=Math.pow(10,4),o=Math.cos(pu*e),s=t.getIndex(),a=t.getAttribute("position"),l=s?s.count:a.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),d={},p=[];for(let f=0;f<l;f+=3){s?(u[0]=s.getX(f),u[1]=s.getX(f+1),u[2]=s.getX(f+2)):(u[0]=f,u[1]=f+1,u[2]=f+2);const{a:m,b:g,c:y}=tp;if(m.fromBufferAttribute(a,u[0]),g.fromBufferAttribute(a,u[1]),y.fromBufferAttribute(a,u[2]),tp.getNormal(qm),h[0]=`${Math.round(m.x*n)},${Math.round(m.y*n)},${Math.round(m.z*n)}`,h[1]=`${Math.round(g.x*n)},${Math.round(g.y*n)},${Math.round(g.z*n)}`,h[2]=`${Math.round(y.x*n)},${Math.round(y.y*n)},${Math.round(y.z*n)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let C=0;C<3;C++){const w=(C+1)%3,S=h[C],E=h[w],M=tp[c[C]],L=tp[c[w]],x=`${S}_${E}`,T=`${E}_${S}`;T in d&&d[T]?(qm.dot(d[T].normal)<=o&&(p.push(M.x,M.y,M.z),p.push(L.x,L.y,L.z)),d[T]=null):x in d||(d[x]={index0:u[C],index1:u[w],normal:qm.clone()})}}for(const f in d)if(d[f]){const{index0:m,index1:g}=d[f];Jd.fromBufferAttribute(a,m),Qd.fromBufferAttribute(a,g),p.push(Jd.x,Jd.y,Jd.z),p.push(Qd.x,Qd.y,Qd.z)}this.setAttribute("position",new sn(p,3))}}}class bg extends Qn{constructor(t=1,e=32,i=16,n=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:o,thetaStart:s,thetaLength:a},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const l=Math.min(s+a,Math.PI);let u=0;const c=[],h=new Z,d=new Z,p=[],f=[],m=[],g=[];for(let y=0;y<=i;y++){const C=[],w=y/i;let S=0;y==0&&s==0?S=.5/e:y==i&&l==Math.PI&&(S=-.5/e);for(let E=0;E<=e;E++){const M=E/e;h.x=-t*Math.cos(n+M*o)*Math.sin(s+w*a),h.y=t*Math.cos(s+w*a),h.z=t*Math.sin(n+M*o)*Math.sin(s+w*a),f.push(h.x,h.y,h.z),d.copy(h).normalize(),m.push(d.x,d.y,d.z),g.push(M+S,1-w),C.push(u++)}c.push(C)}for(let y=0;y<i;y++)for(let C=0;C<e;C++){const w=c[y][C+1],S=c[y][C],E=c[y+1][C],M=c[y+1][C+1];(y!==0||s>0)&&p.push(w,S,M),(y!==i-1||l<Math.PI)&&p.push(S,E,M)}this.setIndex(p),this.setAttribute("position",new sn(f,3)),this.setAttribute("normal",new sn(m,3)),this.setAttribute("uv",new sn(g,2))}static fromJSON(t){return new bg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class hE extends Rg{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}const Iy={enabled:!1,files:{},add:function(r,t){this.enabled!==!1&&(this.files[r]=t)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class ck{constructor(t,e,i){const n=this;let o=!1,s=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(c){a++,o===!1&&n.onStart!==void 0&&n.onStart(c,s,a),o=!0},this.itemEnd=function(c){s++,n.onProgress!==void 0&&n.onProgress(c,s,a),s===a&&(o=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(c){n.onError!==void 0&&n.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,d=u.length;h<d;h+=2){const p=u[h],f=u[h+1];if(p.global&&(p.lastIndex=0),p.test(c))return f}return null}}}const hk=new ck;class cM{constructor(t){this.manager=t!==void 0?t:hk,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(n,o){i.load(t,n,e,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}class dk extends cM{constructor(t){super(t)}load(t,e,i,n){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,s=Iy.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;const a=Rh("img");function l(){c(),Iy.add(t,this),e&&e(this),o.manager.itemEnd(t)}function u(h){c(),n&&n(h),o.manager.itemError(t),o.manager.itemEnd(t)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(t),a.src=t,a}}class pk extends cM{constructor(t){super(t)}load(t,e,i,n){const o=new vr,s=new dk(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){o.image=a,o.needsUpdate=!0,e!==void 0&&e(o)},i,n),o}}class fk{constructor(t,e,i=0,n=1/0){this.ray=new CC(t,e),this.near=i,this.far=n,this.camera=null,this.layers=new wC,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,i=[]){return Fy(t,this,i,e),i.sort(dE),i}intersectObjects(t,e=!0,i=[]){for(let n=0,o=t.length;n<o;n++)Fy(t[n],this,i,e);return i.sort(dE),i}}function dE(r,t){return r.distance-t.distance}function Fy(r,t,e,i){if(r.layers.test(t.layers)&&r.raycast(t,e),i===!0){const n=r.children;for(let o=0,s=n.length;o<s;o++)Fy(n[o],t,e,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yC}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yC);function gk(r){r("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),r("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),r("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),r.WGS84=r["EPSG:4326"],r["EPSG:3785"]=r["EPSG:3857"],r.GOOGLE=r["EPSG:3857"],r["EPSG:900913"]=r["EPSG:3857"],r["EPSG:102113"]=r["EPSG:3857"]}var tl=1,el=2,Wp=3,mk=4,Ny=5,pE=6378137,vk=6356752314e-3,fE=.0066943799901413165,eh=484813681109536e-20,wt=Math.PI/2,yk=.16666666666666666,_k=.04722222222222222,Ck=.022156084656084655,Ot=1e-10,Ui=.017453292519943295,co=57.29577951308232,ke=Math.PI/4,bh=Math.PI*2,mi=3.14159265359,Fn={};Fn.greenwich=0;Fn.lisbon=-9.131906111111;Fn.paris=2.337229166667;Fn.bogota=-74.080916666667;Fn.madrid=-3.687938888889;Fn.rome=12.452333333333;Fn.bern=7.439583333333;Fn.jakarta=106.807719444444;Fn.ferro=-17.666666666667;Fn.brussels=4.367975;Fn.stockholm=18.058277777778;Fn.athens=23.7163375;Fn.oslo=10.722916666667;const wk={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var gE=/[\s_\-\/\(\)]/g;function Qs(r,t){if(r[t])return r[t];for(var e=Object.keys(r),i=t.toLowerCase().replace(gE,""),n=-1,o,s;++n<e.length;)if(o=e[n],s=o.toLowerCase().replace(gE,""),s===i)return r[o]}function Gy(r){var t={},e=r.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),i,n,o,s={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*Ui},lat_1:function(a){t.lat1=a*Ui},lat_2:function(a){t.lat2=a*Ui},lat_ts:function(a){t.lat_ts=a*Ui},lon_0:function(a){t.long0=a*Ui},lon_1:function(a){t.long1=a*Ui},lon_2:function(a){t.long2=a*Ui},alpha:function(a){t.alpha=parseFloat(a)*Ui},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*Ui},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=Qs(wk,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*Ui},pm:function(a){var l=Qs(Fn,a);t.from_greenwich=(l||parseFloat(a))*Ui},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(i in e)n=e[i],i in s?(o=s[i],typeof o=="function"?o(n):t[o]=n):t[i]=n;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var Mh=1,hM=2,dM=3,yf=4,pM=5,EC=-1,Sk=/\s/,Ek=/[A-Za-z]/,xk=/[A-Za-z84_]/,Mg=/[,\]]/,fM=/[\d\.E\-\+]/;function ts(r){if(typeof r!="string")throw new Error("not a string");this.text=r.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Mh}ts.prototype.readCharicter=function(){var r=this.text[this.place++];if(this.state!==yf)for(;Sk.test(r);){if(this.place>=this.text.length)return;r=this.text[this.place++]}switch(this.state){case Mh:return this.neutral(r);case hM:return this.keyword(r);case yf:return this.quoted(r);case pM:return this.afterquote(r);case dM:return this.number(r);case EC:return}};ts.prototype.afterquote=function(r){if(r==='"'){this.word+='"',this.state=yf;return}if(Mg.test(r)){this.word=this.word.trim(),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in afterquote yet, index '+this.place)};ts.prototype.afterItem=function(r){if(r===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Mh;return}if(r==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Mh,this.currentObject=this.stack.pop(),this.currentObject||(this.state=EC);return}};ts.prototype.number=function(r){if(fM.test(r)){this.word+=r;return}if(Mg.test(r)){this.word=parseFloat(this.word),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in number yet, index '+this.place)};ts.prototype.quoted=function(r){if(r==='"'){this.state=pM;return}this.word+=r};ts.prototype.keyword=function(r){if(xk.test(r)){this.word+=r;return}if(r==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Mh;return}if(Mg.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in keyword yet, index '+this.place)};ts.prototype.neutral=function(r){if(Ek.test(r)){this.word=r,this.state=hM;return}if(r==='"'){this.word="",this.state=yf;return}if(fM.test(r)){this.word=r,this.state=dM;return}if(Mg.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in neutral yet, index '+this.place)};ts.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===EC)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Rk(r){var t=new ts(r);return t.output()}function mE(r,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var i=t?{}:r,n=e.reduce(function(o,s){return tu(s,o),o},i);t&&(r[t]=n)}function tu(r,t){if(!Array.isArray(r)){t[r]=!0;return}var e=r.shift();if(e==="PARAMETER"&&(e=r.shift()),r.length===1){if(Array.isArray(r[0])){t[e]={},tu(r[0],t[e]);return}t[e]=r[0];return}if(!r.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=r;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(r);return}Array.isArray(e)||(t[e]={});var i;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:r[0].toLowerCase(),convert:r[1]},r.length===3&&tu(r[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:r[0],a:r[1],rf:r[2]},r.length===4&&tu(r[3],t[e]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":r[0]=["name",r[0]],mE(t,e,r);return;default:for(i=-1;++i<r.length;)if(!Array.isArray(r[i]))return tu(r,t[e]);return mE(t,e,r)}}var bk=.017453292519943295;function Mk(r,t){var e=t[0],i=t[1];!(e in r)&&i in r&&(r[e]=r[i],t.length===3&&(r[e]=t[2](r[e])))}function Lo(r){return r*bk}function Tk(r){if(r.type==="GEOGCS"?r.projName="longlat":r.type==="LOCAL_CS"?(r.projName="identity",r.local=!0):typeof r.PROJECTION=="object"?r.projName=Object.keys(r.PROJECTION)[0]:r.projName=r.PROJECTION,r.AXIS){for(var t="",e=0,i=r.AXIS.length;e<i;++e){var n=[r.AXIS[e][0].toLowerCase(),r.AXIS[e][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?t+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?t+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?t+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(r.axis=t)}r.UNIT&&(r.units=r.UNIT.name.toLowerCase(),r.units==="metre"&&(r.units="meter"),r.UNIT.convert&&(r.type==="GEOGCS"?r.DATUM&&r.DATUM.SPHEROID&&(r.to_meter=r.UNIT.convert*r.DATUM.SPHEROID.a):r.to_meter=r.UNIT.convert));var o=r.GEOGCS;r.type==="GEOGCS"&&(o=r),o&&(o.DATUM?r.datumCode=o.DATUM.name.toLowerCase():r.datumCode=o.name.toLowerCase(),r.datumCode.slice(0,2)==="d_"&&(r.datumCode=r.datumCode.slice(2)),(r.datumCode==="new_zealand_geodetic_datum_1949"||r.datumCode==="new_zealand_1949")&&(r.datumCode="nzgd49"),(r.datumCode==="wgs_1984"||r.datumCode==="world_geodetic_system_1984")&&(r.PROJECTION==="Mercator_Auxiliary_Sphere"&&(r.sphere=!0),r.datumCode="wgs84"),r.datumCode.slice(-6)==="_ferro"&&(r.datumCode=r.datumCode.slice(0,-6)),r.datumCode.slice(-8)==="_jakarta"&&(r.datumCode=r.datumCode.slice(0,-8)),~r.datumCode.indexOf("belge")&&(r.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(r.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),r.ellps.toLowerCase().slice(0,13)==="international"&&(r.ellps="intl"),r.a=o.DATUM.SPHEROID.a,r.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(r.datum_params=o.DATUM.TOWGS84),~r.datumCode.indexOf("osgb_1936")&&(r.datumCode="osgb36"),~r.datumCode.indexOf("osni_1952")&&(r.datumCode="osni52"),(~r.datumCode.indexOf("tm65")||~r.datumCode.indexOf("geodetic_datum_of_1965"))&&(r.datumCode="ire65"),r.datumCode==="ch1903+"&&(r.datumCode="ch1903"),~r.datumCode.indexOf("israel")&&(r.datumCode="isr93")),r.b&&!isFinite(r.b)&&(r.b=r.a);function s(u){var c=r.to_meter||1;return u*c}var a=function(u){return Mk(r,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Lo],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Lo],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",Lo],["lat0","latitude_of_origin",Lo],["lat0","standard_parallel_1",Lo],["lat1","standard_parallel_1",Lo],["lat2","standard_parallel_2",Lo],["azimuth","Azimuth"],["alpha","azimuth",Lo],["srsCode","name"]];l.forEach(a),!r.long0&&r.longc&&(r.projName==="Albers_Conic_Equal_Area"||r.projName==="Lambert_Azimuthal_Equal_Area")&&(r.long0=r.longc),!r.lat_ts&&r.lat1&&(r.projName==="Stereographic_South_Pole"||r.projName==="Polar Stereographic (variant B)")&&(r.lat0=Lo(r.lat1>0?90:-90),r.lat_ts=r.lat1)}function gM(r){var t=Rk(r),e=t.shift(),i=t.shift();t.unshift(["name",i]),t.unshift(["type",e]);var n={};return tu(t,n),Tk(n),n}function pn(r){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?pn[r]=Gy(arguments[1]):pn[r]=gM(arguments[1]):pn[r]=e}else if(arguments.length===1){if(Array.isArray(r))return r.map(function(i){Array.isArray(i)?pn.apply(t,i):pn(i)});if(typeof r=="string"){if(r in pn)return pn[r]}else"EPSG"in r?pn["EPSG:"+r.EPSG]=r:"ESRI"in r?pn["ESRI:"+r.ESRI]=r:"IAU2000"in r?pn["IAU2000:"+r.IAU2000]=r:console.log(r);return}}gk(pn);function Pk(r){return typeof r=="string"}function Ok(r){return r in pn}var Ak=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Dk(r){return Ak.some(function(t){return r.indexOf(t)>-1})}var Lk=["3857","900913","3785","102113"];function Ik(r){var t=Qs(r,"authority");if(!!t){var e=Qs(t,"epsg");return e&&Lk.indexOf(e)>-1}}function Fk(r){var t=Qs(r,"extension");if(!!t)return Qs(t,"proj4")}function Nk(r){return r[0]==="+"}function Gk(r){if(Pk(r)){if(Ok(r))return pn[r];if(Dk(r)){var t=gM(r);if(Ik(t))return pn["EPSG:3857"];var e=Fk(t);return e?Gy(e):t}if(Nk(r))return Gy(r)}else return r}function vE(r,t){r=r||{};var e,i;if(!t)return r;for(i in t)e=t[i],e!==void 0&&(r[i]=e);return r}function Co(r,t,e){var i=r*t;return e/Math.sqrt(1-i*i)}function Zh(r){return r<0?-1:1}function It(r){return Math.abs(r)<=mi?r:r-Zh(r)*bh}function Vr(r,t,e){var i=r*e,n=.5*r;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(wt-t))/i}function Th(r,t){for(var e=.5*r,i,n,o=wt-2*Math.atan(t),s=0;s<=15;s++)if(i=r*Math.sin(o),n=wt-2*Math.atan(t*Math.pow((1-i)/(1+i),e))-o,o+=n,Math.abs(n)<=1e-10)return o;return-9999}function Hk(){var r=this.b/this.a;this.es=1-r*r,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Co(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Wk(r){var t=r.x,e=r.y;if(e*co>90&&e*co<-90&&t*co>180&&t*co<-180)return null;var i,n;if(Math.abs(Math.abs(e)-wt)<=Ot)return null;if(this.sphere)i=this.x0+this.a*this.k0*It(t-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(ke+.5*e));else{var o=Math.sin(e),s=Vr(this.e,e,o);i=this.x0+this.a*this.k0*It(t-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return r.x=i,r.y=n,r}function Vk(r){var t=r.x-this.x0,e=r.y-this.y0,i,n;if(this.sphere)n=wt-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var o=Math.exp(-e/(this.a*this.k0));if(n=Th(this.e,o),n===-9999)return null}return i=It(this.long0+t/(this.a*this.k0)),r.x=i,r.y=n,r}var kk=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Bk={init:Hk,forward:Wk,inverse:Vk,names:kk};function Uk(){}function yE(r){return r}var zk=["longlat","identity"];const jk={init:Uk,forward:yE,inverse:yE,names:zk};var $k=[Bk,jk],Vp={},_f=[];function mM(r,t){var e=_f.length;return r.names?(_f[e]=r,r.names.forEach(function(i){Vp[i.toLowerCase()]=e}),this):(console.log(t),!0)}function Yk(r){if(!r)return!1;var t=r.toLowerCase();if(typeof Vp[t]<"u"&&_f[Vp[t]])return _f[Vp[t]]}function Kk(){$k.forEach(mM)}const Xk={start:Kk,add:mM,get:Yk};var re={};re.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};re.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};re.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};re.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};re.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};re.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};re.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};re.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};re.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};re.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};re.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};re.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};re.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};re.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};re.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};re.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};re.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};re.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};re.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};re.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};re.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};re.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};re.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};re.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};re.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};re.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};re.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};re.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};re.hough={a:6378270,rf:297,ellipseName:"Hough"};re.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};re.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};re.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};re.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};re.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};re.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};re.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};re.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};re.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};re.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};re.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};re.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var qk=re.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};re.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Zk(r,t,e,i){var n=r*r,o=t*t,s=(n-o)/n,a=0;i?(r*=1-s*(yk+s*(_k+s*Ck)),n=r*r,s=0):a=Math.sqrt(s);var l=(n-o)/o;return{es:s,e:a,ep2:l}}function Jk(r,t,e,i,n){if(!r){var o=Qs(re,i);o||(o=qk),r=o.a,t=o.b,e=o.rf}return e&&!t&&(t=(1-1/e)*r),(e===0||Math.abs(r-t)<Ot)&&(n=!0,t=r),{a:r,b:t,rf:e,sphere:n}}var Vi={};Vi.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Vi.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Vi.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Vi.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Vi.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Vi.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Vi.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Vi.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Vi.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Vi.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Vi.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Vi.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Vi.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Vi.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Vi.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Vi.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Vi.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function Qk(r,t,e,i,n,o,s){var a={};return r===void 0||r==="none"?a.datum_type=Ny:a.datum_type=mk,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=tl),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=el,a.datum_params[3]*=eh,a.datum_params[4]*=eh,a.datum_params[5]*=eh,a.datum_params[6]=a.datum_params[6]/1e6+1)),s&&(a.datum_type=Wp,a.grids=s),a.a=e,a.b=i,a.es=n,a.ep2=o,a}var vM={};function tB(r,t){var e=new DataView(t),i=nB(e),n=rB(e,i);n.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=oB(e,n,i),s={header:n,subgrids:o};return vM[r]=s,s}function eB(r){if(r===void 0)return null;var t=r.split(",");return t.map(iB)}function iB(r){if(r.length===0)return null;var t=r[0]==="@";return t&&(r=r.slice(1)),r==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:r,mandatory:!t,grid:vM[r]||null,isNull:!1}}function eu(r){return r/3600*Math.PI/180}function nB(r){var t=r.getInt32(8,!1);return t===11?!1:(t=r.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function rB(r,t){return{nFields:r.getInt32(8,t),nSubgridFields:r.getInt32(24,t),nSubgrids:r.getInt32(40,t),shiftType:Hy(r,56,56+8).trim(),fromSemiMajorAxis:r.getFloat64(120,t),fromSemiMinorAxis:r.getFloat64(136,t),toSemiMajorAxis:r.getFloat64(152,t),toSemiMinorAxis:r.getFloat64(168,t)}}function Hy(r,t,e){return String.fromCharCode.apply(null,new Uint8Array(r.buffer.slice(t,e)))}function oB(r,t,e){for(var i=176,n=[],o=0;o<t.nSubgrids;o++){var s=aB(r,i,e),a=lB(r,i,s,e),l=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),u=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);n.push({ll:[eu(s.lowerLongitude),eu(s.lowerLatitude)],del:[eu(s.longitudeInterval),eu(s.latitudeInterval)],lim:[l,u],count:s.gridNodeCount,cvs:sB(a)})}return n}function sB(r){return r.map(function(t){return[eu(t.longitudeShift),eu(t.latitudeShift)]})}function aB(r,t,e){return{name:Hy(r,t+8,t+16).trim(),parent:Hy(r,t+24,t+24+8).trim(),lowerLatitude:r.getFloat64(t+72,e),upperLatitude:r.getFloat64(t+88,e),lowerLongitude:r.getFloat64(t+104,e),upperLongitude:r.getFloat64(t+120,e),latitudeInterval:r.getFloat64(t+136,e),longitudeInterval:r.getFloat64(t+152,e),gridNodeCount:r.getInt32(t+168,e)}}function lB(r,t,e,i){for(var n=t+176,o=16,s=[],a=0;a<e.gridNodeCount;a++){var l={latitudeShift:r.getFloat32(n+a*o,i),longitudeShift:r.getFloat32(n+a*o+4,i),latitudeAccuracy:r.getFloat32(n+a*o+8,i),longitudeAccuracy:r.getFloat32(n+a*o+12,i)};s.push(l)}return s}function go(r,t){if(!(this instanceof go))return new go(r);t=t||function(u){if(u)throw u};var e=Gk(r);if(typeof e!="object"){t(r);return}var i=go.projections.get(e.projName);if(!i){t(r);return}if(e.datumCode&&e.datumCode!=="none"){var n=Qs(Vi,e.datumCode);n&&(e.datum_params=e.datum_params||(n.towgs84?n.towgs84.split(","):null),e.ellps=n.ellipse,e.datumName=n.datumName?n.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var o=Jk(e.a,e.b,e.rf,e.ellps,e.sphere),s=Zk(o.a,o.b,o.rf,e.R_A),a=eB(e.nadgrids),l=e.datum||Qk(e.datumCode,e.datum_params,o.a,o.b,s.es,s.ep2,a);vE(this,e),vE(this,i),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,this.init(),t(null,this)}go.projections=Xk;go.projections.start();function uB(r,t){return r.datum_type!==t.datum_type||r.a!==t.a||Math.abs(r.es-t.es)>5e-11?!1:r.datum_type===tl?r.datum_params[0]===t.datum_params[0]&&r.datum_params[1]===t.datum_params[1]&&r.datum_params[2]===t.datum_params[2]:r.datum_type===el?r.datum_params[0]===t.datum_params[0]&&r.datum_params[1]===t.datum_params[1]&&r.datum_params[2]===t.datum_params[2]&&r.datum_params[3]===t.datum_params[3]&&r.datum_params[4]===t.datum_params[4]&&r.datum_params[5]===t.datum_params[5]&&r.datum_params[6]===t.datum_params[6]:!0}function yM(r,t,e){var i=r.x,n=r.y,o=r.z?r.z:0,s,a,l,u;if(n<-wt&&n>-1.001*wt)n=-wt;else if(n>wt&&n<1.001*wt)n=wt;else{if(n<-wt)return{x:-1/0,y:-1/0,z:r.z};if(n>wt)return{x:1/0,y:1/0,z:r.z}}return i>Math.PI&&(i-=2*Math.PI),a=Math.sin(n),u=Math.cos(n),l=a*a,s=e/Math.sqrt(1-t*l),{x:(s+o)*u*Math.cos(i),y:(s+o)*u*Math.sin(i),z:(s*(1-t)+o)*a}}function _M(r,t,e,i){var n=1e-12,o=n*n,s=30,a,l,u,c,h,d,p,f,m,g,y,C,w,S=r.x,E=r.y,M=r.z?r.z:0,L,x,T;if(a=Math.sqrt(S*S+E*E),l=Math.sqrt(S*S+E*E+M*M),a/e<n){if(L=0,l/e<n)return x=wt,T=-i,{x:r.x,y:r.y,z:r.z}}else L=Math.atan2(E,S);u=M/l,c=a/l,h=1/Math.sqrt(1-t*(2-t)*c*c),f=c*(1-t)*h,m=u*h,w=0;do w++,p=e/Math.sqrt(1-t*m*m),T=a*f+M*m-p*(1-t*m*m),d=t*p/(p+T),h=1/Math.sqrt(1-d*(2-d)*c*c),g=c*(1-d)*h,y=u*h,C=y*f-g*m,f=g,m=y;while(C*C>o&&w<s);return x=Math.atan(y/Math.abs(g)),{x:L,y:x,z:T}}function cB(r,t,e){if(t===tl)return{x:r.x+e[0],y:r.y+e[1],z:r.z+e[2]};if(t===el){var i=e[0],n=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6];return{x:u*(r.x-l*r.y+a*r.z)+i,y:u*(l*r.x+r.y-s*r.z)+n,z:u*(-a*r.x+s*r.y+r.z)+o}}}function hB(r,t,e){if(t===tl)return{x:r.x-e[0],y:r.y-e[1],z:r.z-e[2]};if(t===el){var i=e[0],n=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=(r.x-i)/u,h=(r.y-n)/u,d=(r.z-o)/u;return{x:c+l*h-a*d,y:-l*c+h+s*d,z:a*c-s*h+d}}}function ep(r){return r===tl||r===el}function dB(r,t,e){if(uB(r,t)||r.datum_type===Ny||t.datum_type===Ny)return e;var i=r.a,n=r.es;if(r.datum_type===Wp){var o=_E(r,!1,e);if(o!==0)return;i=pE,n=fE}var s=t.a,a=t.b,l=t.es;if(t.datum_type===Wp&&(s=pE,a=vk,l=fE),n===l&&i===s&&!ep(r.datum_type)&&!ep(t.datum_type))return e;if(e=yM(e,n,i),ep(r.datum_type)&&(e=cB(e,r.datum_type,r.datum_params)),ep(t.datum_type)&&(e=hB(e,t.datum_type,t.datum_params)),e=_M(e,l,s,a),t.datum_type===Wp){var u=_E(t,!0,e);if(u!==0)return}return e}function _E(r,t,e){if(r.grids===null||r.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var i={x:-e.x,y:e.y},n={x:Number.NaN,y:Number.NaN},o=[],s=0;s<r.grids.length;s++){var a=r.grids[s];if(o.push(a.name),a.isNull){n=i;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}var l=a.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,h=l.ll[1]-u,d=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(h>i.y||c>i.x||p<i.y||d<i.x)&&(n=pB(i,t,l),!isNaN(n.x)))break}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*co+" "+i.y*co+" tried: '"+o+"'"),-1):(e.x=-n.x,e.y=n.y,0)}function pB(r,t,e){var i={x:Number.NaN,y:Number.NaN};if(isNaN(r.x))return i;var n={x:r.x,y:r.y};n.x-=e.ll[0],n.y-=e.ll[1],n.x=It(n.x-Math.PI)+Math.PI;var o=CE(n,e);if(t){if(isNaN(o.x))return i;o.x=n.x-o.x,o.y=n.y-o.y;var s=9,a=1e-12,l,u;do{if(u=CE(o,e),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:n.x-(u.x+o.x),y:n.y-(u.y+o.y)},o.x+=l.x,o.y+=l.y}while(s--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=It(o.x+e.ll[0]),i.y=o.y+e.ll[1]}else isNaN(o.x)||(i.x=r.x+o.x,i.y=r.y+o.y);return i}function CE(r,t){var e={x:r.x/t.del[0],y:r.y/t.del[1]},i={x:Math.floor(e.x),y:Math.floor(e.y)},n={x:e.x-1*i.x,y:e.y-1*i.y},o={x:Number.NaN,y:Number.NaN},s;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return o;s=i.y*t.lim[0]+i.x;var a={x:t.cvs[s][0],y:t.cvs[s][1]};s++;var l={x:t.cvs[s][0],y:t.cvs[s][1]};s+=t.lim[0];var u={x:t.cvs[s][0],y:t.cvs[s][1]};s--;var c={x:t.cvs[s][0],y:t.cvs[s][1]},h=n.x*n.y,d=n.x*(1-n.y),p=(1-n.x)*(1-n.y),f=(1-n.x)*n.y;return o.x=p*a.x+d*l.x+f*c.x+h*u.x,o.y=p*a.y+d*l.y+f*c.y+h*u.y,o}function wE(r,t,e){var i=e.x,n=e.y,o=e.z||0,s,a,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&e.z===void 0))switch(l===0?(s=i,"ew".indexOf(r.axis[l])!==-1?a="x":a="y"):l===1?(s=n,"ns".indexOf(r.axis[l])!==-1?a="y":a="x"):(s=o,a="z"),r.axis[l]){case"e":u[a]=s;break;case"w":u[a]=-s;break;case"n":u[a]=s;break;case"s":u[a]=-s;break;case"u":e[a]!==void 0&&(u.z=s);break;case"d":e[a]!==void 0&&(u.z=-s);break;default:return null}return u}function CM(r){var t={x:r[0],y:r[1]};return r.length>2&&(t.z=r[2]),r.length>3&&(t.m=r[3]),t}function fB(r){SE(r.x),SE(r.y)}function SE(r){if(typeof Number.isFinite=="function"){if(Number.isFinite(r))return;throw new TypeError("coordinates must be finite numbers")}if(typeof r!="number"||r!==r||!isFinite(r))throw new TypeError("coordinates must be finite numbers")}function gB(r,t){return(r.datum.datum_type===tl||r.datum.datum_type===el)&&t.datumCode!=="WGS84"||(t.datum.datum_type===tl||t.datum.datum_type===el)&&r.datumCode!=="WGS84"}function Cf(r,t,e,i){var n;if(Array.isArray(e)&&(e=CM(e)),fB(e),r.datum&&t.datum&&gB(r,t)&&(n=new go("WGS84"),e=Cf(r,n,e,i),r=n),i&&r.axis!=="enu"&&(e=wE(r,!1,e)),r.projName==="longlat")e={x:e.x*Ui,y:e.y*Ui,z:e.z||0};else if(r.to_meter&&(e={x:e.x*r.to_meter,y:e.y*r.to_meter,z:e.z||0}),e=r.inverse(e),!e)return;if(r.from_greenwich&&(e.x+=r.from_greenwich),e=dB(r.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*co,y:e.y*co,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),i&&t.axis!=="enu"?wE(t,!0,e):e}var EE=go("WGS84");function Zm(r,t,e,i){var n,o,s;return Array.isArray(e)?(n=Cf(r,t,e,i)||{x:NaN,y:NaN},e.length>2?typeof r.name<"u"&&r.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(e.splice(3)):[n.x,n.y,e[2]].concat(e.splice(3)):[n.x,n.y].concat(e.splice(2)):[n.x,n.y]):(o=Cf(r,t,e,i),s=Object.keys(e),s.length===2||s.forEach(function(a){if(typeof r.name<"u"&&r.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;o[a]=e[a]}),o)}function xE(r){return r instanceof go?r:r.oProj?r.oProj:go(r)}function Ln(r,t,e){r=xE(r);var i=!1,n;return typeof t>"u"?(t=r,r=EE,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=r,r=EE,i=!0),t=xE(t),e?Zm(r,t,e):(n={forward:function(o,s){return Zm(r,t,o,s)},inverse:function(o,s){return Zm(t,r,o,s)}},i&&(n.oProj=t),n)}var RE=6,wM="AJSAJS",SM="AFAFAF",iu=65,Tn=73,or=79,Bc=86,Uc=90;const mB={forward:EM,inverse:vB,toPoint:xM};function EM(r,t){return t=t||5,CB(yB({lat:r[1],lon:r[0]}),t)}function vB(r){var t=xC(bM(r.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function xM(r){var t=xC(bM(r.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Jm(r){return r*(Math.PI/180)}function bE(r){return 180*(r/Math.PI)}function yB(r){var t=r.lat,e=r.lon,i=6378137,n=.00669438,o=.9996,s,a,l,u,c,h,d,p=Jm(t),f=Jm(e),m,g;g=Math.floor((e+180)/6)+1,e===180&&(g=60),t>=56&&t<64&&e>=3&&e<12&&(g=32),t>=72&&t<84&&(e>=0&&e<9?g=31:e>=9&&e<21?g=33:e>=21&&e<33?g=35:e>=33&&e<42&&(g=37)),s=(g-1)*6-180+3,m=Jm(s),a=n/(1-n),l=i/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),c=a*Math.cos(p)*Math.cos(p),h=Math.cos(p)*(f-m),d=i*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var y=o*l*(h+(1-u+c)*h*h*h/6+(5-18*u+u*u+72*c-58*a)*h*h*h*h*h/120)+5e5,C=o*(d+l*Math.tan(p)*(h*h/2+(5-u+9*c+4*c*c)*h*h*h*h/24+(61-58*u+u*u+600*c-330*a)*h*h*h*h*h*h/720));return t<0&&(C+=1e7),{northing:Math.round(C),easting:Math.round(y),zoneNumber:g,zoneLetter:_B(t)}}function xC(r){var t=r.northing,e=r.easting,i=r.zoneLetter,n=r.zoneNumber;if(n<0||n>60)return null;var o=.9996,s=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,h,d,p,f,m,g,y,C,w=e-5e5,S=t;i<"N"&&(S-=1e7),g=(n-1)*6-180+3,l=a/(1-a),m=S/o,y=m/(s*(1-a/4-3*a*a/64-5*a*a*a/256)),C=y+(3*u/2-27*u*u*u/32)*Math.sin(2*y)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*y)+151*u*u*u/96*Math.sin(6*y),c=s/Math.sqrt(1-a*Math.sin(C)*Math.sin(C)),h=Math.tan(C)*Math.tan(C),d=l*Math.cos(C)*Math.cos(C),p=s*(1-a)/Math.pow(1-a*Math.sin(C)*Math.sin(C),1.5),f=w/(c*o);var E=C-c*Math.tan(C)/p*(f*f/2-(5+3*h+10*d-4*d*d-9*l)*f*f*f*f/24+(61+90*h+298*d+45*h*h-252*l-3*d*d)*f*f*f*f*f*f/720);E=bE(E);var M=(f-(1+2*h+d)*f*f*f/6+(5-2*d+28*h-3*d*d+8*l+24*h*h)*f*f*f*f*f/120)/Math.cos(C);M=g+bE(M);var L;if(r.accuracy){var x=xC({northing:r.northing+r.accuracy,easting:r.easting+r.accuracy,zoneLetter:r.zoneLetter,zoneNumber:r.zoneNumber});L={top:x.lat,right:x.lon,bottom:E,left:M}}else L={lat:E,lon:M};return L}function _B(r){var t="Z";return 84>=r&&r>=72?t="X":72>r&&r>=64?t="W":64>r&&r>=56?t="V":56>r&&r>=48?t="U":48>r&&r>=40?t="T":40>r&&r>=32?t="S":32>r&&r>=24?t="R":24>r&&r>=16?t="Q":16>r&&r>=8?t="P":8>r&&r>=0?t="N":0>r&&r>=-8?t="M":-8>r&&r>=-16?t="L":-16>r&&r>=-24?t="K":-24>r&&r>=-32?t="J":-32>r&&r>=-40?t="H":-40>r&&r>=-48?t="G":-48>r&&r>=-56?t="F":-56>r&&r>=-64?t="E":-64>r&&r>=-72?t="D":-72>r&&r>=-80&&(t="C"),t}function CB(r,t){var e="00000"+r.easting,i="00000"+r.northing;return r.zoneNumber+r.zoneLetter+wB(r.easting,r.northing,r.zoneNumber)+e.substr(e.length-5,t)+i.substr(i.length-5,t)}function wB(r,t,e){var i=RM(e),n=Math.floor(r/1e5),o=Math.floor(t/1e5)%20;return SB(n,o,i)}function RM(r){var t=r%RE;return t===0&&(t=RE),t}function SB(r,t,e){var i=e-1,n=wM.charCodeAt(i),o=SM.charCodeAt(i),s=n+r-1,a=o+t,l=!1;s>Uc&&(s=s-Uc+iu-1,l=!0),(s===Tn||n<Tn&&s>Tn||(s>Tn||n<Tn)&&l)&&s++,(s===or||n<or&&s>or||(s>or||n<or)&&l)&&(s++,s===Tn&&s++),s>Uc&&(s=s-Uc+iu-1),a>Bc?(a=a-Bc+iu-1,l=!0):l=!1,(a===Tn||o<Tn&&a>Tn||(a>Tn||o<Tn)&&l)&&a++,(a===or||o<or&&a>or||(a>or||o<or)&&l)&&(a++,a===Tn&&a++),a>Bc&&(a=a-Bc+iu-1);var u=String.fromCharCode(s)+String.fromCharCode(a);return u}function bM(r){if(r&&r.length===0)throw"MGRSPoint coverting from nothing";for(var t=r.length,e=null,i="",n,o=0;!/[A-Z]/.test(n=r.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+r;i+=n,o++}var s=parseInt(i,10);if(o===0||o+3>t)throw"MGRSPoint bad conversion from: "+r;var a=r.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+r;e=r.substring(o,o+=2);for(var l=RM(s),u=EB(e.charAt(0),l),c=xB(e.charAt(1),l);c<RB(a);)c+=2e6;var h=t-o;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+r;var d=h/2,p=0,f=0,m,g,y,C,w;return d>0&&(m=1e5/Math.pow(10,d),g=r.substring(o,o+d),p=parseFloat(g)*m,y=r.substring(o+d),f=parseFloat(y)*m),C=p+u,w=f+c,{easting:C,northing:w,zoneLetter:a,zoneNumber:s,accuracy:m}}function EB(r,t){for(var e=wM.charCodeAt(t-1),i=1e5,n=!1;e!==r.charCodeAt(0);){if(e++,e===Tn&&e++,e===or&&e++,e>Uc){if(n)throw"Bad character: "+r;e=iu,n=!0}i+=1e5}return i}function xB(r,t){if(r>"V")throw"MGRSPoint given invalid Northing "+r;for(var e=SM.charCodeAt(t-1),i=0,n=!1;e!==r.charCodeAt(0);){if(e++,e===Tn&&e++,e===or&&e++,e>Bc){if(n)throw"Bad character: "+r;e=iu,n=!0}i+=1e5}return i}function RB(r){var t;switch(r){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+r}function bu(r,t,e){if(!(this instanceof bu))return new bu(r,t,e);if(Array.isArray(r))this.x=r[0],this.y=r[1],this.z=r[2]||0;else if(typeof r=="object")this.x=r.x,this.y=r.y,this.z=r.z||0;else if(typeof r=="string"&&typeof t>"u"){var i=r.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=r,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}bu.fromMGRS=function(r){return new bu(xM(r))};bu.prototype.toMGRS=function(r){return EM([this.x,this.y],r)};var bB=1,MB=.25,ME=.046875,TE=.01953125,PE=.01068115234375,TB=.75,PB=.46875,OB=.013020833333333334,AB=.007120768229166667,DB=.3645833333333333,LB=.005696614583333333,IB=.3076171875;function MM(r){var t=[];t[0]=bB-r*(MB+r*(ME+r*(TE+r*PE))),t[1]=r*(TB-r*(ME+r*(TE+r*PE)));var e=r*r;return t[2]=e*(PB-r*(OB+r*AB)),e*=r,t[3]=e*(DB-r*LB),t[4]=e*r*IB,t}function Tg(r,t,e,i){return e*=t,t*=t,i[0]*r-e*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var FB=20;function TM(r,t,e){for(var i=1/(1-t),n=r,o=FB;o;--o){var s=Math.sin(n),a=1-t*s*s;if(a=(Tg(n,s,Math.cos(n),e)-r)*(a*Math.sqrt(a))*i,n-=a,Math.abs(a)<Ot)return n}return n}function NB(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=MM(this.es),this.ml0=Tg(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function GB(r){var t=r.x,e=r.y,i=It(t-this.long0),n,o,s,a=Math.sin(e),l=Math.cos(e);if(this.es){var c=l*i,h=Math.pow(c,2),d=this.ep2*Math.pow(l,2),p=Math.pow(d,2),f=Math.abs(l)>Ot?Math.tan(e):0,m=Math.pow(f,2),g=Math.pow(m,2);n=1-this.es*Math.pow(a,2),c=c/Math.sqrt(n);var y=Tg(e,a,l,this.en);o=this.a*(this.k0*c*(1+h/6*(1-m+d+h/20*(5-18*m+g+14*d-58*m*d+h/42*(61+179*g-g*m-479*m)))))+this.x0,s=this.a*(this.k0*(y-this.ml0+a*i*c/2*(1+h/12*(5-m+9*d+4*p+h/30*(61+g-58*m+270*d-330*m*d+h/56*(1385+543*g-g*m-3111*m))))))+this.y0}else{var u=l*Math.sin(i);if(Math.abs(Math.abs(u)-1)<Ot)return 93;if(o=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,s=l*Math.cos(i)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(s),u>=1){if(u-1>Ot)return 93;s=0}else s=Math.acos(s);e<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return r.x=o,r.y=s,r}function HB(r){var t,e,i,n,o=(r.x-this.x0)*(1/this.a),s=(r.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+s/this.k0,e=TM(t,this.es,this.en),Math.abs(e)<wt){var h=Math.sin(e),d=Math.cos(e),p=Math.abs(d)>Ot?Math.tan(e):0,f=this.ep2*Math.pow(d,2),m=Math.pow(f,2),g=Math.pow(p,2),y=Math.pow(g,2);t=1-this.es*Math.pow(h,2);var C=o*Math.sqrt(t)/this.k0,w=Math.pow(C,2);t=t*p,i=e-t*w/(1-this.es)*.5*(1-w/12*(5+3*g-9*f*g+f-4*m-w/30*(61+90*g-252*f*g+45*y+46*f-w/56*(1385+3633*g+4095*y+1574*y*g)))),n=It(this.long0+C*(1-w/6*(1+2*g+f-w/20*(5+28*g+24*y+8*f*g+6*f-w/42*(61+662*g+1320*y+720*y*g))))/d)}else i=wt*Zh(s),n=0;else{var a=Math.exp(o/this.k0),l=.5*(a-1/a),u=this.lat0+s/this.k0,c=Math.cos(u);t=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),i=Math.asin(t),s<0&&(i=-i),l===0&&c===0?n=0:n=It(Math.atan2(l,c)+this.long0)}return r.x=n,r.y=i,r}var WB=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const kp={init:NB,forward:GB,inverse:HB,names:WB};function PM(r){var t=Math.exp(r);return t=(t-1/t)/2,t}function Ir(r,t){r=Math.abs(r),t=Math.abs(t);var e=Math.max(r,t),i=Math.min(r,t)/(e||1);return e*Math.sqrt(1+Math.pow(i,2))}function VB(r){var t=1+r,e=t-1;return e===0?r:r*Math.log(t)/e}function kB(r){var t=Math.abs(r);return t=VB(t*(1+t/(Ir(1,t)+1))),r<0?-t:t}function RC(r,t){for(var e=2*Math.cos(2*t),i=r.length-1,n=r[i],o=0,s;--i>=0;)s=-o+e*n+r[i],o=n,n=s;return t+s*Math.sin(2*t)}function BB(r,t){for(var e=2*Math.cos(t),i=r.length-1,n=r[i],o=0,s;--i>=0;)s=-o+e*n+r[i],o=n,n=s;return Math.sin(t)*s}function UB(r){var t=Math.exp(r);return t=(t+1/t)/2,t}function OM(r,t,e){for(var i=Math.sin(t),n=Math.cos(t),o=PM(e),s=UB(e),a=2*n*s,l=-2*i*o,u=r.length-1,c=r[u],h=0,d=0,p=0,f,m;--u>=0;)f=d,m=h,d=c,h=p,c=-f+a*d-l*h+r[u],p=-m+l*d+a*h;return a=i*s,l=n*o,[a*c-l*p,a*p+l*c]}function zB(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(kp.init.apply(this),this.forward=kp.forward,this.inverse=kp.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var r=this.es/(1+Math.sqrt(1-this.es)),t=r/(2-r),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var i=RC(this.cbg,this.lat0);this.Zb=-this.Qn*(i+BB(this.gtu,2*i))}function jB(r){var t=It(r.x-this.long0),e=r.y;e=RC(this.cbg,e);var i=Math.sin(e),n=Math.cos(e),o=Math.sin(t),s=Math.cos(t);e=Math.atan2(i,s*n),t=Math.atan2(o*n,Ir(i,n*s)),t=kB(Math.tan(t));var a=OM(this.gtu,2*e,2*t);e=e+a[0],t=t+a[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*e+this.Zb)+this.y0):(l=1/0,u=1/0),r.x=l,r.y=u,r}function $B(r){var t=(r.x-this.x0)*(1/this.a),e=(r.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var i,n;if(Math.abs(t)<=2.623395162778){var o=OM(this.utg,2*e,2*t);e=e+o[0],t=t+o[1],t=Math.atan(PM(t));var s=Math.sin(e),a=Math.cos(e),l=Math.sin(t),u=Math.cos(t);e=Math.atan2(s*u,Ir(l,u*a)),t=Math.atan2(l,u*a),i=It(t+this.long0),n=RC(this.cgb,e)}else i=1/0,n=1/0;return r.x=i,r.y=n,r}var YB=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const Bp={init:zB,forward:jB,inverse:$B,names:YB};function KB(r,t){if(r===void 0){if(r=Math.floor((It(t)+Math.PI)*30/Math.PI)+1,r<0)return 0;if(r>60)return 60}return r}var XB="etmerc";function qB(){var r=KB(this.zone,this.long0);if(r===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(r)-183)*Ui,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Bp.init.apply(this),this.forward=Bp.forward,this.inverse=Bp.inverse}var ZB=["Universal Transverse Mercator System","utm"];const JB={init:qB,names:ZB,dependsOn:XB};function bC(r,t){return Math.pow((1-r)/(1+r),t)}var QB=20;function tU(){var r=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*r*r),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(r/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ke)/(Math.pow(Math.tan(.5*this.lat0+ke),this.C)*bC(this.e*r,this.ratexp))}function eU(r){var t=r.x,e=r.y;return r.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+ke),this.C)*bC(this.e*Math.sin(e),this.ratexp))-wt,r.x=this.C*t,r}function iU(r){for(var t=1e-14,e=r.x/this.C,i=r.y,n=Math.pow(Math.tan(.5*i+ke)/this.K,1/this.C),o=QB;o>0&&(i=2*Math.atan(n*bC(this.e*Math.sin(r.y),-.5*this.e))-wt,!(Math.abs(i-r.y)<t));--o)r.y=i;return o?(r.x=e,r.y=i,r):null}var nU=["gauss"];const MC={init:tU,forward:eU,inverse:iU,names:nU};function rU(){MC.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function oU(r){var t,e,i,n;return r.x=It(r.x-this.long0),MC.forward.apply(this,[r]),t=Math.sin(r.y),e=Math.cos(r.y),i=Math.cos(r.x),n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*i),r.x=n*e*Math.sin(r.x),r.y=n*(this.cosc0*t-this.sinc0*e*i),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function sU(r){var t,e,i,n,o;if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,o=Math.sqrt(r.x*r.x+r.y*r.y)){var s=2*Math.atan2(o,this.R2);t=Math.sin(s),e=Math.cos(s),n=Math.asin(e*this.sinc0+r.y*t*this.cosc0/o),i=Math.atan2(r.x*t,o*this.cosc0*e-r.y*this.sinc0*t)}else n=this.phic0,i=0;return r.x=i,r.y=n,MC.inverse.apply(this,[r]),r.x=It(r.x+this.long0),r}var aU=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const lU={init:rU,forward:oU,inverse:sU,names:aU};function uU(r,t,e){return t*=e,Math.tan(.5*(wt+r))*Math.pow((1-t)/(1+t),.5*e)}function cU(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ot&&(this.k0=.5*(1+Zh(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ot&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ot&&(this.k0=.5*this.cons*Co(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Vr(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Co(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-wt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function hU(r){var t=r.x,e=r.y,i=Math.sin(e),n=Math.cos(e),o,s,a,l,u,c,h=It(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Ot&&Math.abs(e+this.lat0)<=Ot?(r.x=NaN,r.y=NaN,r):this.sphere?(o=2*this.k0/(1+this.sinlat0*i+this.coslat0*n*Math.cos(h)),r.x=this.a*o*n*Math.sin(h)+this.x0,r.y=this.a*o*(this.coslat0*i-this.sinlat0*n*Math.cos(h))+this.y0,r):(s=2*Math.atan(this.ssfn_(e,i,this.e))-wt,l=Math.cos(s),a=Math.sin(s),Math.abs(this.coslat0)<=Ot?(u=Vr(this.e,e*this.con,this.con*i),c=2*this.a*this.k0*u/this.cons,r.x=this.x0+c*Math.sin(t-this.long0),r.y=this.y0-this.con*c*Math.cos(t-this.long0),r):(Math.abs(this.sinlat0)<Ot?(o=2*this.a*this.k0/(1+l*Math.cos(h)),r.y=o*a):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),r.y=o*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),r.x=o*l*Math.sin(h)+this.x0,r))}function dU(r){r.x-=this.x0,r.y-=this.y0;var t,e,i,n,o,s=Math.sqrt(r.x*r.x+r.y*r.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,e=this.lat0,s<=Ot?(r.x=t,r.y=e,r):(e=Math.asin(Math.cos(a)*this.sinlat0+r.y*Math.sin(a)*this.coslat0/s),Math.abs(this.coslat0)<Ot?this.lat0>0?t=It(this.long0+Math.atan2(r.x,-1*r.y)):t=It(this.long0+Math.atan2(r.x,r.y)):t=It(this.long0+Math.atan2(r.x*Math.sin(a),s*this.coslat0*Math.cos(a)-r.y*this.sinlat0*Math.sin(a))),r.x=t,r.y=e,r)}else if(Math.abs(this.coslat0)<=Ot){if(s<=Ot)return e=this.lat0,t=this.long0,r.x=t,r.y=e,r;r.x*=this.con,r.y*=this.con,i=s*this.cons/(2*this.a*this.k0),e=this.con*Th(this.e,i),t=this.con*It(this.con*this.long0+Math.atan2(r.x,-1*r.y))}else n=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=Ot?o=this.X0:(o=Math.asin(Math.cos(n)*this.sinX0+r.y*Math.sin(n)*this.cosX0/s),t=It(this.long0+Math.atan2(r.x*Math.sin(n),s*this.cosX0*Math.cos(n)-r.y*this.sinX0*Math.sin(n)))),e=-1*Th(this.e,Math.tan(.5*(wt+o)));return r.x=t,r.y=e,r}var pU=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const fU={init:cU,forward:hU,inverse:dU,names:pU,ssfn_:uU};function gU(){var r=this.lat0;this.lambda0=this.long0;var t=Math.sin(r),e=this.a,i=this.rf,n=1/i,o=2*n-Math.pow(n,2),s=this.e=Math.sqrt(o);this.R=this.k0*e*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(r),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+r/2)),u=Math.log((1+s*t)/(1-s*t));this.K=a-this.alpha*l+this.alpha*s/2*u}function mU(r){var t=Math.log(Math.tan(Math.PI/4-r.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(r.y))/(1-this.e*Math.sin(r.y))),i=-this.alpha*(t+e)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(r.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(o));return r.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,r.x=this.R*s+this.x0,r}function vU(r){for(var t=r.x-this.x0,e=r.y-this.y0,i=t/this.R,n=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+s/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return r.x=a,r.y=u,r}var yU=["somerc"];const _U={init:gU,forward:mU,inverse:vU,names:yU};var Xl=1e-7;function CU(r){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof r.PROJECTION=="object"?Object.keys(r.PROJECTION)[0]:r.PROJECTION;return"no_uoff"in r||"no_off"in r||t.indexOf(e)!==-1}function wU(){var r,t,e,i,n,o,s,a,l,u,c=0,h,d=0,p=0,f=0,m=0,g=0,y=0;this.no_off=CU(this),this.no_rot="no_rot"in this;var C=!1;"alpha"in this&&(C=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),C&&(y=this.alpha),w&&(c=this.rectified_grid_angle*Ui),C||w)d=this.longc;else if(p=this.long1,m=this.lat1,f=this.long2,g=this.lat2,Math.abs(m-g)<=Xl||(r=Math.abs(m))<=Xl||Math.abs(r-wt)<=Xl||Math.abs(Math.abs(this.lat0)-wt)<=Xl||Math.abs(Math.abs(g)-wt)<=Xl)throw new Error;var S=1-this.es;t=Math.sqrt(S),Math.abs(this.lat0)>Ot?(a=Math.sin(this.lat0),e=Math.cos(this.lat0),r=1-this.es*a*a,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/S),this.A=this.B*this.k0*t/r,i=this.B*t/(e*Math.sqrt(r)),n=i*i-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=i,this.E*=Math.pow(Vr(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=n=1),C||w?(C?(h=Math.asin(Math.sin(y)/i),w||(c=y)):(h=c,y=Math.asin(i*Math.sin(h))),this.lam0=d-Math.asin(.5*(n-1/n)*Math.tan(h))/this.B):(o=Math.pow(Vr(this.e,m,Math.sin(m)),this.B),s=Math.pow(Vr(this.e,g,Math.sin(g)),this.B),n=this.E/o,l=(s-o)/(s+o),u=this.E*this.E,u=(u-s*o)/(u+s*o),r=p-f,r<-Math.pi?f-=bh:r>Math.pi&&(f+=bh),this.lam0=It(.5*(p+f)-Math.atan(u*Math.tan(.5*this.B*(p-f))/l)/this.B),h=Math.atan(2*Math.sin(this.B*It(p-this.lam0))/(n-1/n)),c=y=Math.asin(i*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(ke-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(ke+n))}function SU(r){var t={},e,i,n,o,s,a,l,u;if(r.x=r.x-this.lam0,Math.abs(Math.abs(r.y)-wt)>Ot){if(s=this.E/Math.pow(Vr(this.e,r.y,Math.sin(r.y)),this.B),a=1/s,e=.5*(s-a),i=.5*(s+a),o=Math.sin(this.B*r.x),n=(e*this.singam-o*this.cosgam)/i,Math.abs(Math.abs(n)-1)<Ot)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*r.x),Math.abs(a)<Xl?l=this.A*r.x:l=this.ArB*Math.atan2(e*this.cosgam+o*this.singam,a)}else u=r.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*r.y;return this.no_rot?(t.x=l,t.y=u):(l-=this.u_0,t.x=u*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function EU(r){var t,e,i,n,o,s,a,l={};if(r.x=(r.x-this.x0)*(1/this.a),r.y=(r.y-this.y0)*(1/this.a),this.no_rot?(e=r.y,t=r.x):(e=r.x*this.cosrot-r.y*this.sinrot,t=r.y*this.cosrot+r.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*e),n=.5*(i-1/i),o=.5*(i+1/i),s=Math.sin(this.BrA*t),a=(s*this.cosgam+n*this.singam)/o,Math.abs(Math.abs(a)-1)<Ot)l.x=0,l.y=a<0?-wt:wt;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=Th(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(n*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var xU=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const RU={init:wU,forward:SU,inverse:EU,names:xU};function bU(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ot)){var r=this.b/this.a;this.e=Math.sqrt(1-r*r);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),i=Co(this.e,t,e),n=Vr(this.e,this.lat1,t),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Co(this.e,o,s),l=Vr(this.e,this.lat2,o),u=Vr(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ot?this.ns=Math.log(i/a)/Math.log(n/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function MU(r){var t=r.x,e=r.y;Math.abs(2*Math.abs(e)-Math.PI)<=Ot&&(e=Zh(e)*(wt-2*Ot));var i=Math.abs(Math.abs(e)-wt),n,o;if(i>Ot)n=Vr(this.e,e,Math.sin(e)),o=this.a*this.f0*Math.pow(n,this.ns);else{if(i=e*this.ns,i<=0)return null;o=0}var s=this.ns*It(t-this.long0);return r.x=this.k0*(o*Math.sin(s))+this.x0,r.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,r}function TU(r){var t,e,i,n,o,s=(r.x-this.x0)/this.k0,a=this.rh-(r.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+a*a),e=1):(t=-Math.sqrt(s*s+a*a),e=-1);var l=0;if(t!==0&&(l=Math.atan2(e*s,e*a)),t!==0||this.ns>0){if(e=1/this.ns,i=Math.pow(t/(this.a*this.f0),e),n=Th(this.e,i),n===-9999)return null}else n=-wt;return o=It(l/this.ns+this.long0),r.x=o,r.y=n,r}var PU=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const OU={init:bU,forward:MU,inverse:TU,names:PU};function AU(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function DU(r){var t,e,i,n,o,s,a,l=r.x,u=r.y,c=It(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),i=-c*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(i)),o=Math.asin(Math.cos(e)*Math.sin(i)/Math.cos(n)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),r.y=a*Math.cos(s)/1,r.x=a*Math.sin(s)/1,this.czech||(r.y*=-1,r.x*=-1),r}function LU(r){var t,e,i,n,o,s,a,l,u=r.x;r.x=r.y,r.y=u,this.czech||(r.y*=-1,r.x*=-1),s=Math.sqrt(r.x*r.x+r.y*r.y),o=Math.atan2(r.y,r.x),n=o/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),e=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(t)),r.x=this.long0-e/this.alfa,a=t,l=0;var c=0;do r.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-r.y)<1e-10&&(l=1),a=r.y,c+=1;while(l===0&&c<15);return c>=15?null:r}var IU=["Krovak","krovak"];const FU={init:AU,forward:DU,inverse:LU,names:IU};function _n(r,t,e,i,n){return r*n-t*Math.sin(2*n)+e*Math.sin(4*n)-i*Math.sin(6*n)}function Jh(r){return 1-.25*r*(1+r/16*(3+1.25*r))}function Qh(r){return .375*r*(1+.25*r*(1+.46875*r))}function td(r){return .05859375*r*r*(1+.75*r)}function ed(r){return r*r*r*(35/3072)}function Mu(r,t,e){var i=t*e;return r/Math.sqrt(1-i*i)}function Ku(r){return Math.abs(r)<wt?r:r-Zh(r)*Math.PI}function wf(r,t,e,i,n){var o,s;o=r/t;for(var a=0;a<15;a++)if(s=(r-(t*o-e*Math.sin(2*o)+i*Math.sin(4*o)-n*Math.sin(6*o)))/(t-2*e*Math.cos(2*o)+4*i*Math.cos(4*o)-6*n*Math.cos(6*o)),o+=s,Math.abs(s)<=1e-10)return o;return NaN}function NU(){this.sphere||(this.e0=Jh(this.es),this.e1=Qh(this.es),this.e2=td(this.es),this.e3=ed(this.es),this.ml0=this.a*_n(this.e0,this.e1,this.e2,this.e3,this.lat0))}function GU(r){var t,e,i=r.x,n=r.y;if(i=It(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(n)*Math.sin(i)),e=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var o=Math.sin(n),s=Math.cos(n),a=Mu(this.a,this.e,o),l=Math.tan(n)*Math.tan(n),u=i*Math.cos(n),c=u*u,h=this.es*s*s/(1-this.es),d=this.a*_n(this.e0,this.e1,this.e2,this.e3,n);t=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),e=d-this.ml0+a*o/s*c*(.5+(5-l+6*h)*c/24)}return r.x=t+this.x0,r.y=e+this.y0,r}function HU(r){r.x-=this.x0,r.y-=this.y0;var t=r.x/this.a,e=r.y/this.a,i,n;if(this.sphere){var o=e+this.lat0;i=Math.asin(Math.sin(o)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(o))}else{var s=this.ml0/this.a+e,a=wf(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-wt)<=Ot)return r.x=this.long0,r.y=wt,e<0&&(r.y*=-1),r;var l=Mu(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),h=t*this.a/l,d=h*h;i=a-l*Math.tan(a)/u*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(a)}return r.x=It(n+this.long0),r.y=Ku(i),r}var WU=["Cassini","Cassini_Soldner","cass"];const VU={init:NU,forward:GU,inverse:HU,names:WU};function Us(r,t){var e;return r>1e-7?(e=r*t,(1-r*r)*(t/(1-e*e)-.5/r*Math.log((1-e)/(1+e)))):2*t}var kU=1,BU=2,UU=3,zU=4;function jU(){var r=Math.abs(this.lat0);if(Math.abs(r-wt)<Ot?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(r)<Ot?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Us(this.e,1),this.mmf=.5/(1-this.es),this.apa=tz(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Us(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function $U(r){var t,e,i,n,o,s,a,l,u,c,h=r.x,d=r.y;if(h=It(h-this.long0),this.sphere){if(o=Math.sin(d),c=Math.cos(d),i=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+c*i:1+this.sinph0*o+this.cosph0*c*i,e<=Ot)return null;e=Math.sqrt(2/e),t=e*c*Math.sin(h),e*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(d+this.lat0)<Ot)return null;e=ke-d*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(h),e*=i}}else{switch(a=0,l=0,u=0,i=Math.cos(h),n=Math.sin(h),o=Math.sin(d),s=Us(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:u=1+l*i;break;case this.N_POLE:u=wt+d,s=this.qp-s;break;case this.S_POLE:u=d-wt,s=this.qp+s;break}if(Math.abs(u)<Ot)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?e=this.ymf*u*(this.cosb1*a-this.sinb1*l*i):e=(u=Math.sqrt(2/(1+l*i)))*a*this.ymf,t=this.xmf*u*l*n;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(u=Math.sqrt(s))*n,e=i*(this.mode===this.S_POLE?u:-u)):t=e=0;break}}return r.x=this.a*t+this.x0,r.y=this.a*e+this.y0,r}function YU(r){r.x-=this.x0,r.y-=this.y0;var t=r.x/this.a,e=r.y/this.a,i,n,o,s,a,l,u;if(this.sphere){var c=0,h,d=0;if(h=Math.sqrt(t*t+e*e),n=h*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(n),c=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(h)<=Ot?0:Math.asin(e*d/h),t*=d,e=c*h;break;case this.OBLIQ:n=Math.abs(h)<=Ot?this.lat0:Math.asin(c*this.sinph0+e*d*this.cosph0/h),t*=d*this.cosph0,e=(c-Math.sin(n)*this.sinph0)*h;break;case this.N_POLE:e=-e,n=wt-n;break;case this.S_POLE:n-=wt;break}i=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,l=Math.sqrt(t*t+e*e),l<Ot)return r.x=this.long0,r.y=this.lat0,r;s=2*Math.asin(.5*l/this.rq),o=Math.cos(s),t*=s=Math.sin(s),this.mode===this.OBLIQ?(u=o*this.sinb1+e*s*this.cosb1/l,a=this.qp*u,e=l*this.cosb1*o-e*this.sinb1*s):(u=e*s/l,a=this.qp*u,e=l*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),a=t*t+e*e,!a)return r.x=this.long0,r.y=this.lat0,r;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}i=Math.atan2(t,e),n=ez(Math.asin(u),this.apa)}return r.x=It(this.long0+i),r.y=n,r}var KU=.3333333333333333,XU=.17222222222222222,qU=.10257936507936508,ZU=.06388888888888888,JU=.0664021164021164,QU=.016415012942191543;function tz(r){var t,e=[];return e[0]=r*KU,t=r*r,e[0]+=t*XU,e[1]=t*ZU,t*=r,e[0]+=t*qU,e[1]+=t*JU,e[2]=t*QU,e}function ez(r,t){var e=r+r;return r+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var iz=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const nz={init:jU,forward:$U,inverse:YU,names:iz,S_POLE:kU,N_POLE:BU,EQUIT:UU,OBLIQ:zU};function ta(r){return Math.abs(r)>1&&(r=r>1?1:-1),Math.asin(r)}function rz(){Math.abs(this.lat1+this.lat2)<Ot||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Co(this.e3,this.sin_po,this.cos_po),this.qs1=Us(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Co(this.e3,this.sin_po,this.cos_po),this.qs2=Us(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Us(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Ot?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function oz(r){var t=r.x,e=r.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var i=Us(this.e3,this.sin_phi,this.cos_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*It(t-this.long0),s=n*Math.sin(o)+this.x0,a=this.rh-n*Math.cos(o)+this.y0;return r.x=s,r.y=a,r}function sz(r){var t,e,i,n,o,s;return r.x-=this.x0,r.y=this.rh-r.y+this.y0,this.ns0>=0?(t=Math.sqrt(r.x*r.x+r.y*r.y),i=1):(t=-Math.sqrt(r.x*r.x+r.y*r.y),i=-1),n=0,t!==0&&(n=Math.atan2(i*r.x,i*r.y)),i=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(e=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,e)),o=It(n/this.ns0+this.long0),r.x=o,r.y=s,r}function az(r,t){var e,i,n,o,s,a=ta(.5*t);if(r<Ot)return a;for(var l=r*r,u=1;u<=25;u++)if(e=Math.sin(a),i=Math.cos(a),n=r*e,o=1-n*n,s=.5*o*o/i*(t/(1-l)-e/o+.5/r*Math.log((1-n)/(1+n))),a=a+s,Math.abs(s)<=1e-7)return a;return null}var lz=["Albers_Conic_Equal_Area","Albers","aea"];const uz={init:rz,forward:oz,inverse:sz,names:lz,phi1z:az};function cz(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function hz(r){var t,e,i,n,o,s,a,l,u=r.x,c=r.y;return i=It(u-this.long0),t=Math.sin(c),e=Math.cos(c),n=Math.cos(i),s=this.sin_p14*t+this.cos_p14*e*n,o=1,s>0||Math.abs(s)<=Ot?(a=this.x0+this.a*o*e*Math.sin(i)/s,l=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*n)/s):(a=this.x0+this.infinity_dist*e*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*n)),r.x=a,r.y=l,r}function dz(r){var t,e,i,n,o,s;return r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,(t=Math.sqrt(r.x*r.x+r.y*r.y))?(n=Math.atan2(t,this.rc),e=Math.sin(n),i=Math.cos(n),s=ta(i*this.sin_p14+r.y*e*this.cos_p14/t),o=Math.atan2(r.x*e,t*this.cos_p14*i-r.y*this.sin_p14*e),o=It(this.long0+o)):(s=this.phic0,o=0),r.x=o,r.y=s,r}var pz=["gnom"];const fz={init:cz,forward:hz,inverse:dz,names:pz};function gz(r,t){var e=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*wt:wt;for(var i=Math.asin(.5*t),n,o,s,a,l=0;l<30;l++)if(o=Math.sin(i),s=Math.cos(i),a=r*o,n=Math.pow(1-a*a,2)/(2*s)*(t/(1-r*r)-o/(1-a*a)+.5/r*Math.log((1-a)/(1+a))),i+=n,Math.abs(n)<=1e-10)return i;return NaN}function mz(){this.sphere||(this.k0=Co(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function vz(r){var t=r.x,e=r.y,i,n,o=It(t-this.long0);if(this.sphere)i=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var s=Us(this.e,Math.sin(e));i=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return r.x=i,r.y=n,r}function yz(r){r.x-=this.x0,r.y-=this.y0;var t,e;return this.sphere?(t=It(this.long0+r.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(r.y/this.a*Math.cos(this.lat_ts))):(e=gz(this.e,2*r.y*this.k0/this.a),t=It(this.long0+r.x/(this.a*this.k0))),r.x=t,r.y=e,r}var _z=["cea"];const Cz={init:mz,forward:vz,inverse:yz,names:_z};function wz(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Sz(r){var t=r.x,e=r.y,i=It(t-this.long0),n=Ku(e-this.lat0);return r.x=this.x0+this.a*i*this.rc,r.y=this.y0+this.a*n,r}function Ez(r){var t=r.x,e=r.y;return r.x=It(this.long0+(t-this.x0)/(this.a*this.rc)),r.y=Ku(this.lat0+(e-this.y0)/this.a),r}var xz=["Equirectangular","Equidistant_Cylindrical","eqc"];const Rz={init:wz,forward:Sz,inverse:Ez,names:xz};var OE=20;function bz(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jh(this.es),this.e1=Qh(this.es),this.e2=td(this.es),this.e3=ed(this.es),this.ml0=this.a*_n(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Mz(r){var t=r.x,e=r.y,i,n,o,s=It(t-this.long0);if(o=s*Math.sin(e),this.sphere)Math.abs(e)<=Ot?(i=this.a*s,n=-1*this.a*this.lat0):(i=this.a*Math.sin(o)/Math.tan(e),n=this.a*(Ku(e-this.lat0)+(1-Math.cos(o))/Math.tan(e)));else if(Math.abs(e)<=Ot)i=this.a*s,n=-1*this.ml0;else{var a=Mu(this.a,this.e,Math.sin(e))/Math.tan(e);i=a*Math.sin(o),n=this.a*_n(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+a*(1-Math.cos(o))}return r.x=i+this.x0,r.y=n+this.y0,r}function Tz(r){var t,e,i,n,o,s,a,l,u;if(i=r.x-this.x0,n=r.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Ot)t=It(i/this.a+this.long0),e=0;else{s=this.lat0+n/this.a,a=i*i/this.a/this.a+s*s,l=s;var c;for(o=OE;o;--o)if(c=Math.tan(l),u=-1*(s*(l*c+1)-l-.5*(l*l+a)*c)/((l-s)/c-1),l+=u,Math.abs(u)<=Ot){e=l;break}t=It(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(e))}else if(Math.abs(n+this.ml0)<=Ot)e=0,t=It(this.long0+i/this.a);else{s=(this.ml0+n)/this.a,a=i*i/this.a/this.a+s*s,l=s;var h,d,p,f,m;for(o=OE;o;--o)if(m=this.e*Math.sin(l),h=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*_n(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),f=d/this.a,u=(s*(h*f+1)-f-.5*h*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*s*f)/(4*h)+(s-f)*(h*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=Ot){e=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=It(this.long0+Math.asin(i*h/this.a)/Math.sin(e))}return r.x=t,r.y=e,r}var Pz=["Polyconic","poly"];const Oz={init:bz,forward:Mz,inverse:Tz,names:Pz};function Az(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Dz(r){var t,e=r.x,i=r.y,n=i-this.lat0,o=e-this.long0,s=n/eh*1e-5,a=o,l=1,u=0;for(t=1;t<=10;t++)l=l*s,u=u+this.A[t]*l;var c=u,h=a,d=1,p=0,f,m,g=0,y=0;for(t=1;t<=6;t++)f=d*c-p*h,m=p*c+d*h,d=f,p=m,g=g+this.B_re[t]*d-this.B_im[t]*p,y=y+this.B_im[t]*d+this.B_re[t]*p;return r.x=y*this.a+this.x0,r.y=g*this.a+this.y0,r}function Lz(r){var t,e=r.x,i=r.y,n=e-this.x0,o=i-this.y0,s=o/this.a,a=n/this.a,l=1,u=0,c,h,d=0,p=0;for(t=1;t<=6;t++)c=l*s-u*a,h=u*s+l*a,l=c,u=h,d=d+this.C_re[t]*l-this.C_im[t]*u,p=p+this.C_im[t]*l+this.C_re[t]*u;for(var f=0;f<this.iterations;f++){var m=d,g=p,y,C,w=s,S=a;for(t=2;t<=6;t++)y=m*d-g*p,C=g*d+m*p,m=y,g=C,w=w+(t-1)*(this.B_re[t]*m-this.B_im[t]*g),S=S+(t-1)*(this.B_im[t]*m+this.B_re[t]*g);m=1,g=0;var E=this.B_re[1],M=this.B_im[1];for(t=2;t<=6;t++)y=m*d-g*p,C=g*d+m*p,m=y,g=C,E=E+t*(this.B_re[t]*m-this.B_im[t]*g),M=M+t*(this.B_im[t]*m+this.B_re[t]*g);var L=E*E+M*M;d=(w*E+S*M)/L,p=(S*E-w*M)/L}var x=d,T=p,N=1,K=0;for(t=1;t<=9;t++)N=N*x,K=K+this.D[t]*N;var Q=this.lat0+K*eh*1e5,z=this.long0+T;return r.x=z,r.y=Q,r}var Iz=["New_Zealand_Map_Grid","nzmg"];const Fz={init:Az,forward:Dz,inverse:Lz,names:Iz};function Nz(){}function Gz(r){var t=r.x,e=r.y,i=It(t-this.long0),n=this.x0+this.a*i,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return r.x=n,r.y=o,r}function Hz(r){r.x-=this.x0,r.y-=this.y0;var t=It(this.long0+r.x/this.a),e=2.5*(Math.atan(Math.exp(.8*r.y/this.a))-Math.PI/4);return r.x=t,r.y=e,r}var Wz=["Miller_Cylindrical","mill"];const Vz={init:Nz,forward:Gz,inverse:Hz,names:Wz};var kz=20;function Bz(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=MM(this.es)}function Uz(r){var t,e,i=r.x,n=r.y;if(i=It(i-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var o=this.n*Math.sin(n),s=kz;s;--s){var a=(this.m*n+Math.sin(n)-o)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<Ot)break}t=this.a*this.C_x*i*(this.m+Math.cos(n)),e=this.a*this.C_y*n}else{var l=Math.sin(n),u=Math.cos(n);e=this.a*Tg(n,l,u,this.en),t=this.a*i*u/Math.sqrt(1-this.es*l*l)}return r.x=t,r.y=e,r}function zz(r){var t,e,i,n;return r.x-=this.x0,i=r.x/this.a,r.y-=this.y0,t=r.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=ta((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=ta(Math.sin(t)/this.n)),i=It(i+this.long0),t=Ku(t)):(t=TM(r.y/this.a,this.es,this.en),n=Math.abs(t),n<wt?(n=Math.sin(t),e=this.long0+r.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),i=It(e)):n-Ot<wt&&(i=this.long0)),r.x=i,r.y=t,r}var jz=["Sinusoidal","sinu"];const $z={init:Bz,forward:Uz,inverse:zz,names:jz};function Yz(){}function Kz(r){for(var t=r.x,e=r.y,i=It(t-this.long0),n=e,o=Math.PI*Math.sin(e);;){var s=-(n+Math.sin(n)-o)/(1+Math.cos(n));if(n+=s,Math.abs(s)<Ot)break}n/=2,Math.PI/2-Math.abs(e)<Ot&&(i=0);var a=.900316316158*this.a*i*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return r.x=a,r.y=l,r}function Xz(r){var t,e;r.x-=this.x0,r.y-=this.y0,e=r.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var i=It(this.long0+r.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var n=Math.asin(e);return r.x=i,r.y=n,r}var qz=["Mollweide","moll"];const Zz={init:Yz,forward:Kz,inverse:Xz,names:qz};function Jz(){Math.abs(this.lat1+this.lat2)<Ot||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jh(this.es),this.e1=Qh(this.es),this.e2=td(this.es),this.e3=ed(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Co(this.e,this.sinphi,this.cosphi),this.ml1=_n(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ot?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Co(this.e,this.sinphi,this.cosphi),this.ml2=_n(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=_n(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Qz(r){var t=r.x,e=r.y,i;if(this.sphere)i=this.a*(this.g-e);else{var n=_n(this.e0,this.e1,this.e2,this.e3,e);i=this.a*(this.g-n)}var o=this.ns*It(t-this.long0),s=this.x0+i*Math.sin(o),a=this.y0+this.rh-i*Math.cos(o);return r.x=s,r.y=a,r}function t5(r){r.x-=this.x0,r.y=this.rh-r.y+this.y0;var t,e,i,n;this.ns>=0?(e=Math.sqrt(r.x*r.x+r.y*r.y),t=1):(e=-Math.sqrt(r.x*r.x+r.y*r.y),t=-1);var o=0;if(e!==0&&(o=Math.atan2(t*r.x,t*r.y)),this.sphere)return n=It(this.long0+o/this.ns),i=Ku(this.g-e/this.a),r.x=n,r.y=i,r;var s=this.g-e/this.a;return i=wf(s,this.e0,this.e1,this.e2,this.e3),n=It(this.long0+o/this.ns),r.x=n,r.y=i,r}var e5=["Equidistant_Conic","eqdc"];const i5={init:Jz,forward:Qz,inverse:t5,names:e5};function n5(){this.R=this.a}function r5(r){var t=r.x,e=r.y,i=It(t-this.long0),n,o;Math.abs(e)<=Ot&&(n=this.x0+this.R*i,o=this.y0);var s=ta(2*Math.abs(e/Math.PI));(Math.abs(i)<=Ot||Math.abs(Math.abs(e)-wt)<=Ot)&&(n=this.x0,e>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*s):o=this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/i-i/Math.PI),l=a*a,u=Math.sin(s),c=Math.cos(s),h=c/(u+c-1),d=h*h,p=h*(2/u-1),f=p*p,m=Math.PI*this.R*(a*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(d-f)))/(f+l);i<0&&(m=-m),n=this.x0+m;var g=l+h;return m=Math.PI*this.R*(p*g-a*Math.sqrt((f+l)*(l+1)-g*g))/(f+l),e>=0?o=this.y0+m:o=this.y0-m,r.x=n,r.y=o,r}function o5(r){var t,e,i,n,o,s,a,l,u,c,h,d,p;return r.x-=this.x0,r.y-=this.y0,h=Math.PI*this.R,i=r.x/h,n=r.y/h,o=i*i+n*n,s=-Math.abs(n)*(1+o),a=s-2*n*n+i*i,l=-2*s+1+2*n*n+o*o,p=n*n/l+(2*a*a*a/l/l/l-9*s*a/l/l)/27,u=(s-a*a/3/l)/l,c=2*Math.sqrt(-u/3),h=3*p/u/c,Math.abs(h)>1&&(h>=0?h=1:h=-1),d=Math.acos(h)/3,r.y>=0?e=(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:e=-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(i)<Ot?t=this.long0:t=It(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(i*i-n*n)+o*o))/2/i),r.x=t,r.y=e,r}var s5=["Van_der_Grinten_I","VanDerGrinten","vandg"];const a5={init:n5,forward:r5,inverse:o5,names:s5};function l5(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function u5(r){var t=r.x,e=r.y,i=Math.sin(r.y),n=Math.cos(r.y),o=It(t-this.long0),s,a,l,u,c,h,d,p,f,m,g,y,C,w,S,E,M,L,x,T,N,K,Q;return this.sphere?Math.abs(this.sin_p12-1)<=Ot?(r.x=this.x0+this.a*(wt-e)*Math.sin(o),r.y=this.y0-this.a*(wt-e)*Math.cos(o),r):Math.abs(this.sin_p12+1)<=Ot?(r.x=this.x0+this.a*(wt+e)*Math.sin(o),r.y=this.y0+this.a*(wt+e)*Math.cos(o),r):(L=this.sin_p12*i+this.cos_p12*n*Math.cos(o),E=Math.acos(L),M=E?E/Math.sin(E):1,r.x=this.x0+this.a*M*n*Math.sin(o),r.y=this.y0+this.a*M*(this.cos_p12*i-this.sin_p12*n*Math.cos(o)),r):(s=Jh(this.es),a=Qh(this.es),l=td(this.es),u=ed(this.es),Math.abs(this.sin_p12-1)<=Ot?(c=this.a*_n(s,a,l,u,wt),h=this.a*_n(s,a,l,u,e),r.x=this.x0+(c-h)*Math.sin(o),r.y=this.y0-(c-h)*Math.cos(o),r):Math.abs(this.sin_p12+1)<=Ot?(c=this.a*_n(s,a,l,u,wt),h=this.a*_n(s,a,l,u,e),r.x=this.x0+(c+h)*Math.sin(o),r.y=this.y0+(c+h)*Math.cos(o),r):(d=i/n,p=Mu(this.a,this.e,this.sin_p12),f=Mu(this.a,this.e,i),m=Math.atan((1-this.es)*d+this.es*p*this.sin_p12/(f*n)),g=Math.atan2(Math.sin(o),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(o)),g===0?x=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(g)-Math.PI)<=Ot?x=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):x=Math.asin(Math.sin(o)*Math.cos(m)/Math.sin(g)),y=this.e*this.sin_p12/Math.sqrt(1-this.es),C=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es),w=y*C,S=C*C,T=x*x,N=T*x,K=N*x,Q=K*x,E=p*x*(1-T*S*(1-S)/6+N/8*w*(1-2*S)+K/120*(S*(4-7*S)-3*y*y*(1-7*S))-Q/48*w),r.x=this.x0+E*Math.sin(g),r.y=this.y0+E*Math.cos(g),r))}function c5(r){r.x-=this.x0,r.y-=this.y0;var t,e,i,n,o,s,a,l,u,c,h,d,p,f,m,g,y,C,w,S,E,M,L,x;return this.sphere?(t=Math.sqrt(r.x*r.x+r.y*r.y),t>2*wt*this.a?void 0:(e=t/this.a,i=Math.sin(e),n=Math.cos(e),o=this.long0,Math.abs(t)<=Ot?s=this.lat0:(s=ta(n*this.sin_p12+r.y*i*this.cos_p12/t),a=Math.abs(this.lat0)-wt,Math.abs(a)<=Ot?this.lat0>=0?o=It(this.long0+Math.atan2(r.x,-r.y)):o=It(this.long0-Math.atan2(-r.x,r.y)):o=It(this.long0+Math.atan2(r.x*i,t*this.cos_p12*n-r.y*this.sin_p12*i))),r.x=o,r.y=s,r)):(l=Jh(this.es),u=Qh(this.es),c=td(this.es),h=ed(this.es),Math.abs(this.sin_p12-1)<=Ot?(d=this.a*_n(l,u,c,h,wt),t=Math.sqrt(r.x*r.x+r.y*r.y),p=d-t,s=wf(p/this.a,l,u,c,h),o=It(this.long0+Math.atan2(r.x,-1*r.y)),r.x=o,r.y=s,r):Math.abs(this.sin_p12+1)<=Ot?(d=this.a*_n(l,u,c,h,wt),t=Math.sqrt(r.x*r.x+r.y*r.y),p=t-d,s=wf(p/this.a,l,u,c,h),o=It(this.long0+Math.atan2(r.x,r.y)),r.x=o,r.y=s,r):(t=Math.sqrt(r.x*r.x+r.y*r.y),g=Math.atan2(r.x,r.y),f=Mu(this.a,this.e,this.sin_p12),y=Math.cos(g),C=this.e*this.cos_p12*y,w=-C*C/(1-this.es),S=3*this.es*(1-w)*this.sin_p12*this.cos_p12*y/(1-this.es),E=t/f,M=E-w*(1+w)*Math.pow(E,3)/6-S*(1+3*w)*Math.pow(E,4)/24,L=1-w*M*M/2-E*M*M*M/6,m=Math.asin(this.sin_p12*Math.cos(M)+this.cos_p12*Math.sin(M)*y),o=It(this.long0+Math.asin(Math.sin(g)*Math.sin(M)/Math.cos(m))),x=Math.sin(m),s=Math.atan2((x-this.es*L*this.sin_p12)*Math.tan(m),x*(1-this.es)),r.x=o,r.y=s,r))}var h5=["Azimuthal_Equidistant","aeqd"];const d5={init:l5,forward:u5,inverse:c5,names:h5};function p5(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function f5(r){var t,e,i,n,o,s,a,l,u=r.x,c=r.y;return i=It(u-this.long0),t=Math.sin(c),e=Math.cos(c),n=Math.cos(i),s=this.sin_p14*t+this.cos_p14*e*n,o=1,(s>0||Math.abs(s)<=Ot)&&(a=this.a*o*e*Math.sin(i),l=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*n)),r.x=a,r.y=l,r}function g5(r){var t,e,i,n,o,s,a;return r.x-=this.x0,r.y-=this.y0,t=Math.sqrt(r.x*r.x+r.y*r.y),e=ta(t/this.a),i=Math.sin(e),n=Math.cos(e),s=this.long0,Math.abs(t)<=Ot?(a=this.lat0,r.x=s,r.y=a,r):(a=ta(n*this.sin_p14+r.y*i*this.cos_p14/t),o=Math.abs(this.lat0)-wt,Math.abs(o)<=Ot?(this.lat0>=0?s=It(this.long0+Math.atan2(r.x,-r.y)):s=It(this.long0-Math.atan2(-r.x,r.y)),r.x=s,r.y=a,r):(s=It(this.long0+Math.atan2(r.x*i,t*this.cos_p14*n-r.y*this.sin_p14*i)),r.x=s,r.y=a,r))}var m5=["ortho"];const v5={init:p5,forward:f5,inverse:g5,names:m5};var ai={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Be={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function y5(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=wt-ke/2?this.face=ai.TOP:this.lat0<=-(wt-ke/2)?this.face=ai.BOTTOM:Math.abs(this.long0)<=ke?this.face=ai.FRONT:Math.abs(this.long0)<=wt+ke?this.face=this.long0>0?ai.RIGHT:ai.LEFT:this.face=ai.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function _5(r){var t={x:0,y:0},e,i,n,o,s,a,l={value:0};if(r.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(r.y)):e=r.y,i=r.x,this.face===ai.TOP)o=wt-e,i>=ke&&i<=wt+ke?(l.value=Be.AREA_0,n=i-wt):i>wt+ke||i<=-(wt+ke)?(l.value=Be.AREA_1,n=i>0?i-mi:i+mi):i>-(wt+ke)&&i<=-ke?(l.value=Be.AREA_2,n=i+wt):(l.value=Be.AREA_3,n=i);else if(this.face===ai.BOTTOM)o=wt+e,i>=ke&&i<=wt+ke?(l.value=Be.AREA_0,n=-i+wt):i<ke&&i>=-ke?(l.value=Be.AREA_1,n=-i):i<-ke&&i>=-(wt+ke)?(l.value=Be.AREA_2,n=-i-wt):(l.value=Be.AREA_3,n=i>0?-i+mi:-i-mi);else{var u,c,h,d,p,f,m;this.face===ai.RIGHT?i=fu(i,+wt):this.face===ai.BACK?i=fu(i,+mi):this.face===ai.LEFT&&(i=fu(i,-wt)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(i),m=Math.cos(i),u=p*m,c=p*f,h=d,this.face===ai.FRONT?(o=Math.acos(u),n=ip(o,h,c,l)):this.face===ai.RIGHT?(o=Math.acos(c),n=ip(o,h,-u,l)):this.face===ai.BACK?(o=Math.acos(-u),n=ip(o,h,-c,l)):this.face===ai.LEFT?(o=Math.acos(-c),n=ip(o,h,u,l)):(o=n=0,l.value=Be.AREA_0)}return a=Math.atan(12/mi*(n+Math.acos(Math.sin(n)*Math.cos(ke))-wt)),s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===Be.AREA_1?a+=wt:l.value===Be.AREA_2?a+=mi:l.value===Be.AREA_3&&(a+=1.5*mi),t.x=s*Math.cos(a),t.y=s*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,r.x=t.x,r.y=t.y,r}function C5(r){var t={lam:0,phi:0},e,i,n,o,s,a,l,u,c,h={value:0};if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,i=Math.atan(Math.sqrt(r.x*r.x+r.y*r.y)),e=Math.atan2(r.y,r.x),r.x>=0&&r.x>=Math.abs(r.y)?h.value=Be.AREA_0:r.y>=0&&r.y>=Math.abs(r.x)?(h.value=Be.AREA_1,e-=wt):r.x<0&&-r.x>=Math.abs(r.y)?(h.value=Be.AREA_2,e=e<0?e+mi:e-mi):(h.value=Be.AREA_3,e+=wt),c=mi/12*Math.tan(e),s=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(s),n=Math.cos(e),o=Math.tan(i),l=1-n*n*o*o*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===ai.TOP)u=Math.acos(l),t.phi=wt-u,h.value===Be.AREA_0?t.lam=a+wt:h.value===Be.AREA_1?t.lam=a<0?a+mi:a-mi:h.value===Be.AREA_2?t.lam=a-wt:t.lam=a;else if(this.face===ai.BOTTOM)u=Math.acos(l),t.phi=u-wt,h.value===Be.AREA_0?t.lam=-a+wt:h.value===Be.AREA_1?t.lam=-a:h.value===Be.AREA_2?t.lam=-a-wt:t.lam=a<0?-a-mi:-a+mi;else{var d,p,f;d=l,c=d*d,c>=1?f=0:f=Math.sqrt(1-c)*Math.sin(a),c+=f*f,c>=1?p=0:p=Math.sqrt(1-c),h.value===Be.AREA_1?(c=p,p=-f,f=c):h.value===Be.AREA_2?(p=-p,f=-f):h.value===Be.AREA_3&&(c=p,p=f,f=-c),this.face===ai.RIGHT?(c=d,d=-p,p=c):this.face===ai.BACK?(d=-d,p=-p):this.face===ai.LEFT&&(c=d,d=p,p=-c),t.phi=Math.acos(-f)-wt,t.lam=Math.atan2(p,d),this.face===ai.RIGHT?t.lam=fu(t.lam,-wt):this.face===ai.BACK?t.lam=fu(t.lam,-mi):this.face===ai.LEFT&&(t.lam=fu(t.lam,+wt))}if(this.es!==0){var m,g,y;m=t.phi<0?1:0,g=Math.tan(t.phi),y=this.b/Math.sqrt(g*g+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y)),m&&(t.phi=-t.phi)}return t.lam+=this.long0,r.x=t.lam,r.y=t.phi,r}function ip(r,t,e,i){var n;return r<Ot?(i.value=Be.AREA_0,n=0):(n=Math.atan2(t,e),Math.abs(n)<=ke?i.value=Be.AREA_0:n>ke&&n<=wt+ke?(i.value=Be.AREA_1,n-=wt):n>wt+ke||n<=-(wt+ke)?(i.value=Be.AREA_2,n=n>=0?n-mi:n+mi):(i.value=Be.AREA_3,n+=wt)),n}function fu(r,t){var e=r+t;return e<-mi?e+=bh:e>+mi&&(e-=bh),e}var w5=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const S5={init:y5,forward:_5,inverse:C5,names:w5};var Wy=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],zc=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],AM=.8487,DM=1.3523,LM=co/5,E5=1/LM,nu=18,Sf=function(r,t){return r[0]+t*(r[1]+t*(r[2]+t*r[3]))},x5=function(r,t){return r[1]+t*(2*r[2]+t*3*r[3])};function R5(r,t,e,i){for(var n=t;i;--i){var o=r(n);if(n-=o,Math.abs(o)<e)break}return n}function b5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function M5(r){var t=It(r.x-this.long0),e=Math.abs(r.y),i=Math.floor(e*LM);i<0?i=0:i>=nu&&(i=nu-1),e=co*(e-E5*i);var n={x:Sf(Wy[i],e)*t,y:Sf(zc[i],e)};return r.y<0&&(n.y=-n.y),n.x=n.x*this.a*AM+this.x0,n.y=n.y*this.a*DM+this.y0,n}function T5(r){var t={x:(r.x-this.x0)/(this.a*AM),y:Math.abs(r.y-this.y0)/(this.a*DM)};if(t.y>=1)t.x/=Wy[nu][0],t.y=r.y<0?-wt:wt;else{var e=Math.floor(t.y*nu);for(e<0?e=0:e>=nu&&(e=nu-1);;)if(zc[e][0]>t.y)--e;else if(zc[e+1][0]<=t.y)++e;else break;var i=zc[e],n=5*(t.y-i[0])/(zc[e+1][0]-i[0]);n=R5(function(o){return(Sf(i,o)-t.y)/x5(i,o)},n,Ot,100),t.x/=Sf(Wy[e],n),t.y=(5*e+n)*Ui,r.y<0&&(t.y=-t.y)}return t.x=It(t.x+this.long0),t}var P5=["Robinson","robin"];const O5={init:b5,forward:M5,inverse:T5,names:P5};function A5(){this.name="geocent"}function D5(r){var t=yM(r,this.es,this.a);return t}function L5(r){var t=_M(r,this.es,this.a,this.b);return t}var I5=["Geocentric","geocentric","geocent","Geocent"];const F5={init:A5,forward:D5,inverse:L5,names:I5};var tn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},pc={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function N5(){if(Object.keys(pc).forEach(function(e){if(typeof this[e]>"u")this[e]=pc[e].def;else{if(pc[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);pc[e].num&&(this[e]=parseFloat(this[e]))}pc[e].degrees&&(this[e]=this[e]*Ui)}.bind(this)),Math.abs(Math.abs(this.lat0)-wt)<Ot?this.mode=this.lat0<0?tn.S_POLE:tn.N_POLE:Math.abs(this.lat0)<Ot?this.mode=tn.EQUIT:(this.mode=tn.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var r=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(r),this.sw=Math.sin(r)}function G5(r){r.x-=this.long0;var t=Math.sin(r.y),e=Math.cos(r.y),i=Math.cos(r.x),n,o;switch(this.mode){case tn.OBLIQ:o=this.sinph0*t+this.cosph0*e*i;break;case tn.EQUIT:o=e*i;break;case tn.S_POLE:o=-t;break;case tn.N_POLE:o=t;break}switch(o=this.pn1/(this.p-o),n=o*e*Math.sin(r.x),this.mode){case tn.OBLIQ:o*=this.cosph0*t-this.sinph0*e*i;break;case tn.EQUIT:o*=t;break;case tn.N_POLE:o*=-(e*i);break;case tn.S_POLE:o*=e*i;break}var s,a;return s=o*this.cg+n*this.sg,a=1/(s*this.sw*this.h1+this.cw),n=(n*this.cg-o*this.sg)*this.cw*a,o=s*a,r.x=n*this.a,r.y=o*this.a,r}function H5(r){r.x/=this.a,r.y/=this.a;var t={x:r.x,y:r.y},e,i,n;n=1/(this.pn1-r.y*this.sw),e=this.pn1*r.x*n,i=this.pn1*r.y*this.cw*n,r.x=e*this.cg+i*this.sg,r.y=i*this.cg-e*this.sg;var o=Ir(r.x,r.y);if(Math.abs(o)<Ot)t.x=0,t.y=r.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case tn.OBLIQ:t.y=Math.asin(s*this.sinph0+r.y*a*this.cosph0/o),r.y=(s-this.sinph0*Math.sin(t.y))*o,r.x*=a*this.cosph0;break;case tn.EQUIT:t.y=Math.asin(r.y*a/o),r.y=s*o,r.x*=a;break;case tn.N_POLE:t.y=Math.asin(s),r.y=-r.y;break;case tn.S_POLE:t.y=-Math.asin(s);break}t.x=Math.atan2(r.x,r.y)}return r.x=t.x+this.long0,r.y=t.y,r}var W5=["Tilted_Perspective","tpers"];const V5={init:N5,forward:G5,inverse:H5,names:W5};function k5(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var r=1-this.es,t=1/r;this.radius_p=Math.sqrt(r),this.radius_p2=r,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function B5(r){var t=r.x,e=r.y,i,n,o,s;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var a=this.radius_p/Ir(this.radius_p*Math.cos(e),Math.sin(e));if(n=a*Math.cos(t)*Math.cos(e),o=a*Math.sin(t)*Math.cos(e),s=a*Math.sin(e),(this.radius_g-n)*n-o*o-s*s*this.radius_p_inv2<0)return r.x=Number.NaN,r.y=Number.NaN,r;i=this.radius_g-n,this.flip_axis?(r.x=this.radius_g_1*Math.atan(o/Ir(s,i)),r.y=this.radius_g_1*Math.atan(s/i)):(r.x=this.radius_g_1*Math.atan(o/i),r.y=this.radius_g_1*Math.atan(s/Ir(o,i)))}else this.shape==="sphere"&&(i=Math.cos(e),n=Math.cos(t)*i,o=Math.sin(t)*i,s=Math.sin(e),i=this.radius_g-n,this.flip_axis?(r.x=this.radius_g_1*Math.atan(o/Ir(s,i)),r.y=this.radius_g_1*Math.atan(s/i)):(r.x=this.radius_g_1*Math.atan(o/i),r.y=this.radius_g_1*Math.atan(s/Ir(o,i))));return r.x=r.x*this.a,r.y=r.y*this.a,r}function U5(r){var t=-1,e=0,i=0,n,o,s,a;if(r.x=r.x/this.a,r.y=r.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(r.y/this.radius_g_1),e=Math.tan(r.x/this.radius_g_1)*Ir(1,i)):(e=Math.tan(r.x/this.radius_g_1),i=Math.tan(r.y/this.radius_g_1)*Ir(1,e));var l=i/this.radius_p;if(n=e*e+l*l+t*t,o=2*this.radius_g*t,s=o*o-4*n*this.C,s<0)return r.x=Number.NaN,r.y=Number.NaN,r;a=(-o-Math.sqrt(s))/(2*n),t=this.radius_g+a*t,e*=a,i*=a,r.x=Math.atan2(e,t),r.y=Math.atan(i*Math.cos(r.x)/t),r.y=Math.atan(this.radius_p_inv2*Math.tan(r.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(r.y/this.radius_g_1),e=Math.tan(r.x/this.radius_g_1)*Math.sqrt(1+i*i)):(e=Math.tan(r.x/this.radius_g_1),i=Math.tan(r.y/this.radius_g_1)*Math.sqrt(1+e*e)),n=e*e+i*i+t*t,o=2*this.radius_g*t,s=o*o-4*n*this.C,s<0)return r.x=Number.NaN,r.y=Number.NaN,r;a=(-o-Math.sqrt(s))/(2*n),t=this.radius_g+a*t,e*=a,i*=a,r.x=Math.atan2(e,t),r.y=Math.atan(i*Math.cos(r.x)/t)}return r.x=r.x+this.long0,r}var z5=["Geostationary Satellite View","Geostationary_Satellite","geos"];const j5={init:k5,forward:B5,inverse:U5,names:z5};function $5(r){r.Proj.projections.add(kp),r.Proj.projections.add(Bp),r.Proj.projections.add(JB),r.Proj.projections.add(lU),r.Proj.projections.add(fU),r.Proj.projections.add(_U),r.Proj.projections.add(RU),r.Proj.projections.add(OU),r.Proj.projections.add(FU),r.Proj.projections.add(VU),r.Proj.projections.add(nz),r.Proj.projections.add(uz),r.Proj.projections.add(fz),r.Proj.projections.add(Cz),r.Proj.projections.add(Rz),r.Proj.projections.add(Oz),r.Proj.projections.add(Fz),r.Proj.projections.add(Vz),r.Proj.projections.add($z),r.Proj.projections.add(Zz),r.Proj.projections.add(i5),r.Proj.projections.add(a5),r.Proj.projections.add(d5),r.Proj.projections.add(v5),r.Proj.projections.add(S5),r.Proj.projections.add(O5),r.Proj.projections.add(F5),r.Proj.projections.add(V5),r.Proj.projections.add(j5)}Ln.defaultDatum="WGS84";Ln.Proj=go;Ln.WGS84=new Ln.Proj("WGS84");Ln.Point=bu;Ln.toPoint=CM;Ln.defs=pn;Ln.nadgrid=tB;Ln.transform=Cf;Ln.mgrs=mB;Ln.version="__VERSION__";$5(Ln);const rn=En({map:50,pano:50,top:100,bottom:0}),Pg=ii(!1),Ph=ii(!1);ii(!1);const qo=ii(!1),zs=ii(!1),js=ii(!1),$s=ii(!1),jc=ii(!1);function AE(){qo.value=!qo.value,zs.value=!1,js.value=!1,$s.value=!1,qo.value?Dg():Xu()}function IM(){qo.value=!1,Xu()}function DE(){qo.value=!1,zs.value=!zs.value,js.value=!1,$s.value=!1,zs.value?Dg():Xu()}function LE(){qo.value=!1,zs.value=!1,js.value=!js.value,$s.value=!1,js.value?Dg():Xu()}function IE(){qo.value=!1,zs.value=!1,js.value=!1,$s.value=!$s.value,$s.value?Dg():Xu()}function FE(){$s.value=!1,Xu()}let ei,mn,Gi,Vy,np,Ma,sr,zo=null,$c=null,Up=null,Ef=null,FM=null,NM=null,Qm=null,rp=null,gu=null,Tu=null,kr=null,mo=null,NE=null,TC=0,PC=0,oi,xf=null,ky,By,Fr,GE,HE,Rf,WE,lo,Pu,bf,Mf,Uy,GM,Tf,Pf,tv,ev,mu;const HM=En({lat:0,lon:0});let ih=HM.lat,OC=HM.lon,AC=!1,WM=0,VM=0,kM=0,BM=0,UM,zM,Of=0,Af=0,DC="",iv;ii(null);let Gs=[],vu=[],Df=null;const jM=ii(null),$M=()=>Math.floor(2*Math.atan(ei.getFilmHeight()/2/ei.getFocalLength())*180/Math.PI),YM=(r,t)=>r>=20&&t==="zoomIn"?r-5:r<=75&&t==="zoomOut"?r+5:r,VE=r=>{const t=$M();ei.fov=YM(t,"zoomIn"),ei.updateProjectionMatrix()},kE=r=>{const t=$M();ei.fov=YM(t,"zoomOut"),ei.updateProjectionMatrix()},Le=En({id:"",yField:0,xField:0,hField:0,rollField:0,pitchField:0,trackField:0,noteField:""}),xs=En({yField:0,xField:0,hField:0,rollField:0,pitchField:0,trackField:0,noteField:""});function Mn(){let r={dx:Le.xField,dy:Le.yField,dh:Le.hField,dr:Le.rollField,dp:Le.pitchField,dt:Le.trackField};K5(r)}function Y5(r){const{id:t,drift_x:e,drift_y:i,height:n,roll:o,pitch:s,track:a}=r;Le.id=t,Le.yField=parseFloat(i),Le.xField=parseFloat(e),Le.hField=parseFloat(n),Le.rollField=parseFloat(o),Le.pitchField=parseFloat(s),Le.trackField=parseFloat(a),Le.noteField="",xs.yField=parseFloat(i),xs.xField=parseFloat(e),xs.hField=parseFloat(n),xs.rollField=parseFloat(o),xs.pitchField=parseFloat(s),xs.trackField=parseFloat(a),xs.noteField="",Mn()}function K5(r){const{dx:t,dy:e,dh:i,dr:n,dp:o,dt:s}=r;ei.position.set(e,i-mu,t),Ma.rotation.x=Math.PI*n/180,Ma.rotation.z=Math.PI*o/180,lo=s,zo.rotation.y=Math.PI*lo/180,xf.rotation.y=Math.PI*lo/180,ky.rotation.y=Math.PI*lo/180,By.rotation.y=Math.PI*lo/180}async function X5(){TC=document.querySelector("#wrapper-panorama").offsetWidth,PC=document.querySelector("#wrapper-panorama").offsetHeight,sr=document.querySelector("#wrapper-panorama"),zo=new bi;let r=new uk(new Or(450,50)),t=new hE({color:"orange",linewidth:1,scale:1,dashSize:5,gapSize:5});$c=new lk(r,t),$c.computeLineDistances(),$c.rotation.x=-Math.PI/2,$c.rotation.y=Math.PI;const e=new Or(.3,16),i=new Or(.1,16),n=new Ar({color:"green",side:zi,transparent:!0,opacity:.6}),o=new Fi(e,n);o.rotation.x=-Math.PI/2;const s=new Fi(i,n);s.position.set(0,.01,0),s.rotation.x=-Math.PI/2,Up=new bi,Up.add(o,s),Up.position.set(1e3,1e3,1e3);const a=new Or(.3,16),l=new Or(.1,16),u=new Ar({color:"orange",side:zi,transparent:!0,opacity:.6}),c=new Fi(a,u);c.rotation.x=-Math.PI/2;const h=new Fi(l,u);h.position.set(0,.01,0),h.rotation.x=-Math.PI/2,Ef=new bi,Ef.add(c,h),FM=new Ar({color:15793952,side:zi,transparent:!0,opacity:.4}),NM=new Ar({color:"yellow",side:zi,transparent:!0,opacity:.8});const d=new Or(1.5,32),p=new Ar({color:"#ffffff",side:zi,transparent:!0,opacity:.2});Qm=new Fi(d,p),Qm.rotation.x=-Math.PI/2,rp=new Fi(new Or(.8,32),p),rp.position.set(0,.01,0),rp.rotation.x=-Math.PI/2;let f=[];const m=new Qn,g=new hE({color:16777215,linewidth:4,scale:1,dashSize:.1,gapSize:.1});f.push(new Z(0,0,0),new Z(0,1e3,0)),m.setFromPoints(f);const y=new vf(m,g);y.computeLineDistances(),gu=new bi,gu.add(Qm,rp,y),gu.position.set(1e3,1e3,1e3);const C=new Eg(1e3,1e3,100,100),w=new Ar({color:16773135,transparent:!0,visible:!1,side:zi,opacity:.1});Tu=new Fi(C,w),Tu.rotation.x=-Math.PI/2,kr=new fk,mo=new Ye;const S=new Or(1.5,60),E=new Rg({color:"yellow",linewidth:2});NE=new vf(S,E),NE.rotation.x=-Math.PI/2,id(await KM())}async function KM(){const r=await ln.get(`/panoramas/?p=1&page_size=1&project=${jr()}&year=${pf()}`),{results:t}=r.data;return t[0].id}async function id(r,t=!0,e=!0){t&&(Pg.value=!0),e&&(Ph.value=!0),ei=new ur(50,TC/PC,1,1100),ei.target=new Z(0,0,0),mn=new sk,Vy=new bg(500,25,25),Vy.scale(-1,1,1),await Z5(r)}async function q5(r){const{id:t}=r,e=await Fb.get("/rest/api/correct",{params:{base_id:t}});Y5(e.data[0])}async function Z5(r){oi=(await ln.get(`/panoramas/${r}/?format=json`)).data,bs.value=oi;const e=new pk;e.load(oi.pot_hole_image?oi.pot_hole_image:oi.eqimage,function(i){J5(i),Iy.enabled=!0},function(i){id(KM())}),e.crossOrigin=""}function J5(r){np&&np.dispose(),np=new Ar({map:r,side:zi}),Ma=new Fi(Vy,np),mn.add(Ma,Tu,gu,$c),ky=new Ns,mn.add(ky),By=new Ns,mn.add(By),xf=new Ns,mn.add(xf),Up.position.set(5,5,-2),Fr=new Ns,mn.add(Fr),Ef.position.set(5,5,-2),GE=new bg(450,40,20),HE=new Ar({color:new ti(16776960),visible:!1,side:zi}),Rf=new Fi(GE,HE),mn.add(Rf),Gi==null&&(Gi=new uM,Gi.setPixelRatio(window.devicePixelRatio),Gi.setSize(TC,PC),sr.appendChild(Gi.domElement)),WE=0,oi.note,oi.base_name,Pu=oi.id,bf=oi.lat,Mf=oi.lon,Uy=oi.utm_code,GM=oi.utm_srid,Tf=oi.utm_x,Pf=oi.utm_y,oi.creator_name,oi.pitch?tv=oi.pitch:tv=0,oi.roll?ev=oi.roll:ev=0,Ma.rotation.y=Math.PI,Ma.rotation.z=Math.PI*tv/180,Ma.rotation.x=Math.PI*ev/180,oi.height_from_ground?mu=oi.height_from_ground:mu=2,Tu.position.y=-mu,lo=WE,Q5(Pu,Mf,bf,Tf,Pf,Uy),l4(),r4(!0),XM(),q5(oi),Pg.value=!1,Ph.value=!1}function Q5(r,t,e,i,n,o,s,a,l,u,c,h,d){Pu=r,UM=i,zM=n,Mf=t,bf=e,t4(o),e4(t,e),Og.setGeometry(new yn(Wh([t,e],"EPSG:4326","EPSG:3857")))}function t4(r){let t=r.slice(0,-1);const e=r.slice(-1);"NPQRSTUVZXY".includes(e)||(t+="+south"),DC="+proj=utm +zone=%z +datum=WGS84 +units=m +no_defs".replace("%z",t)}function e4(r,t){Ie.removeLayer(nv),Ie.getView().setCenter(Wh([r,t],"EPSG:4326","EPSG:3857")),Ie.addLayer(nv),nv.setZIndex(1e3)}function i4(r){let t="";const e=r.getGeometry().getCoordinates();return e[0]==0&&e[1]==0?t="/null.png":t="/pointer/viewpoint_dx.png",new Gr({image:new yg({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",rotateWithView:!0,rotation:r.get("rotation"),src:t})})}const n4=new hr({geometry:new yn([0,0]),name:"cursor",rotation:0}),Og=new hr({geometry:new yn([0,0]),name:"pano",rotation:0}),nv=new Zs({source:new Js({features:[Og],projection:"EPSG:4326"}),style:i4});let XM=function(){requestAnimationFrame(XM),qM()},qM=function(){ih=Math.max(-85,Math.min(85,ih));const r=Dy.degToRad(90-ih),t=Dy.degToRad(OC);ei.target.x=500*Math.sin(r)*Math.cos(t),ei.target.y=500*Math.cos(r),ei.target.z=500*Math.sin(r)*Math.sin(t),ei.lookAt(ei.target),Gi.render(mn,ei)};function Ag(){let r=document.getElementById("wrapper-panorama").offsetWidth,t=document.getElementById("wrapper-panorama").offsetHeight;Gi&&Gi.setSize(r,t),ei.aspect=r/t,ei.updateProjectionMatrix()}function BE(r){$N(),r.preventDefault(),AC=!0,WM=r.clientX,VM=r.clientY,kM=OC,BM=ih,qM()}function UE(r){if(AC===!0)OC=(WM-r.clientX)*.1+kM,ih=(r.clientY-VM)*.1+BM,a4();else if(Gi){const t=Gi.domElement.getBoundingClientRect();mo.x=(r.clientX-t.left)/Gi.domElement.clientWidth*2-1,mo.y=-((r.clientY-t.top)/Gi.domElement.clientHeight)*2+1,kr.setFromCamera(mo,ei);const e=kr.intersectObject(zo,!0);if(e[0])KE(!1),iv=e[0].object,iv.material=NM;else{KE(!0);try{iv.material=FM}catch{}}const i=kr.intersectObject(Tu);if(i[0]){const n=-Math.PI*lo/180,o=i[0].point.z*Math.cos(n)-i[0].point.x*Math.sin(n),s=i[0].point.x*Math.cos(n)+i[0].point.z*Math.sin(n);o4(o,s),gu.position.set(i[0].point.x,i[0].point.y+.1,i[0].point.z)}}}function zE(r){AC=!1}function jE(r){if(jc.value){const t=Gi.domElement.getBoundingClientRect();mo.x=(r.clientX-t.left)/Gi.domElement.clientWidth*2-1,mo.y=-((r.clientY-t.top)/Gi.domElement.clientHeight)*2+1,kr.setFromCamera(mo,ei);const e=kr.intersectObject(Rf),i=kr.intersectObject(Tu);let n=180*e[0].uv.y-90,o=-(360*e[0].uv.x-lo);o<0&&(o=360+o),Ie.removeLayer(zy),c4(o,n,i[0].point.x,i[0].point.y,i[0].point.z),Ie.addLayer(zy)}}function $E(r){const t=ei.fov+r.deltaY/50;ei.fov=Dy.clamp(t,5,75),ei.updateProjectionMatrix()}function YE(r){const t=Gi.domElement.getBoundingClientRect();mo.x=(r.clientX-t.left)/Gi.domElement.clientWidth*2-1,mo.y=-((r.clientY-t.top)/Gi.domElement.clientHeight)*2+1,kr.setFromCamera(mo,ei);const e=kr.intersectObjects([zo,xf],!0);e[0]&&e[0].object.ws_type=="other pano"&&(Pu=e[0].object.ws_pano_key,id(Pu,!1))}function r4(r){r?(sr.addEventListener("mousedown",BE,!1),sr.addEventListener("mousemove",UE,!1),sr.addEventListener("dblclick",jE,!1),sr.addEventListener("click",YE,!1),sr.addEventListener("wheel",$E,!1),document.addEventListener("mouseup",zE,!1)):(sr.removeEventListener("mousedown",BE,!1),sr.removeEventListener("mousemove",UE,!1),sr.removeEventListener("dblclick",jE,!1),sr.removeEventListener("click",YE,!1),sr.removeEventListener("wheel",$E,!1),document.removeEventListener("mouseup",zE,!1))}function KE(r){gu.traverse(function(t){t.visible=r})}function o4(r,t){Of=UM+r,Af=zM+t,n4.setGeometry(new yn(Ln(DC,"EPSG:3857",[Of,Af])))}function s4(r){Og.set("rotation",r*Math.PI/180)}function a4(){let r=new Ye;r.x=0,r.y=0,kr.setFromCamera(r,ei);let e=-(360*kr.intersectObject(Rf)[0].uv.x-lo);e<0&&(e=360+e),e=e-180,s4(e),Og.changed()}function l4(){const r=YN(`?project=${jr()}&year=${pf()}&dist=25&point=%%,%%`,Mf,bf);u4(r)}async function u4(r=""){const e=(await ln.get(`/panoramas/${r}`)).data,i=new Ar({color:15793952,side:zi,transparent:!0,opacity:.4});mn.remove(zo),zo=new bi;for(var n=0;n<e.count;n++){const o=e.results[n];if(o){let s=new Or(1,32),a=new Fi(s,i);a.rotation.x=-Math.PI/2,a.position.set(-(Pf-o.utm_y),-mu,-(Tf-o.utm_x)),a.ws_type="other pano",a.ws_pano_key=o.id,zo.add(a)}}zo.rotation.y=Math.PI*lo/180,mn.add(zo)}let c4=function(r,t,e,i,n,o){const s=Ln(DC,"EPSG:4326").forward([Of,Af]);if(Gs.length>1)for(var a=Gs.length;a>0;a--)Gs.pop();if(vu.length>1)for(var a=vu.length;a>0;a--)vu.pop();mn.remove(Df),Gs.push(JSON.parse(JSON.stringify({panorama:Pu,type:2,img_lon:r,img_lat:t,lon:s[0],lat:s[1],utm_x:Of,utm_y:Af,utm_code:Uy,utm_srid:GM}))),ZM()},ZM=function(r=!0){LC(),r&&h4()},h4=function(){let r=new Object,t=new Array;if(Gs.forEach(function(e){let i,n=new Object;i=Ef.clone(),i.position.set(e.utm_y-Pf,-mu,e.utm_x-Tf),i.children[0].ws_type="measurement",i.children[0].ws_imgObjKey=e.id,i.children[1].ws_type="measurement",i.children[1].ws_imgObjKey=e.id,Fr.add(i),mn.add(Fr),n.type="Point",n.coordinates=new Array(e.lon,e.lat),t.push(n)}),Fr.children.length===2){vu.push(Fr.children[0].position),vu.push(Fr.children[1].position);const e=new Qn().setFromPoints(vu);Df=new ak(e,new Rg({color:16777215,linewidth:10})),mn.add(Df)}r.type="FeatureCollection",r.features=t,d4(r)},zy=new Zs({title:"Measurement",visible:!0,source:new Js({format:new wh}),style:new Gr({stroke:new zn({color:"blue",width:1}),fill:new fr({color:"rgba(255, 255, 255, 0.3)"}),image:new yg({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"/pointer/sprites/point9.png"})})});const JM=function(){if(Gs.length>1)for(var r=Gs.length;r>0;r--)Gs.pop();ZM()};let d4=function(r,t){const e=new wh().readFeatures(r,{featureProjection:"EPSG:3857"});if(r.features.length==2){let n=[],o=[],s=[];n=r.features,n.forEach(function(u,c){for(let h=0;h<=1;h++)h==0?o.push(u.coordinates[0]):s.push(u.coordinates[1])});let a=KN(s[0],o[0],s[1],o[1]);jM.value=a.toFixed(2),new bootstrap.Toast(document.getElementById("distance"),{}).show()}const i=new Js({features:e,format:new wh});zy.setSource(i)};const LC=function(){for(let r=Fr.children.length-1;r>=0;r--)Fr.remove(Fr.children[r]);mn.remove(Fr),mn.remove(Df)};function p4(){rn.map=50,rn.pano=50,setTimeout(()=>qu(),jh)}function XE(){rn.map=100,rn.pano=0,setTimeout(()=>qu(),jh)}function f4(r){rn.map=r[0].size,rn.pano=r[1].size,qu(),Ag()}function g4(r){rn.top=r[0].size,rn.bottom=r[1].size,qu(),Ag()}function Dg(){rn.top=50,rn.bottom=50,setTimeout(()=>{qu(),Ag()},jh)}function Xu(){rn.top=100,rn.bottom=0,setTimeout(()=>{qu(),Ag()},jh)}let Ie,m4=17;const fc=ii("googleSatellite"),Ou=ii(null),bs=ii(null);let QM;const jy=En({panorama:!1});let Qr=new wb({source:new to({url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"})});const Lf=new wb({title:"panorama",zIndex:10,source:new D1({url:"https://geoserver.observer.xyz/geoserver/kumuh360/wms?service=WMS",params:{LAYERS:"kumuh360:v_panorama_360kumuh",TILED:!0},serverType:"geoserver",crossOrigin:"anonymous"})}),$y=new Ts({center:new yL([0,0]),zoom:m4});function v4(){Ie=new VI({target:"container-map",layers:[Qr,ff,FN],controls:new JR({attribution:!1,zoom:!1,rotate:!1}),view:$y}),Ie.on("pointerdrag",function(){jN()}),C4(),jy.panorama&&(Ie.addLayer(Lf),eT())}function qu(){Ie.updateSize()}function qE(){Ie.getView().animate({zoom:Ie.getView().getZoom()+1,duration:250})}function ZE(){Ie.getView().animate({zoom:Ie.getView().getZoom()-1,duration:250})}function tT(r){if(r.serverType==="arcgis")return new Zs({title:r.name,source:new Js({format:new Ib,url:(t,e,i)=>XN(t,i,r.url),strategy:eN})});if(r.serverType==="geoserver")return new Zs({title:r.name,source:new Js({url:Vb(r.url,r.name_layer),format:new wh})})}function y4(r,t){if(r.target.checked)Ie.addLayer(tT(t));else{let i=t.name;Ie.getLayers().forEach(n=>{n&&n.get("title")===i&&Ie.removeLayer(n)})}}function _4(r){r.target.checked?(Ie.addLayer(Lf),eT()):(Ie.removeLayer(Lf),R_(QM))}function C4(){let r=null;r!==null&&Ie.removeInteraction(r),r=new lN({condition:dI,style:function(e){return kb[e.getGeometry().getType()]}}),Ie.addInteraction(r),r.on("select",function(e){ff.getSource().clear(),rr.value==="clear"&&(!e.selected[0]||(Ou.value=e.selected[0].getProperties(),delete Ou.value.geometry,Gt.showMapInfo=!0))})}function eT(){QM=Ie.on("click",async function(r){const t=$y.getResolution(),e=$y.getProjection(),i=Lf.getSource().getFeatureInfoUrl(r.coordinate,t,e,{INFO_FORMAT:"application/json"});if(i){const n=await lh.get(i),{features:o,numberReturned:s}=n.data;if(s!==0&&o[0].geometry.type==="Point"){Ph.value=!0;const a=await ln.get(`/panoramas/?project=${jr()}&base_name=${o[0].properties.base_name}`),{results:l}=a.data;bs.value=l[0],p4(),id(l[0].id,!1,!1)}}})}const w4='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class S4 extends to{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[w4];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",n=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}}const E4=S4;const x4={key:0,class:"basemap"},R4={class:"card"},b4={class:"card-body px-2 py-1"},M4={class:"form-check d-flex align-items-center gap-1"},T4=["value","id"],P4=["for"],O4={__name:"BasemapPopup",setup(r){const t=[{label:"Open Street Map",value:"openStreetMap"},{label:"Google Satellite",value:"googleSatellite"},{label:"Google Road Map",value:"googleRoadMap"},{label:"Google Hybrid",value:"googleHybrid"},{label:"Google Terrain",value:"googleTerrain"},{label:"Esri World Imagery",value:"esriWorldImagery"},{label:"Esri World Street Map",value:"esriWorldStreetMap"},{label:"Esri World Topo Map",value:"esriWorldTopoMap"},{label:"Esri Gray Map",value:"esriGrayMap"}];return C_(fc,()=>{switch(fc.value){case"openStreetMap":Qr.setSource(new E4);break;case"googleSatellite":Qr.setSource(new to({url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"}));break;case"googleRoadMap":Qr.setSource(new to({url:"https://mt1.google.com/vt/lyrs=h&x={x}&y={y}&z={z}"}));break;case"googleHybrid":Qr.setSource(new to({url:"http://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}"}));break;case"googleTerrain":Qr.setSource(new to({url:"https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}"}));break;case"esriWorldImagery":Qr.setSource(new to({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}));break;case"esriWorldStreetMap":Qr.setSource(new to({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"}));break;case"esriWorldTopoMap":Qr.setSource(new to({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"}));break;case"esriGrayMap":Qr.setSource(new to({url:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"}));break}}),(e,i)=>(At(),Hr(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut"},{default:nn(()=>[U(Gt).showBasemap?(At(),Vt("div",x4,[A("div",R4,[A("div",b4,[(At(),Vt(mr,null,ig(t,n=>A("div",M4,[ge(A("input",{"onUpdate:modelValue":i[0]||(i[0]=o=>Kc(fc)?fc.value=o:null),value:n.value,class:"form-check-input fs-7",name:"flexRadioDefault",type:"radio",id:n.value},null,8,T4),[[Np,U(fc)]]),A("label",{class:"form-check-label fs-7",for:n.value},vi(n.label),9,P4)])),64))])])])):li("",!0)]),_:1}))}},A4=In(O4,[["__scopeId","data-v-0f2c26bb"]]),Lg=En({kumuh360:[]});async function D4(){const r=await ln.get("/layers/",{params:{project:jr()}}),{results:t}=r.data;L4(t),Lg.kumuh360=t,I4()}function L4(r){r.map(t=>{Object.assign(t,{show:!1})}),r.map(t=>{t.url.includes("geoserver")?Object.assign(t,{serverType:"geoserver"}):Object.assign(t,{serverType:"arcgis"})})}function I4(){Lg.kumuh360.filter(r=>r.show&&Ie.addLayer(tT(r)))}const IC=r=>(yr("data-v-cd7e8ccf"),r=r(),_r(),r),F4={key:0,class:"layers"},N4={class:"card"},G4={class:"card-body px-2 py-1"},H4={class:"list-unstyled ps-0 mb-0"},W4=IC(()=>A("button",{class:"btn btn-toggle align-items-center rounded collapsed","data-bs-toggle":"collapse","data-bs-target":"#kumuh-360","aria-expanded":"true"},"Kumuh 360",-1)),V4={class:"collapse show",id:"kumuh-360"},k4={class:"btn-toggle-nav list-unstyled fw-normal pb-1 small"},B4=["onUpdate:modelValue","value","id","onChange"],U4=["for"],z4=IC(()=>A("button",{class:"btn btn-toggle align-items-center rounded collapsed","data-bs-toggle":"collapse","data-bs-target":"#panorama-data","aria-expanded":"true"},"360 Data",-1)),j4={class:"collapse show",id:"panorama-data"},$4={class:"btn-toggle-nav list-unstyled fw-normal pb-1 small"},Y4={class:"form-check"},K4=IC(()=>A("label",{class:"form-check-label user-select-none",for:"panorama"},"Panorama",-1)),X4={__name:"LayersPopup",setup(r){return(t,e)=>(At(),Hr(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut"},{default:nn(()=>[U(Gt).showLayers?(At(),Vt("div",F4,[A("div",N4,[A("div",G4,[A("ul",H4,[A("li",null,[W4,A("div",V4,[A("ul",k4,[(At(!0),Vt(mr,null,ig(U(Lg).kumuh360,i=>(At(),Vt("li",{class:"form-check",key:i.id},[ge(A("input",{class:"form-check-input","onUpdate:modelValue":n=>i.show=n,type:"checkbox",value:i.name,id:i.name_layer,onChange:n=>U(y4)(n,i)},null,40,B4),[[Yw,i.show]]),A("label",{class:"form-check-label user-select-none text-capitalize",for:i.name_layer},vi(i.name),9,U4)]))),128))])])]),A("li",null,[z4,A("div",j4,[A("ul",$4,[A("li",Y4,[ge(A("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=i=>U(jy).panorama=i),type:"checkbox",value:"panorama",id:"panorama",onChange:e[1]||(e[1]=i=>U(_4)(i,t.layer))},null,544),[[Yw,U(jy).panorama]]),K4])])])])])])])])):li("",!0)]),_:1}))}},q4=In(X4,[["__scopeId","data-v-cd7e8ccf"]]);const FC=r=>(yr("data-v-f298b873"),r=r(),_r(),r),Z4={key:0,class:"measurement"},J4={class:"card"},Q4={class:"card-body px-2 py-1"},tj={class:"form-check d-flex align-items-center gap-1"},ej=FC(()=>A("label",{class:"form-check-label fs-7",for:"clear"},"Clear Measurement",-1)),ij={class:"form-check d-flex align-items-center gap-1"},nj=FC(()=>A("label",{class:"form-check-label fs-7",for:"length"},"Length (Line String)",-1)),rj={class:"form-check d-flex align-items-center gap-1"},oj=FC(()=>A("label",{class:"form-check-label fs-7",for:"area"},"Area (Polygon)",-1)),sj={__name:"MeasurementPopup",setup(r){return C_(rr,function(){switch(rr.value){case"length":UN();break;case"area":zN();break;default:BN()}}),(t,e)=>(At(),Hr(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut"},{default:nn(()=>[U(Gt).showMeasurement?(At(),Vt("div",Z4,[A("div",J4,[A("div",Q4,[A("div",tj,[ge(A("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>Kc(rr)?rr.value=i:null),value:"clear",class:"form-check-input fs-7",name:"flexRadioDefault",type:"radio",id:"clear"},null,512),[[Np,U(rr)]]),ej]),A("div",ij,[ge(A("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>Kc(rr)?rr.value=i:null),value:"length",class:"form-check-input fs-7",name:"flexRadioDefault",type:"radio",id:"length"},null,512),[[Np,U(rr)]]),nj]),A("div",rj,[ge(A("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>Kc(rr)?rr.value=i:null),value:"area",class:"form-check-input fs-7",name:"flexRadioDefault",type:"radio",id:"area"},null,512),[[Np,U(rr)]]),oj])])])])):li("",!0)]),_:1}))}},aj=In(sj,[["__scopeId","data-v-f298b873"]]);const lj={key:0,class:"card"},uj={class:"card-title"},cj={class:"card-body"},hj={key:0,class:"table"},dj={scope:"row",style:{"font-size":"0.8rem"}},pj={style:{"font-size":"0.8rem"}},fj={__name:"MapInfoPopup",setup(r){const t=ii(!1);return(e,i)=>(At(),Hr(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__fadeInLeft animate__faster","leave-active-class":"animate__animated animate__fadeOutLeft animate__faster"},{default:nn(()=>[U(Gt).showMapInfo?(At(),Vt("div",lj,[A("div",uj,[A("div",{class:"close-btn cursor-pointer",onMouseover:i[0]||(i[0]=n=>t.value=!0),onMouseleave:i[1]||(i[1]=n=>t.value=!1),onClick:i[2]||(i[2]=(...n)=>U(df)&&U(df)(...n))},[A("i",{class:xi(["fa-circle-xmark fa-lg",t.value?"fa-solid":"fa-regular"])},null,2)],32)]),A("div",cj,[U(Ou)?(At(),Vt("table",hj,[A("tbody",null,[(At(!0),Vt(mr,null,ig(U(Ou),(n,o)=>(At(),Vt("tr",null,[A("th",dj,vi(o),1),A("td",pj,vi(n),1)]))),256))])])):li("",!0)])])):li("",!0)]),_:1}))}},gj=In(fj,[["__scopeId","data-v-18c730e7"]]);const iT=r=>(yr("data-v-21978040"),r=r(),_r(),r),mj={key:0,class:"support-table"},vj={class:"card"},yj={class:"card-body px-2 py-1"},_j={class:"form-check d-flex align-items-center gap-1"},Cj=["checked"],wj=iT(()=>A("label",{class:"form-check-label fs-7"},"Layer",-1)),Sj={class:"form-check d-flex align-items-center gap-1"},Ej=["checked"],xj=iT(()=>A("label",{class:"form-check-label fs-7"},"Panorama",-1)),Rj={__name:"SupportTablePopup",setup(r){return(t,e)=>(At(),Hr(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut"},{default:nn(()=>[U(Gt).showSupportTable?(At(),Vt("div",mj,[A("div",vj,[A("div",yj,[A("div",_j,[A("input",{class:"form-check-input fs-7",name:"flexRadioDefault",type:"radio",checked:U(zs),onClick:e[0]||(e[0]=(...i)=>U(DE)&&U(DE)(...i))},null,8,Cj),wj]),A("div",Sj,[A("input",{class:"form-check-input fs-7",name:"flexRadioDefault",type:"radio",checked:U(js),onClick:e[1]||(e[1]=(...i)=>U(LE)&&U(LE)(...i))},null,8,Ej),xj])])])])):li("",!0)]),_:1}))}},bj=In(Rj,[["__scopeId","data-v-21978040"]]),qe=En({id:"",name:"",name_service:"",projectId:"",url:"",year:0});let Au,Yy,JE,QE;function tx(){Au=new bootstrap.Modal(document.getElementById("add-layer-modal"),{}),Au.show()}function gc(){Au.hide()}function Mj(r){Au=new bootstrap.Modal(document.getElementById("update-layer-modal"),{}),Au.show();const{id:t,name:e,project:i,url:n,name_layer:o,year:s}=r;qe.id=t,qe.name=e,qe.projectId=i,qe.url=n,qe.name_service=o,qe.year=s}function mc(){Au.hide(),qe.id="",qe.name="",qe.projectId="",qe.url="",qe.name_service="",qe.year=0}function Tj(){Yy=new bootstrap.Modal(document.getElementById("style-layer-modal"),{}),Yy.show()}function op(){Yy.hide()}function ex(){JE=new bootstrap.Modal(document.getElementById("acc-info-modal"),{}),JE.show()}const Hs=En({id:"",username:"",email:"",role:""});function Pj(r){QE=new bootstrap.Modal(document.getElementById("acc2-info-modal"),{}),QE.show(),Hs.id=r.id,Hs.username=r.username,Hs.email=r.email,Hs.role=r.role}const Oj={class:"modal fade",id:"acc-info-modal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Aj={class:"modal-dialog modal-dialog-centered"},Dj={class:"modal-content"},Lj=A("div",{class:"modal-header"},[A("h1",{class:"modal-title fs-5"},"Account Information"),A("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ij={class:"modal-body"},Fj={class:"list-group"},Nj={class:"list-group-item d-flex justify-content-between align-items-start"},Gj={class:"ms-2 me-auto"},Hj=A("div",{class:"fw-bold"},"User ID",-1),Wj={class:"list-group-item d-flex justify-content-between align-items-start"},Vj={class:"ms-2 me-auto"},kj=A("div",{class:"fw-bold"},"Email",-1),Bj={class:"list-group-item d-flex justify-content-between align-items-start"},Uj={class:"ms-2 me-auto"},zj=A("div",{class:"fw-bold"},"Username",-1),jj={class:"list-group-item d-flex justify-content-between align-items-start"},$j={class:"ms-2 me-auto"},Yj=A("div",{class:"fw-bold"},"Role",-1),Kj={__name:"AccountInfo",setup(r){const t=En({id:"",email:"",username:"",role:""});async function e(){const{id:i}=JSON.parse(ia(sessionStorage.getItem("userData"))),n=await ln.get(`/auth/users/${i}/`),{id:o,email:s,username:a,role:l}=n.data;t.id=o,t.email=s,t.username=a,t.role=l}return lR(()=>{e()}),(i,n)=>(At(),Vt("div",Oj,[A("div",Aj,[A("div",Dj,[Lj,A("div",Ij,[A("ol",Fj,[A("li",Nj,[A("div",Gj,[Hj,Os(" "+vi(t.id),1)])]),A("li",Wj,[A("div",Vj,[kj,Os(" "+vi(t.email),1)])]),A("li",Bj,[A("div",Uj,[zj,Os(" "+vi(t.username),1)])]),A("li",jj,[A("div",$j,[Yj,Os(" "+vi(t.role),1)])])])])])])]))}};const nT=r=>(yr("data-v-4e4b920a"),r=r(),_r(),r),Xj={key:0,class:"acc-info"},qj={class:"card"},Zj={class:"card-body py-2 px-3"},Jj=nT(()=>A("span",null,"Account List",-1)),Qj=[Jj],t6=nT(()=>A("span",null,"Logout",-1)),e6=[t6],i6={__name:"AccountInfoPopup",setup(r){const t=OA(),{role:e}=JSON.parse(ia(sessionStorage.getItem("userData")));function i(){sessionStorage.clear(),t.push("/login"),t.go(),Gt.showAccInfo=!1}return(n,o)=>(At(),Vt(mr,null,[He(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut"},{default:nn(()=>[U(Gt).showAccInfo?(At(),Vt("div",Xj,[A("div",qj,[A("div",Zj,[A("div",{class:"cursor-pointer user fs-6",onClick:o[0]||(o[0]=(...s)=>U(ex)&&U(ex)(...s))},[A("span",null,"Info Account: "+vi(U(e)),1)]),A("div",{class:"cursor-pointer user fs-6",onClick:o[1]||(o[1]=(...s)=>U(IE)&&U(IE)(...s))},Qj),A("div",{class:"cursor-pointer logout fs-6",onClick:i},e6)])])])):li("",!0)]),_:1}),He(Kj)],64))}},n6=In(i6,[["__scopeId","data-v-4e4b920a"]]),r6=A("div",{class:"logo-sipaku"},[A("img",{src:IA,alt:"logo sipaku"})],-1),o6={class:"card-body d-flex flex-grow-1 p-0 w-100",id:"container-map"},s6={key:0,style:{"z-index":"100"},class:"position-absolute top-50 start-50"},a6=A("i",{class:"fa-solid fa-sync fa-spin fa-2xl"},null,-1),l6=[a6],u6={class:"card-footer d-flex justify-content-between"},c6={class:"d-flex m-0 p-0 gap-3"},h6={key:0,class:"d-flex m-0 p-0 gap-3"},d6={class:"d-flex m-0 gap-3"},p6=A("i",{class:"fa-solid fa-magnifying-glass-plus cursor-pointer"},null,-1),f6=[p6],g6=A("i",{class:"fa-solid fa-magnifying-glass-minus cursor-pointer"},null,-1),m6=[g6],v6={__name:"PaneMap",setup(r){const t=ii(!1);return(e,i)=>{const n=w_("tippy");return At(),Vt(mr,null,[r6,A("div",o6,[U(Pg)?(At(),Vt("div",s6,l6)):li("",!0)]),A("div",u6,[A("ul",c6,[ge((At(),Vt("li",{onClick:i[0]||(i[0]=o=>t.value=!t.value),class:"tooltip-burger-menu"},[A("i",{class:xi(["fa-solid cursor-pointer",t.value?"fa-xmark fa-lg":"fa-bars"])},null,2)])),[[n,{content:t.value?"Close Menu":"Menu"}]]),He(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__fadeInLeft animate__faster","leave-active-class":"animate__animated animate__fadeOutLeft animate__faster"},{default:nn(()=>[t.value?(At(),Vt("div",h6,[ge((At(),Vt("li",{onClick:i[1]||(i[1]=(...o)=>U(U0)&&U(U0)(...o))},[A("i",{class:xi(["fa-solid fa-map cursor-pointer",U(Gt).showBasemap&&"text-primary"])},null,2)])),[[n,{content:"Basemap"}]]),ge((At(),Vt("li",{onClick:i[2]||(i[2]=(...o)=>U(z0)&&U(z0)(...o))},[A("i",{class:xi(["fa-solid fa-layer-group cursor-pointer",U(Gt).showLayers&&"text-primary"])},null,2)])),[[n,{content:"Layers"}]]),ge((At(),Vt("li",{onClick:i[3]||(i[3]=(...o)=>U(j0)&&U(j0)(...o))},[A("i",{class:xi(["fa-solid fa-ruler cursor-pointer",U(Gt).showMeasurement&&"text-primary"])},null,2)])),[[n,{content:"Measurement Type"}]]),ge((At(),Vt("li",{onClick:i[4]||(i[4]=(...o)=>U(AE)&&U(AE)(...o))},[A("i",{class:xi(["fa-solid fa-magnifying-glass cursor-pointer",U(qo)&&"text-primary"])},null,2)])),[[n,{content:"Attributes"}]]),ge((At(),Vt("li",{onClick:i[5]||(i[5]=(...o)=>U(df)&&U(df)(...o))},[A("i",{class:xi(["fa-solid fa-circle-info cursor-pointer",U(Gt).showMapInfo&&"text-primary"])},null,2)])),[[n,{content:"Information"}]]),ge((At(),Vt("li",{onClick:i[6]||(i[6]=(...o)=>U($0)&&U($0)(...o))},[A("i",{class:xi(["fa-solid fa-table cursor-pointer",U(Gt).showSupportTable&&"text-primary"])},null,2)])),[[n,{content:"Options"}]])])):li("",!0)]),_:1})]),A("ul",d6,[ge((At(),Vt("li",{onClick:i[7]||(i[7]=(...o)=>U(Y0)&&U(Y0)(...o))},[A("i",{class:xi(["fa-solid fa-user cursor-pointer",U(Gt).showAccInfo&&"text-primary"])},null,2)])),[[n,{content:"Account Information"}]]),ge((At(),Vt("li",{onClick:i[8]||(i[8]=(...o)=>U(qE)&&U(qE)(...o))},f6)),[[n,{content:"Zoom In"}]]),ge((At(),Vt("li",{onClick:i[9]||(i[9]=(...o)=>U(ZE)&&U(ZE)(...o))},m6)),[[n,{content:"Zoom Out"}]])])]),He(A4),He(q4),He(aj),He(gj),He(bj),He(n6)],64)}}};const Zu=r=>(yr("data-v-854d1348"),r=r(),_r(),r),y6={key:0,class:"card"},_6={class:"card-body"},C6={class:"list-group"},w6={class:"list-group-item d-flex justify-content-between align-items-start"},S6={class:"ms-2 me-auto"},E6=Zu(()=>A("div",{class:"fw-bold fs-7"},"Panorama ID",-1)),x6={class:"fs-7"},R6={class:"list-group-item d-flex justify-content-between align-items-start"},b6={class:"ms-2 me-auto"},M6=Zu(()=>A("div",{class:"fw-bold fs-7"},"Base Name",-1)),T6={class:"fs-7"},P6={class:"list-group-item d-flex justify-content-between align-items-start"},O6={class:"ms-2 me-auto"},A6=Zu(()=>A("div",{class:"fw-bold fs-7"},"Longitude",-1)),D6={class:"fs-7"},L6={class:"list-group-item d-flex justify-content-between align-items-start"},I6={class:"ms-2 me-auto"},F6=Zu(()=>A("div",{class:"fw-bold fs-7"},"Latitude",-1)),N6={class:"fs-7"},G6={class:"list-group-item d-flex justify-content-between align-items-start"},H6={class:"ms-2 me-auto"},W6=Zu(()=>A("div",{class:"fw-bold fs-7"},"UTM X",-1)),V6={class:"fs-7"},k6={class:"list-group-item d-flex justify-content-between align-items-start"},B6={class:"ms-2 me-auto"},U6=Zu(()=>A("div",{class:"fw-bold fs-7"},"UTM Y",-1)),z6={class:"fs-7"},j6={__name:"PanoramaInfo",setup(r){return(t,e)=>(At(),Hr(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__zoomIn animate__faster","leave-active-class":"animate__animated animate__zoomOut animate__faster"},{default:nn(()=>[U(Kn).showPanoramaInfo?(At(),Vt("div",y6,[A("div",_6,[A("ol",C6,[A("li",w6,[A("div",S6,[E6,A("span",x6,vi(U(bs).id),1)])]),A("li",R6,[A("div",b6,[M6,A("span",T6,vi(U(bs).base_name),1)])]),A("li",P6,[A("div",O6,[A6,A("span",D6,vi(U(bs).lon),1)])]),A("li",L6,[A("div",I6,[F6,A("span",N6,vi(U(bs).lat),1)])]),A("li",G6,[A("div",H6,[W6,A("span",V6,vi(U(bs).utm_x),1)])]),A("li",k6,[A("div",B6,[U6,A("span",z6,vi(U(bs).utm_y),1)])])])])])):li("",!0)]),_:1}))}},$6=In(j6,[["__scopeId","data-v-854d1348"]]);const Y6=r=>(yr("data-v-8f94a6f6"),r=r(),_r(),r),K6={class:"toast",id:"distance",role:"alert","data-bs-autohide":"false"},X6=Y6(()=>A("strong",{class:"me-auto"},"Distance",-1)),q6={class:"toast-body"},Z6={__name:"InfoDistance",setup(r){function t(){new bootstrap.Toast(document.getElementById("distance"),{}).hide(),LC(),JM()}return(e,i)=>(At(),Vt("div",K6,[A("div",{class:"toast-header"},[X6,A("button",{type:"button",class:"btn-close",onClick:t})]),A("div",q6,vi(U(jM))+" Meter(s)",1)]))}},J6=In(Z6,[["__scopeId","data-v-8f94a6f6"]]);const NC=r=>(yr("data-v-921b8532"),r=r(),_r(),r),Q6={class:"card-body p-0 w-100 h-100",id:"wrapper-panorama"},t8=NC(()=>A("i",{class:"fa-solid fa-sync fa-spin fa-2xl"},null,-1)),e8=[t8],i8={class:"card-footer d-flex justify-content-between"},n8={class:"d-flex m-0 p-0 gap-3"},r8={key:0,class:"d-flex m-0 p-0 gap-3"},o8={class:"d-flex m-0 gap-3"},s8=NC(()=>A("i",{class:"fa-solid fa-magnifying-glass-plus cursor-pointer"},null,-1)),a8=[s8],l8=NC(()=>A("i",{class:"fa-solid fa-magnifying-glass-minus cursor-pointer"},null,-1)),u8=[l8],c8={__name:"PanePanorama",setup(r){const t=ii(!1),e=ii(!1);function i(){jc.value=!jc.value,Kn.showPanoramaInfo=!1,jc.value===!1&&(LC(),JM(),new bootstrap.Toast(document.getElementById("distance"),{}).hide())}return(n,o)=>{const s=w_("tippy");return At(),Vt(mr,null,[A("div",{class:"close-btn",onMouseover:o[0]||(o[0]=a=>t.value=!0),onMouseleave:o[1]||(o[1]=a=>t.value=!1),onClick:o[2]||(o[2]=(...a)=>U(XE)&&U(XE)(...a))},[A("i",{class:xi(["fa-circle-xmark fa-lg",t.value?"fa-solid":"fa-regular"])},null,2)],32),A("div",Q6,[U(Ph)?(At(),Vt("div",{key:0,class:xi(["position-absolute top-50 start-50",U(Pg)?"text-dark":"text-white"])},e8,2)):li("",!0),He(J6)]),A("div",i8,[A("ul",n8,[ge((At(),Vt("li",{onClick:o[3]||(o[3]=a=>e.value=!e.value),class:"tooltip-burger-menu"},[A("i",{class:xi(["fa-solid cursor-pointer",e.value?"fa-xmark fa-lg":"fa-bars"])},null,2)])),[[s,{content:e.value?"Close Menu":"Menu"}]]),He(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__fadeInLeft animate__faster","leave-active-class":"animate__animated animate__fadeOutLeft animate__faster"},{default:nn(()=>[e.value?(At(),Vt("div",r8,[ge((At(),Vt("li",{onClick:i},[A("i",{class:xi(["fa-solid fa-ruler cursor-pointer",U(jc)&&"text-primary"]),onClick:o[4]||(o[4]=(...a)=>n.toggleMeasurement&&n.toggleMeasurement(...a))},null,2)])),[[s,{content:"Measurement"}]]),U(Ph)===!1?ge((At(),Vt("li",{key:0,onClick:o[5]||(o[5]=(...a)=>U(K0)&&U(K0)(...a))},[A("i",{class:xi(["fa-solid fa-circle-info cursor-pointer",U(Kn).showPanoramaInfo&&"text-primary"])},null,2)])),[[s,{content:"Information"}]]):li("",!0),ge((At(),Vt("li",{onClick:o[6]||(o[6]=(...a)=>U(X0)&&U(X0)(...a))},[A("i",{class:xi(["fa-solid fa-gear cursor-pointer",U(Kn).showCorrection&&"text-primary"])},null,2)])),[[s,{content:"Correction"}]])])):li("",!0)]),_:1})]),A("ul",o8,[ge((At(),Vt("li",{onClick:o[7]||(o[7]=(...a)=>U(VE)&&U(VE)(...a))},a8)),[[s,{content:"Zoom In"}]]),ge((At(),Vt("li",{onClick:o[8]||(o[8]=(...a)=>U(kE)&&U(kE)(...a))},u8)),[[s,{content:"Zoom Out"}]])])]),He($6)],64)}}},h8=In(c8,[["__scopeId","data-v-921b8532"]]);/**
          * @ag-grid-community/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v28.2.1
          * @link https://www.ag-grid.com/
          * @license MIT
          *//**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function Ys(r){return r==null||r===""?null:r}function dt(r,t){return t===void 0&&(t=!1),r!=null&&(r!==""||t)}function kt(r){return!dt(r)}function Un(r){return r==null||r.length===0}function GC(r){return r!=null&&typeof r.toString=="function"?r.toString():null}function pr(r){if(r!==void 0){if(r===null||r==="")return null;if(typeof r=="number")return isNaN(r)?void 0:r;var t=parseInt(r,10);return isNaN(t)?void 0:t}}function no(r){if(r!==void 0)return r===null||r===""?!1:typeof r=="boolean"?r:/true/i.test(r)}function d8(r){if(!(r==null||r===""))return r}function p8(r,t){return r==null&&t==null?!0:r==null&&t!=null||r!=null&&t==null?!1:r===t}function f8(r,t){var e=r?JSON.stringify(r):null,i=t?JSON.stringify(t):null;return e===i}function g8(r,t,e){e===void 0&&(e=!1);var i=r==null,n=t==null;if(r&&r.toNumber&&(r=r.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&n)return 0;if(i)return-1;if(n)return 1;function o(s,a){return s>a?1:s<a?-1:0}if(typeof r!="string"||!e)return o(r,t);try{return r.localeCompare(t)}catch{return o(r,t)}}function al(r){if(r instanceof Set||r instanceof Map){var t=[];return r.forEach(function(e){return t.push(e)}),t}return Object.values(r)}var m8=Object.freeze({__proto__:null,makeNull:Ys,exists:dt,missing:kt,missingOrEmpty:Un,toStringOrNull:GC,attrToNumber:pr,attrToBoolean:no,attrToString:d8,referenceCompare:p8,jsonEquals:f8,defaultComparator:g8,values:al});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var v8=function(){function r(){this.existingKeys={}}return r.prototype.addExistingKeys=function(t){for(var e=0;e<t.length;e++)this.existingKeys[t[e]]=!0},r.prototype.getUniqueKey=function(t,e){t=GC(t);for(var i=0;;){var n=void 0;if(t?(n=t,i!==0&&(n+="_"+i)):e?(n=e,i!==0&&(n+="_"+i)):n=""+i,!this.existingKeys[n])return this.existingKeys[n]=!0,n;i++}},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function We(r,t){r!=null&&(Array.isArray(r)?r.forEach(function(e,i){return t(""+i,e)}):Object.keys(r).forEach(function(e){return t(e,r[e])}))}function HC(r){for(var t={},e=Object.keys(r),i=0;i<e.length;i++){var n=e[i],o=r[n];t[n]=o}return t}function y8(r){return JSON.parse(JSON.stringify(r))}function If(r,t){if(!!r){var e=r,i={};return Object.keys(e).forEach(function(n){if(!(t&&t.indexOf(n)>=0)){var o=e[n],s=Du(o)&&o.constructor===Object;s?i[n]=If(o):i[n]=o}}),i}}function rT(r,t){return r[t]}function oT(r,t,e){r[t]=e}function _8(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];e.forEach(function(n){return sT(r,t,n)})}function sT(r,t,e,i){var n=rT(r,e);n!==void 0&&oT(t,e,i?i(n):n)}function aT(r){var t={};return r.filter(function(e){return e!=null}).forEach(function(e){Object.keys(e).forEach(function(i){return t[i]=null})}),Object.keys(t)}function Br(r){if(!r)return[];var t=Object;if(typeof t.values=="function")return t.values(r);var e=[];for(var i in r)r.hasOwnProperty(i)&&r.propertyIsEnumerable(i)&&e.push(r[i]);return e}function jn(r,t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),dt(t)&&We(t,function(n,o){var s=r[n];if(s!==o){if(i){var a=s==null&&o!=null;if(a){var l=typeof o=="object"&&o.constructor===Object,u=l;u&&(s={},r[n]=s)}}Du(o)&&Du(s)&&!Array.isArray(s)?jn(s,o,e,i):(e||o!==void 0)&&(r[n]=o)}})}function C8(r){return kt(r)||Object.keys(r).length===0}function w8(r,t,e){if(r==null)return e;for(var i=t.split("."),n=r;i.length>1;)if(n=n[i.shift()],n==null)return e;var o=n[i[0]];return o!=null?o:e}function S8(r,t,e){if(r!=null){for(var i=t.split("."),n=r;i.length>1;)if(n=n[i.shift()],n==null)return;n[i[0]]=e}}function lT(r){return Object.freeze(r),al(r).forEach(function(t){(Du(t)||typeof t=="function")&&lT(t)}),r}function Ff(r,t,e){if(!(!t||!r)){if(!e)return r[t];for(var i=t.split("."),n=r,o=0;o<i.length;o++){if(n==null)return;n=n[i[o]]}return n}}function uT(r,t){Object.keys(r).forEach(function(n){var o=r[n];typeof o=="object"&&(r[n]=void 0)});var e=Object.getPrototypeOf(r),i={};Object.keys(e).forEach(function(n){var o=e[n];if(typeof o=="function"){var s=function(){console.warn("AG Grid: "+t+" function "+n+`() cannot be called as the grid has been destroyed.
                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't
                     be keeping the API reference, your application has a memory leak! Remove the API reference
                     when the grid is destroyed.`)};i[n]={value:s,writable:!0}}}),Object.defineProperties(r,i)}function Du(r){return typeof r=="object"&&r!==null}var E8=Object.freeze({__proto__:null,iterateObject:We,cloneObject:HC,deepCloneObject:y8,deepCloneDefinition:If,getProperty:rT,setProperty:oT,copyPropertiesIfPresent:_8,copyPropertyIfPresent:sT,getAllKeysInObjects:aT,getAllValuesInObject:Br,mergeDeep:jn,missingOrEmptyObject:C8,get:w8,set:S8,deepFreeze:lT,getValueUsingField:Ff,removeAllReferences:uT,isNonNullObject:Du});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var ix={};function ce(r,t){ix[t]||(r(),ix[t]=!0)}function Ig(r){if(r.name)return r.name;var t=/function\s+([^\(]+)/.exec(r.toString());return t&&t.length===2?t[1].trim():null}function Fg(r){return!!(r&&r.constructor&&r.call&&r.apply)}function cT(r){hT(r,400)}var rv=[],ov=!1;function Ky(r){rv.push(r),!ov&&(ov=!0,window.setTimeout(function(){var t=rv.slice();rv.length=0,ov=!1,t.forEach(function(e){return e()})},0))}function hT(r,t){t===void 0&&(t=0),r.length>0&&window.setTimeout(function(){return r.forEach(function(e){return e()})},t)}function ea(r,t,e){e===void 0&&(e=!1);var i;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var s=this,a=e&&!i;window.clearTimeout(i),i=window.setTimeout(function(){i=null,e||r.apply(s,n)},t),a&&r.apply(s,n)}}function Xy(r,t){var e=0;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o=this,s=new Date().getTime();s-e<t||(e=s,r.apply(o,i))}}function dT(r,t,e,i){e===void 0&&(e=100);var n=new Date().getTime(),o=null,s=!1,a=function(){var l=new Date().getTime()-n>e;(r()||l)&&(t(),s=!0,o!=null&&(window.clearInterval(o),o=null),l&&i&&console.warn(i))};a(),s||(o=window.setInterval(a,10))}function x8(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return r.reduce(function(i,n){return n(i)},e)}}function pT(r){r&&r()}var R8=function(){},b8=Object.freeze({__proto__:null,doOnce:ce,getFunctionName:Ig,isFunction:Fg,executeInAWhile:cT,executeNextVMTurn:Ky,executeAfter:hT,debounce:ea,throttle:Xy,waitUntil:dT,compose:x8,callIfPresent:pT,noop:R8});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var M8=function(){function r(t,e){if(this.beanWrappers={},this.destroyed=!1,!(!t||!t.beanClasses)){this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}}return r.prototype.getBeanInstances=function(){return al(this.beanWrappers).map(function(t){return t.beanInstance})},r.prototype.createBean=function(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t},r.prototype.wireBeans=function(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),dt(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")},r.prototype.createBeans=function(){var t=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),We(this.beanWrappers,function(i,n){var o;n.bean.__agBeanMetaData&&n.bean.__agBeanMetaData.autowireMethods&&n.bean.__agBeanMetaData.autowireMethods.agConstructor&&(o=n.bean.__agBeanMetaData.autowireMethods.agConstructor);var s=t.getBeansForParameters(o,n.bean.name),a=T8(n.bean,s);n.beanInstance=a});var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+e)},r.prototype.createBeanWrapper=function(t){var e=t.__agBeanMetaData;if(!e){var i=void 0;t.prototype.constructor?i=Ig(t.prototype.constructor):i=""+t,console.error("Context item "+i+" is not a bean");return}var n={bean:t,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=n},r.prototype.autoWireBeans=function(t){var e=this;t.forEach(function(i){e.forEachMetaDataInHierarchy(i,function(n,o){var s=n.agClassAttributes;!s||s.forEach(function(a){var l=e.lookupBeanInstance(o,a.beanName,a.optional);i[a.attributeName]=l})})})},r.prototype.methodWireBeans=function(t){var e=this;t.forEach(function(i){e.forEachMetaDataInHierarchy(i,function(n,o){We(n.autowireMethods,function(s,a){if(s!=="agConstructor"){var l=e.getBeansForParameters(a,o);i[s].apply(i,l)}})})})},r.prototype.forEachMetaDataInHierarchy=function(t,e){for(var i=Object.getPrototypeOf(t);i!=null;){var n=i.constructor;if(n.hasOwnProperty("__agBeanMetaData")){var o=n.__agBeanMetaData,s=this.getBeanName(n);e(o,s)}i=Object.getPrototypeOf(i)}},r.prototype.getBeanName=function(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;var e=t.toString(),i=e.substring(9,e.indexOf("("));return i},r.prototype.getBeansForParameters=function(t,e){var i=this,n=[];return t&&We(t,function(o,s){var a=i.lookupBeanInstance(e,s);n[Number(o)]=a}),n},r.prototype.lookupBeanInstance=function(t,e,i){if(i===void 0&&(i=!1),e==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var n=this.beanWrappers[e];return n?n.beanInstance:(i||console.error("AG Grid: unable to find bean reference "+e+" while initialising "+t),null)},r.prototype.callLifeCycleMethods=function(t,e){var i=this;t.forEach(function(n){return i.callLifeCycleMethodsOnBean(n,e)})},r.prototype.callLifeCycleMethodsOnBean=function(t,e,i){var n={};this.forEachMetaDataInHierarchy(t,function(s){var a=s[e];a&&a.forEach(function(l){l!=i&&(n[l]=!0)})});var o=Object.keys(n);o.forEach(function(s){return t[s]()})},r.prototype.getBean=function(t){return this.lookupBeanInstance("getBean",t,!0)},r.prototype.destroy=function(){if(!this.destroyed){this.logger.log(">> Shutting down ag-Application Context");var t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead")}},r.prototype.destroyBean=function(t){!t||this.destroyBeans([t])},r.prototype.destroyBeans=function(t){var e=this;return t?(t.forEach(function(i){e.callLifeCycleMethodsOnBean(i,"preDestroyMethods","destroy");var n=i;typeof n.destroy=="function"&&n.destroy()}),[]):[]},r}();function T8(r,t){var e=[null].concat(t),i=r.bind.apply(r,e);return new i}function nx(r,t,e){var i=il(r.constructor);i.preConstructMethods||(i.preConstructMethods=[]),i.preConstructMethods.push(t)}function Ct(r,t,e){var i=il(r.constructor);i.postConstructMethods||(i.postConstructMethods=[]),i.postConstructMethods.push(t)}function Yi(r,t,e){var i=il(r.constructor);i.preDestroyMethods||(i.preDestroyMethods=[]),i.preDestroyMethods.push(t)}function Dt(r){return function(t){var e=il(t);e.beanName=r}}function b(r){return function(t,e,i){fT(t,r,!1,t,e,null)}}function Ae(r){return function(t,e,i){fT(t,r,!0,t,e,null)}}function fT(r,t,e,i,n,o){if(t===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof o=="number"){console.error("AG Grid: Autowired should be on an attribute");return}var s=il(r.constructor);s.agClassAttributes||(s.agClassAttributes=[]),s.agClassAttributes.push({attributeName:n,beanName:t,optional:e})}function Cn(r){return function(t,e,i){var n=typeof t=="function"?t:t.constructor,o;if(typeof i=="number"){var s=void 0;e?(o=il(n),s=e):(o=il(n),s="agConstructor"),o.autowireMethods||(o.autowireMethods={}),o.autowireMethods[s]||(o.autowireMethods[s]={}),o.autowireMethods[s][i]=r}}}function il(r){return r.hasOwnProperty("__agBeanMetaData")||(r.__agBeanMetaData={}),r.__agBeanMetaData}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Nf=function(){return Nf=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Nf.apply(this,arguments)},rx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},sp=function(r,t){return function(e,i){t(e,i,r)}},ra=function(){function r(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return r.prototype.setBeans=function(t,e,i,n){if(n===void 0&&(n=null),this.frameworkOverrides=i,this.gridOptionsWrapper=e,n){var o=e.useAsyncEvents();this.addGlobalListener(n,o)}},r.prototype.getListeners=function(t,e,i){var n=e?this.allAsyncListeners:this.allSyncListeners,o=n.get(t);return!o&&i&&(o=new Set,n.set(t,o)),o},r.prototype.noRegisteredListenersExist=function(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0},r.prototype.addEventListener=function(t,e,i){i===void 0&&(i=!1),this.getListeners(t,i,!0).add(e)},r.prototype.removeEventListener=function(t,e,i){i===void 0&&(i=!1);var n=this.getListeners(t,i,!1);if(!!n&&(n.delete(e),n.size===0)){var o=i?this.allAsyncListeners:this.allSyncListeners;o.delete(t)}},r.prototype.addGlobalListener=function(t,e){e===void 0&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)},r.prototype.removeGlobalListener=function(t,e){e===void 0&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)},r.prototype.dispatchEvent=function(t){var e=t;this.gridOptionsWrapper&&(e=Nf(Nf({},t),{api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()})),this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0},r.prototype.dispatchEventOnce=function(t){this.firedEvents[t.type]||this.dispatchEvent(t)},r.prototype.dispatchToListeners=function(t,e){var i=this,n=t.type,o=function(l){return l.forEach(function(u){e?i.dispatchAsync(function(){return u(t)}):u(t)})},s=this.getListeners(n,e,!1);s&&o(s);var a=e?this.globalAsyncListeners:this.globalSyncListeners;a.forEach(function(l){e?i.dispatchAsync(function(){return i.frameworkOverrides.dispatchEvent(n,function(){return l(n,t)},!0)}):i.frameworkOverrides.dispatchEvent(n,function(){return l(n,t)},!0)})},r.prototype.dispatchAsync=function(t){this.asyncFunctionsQueue.push(t),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},r.prototype.flushAsyncQueue=function(){this.scheduled=!1;var t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(function(e){return e()})},rx([sp(0,Cn("loggerFactory")),sp(1,Cn("gridOptionsWrapper")),sp(2,Cn("frameworkOverrides")),sp(3,Cn("globalEventListener"))],r.prototype,"setBeans",null),r=rx([Dt("eventService")],r),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var H=function(){function r(){}return r.ROW_BUFFER_SIZE=10,r.LAYOUT_INTERVAL=500,r.BATCH_WAIT_MILLIS=50,r.EXPORT_TYPE_DRAG_COPY="dragCopy",r.EXPORT_TYPE_CLIPBOARD="clipboard",r.EXPORT_TYPE_EXCEL="excel",r.EXPORT_TYPE_CSV="csv",r.ROW_MODEL_TYPE_INFINITE="infinite",r.ROW_MODEL_TYPE_VIEWPORT="viewport",r.ROW_MODEL_TYPE_CLIENT_SIDE="clientSide",r.ROW_MODEL_TYPE_SERVER_SIDE="serverSide",r.ALWAYS="always",r.ONLY_WHEN_GROUPING="onlyWhenGrouping",r.PINNED_TOP="top",r.PINNED_BOTTOM="bottom",r.DOM_LAYOUT_NORMAL="normal",r.DOM_LAYOUT_PRINT="print",r.DOM_LAYOUT_AUTO_HEIGHT="autoHeight",r.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",r.SOURCE_PASTE="paste",r.PINNED_RIGHT="right",r.PINNED_LEFT="left",r.SORT_ASC="asc",r.SORT_DESC="desc",r.INPUT_SELECTOR="input, select, button, textarea",r.FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea",r.FOCUSABLE_EXCLUDE=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *",r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var qt;(function(r){r.CommunityCoreModule="@ag-grid-community/core",r.CommunityAllModules="@ag-grid-community/all",r.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",r.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",r.CsvExportModule="@ag-grid-community/csv-export",r.EnterpriseCoreModule="@ag-grid-enterprise/core",r.EnterpriseAllModules="@ag-grid-enterprise/all",r.RowGroupingModule="@ag-grid-enterprise/row-grouping",r.ColumnToolPanelModule="@ag-grid-enterprise/column-tool-panel",r.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",r.MenuModule="@ag-grid-enterprise/menu",r.SetFilterModule="@ag-grid-enterprise/set-filter",r.MultiFilterModule="@ag-grid-enterprise/multi-filter",r.StatusBarModule="@ag-grid-enterprise/status-bar",r.SideBarModule="@ag-grid-enterprise/side-bar",r.RangeSelectionModule="@ag-grid-enterprise/range-selection",r.MasterDetailModule="@ag-grid-enterprise/master-detail",r.RichSelectModule="@ag-grid-enterprise/rich-select",r.GridChartsModule="@ag-grid-enterprise/charts",r.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",r.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",r.ExcelExportModule="@ag-grid-enterprise/excel-export",r.ClipboardModule="@ag-grid-enterprise/clipboard",r.SparklinesModule="@ag-grid-enterprise/sparklines",r.AngularModule="@ag-grid-community/angular",r.ReactModule="@ag-grid-community/react",r.VueModule="@ag-grid-community/vue",r.PolymerModule="@ag-grid-community/polymer"})(qt||(qt={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var te=function(){function r(){}return r.register=function(t,e){e===void 0&&(e=!0),r.modulesMap[t.moduleName]=t,r.moduleBased===void 0?r.moduleBased=e:r.moduleBased!==e&&ce(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},r.registerModules=function(t,e){e===void 0&&(e=!0),t&&t.forEach(function(i){return r.register(i,e)})},r.assertRegistered=function(t,e){if(this.isRegistered(t))return!0;var i=e+t,n;return r.moduleBased?n="AG Grid: unable to use "+e+" as module "+t+" is not present. Please see: https://www.ag-grid.com/javascript-grid/modules/":n="AG Grid: unable to use "+e+" as package 'ag-grid-enterprise' is not present. Please see: https://www.ag-grid.com/javascript-grid/packages/",ce(function(){console.warn(n)},i),!1},r.isRegistered=function(t){return!!r.modulesMap[t]},r.getRegisteredModules=function(){return al(r.modulesMap)},r.isPackageBased=function(){return!r.moduleBased},r.modulesMap={},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var sv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},P8=0,me=function(){function r(t,e,i,n){this.instanceId=P8++,this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new ra,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=e,this.colId=i,this.primary=n,this.setState(t)}return r.prototype.getInstanceId=function(){return this.instanceId},r.prototype.setState=function(t){t.sort!==void 0?(t.sort===H.SORT_ASC||t.sort===H.SORT_DESC)&&(this.sort=t.sort):(t.initialSort===H.SORT_ASC||t.initialSort===H.SORT_DESC)&&(this.sort=t.initialSort);var e=pr(t.sortIndex),i=pr(t.initialSortIndex);e!==void 0?e!==null&&(this.sortIndex=e):i!==null&&(this.sortIndex=i);var n=no(t.hide),o=no(t.initialHide);n!==void 0?this.visible=!n:this.visible=!o,t.pinned!==void 0?this.setPinned(t.pinned):this.setPinned(t.initialPinned);var s=pr(t.flex),a=pr(t.initialFlex);s!==void 0?this.flex=s:a!==void 0&&(this.flex=a)},r.prototype.setColDef=function(t,e){this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_COL_DEF_CHANGED,"api"))},r.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},r.prototype.setParent=function(t){this.parent=t},r.prototype.getParent=function(){return this.parent},r.prototype.setOriginalParent=function(t){this.originalParent=t},r.prototype.getOriginalParent=function(){return this.originalParent},r.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.validate()},r.prototype.initDotNotation=function(){var t=this.gridOptionsWrapper.isSuppressFieldDotNotation();this.fieldContainsDots=dt(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=dt(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t},r.prototype.initMinAndMaxWidths=function(){var t=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(t),this.maxWidth=this.columnUtils.calculateColMaxWidth(t)},r.prototype.resetActualWidth=function(t){t===void 0&&(t="api");var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)},r.prototype.isEmptyGroup=function(){return!1},r.prototype.isRowGroupDisplayed=function(t){if(kt(this.colDef)||kt(this.colDef.showRowGroup))return!1;var e=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===t;return e||i},r.prototype.isPrimary=function(){return this.primary},r.prototype.isFilterAllowed=function(){var t=!!this.colDef.filter||!!this.colDef.filterFramework;return t},r.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},r.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},r.prototype.validate=function(){var t=this.colDef;function e(s,a,l){ce(function(){l?console.warn(s,l):ce(function(){return console.warn(s)},a)},a)}var i=this.gridOptionsWrapper.isRowModelDefault();if(i&&!te.isRegistered(qt.RowGroupingModule)){var n=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"];n.forEach(function(s){dt(t[s])&&(te.isPackageBased()?e("AG Grid: "+s+" is only valid in ag-grid-enterprise, your column definition should not have "+s,"ColumnRowGroupingMissing"+s):e("AG Grid: "+s+" is only valid with AG Grid Enterprise Module "+qt.RowGroupingModule+" - your column definition should not have "+s,"ColumnRowGroupingMissing"+s))})}if(te.isRegistered(qt.RichSelectModule)||(this.colDef.cellEditor==="agRichSelect"||this.colDef.cellEditor==="agRichSelectCellEditor")&&(te.isPackageBased()?e("AG Grid: "+this.colDef.cellEditor+" can only be used with ag-grid-enterprise","ColumnRichSelectMissing"):e("AG Grid: "+this.colDef.cellEditor+" can only be used with AG Grid Enterprise Module "+qt.RichSelectModule,"ColumnRichSelectMissing")),this.gridOptionsWrapper.isTreeData()){var o=["rowGroup","rowGroupIndex","pivot","pivotIndex"];o.forEach(function(s){dt(t[s])&&e("AG Grid: "+s+" is not possible when doing tree data, your column definition should not have "+s,"TreeDataCannotRowGroup")})}dt(this.colDef.width)&&typeof this.colDef.width!="number"&&e("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck_asdfawef"),t.pinnedRowCellRenderer&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),t.pinnedRowCellRendererParams&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),t.pinnedRowCellRendererFramework&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),t.pinnedRowValueGetter&&e("AG Grid: pinnedRowCellRenderer is deprecated, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue.","colDef.pinnedRowCellRenderer-deprecated")},r.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},r.prototype.createColumnFunctionCallbackParams=function(t){return{node:t,data:t.data,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},r.prototype.isSuppressNavigable=function(t){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){var e=this.createColumnFunctionCallbackParams(t),i=this.colDef.suppressNavigable;return i(e)}return!1},r.prototype.isCellEditable=function(t){return t.group&&!this.gridOptionsWrapper.isEnableGroupEdit()?!1:this.isColumnFunc(t,this.colDef.editable)},r.prototype.isSuppressFillHandle=function(){return!!no(this.colDef.suppressFillHandle)},r.prototype.isAutoHeight=function(){return!!no(this.colDef.autoHeight)},r.prototype.isAutoHeaderHeight=function(){return!!no(this.colDef.autoHeaderHeight)},r.prototype.isRowDrag=function(t){return this.isColumnFunc(t,this.colDef.rowDrag)},r.prototype.isDndSource=function(t){return this.isColumnFunc(t,this.colDef.dndSource)},r.prototype.isCellCheckboxSelection=function(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)},r.prototype.isSuppressPaste=function(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)},r.prototype.isResizable=function(){return!!no(this.colDef.resizable)},r.prototype.isColumnFunc=function(t,e){if(typeof e=="boolean")return e;if(typeof e=="function"){var i=this.createColumnFunctionCallbackParams(t),n=e;return n(i)}return!1},r.prototype.setMoving=function(t,e){e===void 0&&(e="api"),this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_MOVING_CHANGED,e))},r.prototype.createColumnEvent=function(t,e){return{type:t,column:this,columns:[this],source:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}},r.prototype.isMoving=function(){return this.moving},r.prototype.getSort=function(){return this.sort},r.prototype.setSort=function(t,e){e===void 0&&(e="api"),this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_SORT_CHANGED,e)))},r.prototype.setMenuVisible=function(t,e){e===void 0&&(e="api"),this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_MENU_VISIBLE_CHANGED,e)))},r.prototype.isMenuVisible=function(){return this.menuVisible},r.prototype.isSortAscending=function(){return this.sort===H.SORT_ASC},r.prototype.isSortDescending=function(){return this.sort===H.SORT_DESC},r.prototype.isSortNone=function(){return kt(this.sort)},r.prototype.isSorting=function(){return dt(this.sort)},r.prototype.getSortIndex=function(){return this.sortIndex},r.prototype.setSortIndex=function(t){this.sortIndex=t},r.prototype.setAggFunc=function(t){this.aggFunc=t},r.prototype.getAggFunc=function(){return this.aggFunc},r.prototype.getLeft=function(){return this.left},r.prototype.getOldLeft=function(){return this.oldLeft},r.prototype.getRight=function(){return this.left+this.actualWidth},r.prototype.setLeft=function(t,e){e===void 0&&(e="api"),this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_LEFT_CHANGED,e)))},r.prototype.isFilterActive=function(){return this.filterActive},r.prototype.setFilterActive=function(t,e,i){e===void 0&&(e="api"),this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_FILTER_ACTIVE_CHANGED,e)));var n=this.createColumnEvent(r.EVENT_FILTER_CHANGED,e);i&&jn(n,i),this.eventService.dispatchEvent(n)},r.prototype.setPinned=function(t){t===!0||t===H.PINNED_LEFT?this.pinned=H.PINNED_LEFT:t===H.PINNED_RIGHT?this.pinned=H.PINNED_RIGHT:this.pinned=null},r.prototype.setFirstRightPinned=function(t,e){e===void 0&&(e="api"),this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_FIRST_RIGHT_PINNED_CHANGED,e)))},r.prototype.setLastLeftPinned=function(t,e){e===void 0&&(e="api"),this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_LAST_LEFT_PINNED_CHANGED,e)))},r.prototype.isFirstRightPinned=function(){return this.firstRightPinned},r.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},r.prototype.isPinned=function(){return this.pinned===H.PINNED_LEFT||this.pinned===H.PINNED_RIGHT},r.prototype.isPinnedLeft=function(){return this.pinned===H.PINNED_LEFT},r.prototype.isPinnedRight=function(){return this.pinned===H.PINNED_RIGHT},r.prototype.getPinned=function(){return this.pinned},r.prototype.setVisible=function(t,e){e===void 0&&(e="api");var i=t===!0;this.visible!==i&&(this.visible=i,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_VISIBLE_CHANGED,e)))},r.prototype.isVisible=function(){return this.visible},r.prototype.getColDef=function(){return this.colDef},r.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},r.prototype.getColId=function(){return this.colId},r.prototype.getId=function(){return this.getColId()},r.prototype.getUniqueId=function(){return this.getId()},r.prototype.getDefinition=function(){return this.colDef},r.prototype.getActualWidth=function(){return this.actualWidth},r.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},r.prototype.setAutoHeaderHeight=function(t){var e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e},r.prototype.createBaseColDefParams=function(t){var e={node:t,data:t.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};return e},r.prototype.getColSpan=function(t){if(kt(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(t),i=this.colDef.colSpan(e);return Math.max(i,1)},r.prototype.getRowSpan=function(t){if(kt(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(t),i=this.colDef.rowSpan(e);return Math.max(i,1)},r.prototype.setActualWidth=function(t,e,i){e===void 0&&(e="api"),i===void 0&&(i=!1),this.minWidth!=null&&(t=Math.max(t,this.minWidth)),this.maxWidth!=null&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&e!=="flex"&&e!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(e))},r.prototype.fireColumnWidthChangedEvent=function(t){this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_WIDTH_CHANGED,t))},r.prototype.isGreaterThanMax=function(t){return this.maxWidth!=null?t>this.maxWidth:!1},r.prototype.getMinWidth=function(){return this.minWidth},r.prototype.getMaxWidth=function(){return this.maxWidth},r.prototype.getFlex=function(){return this.flex||0},r.prototype.setFlex=function(t){this.flex!==t&&(this.flex=t)},r.prototype.setMinimum=function(t){t===void 0&&(t="api"),dt(this.minWidth)&&this.setActualWidth(this.minWidth,t)},r.prototype.setRowGroupActive=function(t,e){e===void 0&&(e="api"),this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_ROW_GROUP_CHANGED,e)))},r.prototype.isRowGroupActive=function(){return this.rowGroupActive},r.prototype.setPivotActive=function(t,e){e===void 0&&(e="api"),this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_PIVOT_CHANGED,e)))},r.prototype.isPivotActive=function(){return this.pivotActive},r.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},r.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},r.prototype.setValueActive=function(t,e){e===void 0&&(e="api"),this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent(r.EVENT_VALUE_CHANGED,e)))},r.prototype.isValueActive=function(){return this.aggregationActive},r.prototype.isAllowPivot=function(){return this.colDef.enablePivot===!0},r.prototype.isAllowValue=function(){return this.colDef.enableValue===!0},r.prototype.isAllowRowGroup=function(){return this.colDef.enableRowGroup===!0},r.prototype.getMenuTabs=function(t){var e=this.getColDef().menuTabs;return e==null&&(e=t),e},r.prototype.isLockPosition=function(){return console.warn("AG Grid: since v21, col.isLockPosition() should not be used, please use col.getColDef().lockPosition instead."),this.colDef?!!this.colDef.lockPosition:!1},r.prototype.isLockVisible=function(){return console.warn("AG Grid: since v21, col.isLockVisible() should not be used, please use col.getColDef().lockVisible instead."),this.colDef?!!this.colDef.lockVisible:!1},r.prototype.isLockPinned=function(){return console.warn("AG Grid: since v21, col.isLockPinned() should not be used, please use col.getColDef().lockPinned instead."),this.colDef?!!this.colDef.lockPinned:!1},r.EVENT_MOVING_CHANGED="movingChanged",r.EVENT_LEFT_CHANGED="leftChanged",r.EVENT_WIDTH_CHANGED="widthChanged",r.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",r.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",r.EVENT_VISIBLE_CHANGED="visibleChanged",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_COL_DEF_CHANGED="colDefChanged",r.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",r.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_PIVOT_CHANGED="columnPivotChanged",r.EVENT_VALUE_CHANGED="columnValueChanged",sv([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),sv([b("columnUtils")],r.prototype,"columnUtils",void 0),sv([Ct],r.prototype,"initialise",null),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function gT(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=0;e<r.length;e++){var i=r[e];if(dt(i))return i}return null}function O8(r){return r!=null&&r.length>0}function Ue(r){if(!(!r||!r.length))return r[r.length-1]}function Ws(r,t,e){return r==null&&t==null?!0:r!=null&&t!=null&&r.length===t.length&&r.every(function(i,n){return e?e(i,t[n]):t[n]===i})}function A8(r,t){return Ws(r,t)}function D8(r,t){return Ws(r,t)}function mT(r){return r.sort(function(t,e){return t-e})}function L8(r,t){if(!!r)for(var e=r.length-2;e>=0;e--){var i=r[e]===t,n=r[e+1]===t;i&&n&&r.splice(e+1,1)}}function en(r,t){var e=r.indexOf(t);e>=0&&r.splice(e,1)}function WC(r,t){t.forEach(function(e){return en(r,e)})}function Oh(r,t,e){r.splice(e,0,t)}function I8(r,t,e){if(!(r==null||t==null))for(var i=t.length-1;i>=0;i--){var n=t[i];Oh(r,n,e)}}function qy(r,t,e){WC(r,t),t.slice().reverse().forEach(function(i){return Oh(r,i,e)})}function Xn(r,t){return r.indexOf(t)>-1}function vT(r){return[].concat.apply([],r)}function Zy(r,t){t==null||r==null||t.forEach(function(e){return r.push(e)})}function F8(r){return r.map(GC)}function N8(r,t){if(r!=null)for(var e=r.length-1;e>=0;e--)t(r[e],e)}var G8=Object.freeze({__proto__:null,firstExistingValue:gT,existsAndNotEmpty:O8,last:Ue,areEqual:Ws,compareArrays:A8,shallowCompare:D8,sortNumerically:mT,removeRepeatsFromArray:L8,removeFromArray:en,removeAllFromArray:WC,insertIntoArray:Oh,insertArrayIntoArray:I8,moveInArray:qy,includes:Xn,flatten:vT,pushAll:Zy,toStrings:F8,forEachReverse:N8});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var H8=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},on=function(){function r(t,e,i,n){this.displayedChildren=[],this.localEventService=new ra,this.groupId=e,this.instanceId=i,this.providedColumnGroup=t,this.pinned=n}return r.createUniqueId=function(t,e){return t+"_"+e},r.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},r.prototype.getParent=function(){return this.parent},r.prototype.setParent=function(t){this.parent=t},r.prototype.getUniqueId=function(){return r.createUniqueId(this.groupId,this.instanceId)},r.prototype.isEmptyGroup=function(){return this.displayedChildren.length===0},r.prototype.isMoving=function(){var t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(function(e){return e.isMoving()})},r.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(n){n instanceof r&&n.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsWrapper.isEnableRtl()){var t=Ue(this.displayedChildren),e=t.getLeft();this.setLeft(e)}else{var i=this.displayedChildren[0].getLeft();this.setLeft(i)}else this.setLeft(null)},r.prototype.getLeft=function(){return this.left},r.prototype.getOldLeft=function(){return this.oldLeft},r.prototype.setLeft=function(t){this.oldLeft=t,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_LEFT_CHANGED)))},r.prototype.getPinned=function(){return this.pinned},r.prototype.createAgEvent=function(t){return{type:t}},r.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},r.prototype.getGroupId=function(){return this.groupId},r.prototype.getInstanceId=function(){return this.instanceId},r.prototype.isChildInThisGroupDeepSearch=function(t){var e=!1;return this.children.forEach(function(i){t===i&&(e=!0),i instanceof r&&i.isChildInThisGroupDeepSearch(t)&&(e=!0)}),e},r.prototype.getActualWidth=function(){var t=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){t+=e.getActualWidth()}),t},r.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var t=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(t=!0)}),t},r.prototype.getMinWidth=function(){var t=0;return this.displayedChildren.forEach(function(e){t+=e.getMinWidth()||0}),t},r.prototype.addChild=function(t){this.children||(this.children=[]),this.children.push(t)},r.prototype.getDisplayedChildren=function(){return this.displayedChildren},r.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},r.prototype.getDisplayedLeafColumns=function(){var t=[];return this.addDisplayedLeafColumns(t),t},r.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},r.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},r.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},r.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},r.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},r.prototype.setExpanded=function(t){this.providedColumnGroup.setExpanded(t)},r.prototype.addDisplayedLeafColumns=function(t){this.displayedChildren.forEach(function(e){e instanceof me?t.push(e):e instanceof r&&e.addDisplayedLeafColumns(t)})},r.prototype.addLeafColumns=function(t){this.children.forEach(function(e){e instanceof me?t.push(e):e instanceof r&&e.addLeafColumns(t)})},r.prototype.getChildren=function(){return this.children},r.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},r.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},r.prototype.getOriginalColumnGroup=function(){return console.warn("AG Grid: columnGroup.getOriginalColumnGroup() is deprecated due to a method rename, use columnGroup.getProvidedColumnGroup() instead"),this.getProvidedColumnGroup()},r.prototype.getPaddingLevel=function(){var t=this.getParent();return!this.isPadding()||!t||!t.isPadding()?0:1+t.getPaddingLevel()},r.prototype.calculateDisplayedColumns=function(){var t=this;this.displayedChildren=[];for(var e=this;e!=null&&e.isPadding();)e=e.getParent();var i=e?e.providedColumnGroup.isExpandable():!1;if(!i){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(function(n){var o=n instanceof r&&(!n.displayedChildren||!n.displayedChildren.length);if(!o){var s=n.getColumnGroupShow();switch(s){case r.HEADER_GROUP_SHOW_OPEN:e.providedColumnGroup.isExpanded()&&t.displayedChildren.push(n);break;case r.HEADER_GROUP_SHOW_CLOSED:e.providedColumnGroup.isExpanded()||t.displayedChildren.push(n);break;default:t.displayedChildren.push(n);break}}}),this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED))},r.HEADER_GROUP_SHOW_OPEN="open",r.HEADER_GROUP_SHOW_CLOSED="closed",r.EVENT_LEFT_CHANGED="leftChanged",r.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",H8([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pi=function(){function r(t,e,i,n){this.localEventService=new ra,this.expandable=!1,this.colGroupDef=t,this.groupId=e,this.expanded=!!t&&!!t.openByDefault,this.padding=i,this.level=n}return r.prototype.reset=function(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.children=void 0,this.expandable=void 0},r.prototype.setOriginalParent=function(t){this.originalParent=t},r.prototype.getOriginalParent=function(){return this.originalParent},r.prototype.getLevel=function(){return this.level},r.prototype.isVisible=function(){return this.children?this.children.some(function(t){return t.isVisible()}):!1},r.prototype.isPadding=function(){return this.padding},r.prototype.setExpanded=function(t){this.expanded=t===void 0?!1:t;var e={type:r.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(e)},r.prototype.isExpandable=function(){return this.expandable},r.prototype.isExpanded=function(){return this.expanded},r.prototype.getGroupId=function(){return this.groupId},r.prototype.getId=function(){return this.getGroupId()},r.prototype.setChildren=function(t){this.children=t},r.prototype.getChildren=function(){return this.children},r.prototype.getColGroupDef=function(){return this.colGroupDef},r.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},r.prototype.addLeafColumns=function(t){!this.children||this.children.forEach(function(e){e instanceof me?t.push(e):e instanceof r&&e.addLeafColumns(t)})},r.prototype.getColumnGroupShow=function(){var t=this.colGroupDef;if(!!t)return t.columnGroupShow},r.prototype.setupExpandable=function(){var t=this;this.setExpandable(),this.getLeafColumns().forEach(function(e){return e.addEventListener(me.EVENT_VISIBLE_CHANGED,t.onColumnVisibilityChanged.bind(t))})},r.prototype.setExpandable=function(){if(!this.isPadding()){for(var t=!1,e=!1,i=!1,n=this.findChildrenRemovingPadding(),o=0,s=n.length;o<s;o++){var a=n[o];if(!!a.isVisible()){var l=a.getColumnGroupShow();l===on.HEADER_GROUP_SHOW_OPEN?(t=!0,i=!0):l===on.HEADER_GROUP_SHOW_CLOSED?(e=!0,i=!0):(t=!0,e=!0)}}var u=t&&e&&i;if(this.expandable!==u){this.expandable=u;var c={type:r.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(c)}}},r.prototype.findChildrenRemovingPadding=function(){var t=[],e=function(i){i.forEach(function(n){var o=n instanceof r&&n.isPadding();o?e(n.children):t.push(n)})};return e(this.children),t},r.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},r.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_EXPANDABLE_CHANGED="expandableChanged",r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var W8={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yT="__ag_Grid_Stop_Propagation",V8=["touchstart","touchend","touchmove","touchcancel"],av={};function Lu(r){r[yT]=!0}function vo(r){return r[yT]===!0}var VC=function(){var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},t=function(e){if(typeof av[e]=="boolean")return av[e];var i=document.createElement(r[e]||"div");return e="on"+e,av[e]=e in i};return t}();function Gf(r,t,e){for(var i=t.target;i;){var n=r.getDomData(i,e);if(n)return n;i=i.parentElement}return null}function k8(r,t){r.addEventListener("changed",t),r.addEventListener("paste",t),r.addEventListener("input",t)}function Hf(r,t){return!t||!r?!1:kC(t).indexOf(r)>=0}function _T(r){for(var t=[],e=r.target;e;)t.push(e),e=e.parentElement;return t}function B8(r){r.__agGridEventPath=kC(r)}function kC(r){var t=r;return t.path?t.path:t.composedPath?t.composedPath():t.__agGridEventPath?t.__agGridEventPath:_T(r)}function CT(r,t,e,i){var n=Xn(V8,e),o=n?{passive:!0}:void 0;r&&r.addEventListener&&r.addEventListener(t,e,i,o)}var U8=Object.freeze({__proto__:null,stopPropagationForAgGrid:Lu,isStopPropagationForAgGrid:vo,isEventSupported:VC,getCtrlForEvent:Gf,addChangeListener:k8,isElementInEventPath:Hf,createEventPath:_T,addAgGridEventPath:B8,getEventPath:kC,addSafePassiveEventListener:CT});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var vc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ft=function(){function r(){var t=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=function(){return!t.destroyed}}return r.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},r.prototype.getContext=function(){return this.context},r.prototype.destroy=function(){this.destroyFunctions.forEach(function(t){return t()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:r.EVENT_DESTROYED})},r.prototype.addEventListener=function(t,e){this.localEventService||(this.localEventService=new ra),this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService&&this.localEventService.removeEventListener(t,e)},r.prototype.dispatchEventAsync=function(t){var e=this;window.setTimeout(function(){return e.dispatchEvent(t)},0)},r.prototype.dispatchEvent=function(t){this.localEventService&&this.localEventService.dispatchEvent(t)},r.prototype.addManagedListener=function(t,e,i){var n=this;if(!this.destroyed){t instanceof HTMLElement?CT(this.getFrameworkOverrides(),t,e,i):t.addEventListener(e,i);var o=function(){return t.removeEventListener(e,i),n.destroyFunctions=n.destroyFunctions.filter(function(s){return s!==o}),null};return this.destroyFunctions.push(o),o}},r.prototype.addDestroyFunc=function(t){this.isAlive()?this.destroyFunctions.push(t):t()},r.prototype.createManagedBean=function(t,e){var i=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),i},r.prototype.createBean=function(t,e,i){return(e||this.getContext()).createBean(t,i)},r.prototype.destroyBean=function(t,e){return(e||this.getContext()).destroyBean(t)},r.prototype.destroyBeans=function(t,e){var i=this;return t&&t.forEach(function(n){return i.destroyBean(n,e)}),[]},r.EVENT_DESTROYED="destroyed",vc([b("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),vc([b("context")],r.prototype,"context",void 0),vc([b("eventService")],r.prototype,"eventService",void 0),vc([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),vc([Yi],r.prototype,"destroy",null),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var z8=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),lv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},j8=function(r,t){return function(e,i){t(e,i,r)}},$8=function(r){z8(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setBeans=function(e){this.logger=e.create("ColumnFactory")},t.prototype.createColumnTree=function(e,i,n){var o=new v8,s=this.extractExistingTreeData(n),a=s.existingCols,l=s.existingGroups,u=s.existingColKeys;o.addExistingKeys(u);var c=this.recursivelyCreateColumns(e,0,i,a,o,l),h=this.findMaxDept(c,0);this.logger.log("Number of levels for grouped columns is "+h);var d=this.balanceColumnTree(c,0,h,o),p=function(f,m){f instanceof pi&&f.setupExpandable(),f.setOriginalParent(m)};return this.columnUtils.depthFirstOriginalTreeSearch(null,d,p),{columnTree:d,treeDept:h}},t.prototype.extractExistingTreeData=function(e){var i=[],n=[],o=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(s){if(s instanceof pi){var a=s;n.push(a)}else{var l=s;o.push(l.getId()),i.push(l)}}),{existingCols:i,existingGroups:n,existingColKeys:o}},t.prototype.createForAutoGroups=function(e,i){var n=this;return e.map(function(o){return n.createAutoGroupTreeItem(i,o)})},t.prototype.createAutoGroupTreeItem=function(e,i){for(var n=this.findDepth(e),o=i,s=n-1;s>=0;s--){var a=new pi(null,"FAKE_PATH_"+i.getId()+"}_"+s,!0,s);this.context.createBean(a),a.setChildren([o]),o.setOriginalParent(a),o=a}return o},t.prototype.findDepth=function(e){for(var i=0,n=e;n&&n[0]&&n[0]instanceof pi;)i++,n=n[0].getChildren();return i},t.prototype.balanceColumnTree=function(e,i,n,o){for(var s=[],a=0;a<e.length;a++){var l=e[a];if(l instanceof pi){var u=l,c=this.balanceColumnTree(u.getChildren(),i+1,n,o);u.setChildren(c),s.push(u)}else{for(var h=void 0,d=void 0,p=n-1;p>=i;p--){var f=o.getUniqueKey(null,null),m=this.createMergedColGroupDef(null),g=new pi(m,f,!0,i);this.context.createBean(g),d&&d.setChildren([g]),d=g,h||(h=d)}if(h&&d){s.push(h);var y=e.some(function(C){return C instanceof pi});if(y){d.setChildren([l]);continue}else{d.setChildren(e);break}}s.push(l)}}return s},t.prototype.findMaxDept=function(e,i){for(var n=i,o=0;o<e.length;o++){var s=e[o];if(s instanceof pi){var a=s,l=this.findMaxDept(a.getChildren(),i+1);n<l&&(n=l)}}return n},t.prototype.recursivelyCreateColumns=function(e,i,n,o,s,a){var l=this;return(e||[]).map(function(u){return l.isColumnGroup(u)?l.createColumnGroup(n,u,i,o,s,a):l.createColumn(n,u,o,s)})},t.prototype.createColumnGroup=function(e,i,n,o,s,a){var l=this.createMergedColGroupDef(i),u=s.getUniqueKey(l.groupId||null,null),c=this.findExistingGroup(i,a),h;c?(h=c,h.reset(l,n),en(a,c)):(h=new pi(l,u,!1,n),this.context.createBean(h));var d=this.recursivelyCreateColumns(l.children,n+1,e,o,s,a);return h.setChildren(d),h},t.prototype.createMergedColGroupDef=function(e){var i={};return Object.assign(i,this.gridOptionsWrapper.getDefaultColGroupDef()),Object.assign(i,e),this.checkForDeprecatedItems(i),i},t.prototype.createColumn=function(e,i,n,o){var s=this.mergeColDefs(i);this.checkForDeprecatedItems(s);var a=this.findExistingColumn(i,n);if(n&&a&&en(n,a),a)a.setColDef(s,i),this.applyColumnState(a,s);else{var l=o.getUniqueKey(s.colId,s.field);a=new me(s,i,l,e),this.context.createBean(a)}return a},t.prototype.applyColumnState=function(e,i){var n=pr(i.flex);n!==void 0&&e.setFlex(n);var o=e.getFlex()<=0;if(o){var s=pr(i.width);if(s!=null)e.setActualWidth(s);else{var a=e.getActualWidth();e.setActualWidth(a)}}i.sort!==void 0&&(i.sort==H.SORT_ASC||i.sort==H.SORT_DESC?e.setSort(i.sort):e.setSort(void 0));var l=pr(i.sortIndex);l!==void 0&&e.setSortIndex(l);var u=no(i.hide);u!==void 0&&e.setVisible(!u),i.pinned!==void 0&&e.setPinned(i.pinned)},t.prototype.findExistingColumn=function(e,i){return(i||[]).find(function(n){var o=n.getUserProvidedColDef();if(!o)return!1;var s=e.colId!=null,a=e.field!=null;return s?n.getId()===e.colId:a?o.field===e.field:o===e})},t.prototype.findExistingGroup=function(e,i){return i.find(function(n){var o=n.getColGroupDef();if(!o)return!1;var s=e.groupId!=null;return s?n.getId()===e.groupId:!1})},t.prototype.mergeColDefs=function(e){var i={},n=this.gridOptionsWrapper.getDefaultColDef();jn(i,n,!1,!0);var o=e.type;o||(o=n&&n.type),o&&this.assignColumnTypes(o,i),jn(i,e,!1,!0);var s=this.gridOptionsWrapper.getAutoGroupColumnDef(),a=this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();return e.rowGroup&&s&&a&&jn(i,{sort:s.sort,initialSort:s.initialSort},!1,!0),i},t.prototype.assignColumnTypes=function(e,i){var n=[];if(e instanceof Array){var o=e.some(function(l){return typeof l!="string"});o?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):n=e}else if(typeof e=="string")n=e.split(",");else{console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'");return}var s=Object.assign({},W8),a=this.gridOptionsWrapper.getColumnTypes()||{};We(a,function(l,u){l in s?console.warn("AG Grid: the column type '"+l+"' is a default column type and cannot be overridden."):s[l]=u}),n.forEach(function(l){var u=s[l.trim()];u?jn(i,u,!1,!0):console.warn("AG Grid: colDef.type '"+l+"' does not correspond to defined gridOptions.columnTypes")})},t.prototype.checkForDeprecatedItems=function(e){if(e){var i=e;i.group!==void 0&&console.warn("AG Grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3"),i.headerGroup!==void 0&&console.warn("AG Grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3"),i.headerGroupShow!==void 0&&console.warn("AG Grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3"),i.suppressRowGroup!==void 0&&console.warn("AG Grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead"),i.suppressAggregation!==void 0&&console.warn("AG Grid: colDef.suppressAggregation is deprecated, please use colDef.type instead"),(i.suppressRowGroup||i.suppressAggregation)&&console.warn("AG Grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead"),i.displayName&&(console.warn("AG Grid: Found displayName "+i.displayName+", please use headerName instead, displayName is deprecated."),i.headerName=i.displayName)}},t.prototype.isColumnGroup=function(e){return e.children!==void 0},lv([b("columnUtils")],t.prototype,"columnUtils",void 0),lv([j8(0,Cn("loggerFactory"))],t.prototype,"setBeans",null),t=lv([Dt("columnFactory")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var O=function(){function r(){}return r.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",r.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",r.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",r.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",r.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",r.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",r.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",r.EVENT_COLUMN_MOVED="columnMoved",r.EVENT_COLUMN_VISIBLE="columnVisible",r.EVENT_COLUMN_PINNED="columnPinned",r.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",r.EVENT_COLUMN_RESIZED="columnResized",r.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",r.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",r.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",r.EVENT_ROW_GROUP_OPENED="rowGroupOpened",r.EVENT_ROW_DATA_CHANGED="rowDataChanged",r.EVENT_ROW_DATA_UPDATED="rowDataUpdated",r.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",r.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",r.EVENT_CHART_CREATED="chartCreated",r.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",r.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",r.EVENT_CHART_DESTROYED="chartDestroyed",r.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",r.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",r.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",r.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",r.EVENT_MODEL_UPDATED="modelUpdated",r.EVENT_PASTE_START="pasteStart",r.EVENT_PASTE_END="pasteEnd",r.EVENT_FILL_START="fillStart",r.EVENT_FILL_END="fillEnd",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",r.EVENT_CELL_CLICKED="cellClicked",r.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",r.EVENT_CELL_MOUSE_DOWN="cellMouseDown",r.EVENT_CELL_CONTEXT_MENU="cellContextMenu",r.EVENT_CELL_VALUE_CHANGED="cellValueChanged",r.EVENT_CELL_EDIT_REQUEST="cellEditRequest",r.EVENT_ROW_VALUE_CHANGED="rowValueChanged",r.EVENT_CELL_FOCUSED="cellFocused",r.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_SELECTION_CHANGED="selectionChanged",r.EVENT_CELL_KEY_DOWN="cellKeyDown",r.EVENT_CELL_KEY_PRESS="cellKeyPress",r.EVENT_CELL_MOUSE_OVER="cellMouseOver",r.EVENT_CELL_MOUSE_OUT="cellMouseOut",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_MODIFIED="filterModified",r.EVENT_FILTER_OPENED="filterOpened",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",r.EVENT_ROW_CLICKED="rowClicked",r.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",r.EVENT_GRID_READY="gridReady",r.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",r.EVENT_VIEWPORT_CHANGED="viewportChanged",r.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",r.EVENT_FIRST_DATA_RENDERED="firstDataRendered",r.EVENT_DRAG_STARTED="dragStarted",r.EVENT_DRAG_STOPPED="dragStopped",r.EVENT_CHECKBOX_CHANGED="checkboxChanged",r.EVENT_ROW_EDITING_STARTED="rowEditingStarted",r.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",r.EVENT_CELL_EDITING_STARTED="cellEditingStarted",r.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",r.EVENT_BODY_SCROLL="bodyScroll",r.EVENT_BODY_SCROLL_END="bodyScrollEnd",r.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",r.EVENT_PAGINATION_CHANGED="paginationChanged",r.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",r.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",r.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",r.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",r.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",r.EVENT_FLASH_CELLS="flashCells",r.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",r.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",r.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",r.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",r.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",r.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",r.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",r.EVENT_ROW_DRAG_ENTER="rowDragEnter",r.EVENT_ROW_DRAG_MOVE="rowDragMove",r.EVENT_ROW_DRAG_LEAVE="rowDragLeave",r.EVENT_ROW_DRAG_END="rowDragEnd",r.EVENT_POPUP_TO_FRONT="popupToFront",r.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",r.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",r.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",r.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",r.EVENT_KEYBOARD_FOCUS="keyboardFocus",r.EVENT_MOUSE_FOCUS="mouseFocus",r.EVENT_STORE_UPDATED="storeUpdated",r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var wT=function(){function r(){this.existingIds={}}return r.prototype.getInstanceIdForKey=function(t){var e=this.existingIds[t],i;return typeof e!="number"?i=0:i=e+1,this.existingIds[t]=i,i},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Y8=/[&<>"']/g,K8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function X8(r){var t=String.fromCharCode;function e(h){var d=[];if(!h)return[];for(var p=h.length,f=0,m,g;f<p;)m=h.charCodeAt(f++),m>=55296&&m<=56319&&f<p?(g=h.charCodeAt(f++),(g&64512)==56320?d.push(((m&1023)<<10)+(g&1023)+65536):(d.push(m),f--)):d.push(m);return d}function i(h){if(h>=55296&&h<=57343)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value")}function n(h,d){return t(h>>d&63|128)}function o(h){if(h>=0&&h<=31&&h!==10){var d=h.toString(16).toUpperCase(),p=d.padStart(4,"0");return"_x"+p+"_"}if((h&4294967168)==0)return t(h);var f="";return(h&4294965248)==0?f=t(h>>6&31|192):(h&4294901760)==0?(i(h),f=t(h>>12&15|224),f+=n(h,6)):(h&4292870144)==0&&(f=t(h>>18&7|240),f+=n(h,12),f+=n(h,6)),f+=t(h&63|128),f}for(var s=e(r),a=s.length,l=-1,u,c="";++l<a;)u=s[l],c+=o(u);return c}function ST(r){return r==null?null:r.replace(/([A-Z])/g,function(t){return"-"+t[0].toLowerCase()})}function ET(r){return r==null?null:r.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}function Jy(r){return r[0].toUpperCase()+r.substr(1).toLowerCase()}function wo(r,t){if(r==null)return null;var e=r.toString().toString();return t?e:e.replace(Y8,function(i){return K8[i]})}function BC(r){if(!r||r==null)return null;var t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,e=r.replace(t,"$1$4 $2$3$5").replace("."," ").split(" ");return e.map(function(i){return i.substring(0,1).toUpperCase()+(i.length>1?i.substring(1,i.length):"")}).join(" ")}var q8=Object.freeze({__proto__:null,utf8_encode:X8,camelCaseToHyphen:ST,hyphenToCamelCase:ET,capitalise:Jy,escapeString:wo,camelCaseToHumanText:BC});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function jo(r){var t=new Map;return r.forEach(function(e){return t.set(e[0],e[1])}),t}function Z8(r,t){var e=new Map;return r.forEach(function(i){return e.set(t(i),i)}),e}function J8(r){var t=[];return r.forEach(function(e,i){return t.push(i)}),t}var Q8=Object.freeze({__proto__:null,convertToMap:jo,mapById:Z8,keys:J8});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var t$=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},e$=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(t$(arguments[t]));return r},Qy=function(){function r(){}return r.STRING_PROPERTIES=["headerName","columnGroupShow","headerClass","toolPanelClass","headerValueGetter","pivotKeys","groupId","colId","sort","initialSort","field","type","tooltipComponent","tooltipField","headerTooltip","cellClass","showRowGroup","filter","initialAggFunc","defaultAggFunc","aggFunc","pinned","initialPinned","chartDataType","cellEditorPopupPosition"],r.OBJECT_PROPERTIES=["headerGroupComponent","headerGroupComponentFramework","headerGroupComponentParams","cellStyle","cellRenderer","cellRendererParams","cellRendererFramework","cellEditor","cellEditorFramework","cellEditorParams","pinnedRowCellRendererFramework","pinnedRowCellRendererParams","filterFramework","filterParams","pivotValueColumn","headerComponent","headerComponentFramework","headerComponentParams","floatingFilterComponent","floatingFilterComponentParams","floatingFilterComponentFramework","tooltipComponent","tooltipComponentParams","tooltipComponentFramework","refData","columnsMenuParams"],r.ARRAY_PROPERTIES=["children","sortingOrder","allowedAggFuncs","menuTabs","pivotTotalColumnIds","cellClassRules","icons"],r.NUMBER_PROPERTIES=["sortedAt","sortIndex","initialSortIndex","flex","initialFlex","width","initialWidth","minWidth","maxWidth","rowGroupIndex","initialRowGroupIndex","pivotIndex","initialPivotIndex"],r.BOOLEAN_PROPERTIES=["suppressCellFlash","suppressColumnsToolPanel","suppressFiltersToolPanel","openByDefault","marryChildren","hide","initialHide","rowGroup","initialRowGroup","pivot","initialPivot","checkboxSelection","showDisabledCheckboxes","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMenu","suppressMovable","lockPosition","lockVisible","lockPinned","unSortIcon","suppressSizeToFit","suppressAutoSize","enableRowGroup","enablePivot","enableValue","editable","suppressPaste","suppressNavigable","enableCellChangeFlash","rowDrag","dndSource","autoHeight","wrapText","sortable","resizable","singleClickEdit","floatingFilter","cellEditorPopup","suppressFillHandle","wrapHeaderText","autoHeaderHeight"],r.FUNCTION_PROPERTIES=["dndSourceOnRowDrag","valueGetter","valueSetter","filterValueGetter","keyCreator","pinnedRowCellRenderer","valueFormatter","pinnedRowValueFormatter","valueParser","comparator","equals","pivotComparator","suppressKeyboardEvent","suppressHeaderKeyboardEvent","colSpan","rowSpan","getQuickFilterText","newValueHandler","onCellValueChanged","onCellClicked","onCellDoubleClicked","onCellContextMenu","rowDragText","tooltipValueGetter","tooltipComponent","tooltipComponentFramework","cellRendererSelector","cellEditorSelector"],r.ALL_PROPERTIES=e$(r.ARRAY_PROPERTIES,r.OBJECT_PROPERTIES,r.STRING_PROPERTIES,r.NUMBER_PROPERTIES,r.FUNCTION_PROPERTIES,r.BOOLEAN_PROPERTIES),r.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var i$=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},ox=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(i$(arguments[t]));return r},Vo=function(){function r(){}return r.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault"],r.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef"],r.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"],r.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","batchUpdateWaitMillis","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],r.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","angularCompileRows","angularCompileFilters","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupUseEntireRow","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","deprecatedEmbedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressEnterpriseResetOnNewColumns","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","suppressSetColumnStateEvents","suppressColumnStateEvents","enableCharts","enableChartToolPanelsButton","deltaColumnMode","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","immutableData","immutableColumns","pivotSuppressAutoColumn","suppressExpandablePivotGroups","applyColumnDefOrder","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideFilterAllLevels","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","reactUi","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","groupRowsSticky","serverSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter"],r.FUNCTIONAL_PROPERTIES=["localeTextFunc","doesExternalFilterPass","groupRowAggNodes","isFullWidthCell","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","postSort","defaultGroupSortComparator","defaultGroupOrderComparator","rowDragText","groupRowInnerRenderer","groupRowInnerRendererFramework","groupRowRenderer","groupRowRendererFramework","fullWidthCellRenderer","fullWidthCellRendererFramework","loadingCellRenderer","loadingCellRendererFramework","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework"],r.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","getRowNodeId","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","suppressKeyboardEvent","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","groupAggFiltering"],r.FUNCTION_PROPERTIES=ox(r.FUNCTIONAL_PROPERTIES,r.CALLBACK_PROPERTIES),r.ALL_PROPERTIES=ox(r.ARRAY_PROPERTIES,r.OBJECT_PROPERTIES,r.STRING_PROPERTIES,r.NUMBER_PROPERTIES,r.FUNCTION_PROPERTIES,r.BOOLEAN_PROPERTIES),r.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var t_=function(){return t_=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},t_.apply(this,arguments)},n$=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},sx=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(n$(arguments[t]));return r},Ur=function(){function r(){}return r.getEventCallbacks=function(){return r.EVENT_CALLBACKS||(r.EVENT_CALLBACKS=r.EVENTS.map(function(t){return r.getCallbackForEvent(t)})),r.EVENT_CALLBACKS},r.copyAttributesToGridOptions=function(t,e,i){typeof t!="object"&&(t={});var n=t,o=function(s){return typeof e[s]<"u"};return o("groupAggFiltering")&&typeof e.groupAggFiltering!="function"&&(n.groupAggFiltering=r.toBoolean(e.groupAggFiltering),delete e.groupAggFiltering),sx(r.ARRAY_PROPERTIES,r.STRING_PROPERTIES,r.OBJECT_PROPERTIES,r.FUNCTION_PROPERTIES,r.getEventCallbacks()).filter(o).forEach(function(s){return n[s]=e[s]}),r.BOOLEAN_PROPERTIES.filter(o).forEach(function(s){return n[s]=r.toBoolean(e[s])}),r.NUMBER_PROPERTIES.filter(o).forEach(function(s){return n[s]=r.toNumber(e[s])}),t},r.getCallbackForEvent=function(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substr(1)},r.processOnChange=function(t,e,i,n){if(!!t){var o=t_({},t),s=e,a=function(c){return o[c]};a("groupAggFiltering")&&(typeof o.groupAggFiltering=="function"?s.groupAggFiltering=o.groupAggFiltering:s.groupAggFiltering=r.toBoolean(o.groupAggFiltering),delete o.groupAggFiltering),a("groupDisplayType")&&typeof o.groupDisplayType.currentValue=="string"&&(i.setGroupDisplayType(o.groupDisplayType.currentValue),delete o.groupDisplayType),o.domLayout&&(i.setDomLayout(o.domLayout.currentValue),delete o.domLayout),o.rowClass&&(i.setRowClass(o.rowClass.currentValue),delete o.rowClass),o.paginationPageSize&&(i.paginationSetPageSize(r.toNumber(o.paginationPageSize.currentValue)),delete o.paginationPageSize),o.rowGroupPanelShow&&(i.setRowGroupPanelShow(o.rowGroupPanelShow.currentValue),delete o.rowGroupPanelShow),o.groupRemoveSingleChildren&&(i.setGroupRemoveSingleChildren(r.toBoolean(o.groupRemoveSingleChildren.currentValue)),delete o.groupRemoveSingleChildren),o.groupRemoveLowestSingleChildren&&(i.setGroupRemoveLowestSingleChildren(r.toBoolean(o.groupRemoveLowestSingleChildren.currentValue)),delete o.groupRemoveLowestSingleChildren),o.suppressRowDrag&&(i.setSuppressRowDrag(r.toBoolean(o.suppressRowDrag.currentValue)),delete o.suppressRowDrag),o.suppressMoveWhenRowDragging&&(i.setSuppressMoveWhenRowDragging(r.toBoolean(o.suppressMoveWhenRowDragging.currentValue)),delete o.suppressMoveWhenRowDragging),o.suppressRowClickSelection&&(i.setSuppressRowClickSelection(r.toBoolean(o.suppressRowClickSelection.currentValue)),delete o.suppressRowClickSelection),o.suppressClipboardPaste&&(i.setSuppressClipboardPaste(r.toBoolean(o.suppressClipboardPaste.currentValue)),delete o.suppressClipboardPaste),o.headerHeight&&(i.setHeaderHeight(r.toNumber(o.headerHeight.currentValue)),delete o.headerHeight),o.pivotHeaderHeight&&(i.setPivotHeaderHeight(r.toNumber(o.pivotHeaderHeight.currentValue)),delete o.pivotHeaderHeight),o.groupHeaderHeight&&(i.setGroupHeaderHeight(r.toNumber(o.groupHeaderHeight.currentValue)),delete o.groupHeaderHeight),o.pivotGroupHeaderHeight&&(i.setPivotGroupHeaderHeight(r.toNumber(o.pivotGroupHeaderHeight.currentValue)),delete o.pivotGroupHeaderHeight),o.floatingFiltersHeight&&(i.setFloatingFiltersHeight(r.toNumber(o.floatingFiltersHeight.currentValue)),delete o.floatingFiltersHeight),o.functionsReadOnly&&(i.setFunctionsReadOnly(r.toBoolean(o.functionsReadOnly.currentValue)),delete o.functionsReadOnly),sx(r.ARRAY_PROPERTIES,r.OBJECT_PROPERTIES,r.STRING_PROPERTIES,r.getEventCallbacks()).filter(a).forEach(function(c){return s[c]=o[c].currentValue}),r.BOOLEAN_PROPERTIES.filter(a).forEach(function(c){return s[c]=r.toBoolean(o[c].currentValue)}),r.NUMBER_PROPERTIES.filter(a).forEach(function(c){return s[c]=r.toNumber(o[c].currentValue)}),o.enableCellTextSelection&&(i.setEnableCellTextSelection(r.toBoolean(o.enableCellTextSelection.currentValue)),delete o.enableCellTextSelection),o.quickFilterText&&(i.setQuickFilter(o.quickFilterText.currentValue),delete o.quickFilterText),o.autoGroupColumnDef&&(i.setAutoGroupColumnDef(o.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete o.autoGroupColumnDef),o.columnDefs&&(i.setColumnDefs(o.columnDefs.currentValue,"gridOptionsChanged"),delete o.columnDefs),o.defaultColDef&&(i.setDefaultColDef(o.defaultColDef.currentValue,"gridOptionsChanged"),delete o.defaultColDef),o.pivotMode&&(n.setPivotMode(r.toBoolean(o.pivotMode.currentValue)),delete o.pivotMode);var l=i;Object.keys(o).forEach(function(c){var h="set"+c.charAt(0).toUpperCase()+c.substring(1);l[h]&&l[h](t[c].currentValue)});var u={type:O.EVENT_COMPONENT_STATE_CHANGED};We(t,function(c,h){u[c]=h}),i.dispatchEvent(u)}},r.toBoolean=function(t){return typeof t=="boolean"?t:typeof t=="string"?t.toUpperCase()==="TRUE"||t=="":!1},r.toNumber=function(t){if(typeof t=="number")return t;if(typeof t=="string")return Number(t)},r.EVENTS=[],r.PUBLIC_EVENTS=[],r.EXCLUDED_INTERNAL_EVENTS=[],r.STRING_PROPERTIES=Vo.STRING_PROPERTIES,r.OBJECT_PROPERTIES=Vo.OBJECT_PROPERTIES,r.ARRAY_PROPERTIES=Vo.ARRAY_PROPERTIES,r.NUMBER_PROPERTIES=Vo.NUMBER_PROPERTIES,r.BOOLEAN_PROPERTIES=Vo.BOOLEAN_PROPERTIES,r.FUNCTION_PROPERTIES=Vo.FUNCTION_PROPERTIES,r.ALL_PROPERTIES=Vo.ALL_PROPERTIES,r}();Ur.EVENTS=al(O);Ur.EXCLUDED_INTERNAL_EVENTS=[O.EVENT_SCROLLBAR_WIDTH_CHANGED,O.EVENT_CHECKBOX_CHANGED,O.EVENT_HEIGHT_SCALE_CHANGED,O.EVENT_BODY_HEIGHT_CHANGED,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,O.EVENT_SCROLL_VISIBILITY_CHANGED,O.EVENT_COLUMN_HOVER_CHANGED,O.EVENT_FLASH_CELLS,O.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,O.EVENT_DISPLAYED_ROWS_CHANGED,O.EVENT_LEFT_PINNED_WIDTH_CHANGED,O.EVENT_RIGHT_PINNED_WIDTH_CHANGED,O.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,O.EVENT_POPUP_TO_FRONT,O.EVENT_KEYBOARD_FOCUS,O.EVENT_MOUSE_FOCUS,O.EVENT_STORE_UPDATED,O.EVENT_COLUMN_PANEL_ITEM_DRAG_START,O.EVENT_COLUMN_PANEL_ITEM_DRAG_END,O.EVENT_FILL_START,O.EVENT_FILL_END,O.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,O.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,O.EVENT_FULL_WIDTH_ROW_FOCUSED,O.EVENT_HEADER_HEIGHT_CHANGED,O.EVENT_COLUMN_HEADER_HEIGHT_CHANGED];Ur.PUBLIC_EVENTS=Ur.EVENTS.filter(function(r){return!Xn(Ur.EXCLUDED_INTERNAL_EVENTS,r)});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var xT=function(){function r(){}return r.parse=function(t){if(!t)return null;if(t===!0)return{toolPanels:[r.DEFAULT_COLUMN_COMP,r.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if(typeof t=="string")return r.parse([t]);if(Array.isArray(t)){var e=[];return t.forEach(function(n){var o=r.DEFAULT_BY_KEY[n];if(!o){console.warn("AG Grid: the key "+n+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(r.DEFAULT_BY_KEY).join(","));return}e.push(o)}),e.length===0?null:{toolPanels:e,defaultToolPanel:e[0].id}}var i={toolPanels:r.parseComponents(t.toolPanels),defaultToolPanel:t.defaultToolPanel,hiddenByDefault:t.hiddenByDefault,position:t.position};return i},r.parseComponents=function(t){var e=[];return t&&t.forEach(function(i){var n=null;if(typeof i=="string"){var o=r.DEFAULT_BY_KEY[i];if(!o){console.warn("AG Grid: the key "+i+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(r.DEFAULT_BY_KEY).join(","));return}n=o}else n=i;e.push(n)}),e},r.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},r.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},r.DEFAULT_BY_KEY={columns:r.DEFAULT_COLUMN_COMP,filters:r.DEFAULT_FILTER_COMP},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var r$=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uv,cv,hv,dv,pv,fv,gv,e_,i_,ap;function RT(){if(ap)return ap;var r=navigator.userAgent,t=r.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],e,i;if(/trident/i.test(t[1]))return e=/\brv[ :]+(\d+)/g.exec(r)||[],i=e[1]!=null?parseFloat(e[1]):0,{name:"IE",version:i};if(t[1]==="Chrome"&&(e=r.match(/\bOPR|Edge\/(\d+)/),e!=null))return i=e[1]!=null?parseFloat(e[1]):0,{name:"Opera",version:i};t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],e=r.match(/version\/(\d+)/i),e!=null&&t.splice(1,1,e[1]);var n=t[0];return i=t[1]!=null?parseFloat(t[1]):0,ap={name:n,version:i},ap}function o$(){return cv===void 0&&(cv=!!document.documentMode),cv}function Ng(){return hv===void 0&&(hv=!o$()&&!!window.StyleMedia),hv}function ll(){return uv===void 0&&(uv=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),uv}function nd(){if(dv===void 0){var r=window;dv=!!r.chrome&&(!!r.chrome.webstore||!!r.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return dv}function UC(){if(pv===void 0){var r=window;pv=typeof r.InstallTrigger<"u"}return pv}function zC(){return fv===void 0&&(fv=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),fv}function oa(){return gv===void 0&&(gv=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream),gv}function Gg(){return!ll()||RT().version>=15}function Wf(r){if(!r)return null;var t=r.tabIndex,e=r.getAttribute("tabIndex");return t===-1&&(e===null||e===""&&!UC())?null:t.toString()}function bT(){if(!document.body)return-1;var r=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,e=document.createElement("div");for(document.body.appendChild(e);;){var i=r*2;if(e.style.height=i+"px",i>t||e.clientHeight!==i)break;r=i}return document.body.removeChild(e),r}function MT(){return i_==null&&TT(),i_}function TT(){var r=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",r.appendChild(t);var e=t.offsetWidth-t.clientWidth;e===0&&t.clientWidth===0&&(e=null),t.parentNode&&t.parentNode.removeChild(t),e!=null&&(i_=e,e_=e===0)}function PT(){return e_==null&&TT(),e_}function s$(){var r,t,e=["webkit","moz","o","ms"],i=document.createElement("div"),n=document.getElementsByTagName("body")[0],o=!1,s;n.appendChild(i),i.setAttribute("style",e.map(function(c){return"-"+c+"-overflow-scrolling: touch"}).concat("overflow-scrolling: touch").join(";"));var a=window.getComputedStyle(i);if(a.overflowScrolling==="touch"&&(o=!0),!o)try{for(var l=r$(e),u=l.next();!u.done;u=l.next())if(s=u.value,a[s+"OverflowScrolling"]==="touch"){o=!0;break}}catch(c){r={error:c}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(r)throw r.error}}return i.parentNode&&i.parentNode.removeChild(i),o}function OT(){return document.body?document.body.clientWidth:window.innerHeight?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:-1}function AT(){return document.body?document.body.clientHeight:window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:-1}var a$=Object.freeze({__proto__:null,getBrowserInfo:RT,isBrowserEdge:Ng,isBrowserSafari:ll,isBrowserChrome:nd,isBrowserFirefox:UC,isMacOsUserAgent:zC,isIOSUserAgent:oa,browserSupportsPreventScroll:Gg,getTabIndex:Wf,getMaxDivHeight:bT,getScrollbarWidth:MT,isInvisibleScrollbar:PT,hasOverflowScrolling:s$,getBodyWidth:OT,getBodyHeight:AT});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function DT(r,t,e){var i={},n=r.filter(function(o){return!t.some(function(s){return s===o})});return n.length>0&&n.forEach(function(o){return i[o]=LT(o,e)}),i}function LT(r,t,e,i){var n=i?FT:IT,o=t.map(function(s){return{value:s,relevance:n(r.toLowerCase(),s.toLocaleLowerCase())}});return o.sort(function(s,a){return a.relevance-s.relevance}),e&&(o=o.filter(function(s){return s.relevance!==0})),o.map(function(s){return s.value})}function n_(r){var t=r.toLowerCase(),e=new Array(t.length-1),i,n,o;for(i=n=0,o=e.length;n<=o;i=n+=1)e[i]=t.slice(i,i+2);return e}function IT(r,t){if(r.length===0&&t.length===0)return 0;var e=n_(r),i=n_(t),n=e.length+i.length,o=0,s,a;for(s=0,a=e.length;s<a;s++){var l=e[s],u=void 0,c=void 0;for(u=0,c=i.length;u<c;u++){var h=i[u];l===h&&o++}}return o>0?2*o/n:0}function FT(r,t){for(var e=r.replace(/\s/g,""),i=t.replace(/\s/g,""),n=0,o=0,s=0;s<e.length;s++){var a=i.indexOf(e[s],o);a!==-1&&(o=a,n+=100-o*100/1e4*100)}return n}var l$=Object.freeze({__proto__:null,fuzzyCheckStrings:DT,fuzzySuggestions:LT,get_bigrams:n_,string_distances:IT,string_weighted_distances:FT});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function yu(r,t){return r.toString().padStart(t,"0")}function NT(r,t){for(var e=[],i=r;i<=t;i++)e.push(i);return e}function Vf(r){return r!==""&&!isNaN(parseFloat(r))&&isFinite(r)}function u$(r){return typeof r=="string"&&(r=parseInt(r,10)),typeof r=="number"?Math.floor(r):null}function c$(r,t){for(var e="",i=0;i<t;i++)e+=String.fromCharCode(r&255),r>>>=8;return e}function h$(r,t,e){return typeof r!="number"?"":jC(Math.round(r*100)/100,t,e)}function jC(r,t,e){return typeof r!="number"?"":r.toString().replace(".",e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+t)}function d$(r){return r==null?null:r.reduce(function(t,e){return t+e},0)}var p$=Object.freeze({__proto__:null,padStartWidthZeros:yu,createArrayOfNumbers:NT,isNumeric:Vf,cleanNumber:u$,decToHex:c$,formatNumberTwoDecimalPlacesAndCommas:h$,formatNumberCommas:jC,sum:d$});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var kf=function(){return kf=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},kf.apply(this,arguments)},vs=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ax=function(r,t){return function(e,i){t(e,i,r)}},f$=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},mv=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(f$(arguments[t]));return r},g$=25,m$=300,v$=5,y$=5,_$=10;function it(r){return r===!0||r==="true"}function vv(r){if(typeof r=="number")return r;if(typeof r=="string")return parseInt(r,10)}function C$(r,t){return r>=0?r:t}function lx(r,t){var e=parseInt(r,10);return Vf(e)&&e>0?e:t}var Et=function(){function r(){this.propertyEventService=new ra,this.domDataKey="__AG_"+Math.random().toString(),this.destroyed=!1}t=r,r.prototype.agWire=function(e,i){this.gridOptions.api=e,this.gridOptions.columnApi=i,this.checkForDeprecated(),this.checkForViolations()},r.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},r.prototype.init=function(){var e=this;this.gridOptions.suppressPropertyNamesCheck!==!0&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.gridOptions.sideBar!=null&&(this.gridOptions.sideBar=xT.parse(this.gridOptions.sideBar));var i=this.useAsyncEvents();if(this.eventService.addGlobalListener(this.globalEventHandler.bind(this),i),this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.isGroupSelectsChildren()&&(this.isRowSelectionMulti()||console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.isRowModelServerSide()&&console.warn("AG Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()&&console.warn("AG Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to use these together on our support forum either, you will get the same answer!"),this.isRowModelServerSide()){var n=function(s){return"AG Grid: '"+s+"' is not supported on the Server-Side Row Model"};dt(this.gridOptions.groupDefaultExpanded)&&console.warn(n("groupDefaultExpanded")),dt(this.gridOptions.groupDefaultExpanded)&&console.warn(n("groupIncludeFooter")),dt(this.gridOptions.groupDefaultExpanded)&&console.warn(n("groupIncludeTotalFooter"))}it(this.gridOptions.enableRangeSelection)?te.assertRegistered(qt.RangeSelectionModule,"enableRangeSelection"):(this.isEnableRangeHandle()||this.isEnableFillHandle())&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true"),this.isGroupRowsSticky()&&(this.isGroupHideOpenParents()&&console.warn("AG Grid: groupRowsSticky and groupHideOpenParents do not work with each other, you need to pick one."),this.isMasterDetail()&&console.warn("AG Grid: groupRowsSticky and masterDetail do not work with each other, you need to pick one."),this.isPagination()&&console.warn("AG Grid: groupRowsSticky and pagination do not work with each other, you need to pick one."));var o=function(s){e.gridOptions.icons&&e.gridOptions.icons[s]&&console.warn("gridOptions.icons."+s+" is no longer supported. For information on how to style checkboxes and radio buttons, see https://www.ag-grid.com/javascript-grid-icons/")};o("radioButtonOff"),o("radioButtonOn"),o("checkboxChecked"),o("checkboxUnchecked"),o("checkboxIndeterminate"),this.getScrollbarWidth()},r.prototype.checkColumnDefProperties=function(){var e=this;this.gridOptions.columnDefs!=null&&this.gridOptions.columnDefs.forEach(function(i){var n=Object.getOwnPropertyNames(i),o=mv(Qy.ALL_PROPERTIES,Qy.FRAMEWORK_PROPERTIES);e.checkProperties(n,o,o,"colDef","https://www.ag-grid.com/javascript-grid-column-properties/")})},r.prototype.checkGridOptionsProperties=function(){var e=Object.getOwnPropertyNames(this.gridOptions),i=mv(Vo.ALL_PROPERTIES,Vo.FRAMEWORK_PROPERTIES,al(O).map(function(o){return Ur.getCallbackForEvent(o)})),n=mv(i,["api","columnApi"]);this.checkProperties(e,n,i,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")},r.prototype.checkProperties=function(e,i,n,o,s){var a=DT(e,i,n);We(a,function(l,u){console.warn("ag-grid: invalid "+o+" property '"+l+"' did you mean any of these: "+u.slice(0,8).join(", "))}),Object.keys(a).length>0&&console.warn("ag-grid: to see all the valid "+o+" properties please check: "+s)},r.prototype.mergeGridCommonParams=function(e){var i=this;if(e){var n=function(o){var s=kf(kf({},o),{api:i.getApi(),columnApi:i.getColumnApi(),context:i.getContext()});return e(s)};return n}return e},r.prototype.getDomDataKey=function(){return this.domDataKey},r.prototype.getDomData=function(e,i){var n=e[this.getDomDataKey()];return n?n[i]:void 0},r.prototype.setDomData=function(e,i,n){var o=this.getDomDataKey(),s=e[o];kt(s)&&(s={},e[o]=s),s[i]=n},r.prototype.isRowSelection=function(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"},r.prototype.isSuppressRowDeselection=function(){return it(this.gridOptions.suppressRowDeselection)},r.prototype.isRowSelectionMulti=function(){return this.gridOptions.rowSelection==="multiple"},r.prototype.isRowMultiSelectWithClick=function(){return it(this.gridOptions.rowMultiSelectWithClick)},r.prototype.getContext=function(){return this.gridOptions.context},r.prototype.isPivotMode=function(){return it(this.gridOptions.pivotMode)},r.prototype.isSuppressExpandablePivotGroups=function(){return it(this.gridOptions.suppressExpandablePivotGroups)},r.prototype.getPivotColumnGroupTotals=function(){return this.gridOptions.pivotColumnGroupTotals},r.prototype.getPivotRowTotals=function(){return this.gridOptions.pivotRowTotals},r.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===H.ROW_MODEL_TYPE_INFINITE},r.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===H.ROW_MODEL_TYPE_VIEWPORT},r.prototype.isRowModelServerSide=function(){return this.gridOptions.rowModelType===H.ROW_MODEL_TYPE_SERVER_SIDE},r.prototype.isRowModelDefault=function(){return kt(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===H.ROW_MODEL_TYPE_CLIENT_SIDE},r.prototype.isFullRowEdit=function(){return this.gridOptions.editType==="fullRow"},r.prototype.isSuppressFocusAfterRefresh=function(){return it(this.gridOptions.suppressFocusAfterRefresh)},r.prototype.isSuppressBrowserResizeObserver=function(){return it(this.gridOptions.suppressBrowserResizeObserver)},r.prototype.isSuppressMaintainUnsortedOrder=function(){return it(this.gridOptions.suppressMaintainUnsortedOrder)},r.prototype.isSuppressClearOnFillReduction=function(){return it(this.gridOptions.suppressClearOnFillReduction)},r.prototype.isShowToolPanel=function(){return it(this.gridOptions.sideBar&&Array.isArray(this.getSideBar().toolPanels))},r.prototype.getSideBar=function(){return this.gridOptions.sideBar},r.prototype.isSuppressTouch=function(){return it(this.gridOptions.suppressTouch)},r.prototype.isMaintainColumnOrder=function(){return it(this.gridOptions.maintainColumnOrder)},r.prototype.isSuppressRowTransform=function(){return it(this.gridOptions.suppressRowTransform)},r.prototype.isSuppressColumnStateEvents=function(){return it(this.gridOptions.suppressColumnStateEvents)},r.prototype.isAllowDragFromColumnsToolPanel=function(){return it(this.gridOptions.allowDragFromColumnsToolPanel)},r.prototype.useAsyncEvents=function(){return!it(this.gridOptions.suppressAsyncEvents)},r.prototype.isEnableCellChangeFlash=function(){return it(this.gridOptions.enableCellChangeFlash)},r.prototype.getCellFlashDelay=function(){return this.gridOptions.cellFlashDelay||500},r.prototype.getCellFadeDelay=function(){return this.gridOptions.cellFadeDelay||1e3},r.prototype.isGroupSelectsChildren=function(){return it(this.gridOptions.groupSelectsChildren)},r.prototype.isSuppressRowHoverHighlight=function(){return it(this.gridOptions.suppressRowHoverHighlight)},r.prototype.isColumnHoverHighlight=function(){return it(this.gridOptions.columnHoverHighlight)},r.prototype.isGroupSelectsFiltered=function(){return it(this.gridOptions.groupSelectsFiltered)},r.prototype.isGroupHideOpenParents=function(){return it(this.gridOptions.groupHideOpenParents)},r.prototype.isGroupMaintainOrder=function(){return it(this.gridOptions.groupMaintainOrder)},r.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef},r.prototype.isColumnsSortingCoupledToGroup=function(){var e,i=this.getAutoGroupColumnDef(),n=this.isRowModelDefault();return n&&!(!((e=i)===null||e===void 0)&&e.comparator)},r.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?this.matchesGroupDisplayType("multipleColumns",this.gridOptions.groupDisplayType):it(this.gridOptions.groupHideOpenParents)},r.prototype.isGroupUseEntireRow=function(e){return e?!1:this.gridOptions.groupDisplayType?this.matchesGroupDisplayType("groupRows",this.gridOptions.groupDisplayType):!1},r.prototype.isRowGroupPanelSuppressSort=function(){return it(this.gridOptions.rowGroupPanelSuppressSort)},r.prototype.isGroupRowsSticky=function(){return it(this.gridOptions.groupRowsSticky)},r.prototype.isGroupSuppressAutoColumn=function(){var e=this.gridOptions.groupDisplayType?this.matchesGroupDisplayType("custom",this.gridOptions.groupDisplayType):!1;return e?!0:this.gridOptions.treeDataDisplayType?this.matchesTreeDataDisplayType("custom",this.gridOptions.treeDataDisplayType):!1},r.prototype.isGroupRemoveSingleChildren=function(){return it(this.gridOptions.groupRemoveSingleChildren)},r.prototype.isGroupRemoveLowestSingleChildren=function(){return it(this.gridOptions.groupRemoveLowestSingleChildren)},r.prototype.isGroupIncludeFooter=function(){return it(this.gridOptions.groupIncludeFooter)},r.prototype.isGroupIncludeTotalFooter=function(){return it(this.gridOptions.groupIncludeTotalFooter)},r.prototype.isGroupSuppressBlankHeader=function(){return it(this.gridOptions.groupSuppressBlankHeader)},r.prototype.isSuppressRowClickSelection=function(){return it(this.gridOptions.suppressRowClickSelection)},r.prototype.isSuppressCellFocus=function(){return it(this.gridOptions.suppressCellFocus)},r.prototype.isSuppressMultiSort=function(){return it(this.gridOptions.suppressMultiSort)},r.prototype.isAlwaysMultiSort=function(){return it(this.gridOptions.alwaysMultiSort)},r.prototype.isMultiSortKeyCtrl=function(){return this.gridOptions.multiSortKey==="ctrl"},r.prototype.isPivotSuppressAutoColumn=function(){return it(this.gridOptions.pivotSuppressAutoColumn)},r.prototype.isSuppressDragLeaveHidesColumns=function(){return it(this.gridOptions.suppressDragLeaveHidesColumns)},r.prototype.isSuppressRowGroupHidesColumns=function(){return it(this.gridOptions.suppressRowGroupHidesColumns)},r.prototype.isSuppressScrollOnNewData=function(){return it(this.gridOptions.suppressScrollOnNewData)},r.prototype.isSuppressScrollWhenPopupsAreOpen=function(){return it(this.gridOptions.suppressScrollWhenPopupsAreOpen)},r.prototype.isRowDragEntireRow=function(){return it(this.gridOptions.rowDragEntireRow)},r.prototype.getRowDragText=function(e){if(e){var i=e.getColDef();if(i.rowDragText)return i.rowDragText}return this.gridOptions.rowDragText},r.prototype.isSuppressRowDrag=function(){return it(this.gridOptions.suppressRowDrag)},r.prototype.isRowDragManaged=function(){return it(this.gridOptions.rowDragManaged)},r.prototype.isSuppressMoveWhenRowDragging=function(){return it(this.gridOptions.suppressMoveWhenRowDragging)},r.prototype.isRowDragMultiRow=function(){return it(this.gridOptions.rowDragMultiRow)},r.prototype.getDomLayout=function(){var e=this.gridOptions.domLayout||H.DOM_LAYOUT_NORMAL,i=[H.DOM_LAYOUT_PRINT,H.DOM_LAYOUT_AUTO_HEIGHT,H.DOM_LAYOUT_NORMAL];return i.indexOf(e)===-1?(ce(function(){return console.warn("AG Grid: "+e+" is not valid for DOM Layout, valid values are "+H.DOM_LAYOUT_NORMAL+", "+H.DOM_LAYOUT_AUTO_HEIGHT+" and "+H.DOM_LAYOUT_PRINT)},"warn about dom layout values"),H.DOM_LAYOUT_NORMAL):e},r.prototype.isSuppressHorizontalScroll=function(){return it(this.gridOptions.suppressHorizontalScroll)},r.prototype.isSuppressMaxRenderedRowRestriction=function(){return it(this.gridOptions.suppressMaxRenderedRowRestriction)},r.prototype.isExcludeChildrenWhenTreeDataFiltering=function(){return it(this.gridOptions.excludeChildrenWhenTreeDataFiltering)},r.prototype.isAlwaysShowHorizontalScroll=function(){return it(this.gridOptions.alwaysShowHorizontalScroll)},r.prototype.isAlwaysShowVerticalScroll=function(){return it(this.gridOptions.alwaysShowVerticalScroll)},r.prototype.isDebounceVerticalScrollbar=function(){return it(this.gridOptions.debounceVerticalScrollbar)},r.prototype.isSuppressLoadingOverlay=function(){return it(this.gridOptions.suppressLoadingOverlay)},r.prototype.isSuppressNoRowsOverlay=function(){return it(this.gridOptions.suppressNoRowsOverlay)},r.prototype.isSuppressFieldDotNotation=function(){return it(this.gridOptions.suppressFieldDotNotation)},r.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData},r.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData},r.prototype.isFunctionsPassive=function(){return it(this.gridOptions.functionsPassive)},r.prototype.isSuppressChangeDetection=function(){return it(this.gridOptions.suppressChangeDetection)},r.prototype.isSuppressAnimationFrame=function(){return it(this.gridOptions.suppressAnimationFrame)},r.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText},r.prototype.isCacheQuickFilter=function(){return it(this.gridOptions.cacheQuickFilter)},r.prototype.isUnSortIcon=function(){return it(this.gridOptions.unSortIcon)},r.prototype.isSuppressMenuHide=function(){return it(this.gridOptions.suppressMenuHide)},r.prototype.isEnterMovesDownAfterEdit=function(){return it(this.gridOptions.enterMovesDownAfterEdit)},r.prototype.isEnterMovesDown=function(){return it(this.gridOptions.enterMovesDown)},r.prototype.isUndoRedoCellEditing=function(){return it(this.gridOptions.undoRedoCellEditing)},r.prototype.getUndoRedoCellEditingLimit=function(){return vv(this.gridOptions.undoRedoCellEditingLimit)},r.prototype.isEnableCellEditingOnBackspace=function(){return it(this.gridOptions.enableCellEditingOnBackspace)},r.prototype.getRowStyle=function(){return this.gridOptions.rowStyle},r.prototype.getRowClass=function(){return this.gridOptions.rowClass},r.prototype.getRowStyleFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getRowStyle)},r.prototype.getRowClassFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getRowClass)},r.prototype.rowClassRules=function(){return this.gridOptions.rowClassRules},r.prototype.isServerSideInfiniteScroll=function(){return it(this.gridOptions.serverSideInfiniteScroll)},r.prototype.getServerSideGroupLevelParamsFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getServerSideGroupLevelParams)},r.prototype.getCreateChartContainerFunc=function(){return this.mergeGridCommonParams(this.gridOptions.createChartContainer)},r.prototype.getPopupParent=function(){return this.gridOptions.popupParent},r.prototype.getBlockLoadDebounceMillis=function(){return this.gridOptions.blockLoadDebounceMillis},r.prototype.getPostProcessPopupFunc=function(){return this.mergeGridCommonParams(this.gridOptions.postProcessPopup)},r.prototype.getPaginationNumberFormatterFunc=function(){return this.mergeGridCommonParams(this.gridOptions.paginationNumberFormatter)},r.prototype.getChildCountFunc=function(){return this.gridOptions.getChildCount},r.prototype.getIsApplyServerSideTransactionFunc=function(){return this.mergeGridCommonParams(this.gridOptions.isApplyServerSideTransaction)},r.prototype.getInitialGroupOrderComparator=function(){var e=this.gridOptions,i=e.initialGroupOrderComparator,n=e.defaultGroupOrderComparator;if(i)return this.mergeGridCommonParams(i);if(n)return function(o){return n(o.nodeA,o.nodeB)}},r.prototype.getIsFullWidthCellFunc=function(){var e=this.gridOptions,i=e.isFullWidthRow,n=e.isFullWidthCell;if(i)return this.mergeGridCommonParams(i);if(n)return function(o){return n(o.rowNode)}},r.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams},r.prototype.isEmbedFullWidthRows=function(){return it(this.gridOptions.embedFullWidthRows)||it(this.gridOptions.deprecatedEmbedFullWidthRows)},r.prototype.isDetailRowAutoHeight=function(){return it(this.gridOptions.detailRowAutoHeight)},r.prototype.getSuppressKeyboardEventFunc=function(){return this.gridOptions.suppressKeyboardEvent},r.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode},r.prototype.getApi=function(){return this.gridOptions.api},r.prototype.getColumnApi=function(){return this.gridOptions.columnApi},r.prototype.isReadOnlyEdit=function(){return it(this.gridOptions.readOnlyEdit)},r.prototype.isImmutableData=function(){var e=this.gridOptions.getRowId!=null,i=it(this.gridOptions.immutableData),n=it(this.gridOptions.resetRowDataOnUpdate);return n?!1:e||i},r.prototype.isEnsureDomOrder=function(){return it(this.gridOptions.ensureDomOrder)},r.prototype.isEnableCharts=function(){return it(this.gridOptions.enableCharts)?te.assertRegistered(qt.GridChartsModule,"enableCharts"):!1},r.prototype.isEnableChartToolPanelsButton=function(){return it(this.gridOptions.enableChartToolPanelsButton)},r.prototype.getColResizeDefault=function(){return this.gridOptions.colResizeDefault},r.prototype.isSingleClickEdit=function(){return it(this.gridOptions.singleClickEdit)},r.prototype.isSuppressClickEdit=function(){return it(this.gridOptions.suppressClickEdit)},r.prototype.isStopEditingWhenCellsLoseFocus=function(){return it(this.gridOptions.stopEditingWhenCellsLoseFocus)},r.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded},r.prototype.getMaxConcurrentDatasourceRequests=function(){var e=vv(this.gridOptions.maxConcurrentDatasourceRequests);if(e==null)return 2;if(!(e<=0))return e},r.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache},r.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize},r.prototype.getPaginationPageSize=function(){return vv(this.gridOptions.paginationPageSize)},r.prototype.isPaginateChildRows=function(){var e=this.isGroupRemoveSingleChildren()||this.isGroupRemoveLowestSingleChildren();return e?!0:it(this.gridOptions.paginateChildRows)},r.prototype.getCacheBlockSize=function(){return lx(this.gridOptions.cacheBlockSize)},r.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount},r.prototype.getServerSideInitialRowCount=function(){var e=this.gridOptions.serverSideInitialRowCount;return typeof e=="number"&&e>0?e:1},r.prototype.isPurgeClosedRowNodes=function(){return it(this.gridOptions.purgeClosedRowNodes)},r.prototype.isSuppressPaginationPanel=function(){return it(this.gridOptions.suppressPaginationPanel)},r.prototype.getRowData=function(){return this.gridOptions.rowData},r.prototype.isEnableRtl=function(){return it(this.gridOptions.enableRtl)},r.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow},r.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow},r.prototype.isAngularCompileRows=function(){return it(this.gridOptions.angularCompileRows)},r.prototype.isAngularCompileFilters=function(){return it(this.gridOptions.angularCompileFilters)},r.prototype.isDebug=function(){return it(this.gridOptions.debug)},r.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs},r.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes},r.prototype.getDatasource=function(){return this.gridOptions.datasource},r.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource},r.prototype.getServerSideDatasource=function(){return this.gridOptions.serverSideDatasource},r.prototype.isAccentedSort=function(){return it(this.gridOptions.accentedSort)},r.prototype.isEnableBrowserTooltips=function(){return it(this.gridOptions.enableBrowserTooltips)},r.prototype.isEnableCellExpressions=function(){return it(this.gridOptions.enableCellExpressions)},r.prototype.isEnableGroupEdit=function(){return it(this.gridOptions.enableGroupEdit)},r.prototype.isSuppressMiddleClickScrolls=function(){return it(this.gridOptions.suppressMiddleClickScrolls)},r.prototype.isPreventDefaultOnContextMenu=function(){return it(this.gridOptions.preventDefaultOnContextMenu)},r.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return it(this.gridOptions.suppressPreventDefaultOnMouseWheel)},r.prototype.isSuppressColumnVirtualisation=function(){return it(this.gridOptions.suppressColumnVirtualisation)},r.prototype.isSuppressRowVirtualisation=function(){return it(this.gridOptions.suppressRowVirtualisation)},r.prototype.isSuppressContextMenu=function(){return it(this.gridOptions.suppressContextMenu)},r.prototype.isAllowContextMenuWithControlKey=function(){return it(this.gridOptions.allowContextMenuWithControlKey)},r.prototype.isSuppressCopyRowsToClipboard=function(){return it(this.gridOptions.suppressCopyRowsToClipboard)},r.prototype.isSuppressCopySingleCellRanges=function(){return it(this.gridOptions.suppressCopySingleCellRanges)},r.prototype.isCopyHeadersToClipboard=function(){return it(this.gridOptions.copyHeadersToClipboard)},r.prototype.isCopyGroupHeadersToClipboard=function(){return it(this.gridOptions.copyGroupHeadersToClipboard)},r.prototype.isSuppressClipboardPaste=function(){return it(this.gridOptions.suppressClipboardPaste)},r.prototype.isSuppressLastEmptyLineOnPaste=function(){return it(this.gridOptions.suppressLastEmptyLineOnPaste)},r.prototype.isPagination=function(){return it(this.gridOptions.pagination)},r.prototype.isSuppressEnterpriseResetOnNewColumns=function(){return it(this.gridOptions.suppressEnterpriseResetOnNewColumns)},r.prototype.getProcessDataFromClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processDataFromClipboard)},r.prototype.getAsyncTransactionWaitMillis=function(){return dt(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:H.BATCH_WAIT_MILLIS},r.prototype.isSuppressMovableColumns=function(){return it(this.gridOptions.suppressMovableColumns)},r.prototype.isAnimateRows=function(){return this.isEnsureDomOrder()?!1:it(this.gridOptions.animateRows)},r.prototype.isSuppressColumnMoveAnimation=function(){return it(this.gridOptions.suppressColumnMoveAnimation)},r.prototype.isSuppressAggFuncInHeader=function(){return it(this.gridOptions.suppressAggFuncInHeader)},r.prototype.isSuppressAggAtRootLevel=function(){return it(this.gridOptions.suppressAggAtRootLevel)},r.prototype.isSuppressAggFilteredOnly=function(){var e=this.getGroupAggFiltering()!==void 0;return e||it(this.gridOptions.suppressAggFilteredOnly)},r.prototype.isRemovePivotHeaderRowWhenSingleValueColumn=function(){return it(this.gridOptions.removePivotHeaderRowWhenSingleValueColumn)},r.prototype.isShowOpenedGroup=function(){return it(this.gridOptions.showOpenedGroup)},r.prototype.isReactUi=function(){return it(this.gridOptions.reactUi)},r.prototype.isSuppressReactUi=function(){return it(this.gridOptions.suppressReactUi)},r.prototype.isEnableRangeSelection=function(){return te.isRegistered(qt.RangeSelectionModule)&&it(this.gridOptions.enableRangeSelection)},r.prototype.isEnableRangeHandle=function(){return it(this.gridOptions.enableRangeHandle)},r.prototype.isEnableFillHandle=function(){return it(this.gridOptions.enableFillHandle)},r.prototype.getFillHandleDirection=function(){var e=this.gridOptions.fillHandleDirection;return e?e!=="x"&&e!=="y"&&e!=="xy"?(ce(function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")},"warn invalid fill direction"),"xy"):e:"xy"},r.prototype.getFillOperation=function(){return this.mergeGridCommonParams(this.gridOptions.fillOperation)},r.prototype.isSuppressMultiRangeSelection=function(){return it(this.gridOptions.suppressMultiRangeSelection)},r.prototype.isPaginationAutoPageSize=function(){return it(this.gridOptions.paginationAutoPageSize)},r.prototype.isRememberGroupStateWhenNewData=function(){return it(this.gridOptions.rememberGroupStateWhenNewData)},r.prototype.getIcons=function(){return this.gridOptions.icons},r.prototype.getGroupAggFiltering=function(){var e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.mergeGridCommonParams(e);if(it(e))return function(){return!0}},r.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs},r.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder},r.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids},r.prototype.isMasterDetail=function(){var e=it(this.gridOptions.masterDetail);return e?te.assertRegistered(qt.MasterDetailModule,"masterDetail"):!1},r.prototype.isKeepDetailRows=function(){return it(this.gridOptions.keepDetailRows)},r.prototype.getKeepDetailRowsCount=function(){var e=this.gridOptions.keepDetailRowsCount;return dt(e)&&e>0?this.gridOptions.keepDetailRowsCount:_$},r.prototype.getIsRowMasterFunc=function(){return this.gridOptions.isRowMaster},r.prototype.getIsRowSelectableFunc=function(){return this.gridOptions.isRowSelectable},r.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams},r.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate},r.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate},r.prototype.isSuppressAutoSize=function(){return it(this.gridOptions.suppressAutoSize)},r.prototype.isEnableCellTextSelection=function(){return it(this.gridOptions.enableCellTextSelection)},r.prototype.isSuppressParentsInRowNodes=function(){return it(this.gridOptions.suppressParentsInRowNodes)},r.prototype.isSuppressClipboardApi=function(){return it(this.gridOptions.suppressClipboardApi)},r.prototype.isFunctionsReadOnly=function(){return it(this.gridOptions.functionsReadOnly)},r.prototype.isEnableCellTextSelect=function(){return it(this.gridOptions.enableCellTextSelection)},r.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef},r.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef},r.prototype.getDefaultExportParams=function(e){if(this.gridOptions.defaultExportParams)return console.warn("AG Grid: Since v25.2 `defaultExportParams`  has been replaced by `default"+Jy(e)+"ExportParams`'"),e==="csv"?this.gridOptions.defaultExportParams:this.gridOptions.defaultExportParams;if(e==="csv"&&this.gridOptions.defaultCsvExportParams)return this.gridOptions.defaultCsvExportParams;if(e==="excel"&&this.gridOptions.defaultExcelExportParams)return this.gridOptions.defaultExcelExportParams},r.prototype.isSuppressCsvExport=function(){return it(this.gridOptions.suppressCsvExport)},r.prototype.isAllowShowChangeAfterFilter=function(){return it(this.gridOptions.allowShowChangeAfterFilter)},r.prototype.isSuppressExcelExport=function(){return it(this.gridOptions.suppressExcelExport)},r.prototype.isSuppressMakeColumnVisibleAfterUnGroup=function(){return it(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup)},r.prototype.getDataPathFunc=function(){return this.gridOptions.getDataPath},r.prototype.getIsServerSideGroupFunc=function(){return this.gridOptions.isServerSideGroup},r.prototype.getIsServerSideGroupOpenByDefaultFunc=function(){return this.mergeGridCommonParams(this.gridOptions.isServerSideGroupOpenByDefault)},r.prototype.getIsGroupOpenByDefaultFunc=function(){return this.mergeGridCommonParams(this.gridOptions.isGroupOpenByDefault)},r.prototype.getServerSideGroupKeyFunc=function(){return this.gridOptions.getServerSideGroupKey},r.prototype.getGroupRowAggFunc=function(){var e=this.gridOptions,i=e.getGroupRowAgg,n=e.groupRowAggNodes;if(i)return this.mergeGridCommonParams(i);if(n)return function(o){return n(o.nodes)}},r.prototype.getContextMenuItemsFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getContextMenuItems)},r.prototype.getMainMenuItemsFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getMainMenuItems)},r.prototype.getRowIdFunc=function(){var e=this.gridOptions,i=e.getRowId,n=e.getRowNodeId;if(i)return this.mergeGridCommonParams(i);if(n)return function(o){return n(o.data)}},r.prototype.getNavigateToNextHeaderFunc=function(){return this.mergeGridCommonParams(this.gridOptions.navigateToNextHeader)},r.prototype.getTabToNextHeaderFunc=function(){return this.mergeGridCommonParams(this.gridOptions.tabToNextHeader)},r.prototype.getNavigateToNextCellFunc=function(){return this.mergeGridCommonParams(this.gridOptions.navigateToNextCell)},r.prototype.getTabToNextCellFunc=function(){return this.mergeGridCommonParams(this.gridOptions.tabToNextCell)},r.prototype.getGridTabIndex=function(){return(this.gridOptions.tabIndex||0).toString()},r.prototype.isTreeData=function(){var e=it(this.gridOptions.treeData);return e?te.assertRegistered(qt.RowGroupingModule,"Tree Data"):!1},r.prototype.isValueCache=function(){return it(this.gridOptions.valueCache)},r.prototype.isValueCacheNeverExpires=function(){return it(this.gridOptions.valueCacheNeverExpires)},r.prototype.isDeltaSort=function(){return it(this.gridOptions.deltaSort)},r.prototype.isAggregateOnlyChangedColumns=function(){return it(this.gridOptions.aggregateOnlyChangedColumns)},r.prototype.getProcessPivotResultColDefFunc=function(){return this.gridOptions.processPivotResultColDef||this.gridOptions.processSecondaryColDef},r.prototype.getProcessPivotResultColGroupDefFunc=function(){return this.gridOptions.processPivotResultColGroupDef||this.gridOptions.processSecondaryColGroupDef},r.prototype.getSendToClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.sendToClipboard)},r.prototype.getProcessRowPostCreateFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processRowPostCreate)},r.prototype.getProcessCellForClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processCellForClipboard)},r.prototype.getProcessHeaderForClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processHeaderForClipboard)},r.prototype.getProcessGroupHeaderForClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processGroupHeaderForClipboard)},r.prototype.getProcessCellFromClipboardFunc=function(){return this.mergeGridCommonParams(this.gridOptions.processCellFromClipboard)},r.prototype.getViewportRowModelPageSize=function(){return lx(this.gridOptions.viewportRowModelPageSize,v$)},r.prototype.getViewportRowModelBufferSize=function(){return C$(this.gridOptions.viewportRowModelBufferSize,y$)},r.prototype.isServerSideSortAllLevels=function(){var e=it(this.gridOptions.serverSideSortAllLevels);return!this.isRowModelServerSide()&&e?(ce(function(){return console.warn("AG Grid: The `serverSideSortAllLevels` property can only be used with the server side row model.")},"serverSideSortAllLevels"),!1):e},r.prototype.isServerSideFilterAllLevels=function(){var e=it(this.gridOptions.serverSideFilterAllLevels);return!this.isRowModelServerSide()&&e?(ce(function(){return console.warn("AG Grid: The `serverSideFilterAllLevels` property can only be used with the server side row model.")},"serverSideFilterAllLevels"),!1):e},r.prototype.isServerSideSortOnServer=function(){var e=it(this.gridOptions.serverSideSortOnServer);return!this.isRowModelServerSide()&&e?(ce(function(){return console.warn("AG Grid: The `serverSideSortOnServer` property can only be used with the server side row model.")},"serverSideSortOnServerRowModel"),!1):this.isTreeData()&&e?(ce(function(){return console.warn("AG Grid: The `serverSideSortOnServer` property cannot be used while using tree data.")},"serverSideSortOnServerTreeData"),!1):e},r.prototype.isServerSideFilterOnServer=function(){var e=it(this.gridOptions.serverSideFilterOnServer);return!this.isRowModelServerSide()&&e?(ce(function(){return console.warn("AG Grid: The `serverSideFilterOnServer` property can only be used with the server side row model.")},"serverSideFilterOnServerRowModel"),!1):this.isTreeData()&&e?(ce(function(){return console.warn("AG Grid: The `serverSideFilterOnServer` property cannot be used while using tree data.")},"serverSideFilterOnServerTreeData"),!1):e},r.prototype.getPostSortFunc=function(){var e=this.gridOptions,i=e.postSortRows,n=e.postSort;if(i)return this.mergeGridCommonParams(i);if(n)return function(o){return n(o.nodes)}},r.prototype.getChartToolbarItemsFunc=function(){return this.mergeGridCommonParams(this.gridOptions.getChartToolbarItems)},r.prototype.getChartThemeOverrides=function(){return this.gridOptions.chartThemeOverrides},r.prototype.getCustomChartThemes=function(){return this.gridOptions.customChartThemes},r.prototype.getChartThemes=function(){return this.gridOptions.chartThemes||["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"]},r.prototype.getChartToolPanelsDef=function(){return this.gridOptions.chartToolPanelsDef},r.prototype.getClipboardDelimiter=function(){return dt(this.gridOptions.clipboardDelimiter)?this.gridOptions.clipboardDelimiter:"	"},r.prototype.setProperty=function(e,i,n){n===void 0&&(n=!1);var o=this.gridOptions[e];if(n||o!==i){this.gridOptions[e]=i;var s={type:e,currentValue:i,previousValue:o};this.propertyEventService.dispatchEvent(s)}},r.prototype.addEventListener=function(e,i){this.propertyEventService.addEventListener(e,i)},r.prototype.removeEventListener=function(e,i){this.propertyEventService.removeEventListener(e,i)},r.prototype.isSkipHeaderOnAutoSize=function(){return!!this.gridOptions.skipHeaderOnAutoSize},r.prototype.getAutoSizePadding=function(){var e=this.gridOptions.autoSizePadding;return e!=null&&e>=0?e:20},r.prototype.getHeaderHeight=function(){return typeof this.gridOptions.headerHeight=="number"?this.gridOptions.headerHeight:this.getFromTheme(25,"headerHeight")},r.prototype.getFloatingFiltersHeight=function(){return typeof this.gridOptions.floatingFiltersHeight=="number"?this.gridOptions.floatingFiltersHeight:this.getFromTheme(25,"headerHeight")},r.prototype.getGroupHeaderHeight=function(){return typeof this.gridOptions.groupHeaderHeight=="number"?this.gridOptions.groupHeaderHeight:this.getHeaderHeight()},r.prototype.getPivotHeaderHeight=function(){return typeof this.gridOptions.pivotHeaderHeight=="number"?this.gridOptions.pivotHeaderHeight:this.getHeaderHeight()},r.prototype.getPivotGroupHeaderHeight=function(){return typeof this.gridOptions.pivotGroupHeaderHeight=="number"?this.gridOptions.pivotGroupHeaderHeight:this.getGroupHeaderHeight()},r.prototype.isExternalFilterPresent=function(){return typeof this.gridOptions.isExternalFilterPresent=="function"?this.gridOptions.isExternalFilterPresent({api:this.getApi(),columnApi:this.getColumnApi(),context:this.getContext()}):!1},r.prototype.doesExternalFilterPass=function(e){return typeof this.gridOptions.doesExternalFilterPass=="function"?this.gridOptions.doesExternalFilterPass(e):!1},r.prototype.getTooltipDelay=function(e){var i=this.gridOptions,n=i.tooltipShowDelay,o=i.tooltipHideDelay,s=e==="show"?n:o,a=Jy(e);return dt(s)?(s<0&&ce(function(){return console.warn("ag-grid: tooltip"+a+"Delay should not be lower than 0")},"tooltip"+a+"DelayWarn"),Math.max(200,s)):null},r.prototype.isTooltipMouseTrack=function(){return it(this.gridOptions.tooltipMouseTrack)},r.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(){return it(this.gridOptions.suppressModelUpdateAfterUpdateTransaction)},r.prototype.getDocument=function(){var e=null;return this.gridOptions.getDocument&&dt(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&dt(e)?e:document},r.prototype.getMinColWidth=function(){var e=this.gridOptions.minColWidth;if(dt(e)&&e>t.MIN_COL_WIDTH)return this.gridOptions.minColWidth;var i=this.getFromTheme(null,"headerCellMinWidth");return dt(i)?Math.max(i,t.MIN_COL_WIDTH):t.MIN_COL_WIDTH},r.prototype.getMaxColWidth=function(){return this.gridOptions.maxColWidth&&this.gridOptions.maxColWidth>t.MIN_COL_WIDTH?this.gridOptions.maxColWidth:null},r.prototype.getColWidth=function(){return typeof this.gridOptions.colWidth!="number"||this.gridOptions.colWidth<t.MIN_COL_WIDTH?200:this.gridOptions.colWidth},r.prototype.getRowBuffer=function(){var e=this.gridOptions.rowBuffer;return typeof e=="number"?e<0&&(ce(function(){return console.warn("AG Grid: rowBuffer should not be negative")},"warn rowBuffer negative"),this.gridOptions.rowBuffer=e=0):e=H.ROW_BUFFER_SIZE,e},r.prototype.getRowBufferInPixels=function(){var e=this.getRowBuffer(),i=this.getRowHeightAsNumber();return e*i},r.prototype.getScrollbarWidth=function(){if(this.scrollbarWidth==null){var e=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0,i=e?this.gridOptions.scrollbarWidth:MT();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:O.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},r.prototype.checkForDeprecated=function(){var e=this.gridOptions;e.deprecatedEmbedFullWidthRows&&console.warn("AG Grid: since v21.2, deprecatedEmbedFullWidthRows has been replaced with embedFullWidthRows."),e.rowDeselection&&console.warn("AG Grid: since v24.x, rowDeselection is deprecated and the behaviour is true by default. Please use `suppressRowDeselection` to prevent rows from being deselected."),e.enableMultiRowDragging&&(e.rowDragMultiRow=!0,delete e.enableMultiRowDragging,console.warn("AG Grid: since v26.1, `enableMultiRowDragging` is deprecated. Please use `rowDragMultiRow`."));var i=function(s,a,l){e[s]!=null&&(console.warn("AG Grid: since version "+l+", '"+s+"' is deprecated / renamed, please use the new property name '"+a+"' instead."),e[a]==null&&(e[a]=e[s]))};if(i("batchUpdateWaitMillis","asyncTransactionWaitMillis","23.1.x"),i("deltaRowDataMode","immutableData","23.1.x"),i("serverSideFilteringAlwaysResets","serverSideFilterAllLevels","28.0.0"),i("serverSideSortingAlwaysResets","serverSideSortAllLevels","28.0.0"),(e.immutableColumns||e.deltaColumnMode)&&console.warn("AG Grid: since v24.0, immutableColumns and deltaColumnMode properties are gone. The grid now works like this as default. To keep column order maintained, set grid property applyColumnDefOrder=true"),i("suppressSetColumnStateEvents","suppressColumnStateEvents","24.0.x"),e.groupRowInnerRenderer||e.groupRowInnerRendererParams||e.groupRowInnerRendererFramework){console.warn("AG Grid: since v24.0, grid properties groupRowInnerRenderer, groupRowInnerRendererFramework and groupRowInnerRendererParams are no longer used."),console.warn("  Instead use the grid properties groupRowRendererParams.innerRenderer, groupRowRendererParams.innerRendererFramework and groupRowRendererParams.innerRendererParams."),console.warn("  For example instead of this:"),console.warn('    groupRowInnerRenderer: "myRenderer"'),console.warn("    groupRowInnerRendererParams: {x: a}"),console.warn("  Replace with this:"),console.warn("    groupRowRendererParams: {"),console.warn('      innerRenderer: "myRenderer",'),console.warn("      innerRendererParams: {x: a}"),console.warn("    }"),console.warn("  We have copied the properties over for you. However to stop this error message, please change your application code."),e.groupRowRendererParams||(e.groupRowRendererParams={});var n=e.groupRowRendererParams;e.groupRowInnerRenderer&&(n.innerRenderer=e.groupRowInnerRenderer),e.groupRowInnerRendererParams&&(n.innerRendererParams=e.groupRowInnerRendererParams),e.groupRowInnerRendererFramework&&(n.innerRendererFramework=e.groupRowInnerRendererFramework)}if(e.rememberGroupStateWhenNewData&&console.warn("AG Grid: since v24.0, grid property rememberGroupStateWhenNewData is deprecated. This feature was provided before Transaction Updates worked (which keep group state). Now that transaction updates are possible and they keep group state, this feature is no longer needed."),e.detailCellRendererParams&&e.detailCellRendererParams.autoHeight&&(console.warn("AG Grid: since v24.1, grid property detailCellRendererParams.autoHeight is replaced with grid property detailRowAutoHeight. This allows this feature to work when you provide a custom DetailCellRenderer"),e.detailRowAutoHeight=!0),e.suppressKeyboardEvent&&console.warn(`AG Grid: since v24.1 suppressKeyboardEvent in the gridOptions has been deprecated and will be removed in
                 future versions of AG Grid. If you need this to be set for every column use the defaultColDef property.`),e.suppressEnterpriseResetOnNewColumns&&console.warn("AG Grid: since v25, grid property suppressEnterpriseResetOnNewColumns is deprecated. This was a temporary property to allow changing columns in Server Side Row Model without triggering a reload. Now that it is possible to dynamically change columns in the grid, this is no longer needed."),e.suppressColumnStateEvents&&console.warn('AG Grid: since v25, grid property suppressColumnStateEvents no longer works due to a refactor that we did. It should be possible to achieve similar using event.source, which would be "api" if the event was due to setting column state via the API'),e.defaultExportParams&&console.warn("AG Grid: since v25.2, the grid property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`."),e.stopEditingWhenGridLosesFocus&&(console.warn("AG Grid: since v25.2.2, the grid property `stopEditingWhenGridLosesFocus` has been replaced by `stopEditingWhenCellsLoseFocus`."),e.stopEditingWhenCellsLoseFocus=!0),e.applyColumnDefOrder&&console.warn("AG Grid: since v26.0, the grid property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true"),e.groupMultiAutoColumn&&(console.warn("AG Grid: since v26.0, the grid property `groupMultiAutoColumn` has been replaced by `groupDisplayType = 'multipleColumns'`"),e.groupDisplayType="multipleColumns"),e.groupUseEntireRow&&(console.warn("AG Grid: since v26.0, the grid property `groupUseEntireRow` has been replaced by `groupDisplayType = 'groupRows'`"),e.groupDisplayType="groupRows"),e.groupSuppressAutoColumn){var o=e.treeData?"treeDataDisplayType":"groupDisplayType";console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `"+o+" = 'custom'`"),e.groupDisplayType="custom"}e.defaultGroupOrderComparator&&console.warn("AG Grid: since v27.2, the grid property `defaultGroupOrderComparator` is deprecated and has been replaced by `initialGroupOrderComparator` and now receives a single params object."),e.defaultGroupSortComparator&&(console.warn("AG Grid: since v26.0, the grid property `defaultGroupSortComparator` has been replaced by `initialGroupOrderComparator`"),e.defaultGroupOrderComparator=e.defaultGroupSortComparator),e.groupRowAggNodes&&console.warn("AG Grid: since v27.2, the grid property `groupRowAggNodes` is deprecated and has been replaced by `getGroupRowAgg` and now receives a single params object."),e.postSort&&console.warn("AG Grid: since v27.2, the grid property `postSort` is deprecated and has been replaced by `postSortRows` and now receives a single params object."),e.isFullWidthCell&&console.warn("AG Grid: since v27.2, the grid property `isFullWidthCell` is deprecated and has been replaced by `isFullWidthRow` and now receives a single params object."),e.localeTextFunc&&console.warn("AG Grid: since v27.2, the grid property `localeTextFunc` is deprecated and has been replaced by `getLocaleText` and now receives a single params object."),e.colWidth&&console.warn("AG Grid: since v26.1, the grid property `colWidth` is deprecated and should be set via `defaultColDef.width`."),e.minColWidth&&console.warn("AG Grid: since v26.1, the grid property `minColWidth` is deprecated and should be set via `defaultColDef.minWidth`."),e.maxColWidth&&console.warn("AG Grid: since v26.1, the grid property `maxColWidth` is deprecated and should be set via `defaultColDef.maxWidth`."),e.reactUi&&console.warn("AG Grid: since v27.0, React UI is on by default, so no need for reactUi=true. To turn it off, set suppressReactUi=true."),e.suppressReactUi&&console.warn("AG Grid: The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."),e.suppressCellSelection&&(console.warn("AG Grid: since v27.0, `suppressCellSelection` has been replaced by `suppressCellFocus`."),e.suppressCellFocus=e.suppressCellSelection),e.getRowNodeId&&console.warn("AG Grid: since v27.1, `getRowNodeId` is deprecated and has been replaced by `getRowId`. The difference: if getRowId() is implemented then immutable data is enabled by default."),e.immutableData&&(e.getRowId?console.warn("AG Grid: since v27.1, `immutableData` is deprecated. With the `getRowId` callback implemented, immutable data is enabled by default so you can remove `immutableData=true`."):console.warn("AG Grid: since v27.1, `immutableData` is deprecated. To enable immutable data you must implement the `getRowId()` callback.")),e.clipboardDeliminator&&(console.warn("AG Grid: since v27.1, `clipboardDeliminator` has been replaced by `clipboardDelimiter`."),e.clipboardDelimiter=e.clipboardDeliminator),i("processSecondaryColDef","processPivotResultColDef","28.0.x"),i("processSecondaryColGroupDef","processPivotResultColGroupDef","28.0.x"),e.serverSideStoreType&&(console.warn("AG Grid: since v28.0, `serverSideStoreType` has been replaced by `serverSideInfiniteScroll`. Set to true to use Partial Store, and false to use Full Store."),e.serverSideInfiniteScroll=e.serverSideStoreType==="partial"),i("getServerSideStoreParams","getServerSideGroupLevelParams","28.0.x")},r.prototype.checkForViolations=function(){this.isTreeData()&&this.treeDataViolations()},r.prototype.treeDataViolations=function(){this.isRowModelDefault()&&kt(this.getDataPathFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data."),this.isRowModelServerSide()&&(kt(this.getIsServerSideGroupFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),kt(this.getServerSideGroupKeyFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},r.prototype.getLocaleTextFunc=function(){var e=this,i=this.gridOptions,n=i.localeText,o=i.getLocaleText,s=i.localeTextFunc;return o?function(a,l,u){var c={key:a,defaultValue:l,variableValues:u,api:e.getApi(),columnApi:e.getColumnApi(),context:e.getContext()};return o(c)}:s||function(a,l,u){var c=n&&n[a];if(c&&u&&u.length)for(var h=0;!(h>=u.length);){var d=c.indexOf("${variable}");if(d===-1)break;c=c.replace("${variable}",u[h++])}return c!=null?c:l}},r.prototype.globalEventHandler=function(e,i){if(!this.destroyed){var n=Ur.getCallbackForEvent(e);typeof this.gridOptions[n]=="function"&&this.gridOptions[n](i)}},r.prototype.setRowHeightVariable=function(e){var i=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),n=e+"px";i!=n&&this.eGridDiv.style.setProperty("--ag-line-height",n)},r.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||kt(this.gridOptions.rowHeight))return this.getDefaultRowHeight();var e=this.gridOptions.rowHeight;return e&&this.isNumeric(e)?(this.setRowHeightVariable(e),e):(console.warn("AG Grid row height must be a number if not using standard row model"),this.getDefaultRowHeight())},r.prototype.isGetRowHeightFunction=function(){return typeof this.gridOptions.getRowHeight=="function"},r.prototype.getRowHeightForNode=function(e,i,n){if(i===void 0&&(i=!1),n==null&&(n=this.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(i)return{height:n,estimated:!0};var o={node:e,data:e.data},s=this.mergeGridCommonParams(this.gridOptions.getRowHeight)(o);if(this.isNumeric(s))return s===0&&ce(function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")},"invalidRowHeight"),{height:Math.max(1,s),estimated:!1}}if(e.detail&&this.isMasterDetail())return this.isDetailRowAutoHeight()?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:m$,estimated:!1};var a=this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:n;return{height:a,estimated:!1}},r.prototype.isDynamicRowHeight=function(){return typeof this.gridOptions.getRowHeight=="function"},r.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},r.prototype.chartMenuPanelWidth=function(){return this.environment.chartMenuPanelWidth()},r.prototype.isNumeric=function(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)},r.prototype.getFromTheme=function(e,i){var n=this.environment.getTheme().theme;return n&&n.indexOf("ag-theme")===0?this.environment.getSassVariable(n,i):e},r.prototype.getDefaultRowHeight=function(){return this.getFromTheme(g$,"rowHeight")},r.prototype.matchesGroupDisplayType=function(e,i){var n=["groupRows","multipleColumns","custom","singleColumn"];return n.indexOf(i)<0?(console.warn("AG Grid: '"+i+"' is not a valid groupDisplayType value - possible values are: '"+n.join("', '")+"'"),!1):i===e},r.prototype.matchesTreeDataDisplayType=function(e,i){var n=["auto","custom"];return n.indexOf(i)<0?(console.warn("AG Grid: '"+i+"' is not a valid treeDataDisplayType value - possible values are: '"+n.join("', '")+"'"),!1):i===e};var t;return r.MIN_COL_WIDTH=10,r.PROP_HEADER_HEIGHT="headerHeight",r.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren",r.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN="groupRemoveLowestSingleChildren",r.PROP_GROUP_DISPLAY_TYPE="groupDisplayType",r.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight",r.PROP_SUPPRESS_CLIPBOARD_PASTE="suppressClipboardPaste",r.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight",r.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight",r.PROP_NAVIGATE_TO_NEXT_CELL="navigateToNextCell",r.PROP_TAB_TO_NEXT_CELL="tabToNextCell",r.PROP_NAVIGATE_TO_NEXT_HEADER="navigateToNextHeader",r.PROP_TAB_TO_NEXT_HEADER="tabToNextHeader",r.PROP_IS_EXTERNAL_FILTER_PRESENT="isExternalFilterPresent",r.PROP_DOES_EXTERNAL_FILTER_PASS="doesExternalFilterPass",r.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight",r.PROP_SUPPRESS_ROW_CLICK_SELECTION="suppressRowClickSelection",r.PROP_SUPPRESS_ROW_DRAG="suppressRowDrag",r.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG="suppressMoveWhenRowDragging",r.PROP_GET_ROW_CLASS="getRowClass",r.PROP_GET_ROW_STYLE="getRowStyle",r.PROP_GET_ROW_HEIGHT="getRowHeight",r.PROP_POPUP_PARENT="popupParent",r.PROP_DOM_LAYOUT="domLayout",r.PROP_ROW_CLASS="rowClass",r.PROP_FILL_HANDLE_DIRECTION="fillHandleDirection",r.PROP_GROUP_ROW_AGG_NODES="groupRowAggNodes",r.PROP_GET_GROUP_ROW_AGG="getGroupRowAgg",r.PROP_GET_BUSINESS_KEY_FOR_NODE="getBusinessKeyForNode",r.PROP_GET_CHILD_COUNT="getChildCount",r.PROP_PROCESS_ROW_POST_CREATE="processRowPostCreate",r.PROP_GET_ROW_NODE_ID="getRowNodeId",r.PROP_GET_ROW_ID="getRowId",r.PROP_IS_FULL_WIDTH_CELL="isFullWidthCell",r.PROP_IS_FULL_WIDTH_ROW="isFullWidthRow",r.PROP_IS_ROW_SELECTABLE="isRowSelectable",r.PROP_IS_ROW_MASTER="isRowMaster",r.PROP_POST_SORT="postSort",r.PROP_POST_SORT_ROWS="postSortRows",r.PROP_GET_DOCUMENT="getDocument",r.PROP_POST_PROCESS_POPUP="postProcessPopup",r.PROP_DEFAULT_GROUP_ORDER_COMPARATOR="defaultGroupOrderComparator",r.PROP_INITIAL_GROUP_ORDER_COMPARATOR="initialGroupOrderComparator",r.PROP_PAGINATION_NUMBER_FORMATTER="paginationNumberFormatter",r.PROP_GET_CONTEXT_MENU_ITEMS="getContextMenuItems",r.PROP_GET_MAIN_MENU_ITEMS="getMainMenuItems",r.PROP_PROCESS_CELL_FOR_CLIPBOARD="processCellForClipboard",r.PROP_PROCESS_CELL_FROM_CLIPBOARD="processCellFromClipboard",r.PROP_SEND_TO_CLIPBOARD="sendToClipboard",r.PROP_PROCESS_PIVOT_RESULT_COL_DEF="processPivotResultColDef",r.PROP_PROCESS_PIVOT_RESULT_COL_GROUP_DEF="processPivotResultColGroupDef",r.PROP_GET_CHART_TOOLBAR_ITEMS="getChartToolbarItems",r.PROP_GET_SERVER_SIDE_GROUP_PARAMS="getServerSideGroupLevelParams",r.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT="isServerSideGroupOpenByDefault",r.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION="isApplyServerSideTransaction",r.PROP_IS_SERVER_SIDE_GROUP="isServerSideGroup",r.PROP_GET_SERVER_SIDE_GROUP_KEY="getServerSideGroupKey",r.PROP_AUTO_GROUP_COLUMN_DEF="autoGroupColumnDef",r.PROP_DEFAULT_COL_DEF="defaultColDef",vs([b("gridOptions")],r.prototype,"gridOptions",void 0),vs([b("eventService")],r.prototype,"eventService",void 0),vs([b("environment")],r.prototype,"environment",void 0),vs([b("eGridDiv")],r.prototype,"eGridDiv",void 0),vs([ax(0,Cn("gridApi")),ax(1,Cn("columnApi"))],r.prototype,"agWire",null),vs([Yi],r.prototype,"destroy",null),vs([Ct],r.prototype,"init",null),r=t=vs([Dt("gridOptionsWrapper")],r),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var w$=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bi=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},S$=function(r,t){return function(e,i){t(e,i,r)}},E$=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]]);return e},ux=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},x$=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},fa=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(x$(arguments[t]));return r},R$=function(r){w$(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsHash="",e.headerViewportColumns=[],e.viewportColumnsCenter=[],e.headerViewportColumnsCenter=[],e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.flexColsCalculatedAtLestOnce=!1,e}return t.prototype.init=function(){var e=this;this.suppressColumnVirtualisation=this.gridOptionsWrapper.isSuppressColumnVirtualisation();var i=this.gridOptionsWrapper.isPivotMode();this.isPivotSettingAllowed(i)&&(this.pivotMode=i),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_GROUP_DISPLAY_TYPE,function(){return e.onAutoGroupColumnDefChanged()}),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_AUTO_GROUP_COLUMN_DEF,function(){return e.onAutoGroupColumnDefChanged()}),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_DEFAULT_COL_DEF,function(){return e.onDefaultColDefChanged()})},t.prototype.onAutoGroupColumnDefChanged=function(){this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged")},t.prototype.onDefaultColDefChanged=function(){this.forceRecreateAutoGroups=!0,this.createColumnsFromColumnDefs(!0)},t.prototype.setColumnDefs=function(e,i){i===void 0&&(i="api");var n=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(n,i)},t.prototype.createColumnsFromColumnDefs=function(e,i){var n=this;i===void 0&&(i="api");var o=e?this.compareColumnStatesAndRaiseEvents(i):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var s=this.primaryColumns,a=this.primaryColumnTree,l=this.columnFactory.createColumnTree(this.columnDefs,!0,a);this.primaryColumnTree=l.columnTree,this.primaryHeaderRowCount=l.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(h){return n.primaryColumnsMap[h.getId()]=h}),this.extractRowGroupColumns(i,s),this.extractPivotColumns(i,s),this.extractValueColumns(i,s),this.ready=!0;var u=this.gridColsArePrimary===void 0,c=this.gridColsArePrimary||u;c&&(this.updateGridColumns(),e&&!this.gridOptionsWrapper.isMaintainColumnOrder()&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(i),this.checkViewportColumns()),this.dispatchEverythingChanged(i),o&&o(),this.dispatchNewColumnsLoaded()},t.prototype.dispatchNewColumnsLoaded=function(){var e={type:O.EVENT_NEW_COLUMNS_LOADED};this.eventService.dispatchEvent(e)},t.prototype.dispatchEverythingChanged=function(e){e===void 0&&(e="api");var i={type:O.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(i)},t.prototype.orderGridColumnsLikePrimary=function(){var e=this,i=this.primaryColumns;!i||(this.gridColumns.sort(function(n,o){var s=i.indexOf(n),a=i.indexOf(o),l=s>=0,u=a>=0;if(l&&u)return s-a;if(l)return 1;if(u)return-1;var c=e.gridColumns.indexOf(n),h=e.gridColumns.indexOf(o);return c-h}),this.gridColumns=this.placeLockedColumns(this.gridColumns))},t.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},t.prototype.setViewport=function(){this.gridOptionsWrapper.isEnableRtl()?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},t.prototype.getDisplayedColumnsStartingAt=function(e){for(var i=e,n=[];i!=null;)n.push(i),i=this.getDisplayedColAfter(i);return n},t.prototype.checkViewportColumns=function(){if(this.displayedColumnsCenter!=null){var e=this.extractViewport();if(!!e){var i={type:O.EVENT_VIRTUAL_COLUMNS_CHANGED};this.eventService.dispatchEvent(i)}}},t.prototype.setViewportPosition=function(e,i){(e!==this.scrollWidth||i!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=i,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())},t.prototype.isPivotMode=function(){return this.pivotMode},t.prototype.isPivotSettingAllowed=function(e){return e&&this.gridOptionsWrapper.isTreeData()?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0},t.prototype.setPivotMode=function(e,i){if(i===void 0&&(i="api"),!(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode))){this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(i);var n={type:O.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(n)}},t.prototype.getSecondaryPivotColumn=function(e,i){if(kt(this.secondaryColumns))return null;var n=this.getPrimaryColumn(i),o=null;return this.secondaryColumns.forEach(function(s){var a=s.getColDef().pivotKeys,l=s.getColDef().pivotValueColumn,u=Ws(a,e),c=l===n;u&&c&&(o=s)}),o},t.prototype.setBeans=function(e){this.logger=e.create("columnModel")},t.prototype.setFirstRightAndLastLeftPinned=function(e){var i,n;this.gridOptionsWrapper.isEnableRtl()?(i=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,n=this.displayedColumnsRight?Ue(this.displayedColumnsRight):null):(i=this.displayedColumnsLeft?Ue(this.displayedColumnsLeft):null,n=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(o){o.setLastLeftPinned(o===i,e),o.setFirstRightPinned(o===n,e)})},t.prototype.autoSizeColumns=function(e){var i=this,n=e.columns,o=e.skipHeader,s=e.skipHeaderGroups,a=e.stopAtGroup,l=e.source,u=l===void 0?"api":l;this.animationFrameService.flushAllFrames();for(var c=[],h=-1,d=o!=null?o:this.gridOptionsWrapper.isSkipHeaderOnAutoSize(),p=s!=null?s:d;h!==0;)h=0,this.actionOnGridColumns(n,function(f){if(c.indexOf(f)>=0)return!1;var m=i.autoWidthCalculator.getPreferredWidthForColumn(f,d);if(m>0){var g=i.normaliseColumnWidth(f,m);f.setActualWidth(g,u),c.push(f),h++}return!0},u);p||this.autoSizeColumnGroupsByColumns(n,a),this.fireColumnResizedEvent(c,!0,"autosizeColumns")},t.prototype.fireColumnResizedEvent=function(e,i,n,o){if(o===void 0&&(o=null),e&&e.length){var s={type:O.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:o,finished:i,source:n};this.eventService.dispatchEvent(s)}},t.prototype.autoSizeColumn=function(e,i,n){n===void 0&&(n="api"),e&&this.autoSizeColumns({columns:[e],skipHeader:i,skipHeaderGroups:!0,source:n})},t.prototype.autoSizeColumnGroupsByColumns=function(e,i){var n,o,s,a,l=new Set,u=this.getGridColumns(e);u.forEach(function(C){for(var w=C.getParent();w&&w!=i;)w.isPadding()||l.add(w),w=w.getParent()});var c,h=[];try{for(var d=ux(l),p=d.next();!p.done;p=d.next()){var f=p.value;try{for(var m=(s=void 0,ux(this.ctrlsService.getHeaderRowContainerCtrls())),g=m.next();!g.done;g=m.next()){var y=g.value;if(c=y.getHeaderCtrlForColumn(f),c)break}}catch(C){s={error:C}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}c&&c.resizeLeafColumnsToFit()}}catch(C){n={error:C}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return h},t.prototype.autoSizeAllColumns=function(e,i){i===void 0&&(i="api");var n=this.getAllDisplayedColumns();this.autoSizeColumns({columns:n,skipHeader:e,source:i})},t.prototype.getColumnsFromTree=function(e){var i=[],n=function(o){for(var s=0;s<o.length;s++){var a=o[s];a instanceof me?i.push(a):a instanceof pi&&n(a.getChildren())}};return n(e),i},t.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},t.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},t.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},t.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},t.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},t.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},t.prototype.isColumnDisplayed=function(e){return this.getAllDisplayedColumns().indexOf(e)>=0},t.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},t.prototype.getViewportColumns=function(){return this.viewportColumns},t.prototype.getDisplayedLeftColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft},t.prototype.getDisplayedRightColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight},t.prototype.getDisplayedColumnsForRow=function(e,i,n,o){for(var s=[],a=null,l=function(h){var d=i[h],p=i.length-h,f=Math.min(d.getColSpan(e),p),m=[d];if(f>1){for(var g=f-1,y=1;y<=g;y++)m.push(i[h+y]);h+=g}var C;if(n?(C=!1,m.forEach(function(S){n(S)&&(C=!0)})):C=!0,C){if(s.length===0&&a){var w=o?o(d):!1;w&&s.push(a)}s.push(d)}a=d,u=h},u,c=0;c<i.length;c++)l(c),c=u;return s},t.prototype.getViewportCenterColumnsForRow=function(e){var i=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var n=function(s){var a=s.getLeft();return dt(a)&&a>i.viewportLeft},o=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,o,n)},t.prototype.getAriaColumnIndex=function(e){return this.getAllGridColumns().indexOf(e)+1},t.prototype.isColumnInHeaderViewport=function(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)},t.prototype.isColumnInRowViewport=function(e){if(e.isAutoHeight())return!0;var i=e.getLeft()||0,n=i+e.getActualWidth(),o=this.viewportLeft-200,s=this.viewportRight+200,a=i<o&&n<o,l=i>s&&n>s;return!a&&!l},t.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},t.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},t.prototype.updatePrimaryColumnList=function(e,i,n,o,s,a){var l=this;if(a===void 0&&(a="api"),!(!e||Un(e))){var u=!1;if(e.forEach(function(h){var d=l.getPrimaryColumn(h);if(!!d){if(n){if(i.indexOf(d)>=0)return;i.push(d)}else{if(i.indexOf(d)<0)return;en(i,d)}o(d),u=!0}}),!!u){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(a);var c={type:s,columns:i,column:i.length===1?i[0]:null,source:a};this.eventService.dispatchEvent(c)}}},t.prototype.setRowGroupColumns=function(e,i){i===void 0&&(i="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,O.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),i)},t.prototype.setRowGroupActive=function(e,i,n){e!==i.isRowGroupActive()&&(i.setRowGroupActive(e,n),e&&!this.gridOptionsWrapper.isSuppressRowGroupHidesColumns()&&this.setColumnVisible(i,!1,n),!e&&!this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()&&this.setColumnVisible(i,!0,n))},t.prototype.addRowGroupColumn=function(e,i){i===void 0&&(i="api"),e&&this.addRowGroupColumns([e],i)},t.prototype.addRowGroupColumns=function(e,i){i===void 0&&(i="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),O.EVENT_COLUMN_ROW_GROUP_CHANGED,i)},t.prototype.removeRowGroupColumns=function(e,i){i===void 0&&(i="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),O.EVENT_COLUMN_ROW_GROUP_CHANGED,i)},t.prototype.removeRowGroupColumn=function(e,i){i===void 0&&(i="api"),e&&this.removeRowGroupColumns([e],i)},t.prototype.addPivotColumns=function(e,i){i===void 0&&(i="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!0,function(n){return n.setPivotActive(!0,i)},O.EVENT_COLUMN_PIVOT_CHANGED,i)},t.prototype.setPivotColumns=function(e,i){i===void 0&&(i="api"),this.setPrimaryColumnList(e,this.pivotColumns,O.EVENT_COLUMN_PIVOT_CHANGED,function(n,o){o.setPivotActive(n,i)},i)},t.prototype.addPivotColumn=function(e,i){i===void 0&&(i="api"),this.addPivotColumns([e],i)},t.prototype.removePivotColumns=function(e,i){i===void 0&&(i="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!1,function(n){return n.setPivotActive(!1,i)},O.EVENT_COLUMN_PIVOT_CHANGED,i)},t.prototype.removePivotColumn=function(e,i){i===void 0&&(i="api"),this.removePivotColumns([e],i)},t.prototype.setPrimaryColumnList=function(e,i,n,o,s){var a=this;i.length=0,dt(e)&&e.forEach(function(l){var u=a.getPrimaryColumn(l);u&&i.push(u)}),(this.primaryColumns||[]).forEach(function(l){var u=i.indexOf(l)>=0;o(u,l)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s),this.fireColumnEvent(n,i,s)},t.prototype.setValueColumns=function(e,i){i===void 0&&(i="api"),this.setPrimaryColumnList(e,this.valueColumns,O.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),i)},t.prototype.setValueActive=function(e,i,n){if(e!==i.isValueActive()&&(i.setValueActive(e,n),e&&!i.getAggFunc())){var o=this.aggFuncService.getDefaultAggFunc(i);i.setAggFunc(o)}},t.prototype.addValueColumns=function(e,i){i===void 0&&(i="api"),this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),O.EVENT_COLUMN_VALUE_CHANGED,i)},t.prototype.addValueColumn=function(e,i){i===void 0&&(i="api"),e&&this.addValueColumns([e],i)},t.prototype.removeValueColumn=function(e,i){i===void 0&&(i="api"),this.removeValueColumns([e],i)},t.prototype.removeValueColumns=function(e,i){i===void 0&&(i="api"),this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),O.EVENT_COLUMN_VALUE_CHANGED,i)},t.prototype.normaliseColumnWidth=function(e,i){var n=e.getMinWidth();dt(n)&&i<n&&(i=n);var o=e.getMaxWidth();return dt(o)&&e.isGreaterThanMax(i)&&(i=o),i},t.prototype.getPrimaryOrGridColumn=function(e){var i=this.getPrimaryColumn(e);return i||this.getGridColumn(e)},t.prototype.setColumnWidths=function(e,i,n,o){var s=this;o===void 0&&(o="api");var a=[];e.forEach(function(l){var u=s.getPrimaryOrGridColumn(l.key);if(!!u){a.push({width:l.newWidth,ratios:[1],columns:[u]});var c=s.gridOptionsWrapper.getColResizeDefault()==="shift";if(c&&(i=!i),i){var h=s.getDisplayedColAfter(u);if(!h)return;var d=u.getActualWidth()-l.newWidth,p=h.getActualWidth()+d;a.push({width:p,ratios:[1],columns:[h]})}}}),a.length!==0&&this.resizeColumnSets({resizeSets:a,finished:n,source:o})},t.prototype.checkMinAndMaxWidthsForSet=function(e){var i=e.columns,n=e.width,o=0,s=0,a=!0;i.forEach(function(c){var h=c.getMinWidth();o+=h||0;var d=c.getMaxWidth();dt(d)&&d>0?s+=d:a=!1});var l=n>=o,u=!a||n<=s;return l&&u},t.prototype.resizeColumnSets=function(e){var i=this,n=e.resizeSets,o=e.finished,s=e.source,a=!n||n.every(function(f){return i.checkMinAndMaxWidthsForSet(f)});if(!a){if(o){var l=n&&n.length>0?n[0].columns:null;this.fireColumnResizedEvent(l,o,s)}return}var u=[],c=[];n.forEach(function(f){var m=f.width,g=f.columns,y=f.ratios,C={},w={};g.forEach(function(x){return c.push(x)});for(var S=!0,E=0,M=function(){if(E++,E>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";S=!1;var x=[],T=0,N=m;g.forEach(function(Q,z){var V=w[Q.getId()];if(V)N-=C[Q.getId()];else{x.push(Q);var W=y[z];T+=W}});var K=1/T;x.forEach(function(Q,z){var V=z===x.length-1,W;V?W=N:(W=Math.round(y[z]*m*K),N-=W);var q=Q.getMinWidth(),Y=Q.getMaxWidth();dt(q)&&W<q?(W=q,w[Q.getId()]=!0,S=!0):dt(Y)&&Y>0&&W>Y&&(W=Y,w[Q.getId()]=!0,S=!0),C[Q.getId()]=W})};S;){var L=M();if(L==="break")break}g.forEach(function(x){var T=C[x.getId()],N=x.getActualWidth();N!==T&&(x.setActualWidth(T,s),u.push(x))})});var h=u.length>0,d=[];h&&(d=this.refreshFlexedColumns({resizingCols:c,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());var p=c.concat(d);(h||o)&&this.fireColumnResizedEvent(p,o,s,d)},t.prototype.setColumnAggFunc=function(e,i,n){if(n===void 0&&(n="api"),!!e){var o=this.getPrimaryColumn(e);!o||(o.setAggFunc(i),this.fireColumnEvent(O.EVENT_COLUMN_VALUE_CHANGED,[o],n))}},t.prototype.fireColumnEvent=function(e,i,n){var o={type:e,columns:i,column:i&&i.length==1?i[0]:null,source:n};this.eventService.dispatchEvent(o)},t.prototype.moveRowGroupColumn=function(e,i,n){n===void 0&&(n="api");var o=this.rowGroupColumns[e];this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(i,0,o);var s={type:O.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:this.rowGroupColumns.length===1?this.rowGroupColumns[0]:null,source:n};this.eventService.dispatchEvent(s)},t.prototype.moveColumns=function(e,i,n){if(n===void 0&&(n="api"),this.columnAnimationService.start(),i>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+i),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}var o=this.getGridColumns(e),s=!this.doesMovePassRules(o,i);if(!s){qy(this.gridColumns,o,i),this.updateDisplayedColumns(n);var a={type:O.EVENT_COLUMN_MOVED,columns:o,column:o.length===1?o[0]:null,toIndex:i,source:n};this.eventService.dispatchEvent(a),this.columnAnimationService.finish()}},t.prototype.doesMovePassRules=function(e,i){var n=this.getProposedColumnOrder(e,i);return this.doesOrderPassRules(n)},t.prototype.doesOrderPassRules=function(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))},t.prototype.getProposedColumnOrder=function(e,i){var n=this.gridColumns.slice();return qy(n,e,i),n},t.prototype.sortColumnsLikeGridColumns=function(e){var i=this;if(!(!e||e.length<=1)){var n=e.filter(function(o){return i.gridColumns.indexOf(o)<0}).length>0;n||e.sort(function(o,s){var a=i.gridColumns.indexOf(o),l=i.gridColumns.indexOf(s);return a-l})}},t.prototype.doesMovePassLockedPositions=function(e){var i=0,n=!0,o=function(s){return s?s===!0||s==="left"?0:2:1};return e.forEach(function(s){var a=o(s.getColDef().lockPosition);a<i&&(n=!1),i=a}),n},t.prototype.doesMovePassMarryChildren=function(e){var i=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(n){if(n instanceof pi){var o=n,s=o.getColGroupDef(),a=s&&s.marryChildren;if(!!a){var l=[];o.getLeafColumns().forEach(function(p){var f=e.indexOf(p);l.push(f)});var u=Math.max.apply(Math,l),c=Math.min.apply(Math,l),h=u-c,d=o.getLeafColumns().length-1;h>d&&(i=!1)}}}),i},t.prototype.moveColumn=function(e,i,n){n===void 0&&(n="api"),this.moveColumns([e],i,n)},t.prototype.moveColumnByIndex=function(e,i,n){n===void 0&&(n="api");var o=this.gridColumns[e];this.moveColumn(o,i,n)},t.prototype.getColumnDefs=function(){var e=this;if(!!this.primaryColumns){var i=this.primaryColumns.slice();return this.gridColsArePrimary?i.sort(function(n,o){return e.gridColumns.indexOf(n)-e.gridColumns.indexOf(o)}):this.lastPrimaryOrder&&i.sort(function(n,o){return e.lastPrimaryOrder.indexOf(n)-e.lastPrimaryOrder.indexOf(o)}),this.columnDefFactory.buildColumnDefs(i,this.rowGroupColumns,this.pivotColumns)}},t.prototype.getBodyContainerWidth=function(){return this.bodyWidth},t.prototype.getContainerWidth=function(e){switch(e){case H.PINNED_LEFT:return this.leftWidth;case H.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}},t.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedColumnsCenter),i=this.getWidthOfColsInList(this.displayedColumnsLeft),n=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e;var o=this.bodyWidth!==e||this.leftWidth!==i||this.rightWidth!==n;if(o){this.bodyWidth=e,this.leftWidth=i,this.rightWidth=n;var s={type:O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(s)}},t.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},t.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},t.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},t.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},t.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},t.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},t.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},t.prototype.getDisplayedColumns=function(e){switch(e){case H.PINNED_LEFT:return this.getDisplayedLeftColumns();case H.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},t.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},t.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},t.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},t.prototype.getAllGridColumns=function(){return this.gridColumns},t.prototype.isEmpty=function(){return Un(this.gridColumns)},t.prototype.isRowGroupEmpty=function(){return Un(this.rowGroupColumns)},t.prototype.setColumnVisible=function(e,i,n){n===void 0&&(n="api"),this.setColumnsVisible([e],i,n)},t.prototype.setColumnsVisible=function(e,i,n){i===void 0&&(i=!1),n===void 0&&(n="api"),this.applyColumnState({state:e.map(function(o){return{colId:typeof o=="string"?o:o.getColId(),hide:!i}})},n)},t.prototype.setColumnPinned=function(e,i,n){n===void 0&&(n="api"),e&&this.setColumnsPinned([e],i,n)},t.prototype.setColumnsPinned=function(e,i,n){if(n===void 0&&(n="api"),this.gridOptionsWrapper.getDomLayout()==="print"){console.warn("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();var o;i===!0||i===H.PINNED_LEFT?o=H.PINNED_LEFT:i===H.PINNED_RIGHT?o=H.PINNED_RIGHT:o=null,this.actionOnGridColumns(e,function(s){return s.getPinned()!==o?(s.setPinned(o),!0):!1},n,function(){var s={type:O.EVENT_COLUMN_PINNED,pinned:o,column:null,columns:null,source:n};return s}),this.columnAnimationService.finish()},t.prototype.actionOnGridColumns=function(e,i,n,o){var s=this;if(!Un(e)){var a=[];if(e.forEach(function(u){var c=s.getGridColumn(u);if(!!c){var h=i(c);h!==!1&&a.push(c)}}),!!a.length&&(this.updateDisplayedColumns(n),dt(o)&&o)){var l=o();l.columns=a,l.column=a.length===1?a[0]:null,this.eventService.dispatchEvent(l)}}},t.prototype.getDisplayedColBefore=function(e){var i=this.getAllDisplayedColumns(),n=i.indexOf(e);return n>0?i[n-1]:null},t.prototype.getDisplayedColAfter=function(e){var i=this.getAllDisplayedColumns(),n=i.indexOf(e);return n<i.length-1?i[n+1]:null},t.prototype.getDisplayedGroupAfter=function(e){return this.getDisplayedGroupAtDirection(e,"After")},t.prototype.getDisplayedGroupBefore=function(e){return this.getDisplayedGroupAtDirection(e,"Before")},t.prototype.getDisplayedGroupAtDirection=function(e,i){for(var n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),o=e.getDisplayedLeafColumns(),s=i==="After"?Ue(o):o[0],a="getDisplayedCol"+i;;){var l=this[a](s);if(!l)return null;var u=this.getColumnGroupAtLevel(l,n);if(u!==e)return u}},t.prototype.getColumnGroupAtLevel=function(e,i){for(var n=e.getParent(),o,s;;){var a=n.getProvidedColumnGroup();if(o=a.getLevel(),s=n.getPaddingLevel(),o+s<=i)break;n=n.getParent()}return n},t.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},t.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},t.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var e;return(e=[]).concat.apply(e,fa([this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]]))},t.prototype.getPrimaryAndAutoGroupCols=function(){var e;return(e=[]).concat.apply(e,fa([this.primaryColumns||[],this.groupAutoColumns||[]]))},t.prototype.getPrimaryAndSecondaryColumns=function(){var e;return(e=[]).concat.apply(e,fa([this.primaryColumns||[],this.secondaryColumns||[]]))},t.prototype.createStateItemFromColumn=function(e){var i=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,n=e.isPivotActive()?this.pivotColumns.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,s=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null,u={colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:n,flex:l};return u},t.prototype.getColumnState=function(){if(kt(this.primaryColumns)||!this.isAlive())return[];var e=this.getPrimaryAndSecondaryAndAutoColumns(),i=e.map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(i),i},t.prototype.orderColumnStateList=function(e){var i=jo(this.gridColumns.map(function(n,o){return[n.getColId(),o]}));e.sort(function(n,o){var s=i.has(n.colId)?i.get(n.colId):-1,a=i.has(o.colId)?i.get(o.colId):-1;return s-a})},t.prototype.resetColumnState=function(e){e===void 0&&(e="api");var i=this.getColumnsFromTree(this.primaryColumnTree),n=[],o=1e3,s=1e3,a=[];this.groupAutoColumns&&(a=a.concat(this.groupAutoColumns)),i&&(a=a.concat(i)),a.forEach(function(l){var u=function(L,x){return L!=null?L:x!=null?x:null},c=l.getColDef(),h=u(c.sort,c.initialSort),d=u(c.sortIndex,c.initialSortIndex),p=u(c.hide,c.initialHide),f=u(c.pinned,c.initialPinned),m=u(c.width,c.initialWidth),g=u(c.flex,c.initialFlex),y=u(c.rowGroupIndex,c.initialRowGroupIndex),C=u(c.rowGroup,c.initialRowGroup);y==null&&(C==null||C==!1)&&(y=null,C=null);var w=u(c.pivotIndex,c.initialPivotIndex),S=u(c.pivot,c.initialPivot);w==null&&(S==null||S==!1)&&(w=null,S=null);var E=u(c.aggFunc,c.initialAggFunc),M={colId:l.getColId(),sort:h,sortIndex:d,hide:p,pinned:f,width:m,flex:g,rowGroup:C,rowGroupIndex:y,pivot:S,pivotIndex:w,aggFunc:E};kt(y)&&C&&(M.rowGroupIndex=o++),kt(w)&&S&&(M.pivotIndex=s++),n.push(M)}),this.applyColumnState({state:n,applyOrder:!0},e)},t.prototype.applyColumnState=function(e,i){var n=this;if(Un(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var o=function(u,c,h){var d=n.compareColumnStatesAndRaiseEvents(i);n.autoGroupsNeedBuilding=!0;var p=c.slice(),f={},m={},g=[],y=[],C=0,w=n.rowGroupColumns.slice(),S=n.pivotColumns.slice();u.forEach(function(x){var T=x.colId||"",N=T.startsWith(H.GROUP_AUTO_COLUMN_ID);if(N){g.push(x),y.push(x);return}var K=h(T);K?(n.syncColumnWithStateItem(K,x,e.defaultState,f,m,!1,i),en(p,K)):(y.push(x),C+=1)});var E=function(x){return n.syncColumnWithStateItem(x,null,e.defaultState,f,m,!1,i)};p.forEach(E);var M=function(x,T,N,K){var Q=x[N.getId()],z=x[K.getId()],V=Q!=null,W=z!=null;if(V&&W)return Q-z;if(V)return-1;if(W)return 1;var q=T.indexOf(N),Y=T.indexOf(K),X=q>=0,B=Y>=0;return X&&B?q-Y:X?-1:1};n.rowGroupColumns.sort(M.bind(n,f,w)),n.pivotColumns.sort(M.bind(n,m,S)),n.updateGridColumns();var L=n.groupAutoColumns?n.groupAutoColumns.slice():[];return g.forEach(function(x){var T=n.getAutoColumn(x.colId);en(L,T),n.syncColumnWithStateItem(T,x,e.defaultState,null,null,!0,i)}),L.forEach(E),n.applyOrderAfterApplyState(e),n.updateDisplayedColumns(i),n.dispatchEverythingChanged(i),d(),{unmatchedAndAutoStates:y,unmatchedCount:C}};this.columnAnimationService.start();var s=o(e.state||[],this.primaryColumns||[],function(u){return n.getPrimaryColumn(u)}),a=s.unmatchedAndAutoStates,l=s.unmatchedCount;return(a.length>0||dt(e.defaultState))&&(l=o(a,this.secondaryColumns||[],function(u){return n.getSecondaryColumn(u)}).unmatchedCount),this.columnAnimationService.finish(),l===0},t.prototype.applyOrderAfterApplyState=function(e){var i=this;if(!(!e.applyOrder||!e.state)){var n=[],o={};e.state.forEach(function(a){if(!(!a.colId||o[a.colId])){var l=i.gridColumnsMap[a.colId];l&&(n.push(l),o[a.colId]=!0)}});var s=0;if(this.gridColumns.forEach(function(a){var l=a.getColId(),u=o[l]!=null;if(!u){var c=l.startsWith(H.GROUP_AUTO_COLUMN_ID);c?Oh(n,a,s++):n.push(a)}}),n=this.placeLockedColumns(n),!this.doesMovePassMarryChildren(n)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=n}},t.prototype.compareColumnStatesAndRaiseEvents=function(e){var i=this,n={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},o=this.getColumnState(),s={};return o.forEach(function(a){s[a.colId]=a}),function(){if(!i.gridOptionsWrapper.isSuppressColumnStateEvents()){var a=i.getPrimaryAndSecondaryAndAutoColumns(),l=function(y,C,w,S){var E=C.map(S),M=w.map(S),L=Ws(E,M);if(!L){var x={type:y,columns:w,column:w.length===1?w[0]:null,source:e};i.eventService.dispatchEvent(x)}},u=function(y){var C=[];return a.forEach(function(w){var S=s[w.getColId()];S&&y(S,w)&&C.push(w)}),C},c=function(y){return y.getColId()};l(O.EVENT_COLUMN_ROW_GROUP_CHANGED,n.rowGroupColumns,i.rowGroupColumns,c),l(O.EVENT_COLUMN_PIVOT_CHANGED,n.pivotColumns,i.pivotColumns,c);var h=function(y,C){var w=y.aggFunc!=null,S=w!=C.isValueActive(),E=w&&y.aggFunc!=C.getAggFunc();return S||E},d=u(h);d.length>0&&i.fireColumnEvent(O.EVENT_COLUMN_VALUE_CHANGED,i.valueColumns,e);var p=function(y,C){return y.width!=C.getActualWidth()};i.fireColumnResizedEvent(u(p),!0,e);var f=function(y,C){return y.pinned!=C.getPinned()};i.raiseColumnPinnedEvent(u(f),e);var m=function(y,C){return y.hide==C.isVisible()};i.raiseColumnVisibleEvent(u(m),e);var g=function(y,C){return y.sort!=C.getSort()||y.sortIndex!=C.getSortIndex()};u(g).length>0&&i.sortController.dispatchSortChangedEvents(e),i.raiseColumnMovedEvent(o,e)}}},t.prototype.raiseColumnPinnedEvent=function(e,i){if(!!e.length){var n=e.length===1?e[0]:null,o=this.getCommonValue(e,function(a){return a.getPinned()}),s={type:O.EVENT_COLUMN_PINNED,pinned:o!=null?o:null,columns:e,column:n,source:i};this.eventService.dispatchEvent(s)}},t.prototype.getCommonValue=function(e,i){if(!(!e||e.length==0)){for(var n=i(e[0]),o=1;o<e.length;o++)if(n!==i(e[o]))return;return n}},t.prototype.raiseColumnVisibleEvent=function(e,i){if(!!e.length){var n=e.length===1?e[0]:null,o=this.getCommonValue(e,function(a){return a.isVisible()}),s={type:O.EVENT_COLUMN_VISIBLE,visible:o,columns:e,column:n,source:i};this.eventService.dispatchEvent(s)}},t.prototype.raiseColumnMovedEvent=function(e,i){var n=this,o=this.getColumnState(),s={};o.forEach(function(d){return s[d.colId]=d});var a={};e.forEach(function(d){s[d.colId]&&(a[d.colId]=!0)});var l=e.filter(function(d){return a[d.colId]}),u=o.filter(function(d){return a[d.colId]}),c=[];if(u.forEach(function(d,p){var f=l&&l[p];if(f&&f.colId!==d.colId){var m=n.getGridColumn(f.colId);m&&c.push(m)}}),!!c.length){var h={type:O.EVENT_COLUMN_MOVED,columns:c,column:null,source:i};this.eventService.dispatchEvent(h)}},t.prototype.syncColumnWithStateItem=function(e,i,n,o,s,a,l){if(!!e){var u=function(T,N){var K={value1:void 0,value2:void 0},Q=!1;return i&&(i[T]!==void 0&&(K.value1=i[T],Q=!0),dt(N)&&i[N]!==void 0&&(K.value2=i[N],Q=!0)),!Q&&n&&(n[T]!==void 0&&(K.value1=n[T]),dt(N)&&n[N]!==void 0&&(K.value2=n[N])),K},c=u("hide").value1;c!==void 0&&e.setVisible(!c,l);var h=u("pinned").value1;h!==void 0&&e.setPinned(h);var d=this.columnUtils.calculateColMinWidth(e.getColDef()),p=u("flex").value1;p!==void 0&&e.setFlex(p);var f=e.getFlex()<=0;if(f){var m=u("width").value1;m!=null&&d!=null&&m>=d&&e.setActualWidth(m,l)}var g=u("sort").value1;g!==void 0&&(g===H.SORT_DESC||g===H.SORT_ASC?e.setSort(g,l):e.setSort(void 0,l));var y=u("sortIndex").value1;if(y!==void 0&&e.setSortIndex(y),!(a||!e.isPrimary())){var C=u("aggFunc").value1;C!==void 0&&(typeof C=="string"?(e.setAggFunc(C),e.isValueActive()||(e.setValueActive(!0,l),this.valueColumns.push(e))):(dt(C)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,l),en(this.valueColumns,e))));var w=u("rowGroup","rowGroupIndex"),S=w.value1,E=w.value2;(S!==void 0||E!==void 0)&&(typeof E=="number"||S?(e.isRowGroupActive()||(e.setRowGroupActive(!0,l),this.rowGroupColumns.push(e)),o&&typeof E=="number"&&(o[e.getId()]=E)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,l),en(this.rowGroupColumns,e)));var M=u("pivot","pivotIndex"),L=M.value1,x=M.value2;(L!==void 0||x!==void 0)&&(typeof x=="number"||L?(e.isPivotActive()||(e.setPivotActive(!0,l),this.pivotColumns.push(e)),s&&typeof x=="number"&&(s[e.getId()]=x)):e.isPivotActive()&&(e.setPivotActive(!1,l),en(this.pivotColumns,e)))}}},t.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))},t.prototype.getColumns=function(e,i){var n=[];return e&&e.forEach(function(o){var s=i(o);s&&n.push(s)}),n},t.prototype.getColumnWithValidation=function(e){if(e==null)return null;var i=this.getGridColumn(e);return i||console.warn("AG Grid: could not find column "+e),i},t.prototype.getPrimaryColumn=function(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null},t.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)},t.prototype.getSecondaryColumn=function(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null},t.prototype.getColumn=function(e,i,n){if(!e)return null;if(typeof e=="string"&&n[e])return n[e];for(var o=0;o<i.length;o++)if(this.columnsMatch(i[o],e))return i[o];return this.getAutoColumn(e)},t.prototype.getSourceColumnsForGroupColumn=function(e){var i=e.getColDef().showRowGroup;if(!i)return null;if(i===!0)return this.rowGroupColumns.slice(0);var n=this.getPrimaryColumn(i);return n?[n]:null},t.prototype.getAutoColumn=function(e){var i=this;return!this.groupAutoColumns||!dt(this.groupAutoColumns)||kt(this.groupAutoColumns)?null:this.groupAutoColumns.find(function(n){return i.columnsMatch(n,e)})||null},t.prototype.columnsMatch=function(e,i){var n=e===i,o=e.getColDef()===i,s=e.getColId()==i;return n||o||s},t.prototype.getDisplayNameForColumn=function(e,i,n){if(n===void 0&&(n=!1),!e)return null;var o=this.getHeaderName(e.getColDef(),e,null,null,i);return n?this.wrapHeaderNameWithAggFunc(e,o):o},t.prototype.getDisplayNameForProvidedColumnGroup=function(e,i,n){var o=i?i.getColGroupDef():null;return o?this.getHeaderName(o,null,e,i,n):null},t.prototype.getDisplayNameForColumnGroup=function(e,i){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),i)},t.prototype.getHeaderName=function(e,i,n,o,s){var a=e.headerValueGetter;if(a){var l={colDef:e,column:i,columnGroup:n,providedColumnGroup:o,location:s,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};return typeof a=="function"?a(l):typeof a=="string"?this.expressionService.evaluate(a,l):(console.warn("ag-grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return BC(e.field)}return""},t.prototype.wrapHeaderNameWithAggFunc=function(e,i){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader())return i;var n=e.getColDef().pivotValueColumn,o=dt(n),s=null,a;if(o){var l=this.gridOptionsWrapper.isRemovePivotHeaderRowWhenSingleValueColumn()&&this.valueColumns.length===1,u=e.getColDef().pivotTotalColumnIds!==void 0;if(l&&!u)return i;s=n?n.getAggFunc():null,a=!0}else{var c=e.isValueActive(),h=this.pivotMode||!this.isRowGroupEmpty();c&&h?(s=e.getAggFunc(),a=!0):a=!1}if(a){var d=typeof s=="string"?s:"func",p=this.gridOptionsWrapper.getLocaleTextFunc(),f=p(d,d);return f+"("+i+")"}return i},t.prototype.getColumnGroup=function(e,i){if(!e)return null;if(e instanceof on)return e;var n=this.getAllDisplayedTrees(),o=typeof i=="number",s=null;return this.columnUtils.depthFirstAllColumnTreeSearch(n,function(a){if(a instanceof on){var l=a,u=void 0;o?u=e===l.getGroupId()&&i===l.getInstanceId():u=e===l.getGroupId(),u&&(s=l)}}),s},t.prototype.isReady=function(){return this.ready},t.prototype.extractValueColumns=function(e,i){this.valueColumns=this.extractColumns(i,this.valueColumns,function(n,o){return n.setValueActive(o,e)},function(){},function(){},function(n){var o=n.aggFunc;if(o===null||o==="")return null;if(o!==void 0)return!!o},function(n){return n.initialAggFunc!=null&&n.initialAggFunc!=""}),this.valueColumns.forEach(function(n){var o=n.getColDef();o.aggFunc!=null&&o.aggFunc!=""?n.setAggFunc(o.aggFunc):n.getAggFunc()||n.setAggFunc(o.initialAggFunc)})},t.prototype.extractRowGroupColumns=function(e,i){this.rowGroupColumns=this.extractColumns(i,this.rowGroupColumns,function(n,o){return n.setRowGroupActive(o,e)},function(n){return n.rowGroupIndex},function(n){return n.initialRowGroupIndex},function(n){return n.rowGroup},function(n){return n.initialRowGroup})},t.prototype.extractColumns=function(e,i,n,o,s,a,l){e===void 0&&(e=[]),i===void 0&&(i=[]);var u=[],c=[];(this.primaryColumns||[]).forEach(function(p){var f=e.indexOf(p)<0,m=p.getColDef(),g=no(a(m)),y=no(l(m)),C=pr(o(m)),w=pr(s(m)),S,E=g!==void 0,M=C!==void 0,L=y!==void 0,x=w!==void 0;if(E?S=g:M?C===null?S=!1:S=C>=0:f?L?S=y:x?S=w!=null&&w>=0:S=!1:S=i.indexOf(p)>=0,S){var T=f?C!=null||w!=null:C!=null;T?u.push(p):c.push(p)}});var h=function(p){var f=o(p.getColDef()),m=s(p.getColDef());return f!=null?f:m};u.sort(function(p,f){var m=h(p),g=h(f);return m===g?0:m<g?-1:1});var d=[].concat(u);return i.forEach(function(p){c.indexOf(p)>=0&&d.push(p)}),c.forEach(function(p){d.indexOf(p)<0&&d.push(p)}),i.forEach(function(p){d.indexOf(p)<0&&n(p,!1)}),d.forEach(function(p){i.indexOf(p)<0&&n(p,!0)}),d},t.prototype.extractPivotColumns=function(e,i){this.pivotColumns=this.extractColumns(i,this.pivotColumns,function(n,o){return n.setPivotActive(o,e)},function(n){return n.pivotIndex},function(n){return n.initialPivotIndex},function(n){return n.pivot},function(n){return n.initialPivot})},t.prototype.resetColumnGroupState=function(e){e===void 0&&(e="api");var i=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(n){if(n instanceof pi){var o=n.getColGroupDef(),s={groupId:n.getGroupId(),open:o?o.openByDefault:void 0};i.push(s)}}),this.setColumnGroupState(i,e)},t.prototype.getColumnGroupState=function(){var e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(i){i instanceof pi&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e},t.prototype.setColumnGroupState=function(e,i){var n=this;i===void 0&&(i="api"),this.columnAnimationService.start();var o=[];e.forEach(function(s){var a=s.groupId,l=s.open,u=n.getProvidedColumnGroup(a);!u||u.isExpanded()!==l&&(n.logger.log("columnGroupOpened("+u.getGroupId()+","+l+")"),u.setExpanded(l),o.push(u))}),this.updateGroupsAndDisplayedColumns(i),this.setFirstRightAndLastLeftPinned(i),o.forEach(function(s){var a={type:O.EVENT_COLUMN_GROUP_OPENED,columnGroup:s};n.eventService.dispatchEvent(a)}),this.columnAnimationService.finish()},t.prototype.setColumnGroupOpened=function(e,i,n){n===void 0&&(n="api");var o;e instanceof pi?o=e.getId():o=e||"",this.setColumnGroupState([{groupId:o,open:i}],n)},t.prototype.getProvidedColumnGroup=function(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");var i=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(n){n instanceof pi&&n.getId()===e&&(i=n)}),i},t.prototype.calculateColumnsForDisplay=function(){var e=this,i;return this.pivotMode&&kt(this.secondaryColumns)?i=this.gridColumns.filter(function(n){var o=e.groupAutoColumns&&Xn(e.groupAutoColumns,n),s=e.valueColumns&&Xn(e.valueColumns,n);return o||s}):i=this.gridColumns.filter(function(n){var o=e.groupAutoColumns&&Xn(e.groupAutoColumns,n);return o||n.isVisible()}),i},t.prototype.checkColSpanActiveInCols=function(e){var i=!1;return e.forEach(function(n){dt(n.getColDef().colSpan)&&(i=!0)}),i},t.prototype.calculateColumnsForGroupDisplay=function(){var e=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};var i=function(n){var o=n.getColDef(),s=o.showRowGroup;o&&dt(s)&&(e.groupDisplayColumns.push(n),typeof s=="string"?e.groupDisplayColumnsMap[s]=n:s===!0&&e.getRowGroupColumns().forEach(function(a){e.groupDisplayColumnsMap[a.getId()]=n}))};this.gridColumns.forEach(i),this.groupAutoColumns&&this.groupAutoColumns.forEach(i)},t.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},t.prototype.getGroupDisplayColumnForGroup=function(e){return this.groupDisplayColumnsMap[e]},t.prototype.updateDisplayedColumns=function(e){var i=this.calculateColumnsForDisplay();this.buildDisplayedTrees(i),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)},t.prototype.isSecondaryColumnsPresent=function(){return dt(this.secondaryColumns)},t.prototype.setSecondaryColumns=function(e,i){var n=this;i===void 0&&(i="api");var o=e&&e.length>0;if(!(!o&&kt(this.secondaryColumns))){if(o){this.processSecondaryColumnDefinitions(e);var s=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(function(a){return n.secondaryColumnsMap[a.getId()]=a}),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(i)}},t.prototype.processSecondaryColumnDefinitions=function(e){var i=this.gridOptionsWrapper.getProcessPivotResultColDefFunc(),n=this.gridOptionsWrapper.getProcessPivotResultColGroupDefFunc();if(!(!i&&!n)){var o=function(s){s.forEach(function(a){var l=dt(a.children);if(l){var u=a;n&&n(u),o(u.children)}else{var c=a;i&&i(c)}})};e&&o(e)}},t.prototype.updateGridColumns=function(){var e=this,i=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;var n=void 0;if(this.secondaryColumns&&this.secondaryBalancedTree){var o=this.secondaryColumns.every(function(u){return e.gridColumnsMap[u.getColId()]!==void 0});this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,o&&(n=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,n=this.lastPrimaryOrder);var s=this.createGroupAutoColumnsIfNeeded();if(s&&n){var a=jo(this.groupAutoColumns.map(function(u){return[u,!0]}));n=n.filter(function(u){return!a.has(u)}),n=fa(this.groupAutoColumns,n)}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(n),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.setupQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(u){return e.gridColumnsMap[u.getId()]=u}),this.setAutoHeightActive(),!Ws(i,this.gridBalancedTree)){var l={type:O.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(l)}},t.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(o){return o.isAutoHeight()}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var e=this.rowModel.getType(),i=e===H.ROW_MODEL_TYPE_CLIENT_SIDE||e===H.ROW_MODEL_TYPE_SERVER_SIDE;if(!i){var n="AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.";ce(function(){return console.warn(n)},"autoHeightActive.wrongRowModel")}}},t.prototype.orderGridColsLike=function(e){if(!kt(e)){var i=jo(e.map(function(c,h){return[c,h]})),n=!0;if(this.gridColumns.forEach(function(c){i.has(c)&&(n=!1)}),!n){var o=jo(this.gridColumns.map(function(c){return[c,!0]})),s=e.filter(function(c){return o.has(c)}),a=jo(s.map(function(c){return[c,!0]})),l=this.gridColumns.filter(function(c){return!a.has(c)}),u=s.slice();l.forEach(function(c){var h=c.getOriginalParent();if(!h){u.push(c);return}for(var d=[];!d.length&&h;){var p=h.getLeafColumns();p.forEach(function(g){var y=u.indexOf(g)>=0,C=d.indexOf(g)<0;y&&C&&d.push(g)}),h=h.getOriginalParent()}if(!d.length){u.push(c);return}var f=d.map(function(g){return u.indexOf(g)}),m=Math.max.apply(Math,fa(f));Oh(u,c,m+1)}),this.gridColumns=u}}},t.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},t.prototype.setupQuickFilterColumns=function(){this.groupAutoColumns?this.columnsForQuickFilter=(this.primaryColumns||[]).concat(this.groupAutoColumns):this.primaryColumns&&(this.columnsForQuickFilter=this.primaryColumns)},t.prototype.placeLockedColumns=function(e){var i=[],n=[],o=[];return e.forEach(function(s){var a=s.getColDef().lockPosition;a==="right"?o.push(s):a==="left"||a===!0?i.push(s):n.push(s)}),fa(i,n,o)},t.prototype.addAutoGroupToGridColumns=function(){if(!kt(this.groupAutoColumns)){this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.gridBalancedTree=e.concat(this.gridBalancedTree)}},t.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},t.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var i={type:O.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(i)},t.prototype.deriveDisplayedColumns=function(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(function(i){return i.isAutoHeight()})},t.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},t.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},t.prototype.joinDisplayedColumns=function(){this.gridOptionsWrapper.isEnableRtl()?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},t.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()},t.prototype.setLeftValuesOfColumns=function(e){var i=this;if(!!this.primaryColumns){var n=this.primaryColumns.slice(0),o=this.gridOptionsWrapper.isEnableRtl();[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(s){if(o){var a=i.getWidthOfColsInList(s);s.forEach(function(u){a-=u.getActualWidth(),u.setLeft(a,e)})}else{var l=0;s.forEach(function(u){u.setLeft(l,e),l+=u.getActualWidth()})}WC(n,s)}),n.forEach(function(s){s.setLeft(null,e)})}},t.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(e){e.forEach(function(i){if(i instanceof on){var n=i;n.checkLeft()}})})},t.prototype.derivedDisplayedColumnsFromDisplayedTree=function(e,i){i.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,function(n){n instanceof me&&i.push(n)})},t.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},t.prototype.getVirtualHeaderGroupRow=function(e,i){var n;switch(e){case H.PINNED_LEFT:n=this.viewportRowLeft[i];break;case H.PINNED_RIGHT:n=this.viewportRowRight[i];break;default:n=this.viewportRowCenter[i];break}return kt(n)&&(n=[]),n},t.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var e={};this.headerViewportColumns.forEach(function(n){return e[n.getId()]=!0});var i=function(n,o,s){for(var a=!1,l=0;l<n.length;l++){var u=n[l],c=!1;if(u instanceof me)c=e[u.getId()]===!0;else{var h=u,d=h.getDisplayedChildren();d&&(c=i(d,o,s+1))}c&&(a=!0,o[s]||(o[s]=[]),o[s].push(u))}return a};i(this.displayedTreeLeft,this.viewportRowLeft,0),i(this.displayedTreeRight,this.viewportRowRight,0),i(this.displayedTreeCentre,this.viewportRowCenter,0)},t.prototype.extractViewport=function(){var e=function(o){return o.getId()+"-"+(o.getPinned()||"normal")};this.extractViewportColumns();var i=this.viewportColumns.map(e).join("#"),n=this.viewportColumnsHash!==i;return n&&(this.viewportColumnsHash=i,this.calculateHeaderRows()),n},t.prototype.refreshFlexedColumns=function(e){var i=this;e===void 0&&(e={});var n=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];var o=-1;e.resizingCols&&e.resizingCols.forEach(function(S){var E=i.displayedColumnsCenter.indexOf(S);o<E&&(o=E)});var s=function(S){var E=i.displayedColumnsCenter.indexOf(S)>o;return S.getFlex()&&E},a=this.displayedColumnsCenter.filter(function(S){return!s(S)}),l=this.displayedColumnsCenter.filter(function(S){return s(S)}),u=[];if(!l.length)return[];var c=[],h;t:for(;;){var d=l.reduce(function(S,E){return S+E.getFlex()},0);h=this.flexViewportWidth-this.getWidthOfColsInList(a);for(var p=0;p<l.length;p++){var f=l[p],m=h*f.getFlex()/d,g=0,y=f.getMinWidth(),C=f.getMaxWidth();if(dt(y)&&m<y?g=y:dt(C)&&m>C&&(g=C),g){f.setActualWidth(g,n),en(l,f),u.push(f),a.push(f);continue t}c[p]=Math.round(m)}break}var w=h;return l.forEach(function(S,E){S.setActualWidth(Math.min(c[E],w),n),u.push(S),w-=c[E]}),e.skipSetLeft||this.setLeftValues(n),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.fireColumnResizedEvent(u,!0,n,l),this.flexColsCalculatedAtLestOnce||(this.gridOptionsWrapper.isRowModelDefault()&&this.rowModel.resetRowHeights(),this.flexColsCalculatedAtLestOnce=!0),l},t.prototype.sizeColumnsToFit=function(e,i,n,o){i===void 0&&(i="sizeColumnsToFit");var s,a,l,u,c,h,d,p,f,m,g,y={};o&&((a=(s=o)===null||s===void 0?void 0:s.columnLimits)===null||a===void 0||a.forEach(function(G){var vt=G.key,mt=E$(G,["key"]);y[typeof vt=="string"?vt:vt.getColId()]=mt}));var C=this.getAllDisplayedColumns(),w=e===this.getWidthOfColsInList(C);if(!(e<=0||!C.length||w)){var S=[],E=[];C.forEach(function(G){G.getColDef().suppressSizeToFit===!0?E.push(G):S.push(G)});var M=S.slice(0),L=!1,x=function(G){en(S,G),E.push(G)};for(S.forEach(function(G){return G.resetActualWidth(i)});!L;){L=!0;var T=e-this.getWidthOfColsInList(E);if(T<=0)S.forEach(function(G){var vt,mt,xt,st,ne=(xt=(mt=(vt=y)===null||vt===void 0?void 0:vt[G.getId()])===null||mt===void 0?void 0:mt.minWidth,xt!=null?xt:(st=o)===null||st===void 0?void 0:st.defaultMinWidth);if(typeof ne=="number"){G.setActualWidth(ne);return}G.setMinimum(i)});else for(var N=T/this.getWidthOfColsInList(S),K=T,Q=S.length-1;Q>=0;Q--){var z=S[Q],V=(l=y)===null||l===void 0?void 0:l[z.getId()],W=(c=(u=V)===null||u===void 0?void 0:u.minWidth,c!=null?c:(h=o)===null||h===void 0?void 0:h.defaultMinWidth),q=(p=(d=V)===null||d===void 0?void 0:d.maxWidth,p!=null?p:(f=o)===null||f===void 0?void 0:f.defaultMaxWidth),Y=(m=z.getMinWidth(),m!=null?m:0),X=(g=z.getMaxWidth(),g!=null?g:Number.MAX_VALUE),B=typeof W=="number"&&W>Y?W:z.getMinWidth(),j=typeof q=="number"&&q<X?q:z.getMaxWidth(),pt=Math.round(z.getActualWidth()*N);dt(B)&&pt<B?(pt=B,x(z),L=!1):dt(j)&&pt>j?(pt=j,x(z),L=!1):Q===0&&(pt=K),z.setActualWidth(pt,i,!0),K-=pt}}M.forEach(function(G){G.fireColumnWidthChangedEvent(i)}),this.setLeftValues(i),this.updateBodyWidths(),!n&&this.fireColumnResizedEvent(M,!0,i)}},t.prototype.buildDisplayedTrees=function(e){var i=[],n=[],o=[];e.forEach(function(a){switch(a.getPinned()){case"left":i.push(a);break;case"right":n.push(a);break;default:o.push(a);break}});var s=new wT;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(i,this.gridBalancedTree,s,H.PINNED_LEFT,this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(n,this.gridBalancedTree,s,H.PINNED_RIGHT,this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(o,this.gridBalancedTree,s,null,this.displayedTreeCentre),this.updateDisplayedMap()},t.prototype.updateDisplayedMap=function(){var e=this;this.displayedColumnsAndGroupsMap={};var i=function(n){e.displayedColumnsAndGroupsMap[n.getUniqueId()]=n};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,i),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,i),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,i)},t.prototype.isDisplayed=function(e){var i=this.displayedColumnsAndGroupsMap[e.getUniqueId()];return i===e},t.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,function(i){if(i instanceof on){var n=i;n.calculateDisplayedColumns()}})},t.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},t.prototype.createGroupAutoColumnsIfNeeded=function(){if(!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var e=this.gridOptionsWrapper.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gridOptionsWrapper.isPivotSuppressAutoColumn():this.gridOptionsWrapper.isGroupSuppressAutoColumn(),n=this.rowGroupColumns.length>0||this.usingTreeData,o=n&&!i&&!e;if(o){var s=this.groupAutoColumns||[],a=this.autoGroupColService.createAutoGroupColumns(s,this.rowGroupColumns),l=!this.autoColsEqual(a,this.groupAutoColumns);if(l||this.forceRecreateAutoGroups)return this.groupAutoColumns=a,!0}else this.groupAutoColumns=null;return!1},t.prototype.autoColsEqual=function(e,i){return Ws(e,i,function(n,o){return n.getColId()===o.getColId()})},t.prototype.getWidthOfColsInList=function(e){return e.reduce(function(i,n){return i+n.getActualWidth()},0)},t.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},t.prototype.hasFloatingFilters=function(){if(!this.gridColumns)return!1;var e=this.gridColumns.some(function(i){return i.getColDef().floatingFilter});return e},t.prototype.getFirstDisplayedColumn=function(){var e=this.gridOptionsWrapper.isEnableRtl(),i=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&i.reverse();for(var n=0;n<i.length;n++){var o=this[i[n]]();if(o.length)return e?Ue(o):o[0]}return null},t.prototype.setColumnHeaderHeight=function(e,i){var n=e.setAutoHeaderHeight(i);if(n){var o={type:O.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(o)}},t.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.gridOptionsWrapper.getPivotGroupHeaderHeight():this.gridOptionsWrapper.getGroupHeaderHeight()},t.prototype.getColumnHeaderRowHeight=function(){var e=this.isPivotMode()?this.gridOptionsWrapper.getPivotHeaderHeight():this.gridOptionsWrapper.getHeaderHeight(),i=this.getAllDisplayedColumns().filter(function(n){return n.isAutoHeaderHeight()}).map(function(n){return n.getAutoHeaderHeight()||0});return Math.max.apply(Math,fa([e],i))},Bi([b("expressionService")],t.prototype,"expressionService",void 0),Bi([b("columnFactory")],t.prototype,"columnFactory",void 0),Bi([b("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),Bi([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Bi([b("autoWidthCalculator")],t.prototype,"autoWidthCalculator",void 0),Bi([b("columnUtils")],t.prototype,"columnUtils",void 0),Bi([b("columnAnimationService")],t.prototype,"columnAnimationService",void 0),Bi([b("autoGroupColService")],t.prototype,"autoGroupColService",void 0),Bi([Ae("aggFuncService")],t.prototype,"aggFuncService",void 0),Bi([Ae("valueCache")],t.prototype,"valueCache",void 0),Bi([Ae("animationFrameService")],t.prototype,"animationFrameService",void 0),Bi([b("rowModel")],t.prototype,"rowModel",void 0),Bi([b("sortController")],t.prototype,"sortController",void 0),Bi([b("columnDefFactory")],t.prototype,"columnDefFactory",void 0),Bi([Ct],t.prototype,"init",null),Bi([S$(0,Cn("loggerFactory"))],t.prototype,"setBeans",null),t=Bi([Dt("columnModel")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var b$=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),M$=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},T$=function(r){b$(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.calculateColMinWidth=function(e){return e.minWidth!=null?e.minWidth:this.gridOptionsWrapper.getMinColWidth()},t.prototype.calculateColMaxWidth=function(e){return e.maxWidth!=null?e.maxWidth:this.gridOptionsWrapper.getMaxColWidth()||Number.MAX_SAFE_INTEGER},t.prototype.calculateColInitialWidth=function(e){var i=this.calculateColMinWidth(e),n=this.calculateColMaxWidth(e),o,s=pr(e.width),a=pr(e.initialWidth);return s!=null?o=s:a!=null?o=a:o=this.gridOptionsWrapper.getColWidth(),Math.max(Math.min(o,n),i)},t.prototype.getOriginalPathForColumn=function(e,i){var n=[],o=!1,s=function(a,l){for(var u=0;u<a.length;u++){if(o)return;var c=a[u];if(c instanceof pi){var h=c;s(h.getChildren(),l+1),n[l]=c}else c===e&&(o=!0)}};return s(i,0),o?n:null},t.prototype.depthFirstOriginalTreeSearch=function(e,i,n){var o=this;!i||i.forEach(function(s){s instanceof pi&&o.depthFirstOriginalTreeSearch(s,s.getChildren(),n),n(s,e)})},t.prototype.depthFirstAllColumnTreeSearch=function(e,i){var n=this;!e||e.forEach(function(o){o instanceof on&&n.depthFirstAllColumnTreeSearch(o.getChildren(),i),i(o)})},t.prototype.depthFirstDisplayedColumnTreeSearch=function(e,i){var n=this;!e||e.forEach(function(o){o instanceof on&&n.depthFirstDisplayedColumnTreeSearch(o.getDisplayedChildren(),i),i(o)})},t=M$([Dt("columnUtils")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var P$=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),O$=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},A$=function(r){P$(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createDisplayedGroups=function(e,i,n,o,s){var a=this,l=[],u,c,h=this.mapOldGroupsById(s);return e.forEach(function(d){for(var p=a.getOriginalPathForColumn(i,d),f=[],m=!c,g=0;g<p.length;g++)if(m||p[g]!==c[g]){var y=a.createColumnGroup(p[g],n,h,o);f[g]=y,g==0?l.push(y):f[g-1].addChild(y)}else f[g]=u[g];var C=f.length===0;if(C)l.push(d);else{var w=Ue(f);w.addChild(d)}u=f,c=p}),this.setupParentsIntoColumns(l,null),l},t.prototype.createColumnGroup=function(e,i,n,o){var s=e.getGroupId(),a=i.getInstanceIdForKey(s),l=on.createUniqueId(s,a),u=n[l];return u&&u.getProvidedColumnGroup()!==e&&(u=null),dt(u)?u.reset():(u=new on(e,s,a,o),this.context.createBean(u)),u},t.prototype.mapOldGroupsById=function(e){var i={},n=function(o){o.forEach(function(s){if(s instanceof on){var a=s;i[s.getUniqueId()]=a,n(a.getChildren())}})};return e&&n(e),i},t.prototype.setupParentsIntoColumns=function(e,i){var n=this;e.forEach(function(o){if(o.setParent(i),o instanceof on){var s=o;n.setupParentsIntoColumns(s.getChildren(),s)}})},t.prototype.getOriginalPathForColumn=function(e,i){var n=[],o=!1,s=function(a,l){for(var u=0;u<a.length;u++){if(o)return;var c=a[u];c instanceof pi?(s(c.getChildren(),l+1),n[l]=c):c===i&&(o=!0)}};return s(e,0),o?n:(console.warn("AG Grid: could not get path"),null)},t=O$([Dt("displayedGroupCreator")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var D$=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),L$=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},I$=function(r){D$(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.componentsMappedByName={},e}return t.prototype.setupComponents=function(e){var i=this;e&&e.forEach(function(n){return i.addComponent(n)})},t.prototype.addComponent=function(e){var i=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=i.toUpperCase();this.componentsMappedByName[n]=e.componentClass},t.prototype.getComponentClass=function(e){return this.componentsMappedByName[e]},t=L$([Dt("agStackComponentsRegistry")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var cx=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},yc=function(){function r(t,e,i,n){n===void 0&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,i||0)),this.a=Math.min(1,Math.max(0,n||0))}return r.fromString=function(t){if(t.indexOf("#")>=0)return r.fromHexString(t);var e=r.nameToHex[t];if(e)return r.fromHexString(e);if(t.indexOf("rgb")>=0)return r.fromRgbaString(t);throw new Error("Invalid color string: '"+t+"'")},r.parseHex=function(t){t=t.replace(/ /g,"").slice(1);var e;switch(t.length){case 6:case 8:e=[];for(var i=0;i<t.length;i+=2)e.push(parseInt(""+t[i]+t[i+1],16));break;case 3:case 4:e=t.split("").map(function(n){return parseInt(n,16)}).map(function(n){return n+n*16});break}if(e.length>=3&&e.every(function(n){return n>=0}))return e.length===3&&e.push(255),e},r.fromHexString=function(t){var e=r.parseHex(t);if(e){var i=cx(e,4),n=i[0],o=i[1],s=i[2],a=i[3];return new r(n/255,o/255,s/255,a/255)}throw new Error("Malformed hexadecimal color string: '"+t+"'")},r.stringToRgba=function(t){for(var e=cx([NaN,NaN],2),i=e[0],n=e[1],o=0;o<t.length;o++){var s=t[o];if(!i&&s==="(")i=o;else if(s===")"){n=o;break}}var a=i&&n&&t.substring(i+1,n);if(!!a){for(var l=a.split(","),u=[],o=0;o<l.length;o++){var c=l[o],h=parseFloat(c);if(isNaN(h))return;c.indexOf("%")>=0?(h=Math.max(0,Math.min(100,h)),h/=100):o===3?h=Math.max(0,Math.min(1,h)):(h=Math.max(0,Math.min(255,h)),h/=255),u.push(h)}return u}},r.fromRgbaString=function(t){var e=r.stringToRgba(t);if(e){if(e.length===3)return new r(e[0],e[1],e[2]);if(e.length===4)return new r(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+t+"'")},r.fromArray=function(t){if(t.length===4)return new r(t[0],t[1],t[2],t[3]);if(t.length===3)return new r(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},r.fromHSB=function(t,e,i,n){n===void 0&&(n=1);var o=r.HSBtoRGB(t,e,i);return new r(o[0],o[1],o[2],n)},r.padHex=function(t){return t.length===1?"0"+t:t},r.prototype.toHexString=function(){var t="#"+r.padHex(Math.round(this.r*255).toString(16))+r.padHex(Math.round(this.g*255).toString(16))+r.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=r.padHex(Math.round(this.a*255).toString(16))),t},r.prototype.toRgbaString=function(t){t===void 0&&(t=3);var e=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],i=Math.pow(10,t);return this.a!==1?(e.push(Math.round(this.a*i)/i),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},r.prototype.toString=function(){return this.a===1?this.toHexString():this.toRgbaString()},r.prototype.toHSB=function(){return r.RGBtoHSB(this.r,this.g,this.b)},r.RGBtoHSB=function(t,e,i){var n=Math.min(t,e,i),o=Math.max(t,e,i),s=o!==0?(o-n)/o:0,a=NaN;if(n!==o){var l=o-n,u=(o-t)/l,c=(o-e)/l,h=(o-i)/l;t===o?a=h-c:e===o?a=2+u-h:a=4+c-u,a/=6,a<0&&(a=a+1)}return[a*360,s,o]},r.HSBtoRGB=function(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,o=0,s=0;if(e===0)n=o=s=i;else{var a=(t-Math.floor(t))*6,l=a-Math.floor(a),u=i*(1-e),c=i*(1-e*l),h=i*(1-e*(1-l));switch(a>>0){case 0:n=i,o=h,s=u;break;case 1:n=c,o=i,s=u;break;case 2:n=u,o=i,s=h;break;case 3:n=u,o=c,s=i;break;case 4:n=h,o=u,s=i;break;case 5:n=i,o=u,s=c;break}}return[n,o,s]},r.prototype.derive=function(t,e,i,n){var o=r.RGBtoHSB(this.r,this.g,this.b),s=o[2];s==0&&i>1&&(s=.05);var a=((o[0]+t)%360+360)%360,l=Math.max(Math.min(o[1]*e,1),0);s=Math.max(Math.min(s*i,1),0);var u=Math.max(Math.min(this.a*n,1),0),c=r.HSBtoRGB(a,l,s);return c.push(u),r.fromArray(c)},r.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},r.prototype.darker=function(){return this.derive(0,1,.7,1)},r.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function F$(r,t){t===void 0&&(t=",");var e=[],i=function(d){return d==="\r"||d===`
`},n=!1;if(r==="")return[[""]];for(var o=function(d,p,f){var m=r[f-1],g=r[f],y=r[f+1],C=function(){e[d]||(e[d]=[]),e[d][p]||(e[d][p]="")};if(C(),g==='"'){if(n)return y==='"'?(e[d][p]+='"',f++):n=!1,s=d,a=p,l=f,"continue";if(m===void 0||m===t||i(m))return n=!0,s=d,a=p,l=f,"continue"}if(!n){if(g===t)return p++,C(),s=d,a=p,l=f,"continue";if(i(g))return p=0,d++,C(),g==="\r"&&y===`
`&&f++,s=d,a=p,l=f,"continue"}e[d][p]+=g,s=d,a=p,l=f},s,a,l,u=0,c=0,h=0;h<r.length;h++)o(u,c,h),u=s,c=a,h=l;return e}var N$=Object.freeze({__proto__:null,stringToArray:F$});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var lp;function G$(r,t,e){for(var i=r.parentElement,n=i&&i.firstChild;n;)t&&n.classList.toggle(t,n===r),e&&n.classList.toggle(e,n!==r),n=n.nextSibling}function $C(r){var t=Element.prototype.matches||Element.prototype.msMatchesSelector,e=t.call(r,H.INPUT_SELECTOR),i=t.call(r,H.FOCUSABLE_EXCLUDE),n=Ju(r),o=e&&!i&&n;return o}function Ke(r,t){r.classList.toggle("ag-hidden",!t)}function GT(r,t){r.classList.toggle("ag-invisible",!t)}function Iu(r,t){var e="disabled",i=t?function(n){return n.setAttribute(e,"")}:function(n){return n.removeAttribute(e)};i(r),JC(r.querySelectorAll("input"),function(n){return i(n)})}function Ba(r,t,e){for(var i=0;r;){if(r.classList.contains(t))return!0;if(r=r.parentElement,typeof e=="number"){if(++i>e)break}else if(r===e)break}return!1}function ul(r){var t=window.getComputedStyle(r),e=t.height,i=t.width,n=t.paddingTop,o=t.paddingRight,s=t.paddingBottom,a=t.paddingLeft,l=t.marginTop,u=t.marginRight,c=t.marginBottom,h=t.marginLeft,d=t.boxSizing;return{height:parseFloat(e),width:parseFloat(i),paddingTop:parseFloat(n),paddingRight:parseFloat(o),paddingBottom:parseFloat(s),paddingLeft:parseFloat(a),marginTop:parseFloat(l),marginRight:parseFloat(u),marginBottom:parseFloat(c),marginLeft:parseFloat(h),boxSizing:d}}function rd(r){var t=ul(r);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Hg(r){var t=ul(r);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function YC(r){var t=ul(r),e=t.marginBottom+t.marginTop;return Math.ceil(r.offsetHeight+e)}function Wg(r){var t=ul(r),e=t.marginLeft+t.marginRight;return Math.ceil(r.offsetWidth+e)}function Ah(){if(typeof lp=="boolean")return lp;var r=document.createElement("div");return r.style.direction="rtl",r.style.width="1px",r.style.height="1px",r.style.position="fixed",r.style.top="0px",r.style.overflow="hidden",r.dir="rtl",r.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(r),r.scrollLeft=1,lp=Math.floor(r.scrollLeft)===0,document.body.removeChild(r),lp}function Dh(r,t){var e=r.scrollLeft;return t&&(e=Math.abs(e),nd()&&!Ah()&&(e=r.scrollWidth-r.clientWidth-e)),e}function Bf(r,t,e){e&&(Ah()?t*=-1:(ll()||nd())&&(t=r.scrollWidth-r.clientWidth-t)),r.scrollLeft=t}function qn(r){for(;r&&r.firstChild;)r.removeChild(r.firstChild)}function H$(r,t){Fa(r.querySelector(t))}function Fa(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function Ju(r){return r.offsetParent!==null}function Hi(r){var t=document.createElement("div");return t.innerHTML=(r||"").trim(),t.firstChild}function W$(r,t){r.lastChild?r.insertAdjacentHTML("afterbegin",t):r.innerHTML=t}function V$(r,t){if(r.attributes&&r.attributes[t]){var e=r.attributes[t];return e.value}return null}function r_(r){return r&&r.clientHeight?r.clientHeight:0}function o_(r){return r&&r.clientWidth?r.clientWidth:0}function KC(r,t,e){if(!(e&&e.nextSibling===t)){var i=document.activeElement,n=t.contains(i);e?e.nextSibling?r.insertBefore(t,e.nextSibling):r.appendChild(t):r.firstChild&&r.firstChild!==t&&r.insertAdjacentElement("afterbegin",t),n&&i&&Gg()&&i.focus({preventScroll:!0})}}function XC(r,t){for(var e=0;e<t.length;e++){var i=t[e],n=r.children[e];n!==i&&r.insertBefore(i,n)}}function HT(r,t,e){e?e.insertAdjacentElement("afterend",t):r.firstChild?r.insertAdjacentElement("afterbegin",t):r.appendChild(t)}function k$(r,t){dt(r.firstChild)?r.insertBefore(t,r.firstChild):r.appendChild(t)}function qC(r,t){!t||Object.keys(t).forEach(function(e){var i=ET(e);i&&(r.style[i]=t[e])})}function s_(r){return r.clientWidth<r.scrollWidth}function WT(r){return r.clientHeight<r.scrollHeight}function od(r,t){t==="flex"?(r.style.removeProperty("width"),r.style.removeProperty("minWidth"),r.style.removeProperty("maxWidth"),r.style.flex="1 1 auto"):So(r,t)}function So(r,t){t=ZC(t),r.style.width=t.toString(),r.style.maxWidth=t.toString(),r.style.minWidth=t.toString()}function B$(r,t){t==="flex"?(r.style.removeProperty("height"),r.style.removeProperty("minHeight"),r.style.removeProperty("maxHeight"),r.style.flex="1 1 auto"):Ua(r,t)}function Ua(r,t){t=ZC(t),r.style.height=t.toString(),r.style.maxHeight=t.toString(),r.style.minHeight=t.toString()}function ZC(r){return typeof r=="number"?r+"px":r}function VT(r){return typeof Node=="function"?r instanceof Node:r&&typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"}function kT(r){return typeof HTMLElement=="function"?r instanceof HTMLElement:r&&Du(r)&&r.nodeType===1&&typeof r.nodeName=="string"}function sd(r){return VT(r)||kT(r)}function BT(r){if(r==null)return[];var t=[];return JC(r,function(e){return t.push(e)}),t}function UT(r,t){if(!!r)for(var e=0;e<r.length;e++){var i=r[e];t(i.name,i.value)}}function U$(r,t){typeof t=="boolean"?(r.checked=t,r.indeterminate=!1):r.indeterminate=!0}function nh(r,t,e){e==null?r.removeAttribute(t):r.setAttribute(t,e.toString())}function JC(r,t){if(r!=null)for(var e=0;e<r.length;e++)t(r[e])}var z$=Object.freeze({__proto__:null,radioCssClass:G$,isFocusableFormField:$C,setDisplayed:Ke,setVisible:GT,setDisabled:Iu,isElementChildOfClass:Ba,getElementSize:ul,getInnerHeight:rd,getInnerWidth:Hg,getAbsoluteHeight:YC,getAbsoluteWidth:Wg,isRtlNegativeScroll:Ah,getScrollLeft:Dh,setScrollLeft:Bf,clearElement:qn,removeElement:H$,removeFromParent:Fa,isVisible:Ju,loadTemplate:Hi,appendHtml:W$,getElementAttribute:V$,offsetHeight:r_,offsetWidth:o_,ensureDomOrder:KC,setDomChildOrder:XC,insertWithDomOrder:HT,prependDC:k$,addStylesToElement:qC,isHorizontalScrollShowing:s_,isVerticalScrollShowing:WT,setElementWidth:od,setFixedWidth:So,setElementHeight:B$,setFixedHeight:Ua,formatSize:ZC,isNode:VT,isElement:kT,isNodeOrElement:sd,copyNodeList:BT,iterateNamedNodeMap:UT,setCheckboxState:U$,addOrRemoveAttribute:nh,nodeListForEach:JC});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function j$(r){var t=/function (.{1,})\(/,e=r.toString(),i=t.exec(e);return i&&i.length>1?i[1]:""}function $$(r){var t=r.length,e=0;if(t<=1)return r;for(var i=0;i<r.length;i++){var n=r[i],o=n.toString().split("e-");if(o.length>1){e=Math.max(e,parseInt(o[1],10));continue}Math.floor(n)!==n&&(e=Math.max(e,n.toString().split(".")[1].length))}for(var s=0,a=0,l=0,u=0,c=0,h=0;h<t;h++)c=r[h],s+=h,a+=c,u+=h*h,l+=h*c;for(var d=(t*l-s*a)/(t*u-s*s),p=a/t-d*s/t,f=[],h=0;h<=t;h++)f.push(parseFloat((h*d+p).toFixed(e)));return f}function Y$(r){if(!r)return"";var t=[];return We(r,function(e,i){var n=ST(e);t.push(n+": "+i+";")}),t.join(" ")}function K$(r){var t=document.createElement("div"),e=document.querySelector("#__ag__message");if(t.innerHTML=r,!e){var i='<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>';e=Hi(i),document.body&&document.body.appendChild(e)}e.insertBefore(t,e.children[0])}function X$(r,t){r.then(function(e){var i=e.getGui();i!=null&&(typeof i=="object"?t.appendChild(i):t.innerHTML=i)})}var q$=Object.freeze({__proto__:null,getNameOfClass:j$,findLineByLeastSquares:$$,cssStyleObjectToMarkup:Y$,message:K$,bindCellRendererToHtmlElement:X$});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function Pi(r,t,e){r.setAttribute(zT(t),e.toString())}function sa(r,t){r.removeAttribute(zT(t))}function zT(r){return"aria-"+r}function an(r,t){t?r.setAttribute("role",t):r.removeAttribute("role")}function jT(r){var t;return r.isSortAscending()?t="ascending":r.isSortDescending()?t="descending":t="none",t}function $T(r){return parseInt(r.getAttribute("aria-level"),10)}function YT(r){return parseInt(r.getAttribute("aria-posinset"),10)}function Z$(r){return r.getAttribute("aria-describedby")||""}function cl(r,t){var e="label";t!=null&&t!==""?Pi(r,e,t):sa(r,e)}function QC(r,t){var e="labelledby";t?Pi(r,e,t):sa(r,e)}function KT(r,t){var e="description";t?Pi(r,e,t):sa(r,e)}function tw(r,t){var e="describedby";t?Pi(r,e,t):sa(r,e)}function XT(r,t){Pi(r,"level",t)}function ew(r,t){Pi(r,"disabled",t)}function iw(r,t){t?Pi(r,"hidden",!0):sa(r,"hidden")}function $n(r,t){Pi(r,"expanded",t)}function qT(r){sa(r,"expanded")}function nw(r,t){Pi(r,"setsize",t)}function rw(r,t){Pi(r,"posinset",t)}function ZT(r,t){Pi(r,"multiselectable",t)}function JT(r,t){Pi(r,"rowcount",t)}function ow(r,t){Pi(r,"rowindex",t)}function QT(r,t){Pi(r,"colcount",t)}function sw(r,t){Pi(r,"colindex",t)}function tP(r,t){Pi(r,"colspan",t)}function eP(r,t){Pi(r,"sort",t)}function iP(r){sa(r,"sort")}function Fu(r,t){var e="selected";t?Pi(r,e,t):sa(r,e)}function nP(r,t){Pi(r,"checked",t===void 0?"mixed":t)}var J$=Object.freeze({__proto__:null,setAriaRole:an,getAriaSortState:jT,getAriaLevel:$T,getAriaPosInSet:YT,getAriaDescribedBy:Z$,setAriaLabel:cl,setAriaLabelledBy:QC,setAriaDescription:KT,setAriaDescribedBy:tw,setAriaLevel:XT,setAriaDisabled:ew,setAriaHidden:iw,setAriaExpanded:$n,removeAriaExpanded:qT,setAriaSetSize:nw,setAriaPosInSet:rw,setAriaMultiSelectable:ZT,setAriaRowCount:JT,setAriaRowIndex:ow,setAriaColCount:QT,setAriaColIndex:sw,setAriaColSpan:tP,setAriaSort:eP,removeAriaSort:iP,setAriaSelected:Fu,setAriaChecked:nP});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yv=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o};function Lh(r,t,e){if(t===void 0&&(t=!0),e===void 0&&(e="-"),!r)return null;var i=[r.getFullYear(),r.getMonth()+1,r.getDate()].map(function(n){return yu(n,2)}).join(e);return t&&(i+=" "+[r.getHours(),r.getMinutes(),r.getSeconds()].map(function(n){return yu(n,2)}).join(":")),i}var _v=function(r){if(r>3&&r<21)return"th";var t=r%10;switch(t){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function zp(r,t){t===void 0&&(t="YYYY-MM-DD");var e=yu(r.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:function(){return e.slice(e.length-4,e.length)},YY:function(){return e.slice(e.length-2,e.length)},Y:function(){return""+r.getFullYear()},MMMM:function(){return i[r.getMonth()]},MMM:function(){return i[r.getMonth()].slice(0,3)},MM:function(){return yu(r.getMonth()+1,2)},Mo:function(){return""+(r.getMonth()+1)+_v(r.getMonth()+1)},M:function(){return""+(r.getMonth()+1)},Do:function(){return""+r.getDate()+_v(r.getDate())},DD:function(){return yu(r.getDate(),2)},D:function(){return""+r.getDate()},dddd:function(){return n[r.getDay()]},ddd:function(){return n[r.getDay()].slice(0,3)},dd:function(){return n[r.getDay()].slice(0,2)},do:function(){return""+r.getDay()+_v(r.getDay())},d:function(){return""+r.getDay()}},s=new RegExp(Object.keys(o).join("|"),"g");return t.replace(s,function(a){return a in o?o[a]():a})}function Vs(r){if(!r)return null;var t=yv(r.split(" "),2),e=t[0],i=t[1];if(!e)return null;var n=e.split("-").map(function(f){return parseInt(f,10)});if(n.filter(function(f){return!isNaN(f)}).length!==3)return null;var o=yv(n,3),s=o[0],a=o[1],l=o[2],u=new Date(s,a-1,l);if(u.getFullYear()!==s||u.getMonth()!==a-1||u.getDate()!==l)return null;if(!i||i==="00:00:00")return u;var c=yv(i.split(":").map(function(f){return parseInt(f,10)}),3),h=c[0],d=c[1],p=c[2];return h>=0&&h<24&&u.setHours(h),d>=0&&d<60&&u.setMinutes(d),p>=0&&p<60&&u.setSeconds(p),u}var Q$=Object.freeze({__proto__:null,serialiseDate:Lh,dateToFormattedString:zp,parseDateTimeFromString:Vs});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var rP={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function ar(r,t,e){var i=_i(r,t,e);if(i&&i.className.indexOf("ag-icon")>-1)return i;var n=document.createElement("span");return n.appendChild(i),n}function _i(r,t,e,i){var n=null,o=e&&e.getColDef().icons;if(o&&(n=o[r]),t&&!n){var s=t.getIcons();s&&(n=s[r])}if(n){var a=void 0;if(typeof n=="function")a=n();else if(typeof n=="string")a=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof a=="string")return Hi(a);if(sd(a))return a;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{var l=document.createElement("span"),u=rP[r];return u||(i?u=r:(console.warn("AG Grid: Did not find icon "+r),u="")),l.setAttribute("class","ag-icon ag-icon-"+u),l.setAttribute("unselectable","on"),an(l,"presentation"),l}}var t7=Object.freeze({__proto__:null,iconNameClassMap:rP,createIcon:ar,createIconNoSpan:_i});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var lt=function(){function r(){}return r.BACKSPACE="Backspace",r.TAB="Tab",r.ENTER="Enter",r.ESCAPE="Escape",r.SPACE=" ",r.LEFT="ArrowLeft",r.UP="ArrowUp",r.RIGHT="ArrowRight",r.DOWN="ArrowDown",r.DELETE="Delete",r.F2="F2",r.PAGE_UP="PageUp",r.PAGE_DOWN="PageDown",r.PAGE_HOME="Home",r.PAGE_END="End",r.A="KeyA",r.C="KeyC",r.V="KeyV",r.D="KeyD",r.Z="KeyZ",r.Y="KeyY",r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var e7="Del",i7=46,n7=65,r7=67,o7=86,s7=68,a7=90,l7=89;function oP(r){if(r.altKey||r.ctrlKey||r.metaKey)return!1;var t=r.key.length===1,e=u7(r);return t||e}function Uf(r,t,e,i,n){var o=r.getSuppressKeyboardEventFunc(),s=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o&&!s)return!1;var a={event:t,editing:n,column:i,api:r.getApi(),node:e,data:e.data,colDef:i.getColDef(),context:r.getContext(),columnApi:r.getColumnApi()};if(s){var l=s(a);if(l)return!0}return o?o(a):!1}function sP(r,t,e,i){var n=i.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;if(!dt(o))return!1;var s={api:r.getApi(),columnApi:r.getColumnApi(),context:r.getContext(),colDef:n,column:i,headerRowIndex:e,event:t};return!!o(s)}function u7(r){return Ng()&&r.key===e7&&r.charCode===i7}function aP(r){var t=r.keyCode,e;switch(t){case n7:e=lt.A;break;case r7:e=lt.C;break;case o7:e=lt.V;break;case s7:e=lt.D;break;case a7:e=lt.Z;break;case l7:e=lt.Y;break;default:e=r.code}return e}function lP(r,t){return t===void 0&&(t=!1),r===lt.DELETE?!0:!t&&r===lt.BACKSPACE?zC():!1}var c7=Object.freeze({__proto__:null,isEventFromPrintableCharacter:oP,isUserSuppressingKeyboardEvent:Uf,isUserSuppressingHeaderKeyboardEvent:sP,normaliseQwertyAzerty:aP,isDeleteKey:lP});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function aw(r,t,e){if(e===0)return!1;var i=Math.abs(r.clientX-t.clientX),n=Math.abs(r.clientY-t.clientY);return Math.max(i,n)<=e}var h7=Object.freeze({__proto__:null,areEventsNear:aw});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function d7(r,t){if(!r)return!1;for(var e=function(a,l){var u=t[a.id],c=t[l.id],h=u!==void 0,d=c!==void 0,p=h&&d,f=!h&&!d;return p?u-c:f?a.__objectId-l.__objectId:h?1:-1},i,n,o=!1,s=0;s<r.length-1;s++)if(i=r[s],n=r[s+1],e(i,n)>0){o=!0;break}return o?(r.sort(e),!0):!1}function p7(r,t){var e=[];i(r);function i(n){!n||n.forEach(function(o){if(o.group||o.hasChildren()){e.push(o.key);var s=e.join("|");t(o,s),i(o.childrenAfterGroup),e.pop()}})}}var f7=Object.freeze({__proto__:null,sortRowNodesByOrder:d7,traverseNodesWithKey:p7});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */function lw(r){var t=new Set;return r.forEach(function(e){return t.add(e)}),t}var g7=Object.freeze({__proto__:null,convertToSet:lw});/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hi=function(){return hi=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hi.apply(this,arguments)},m7=hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi(hi({},q$),J$),G8),a$),N$),Q$),z$),U8),b8),l$),m8),t7),c7),Q8),h7),p$),E8),f7),g7),q8),Jt=m7;/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Nu=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=1),this.nextValue=t,this.step=e}return r.prototype.next=function(){var t=this.nextValue;return this.nextValue+=this.step,t},r.prototype.peek=function(){return this.nextValue},r.prototype.skip=function(t){this.nextValue+=t},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var ru;(function(r){r[r.IN_PROGRESS=0]="IN_PROGRESS",r[r.RESOLVED=1]="RESOLVED"})(ru||(ru={}));var cr=function(){function r(t){var e=this;this.status=ru.IN_PROGRESS,this.resolution=null,this.waiters=[],t(function(i){return e.onDone(i)},function(i){return e.onReject(i)})}return r.all=function(t){return new r(function(e){var i=t.length,n=new Array(i);t.forEach(function(o,s){o.then(function(a){n[s]=a,i--,i===0&&e(n)})})})},r.resolve=function(t){return t===void 0&&(t=null),new r(function(e){return e(t)})},r.prototype.then=function(t){var e=this;return new r(function(i){e.status===ru.RESOLVED?i(t(e.resolution)):e.waiters.push(function(n){return i(t(n))})})},r.prototype.resolveNow=function(t,e){return this.status===ru.RESOLVED?e(this.resolution):t},r.prototype.onDone=function(t){this.status=ru.RESOLVED,this.resolution=t,this.waiters.forEach(function(e){return e(t)})},r.prototype.onReject=function(t){console.warn("TBI")},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var v7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),a_=function(){return a_=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},a_.apply(this,arguments)},_c=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Tr;(function(r){r[r.NOTHING=0]="NOTHING",r[r.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",r[r.SHOWING=2]="SHOWING"})(Tr||(Tr={}));var uw=function(r){v7(t,r);function t(e){var i=r.call(this)||this;return i.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,i.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,i.SHOW_QUICK_TOOLTIP_DIFF=1e3,i.FADE_OUT_TOOLTIP_TIMEOUT=1e3,i.state=Tr.NOTHING,i.tooltipInstanceCount=0,i.tooltipMouseTrack=!1,i.parentComp=e,i}return t.prototype.postConstruct=function(){this.tooltipShowDelay=this.gridOptionsWrapper.getTooltipDelay("show")||this.DEFAULT_SHOW_TOOLTIP_DELAY,this.tooltipHideDelay=this.gridOptionsWrapper.getTooltipDelay("hide")||this.DEFAULT_HIDE_TOOLTIP_DELAY,this.tooltipMouseTrack=this.gridOptionsWrapper.isTooltipMouseTrack();var e=this.parentComp.getGui();this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this)),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this))},t.prototype.destroy=function(){this.setToDoNothing(),r.prototype.destroy.call(this)},t.prototype.onMouseEnter=function(e){if(!oa()&&this.state==Tr.NOTHING){var i=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.lastMouseEvent=e,this.state=Tr.WAITING_TO_SHOW}},t.prototype.onMouseLeave=function(){this.setToDoNothing()},t.prototype.onKeyDown=function(){this.setToDoNothing()},t.prototype.setToDoNothing=function(){this.state===Tr.SHOWING&&this.hideTooltip(),this.clearTimeouts(),this.state=Tr.NOTHING},t.prototype.onMouseMove=function(e){this.lastMouseEvent=e,this.tooltipMouseTrack&&this.state===Tr.SHOWING&&this.tooltipComp&&this.positionTooltipUnderLastMouseEvent()},t.prototype.onMouseDown=function(){this.setToDoNothing()},t.prototype.hideTooltip=function(){this.tooltipComp&&(this.destroyTooltipComp(),t.lastTooltipHideTime=new Date().getTime()),this.state=Tr.NOTHING},t.prototype.destroyTooltipComp=function(){var e=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var i=this.tooltipPopupDestroyFunc,n=this.tooltipComp;window.setTimeout(function(){i(),e.getContext().destroyBean(n)},this.FADE_OUT_TOOLTIP_TIMEOUT),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},t.prototype.isLastTooltipHiddenRecently=function(){var e=new Date().getTime(),i=t.lastTooltipHideTime;return e-i<this.SHOW_QUICK_TOOLTIP_DIFF},t.prototype.showTooltip=function(){var e=a_({},this.parentComp.getTooltipParams());if(!dt(e.value)){this.setToDoNothing();return}this.state=Tr.SHOWING,this.tooltipInstanceCount++;var i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),n=this.userComponentFactory.getTooltipCompDetails(e);n.newAgStackInstance().then(i)},t.prototype.newTooltipComponentCallback=function(e,i){var n=this.state!==Tr.SHOWING||this.tooltipInstanceCount!==e;if(n){this.getContext().destroyBean(i);return}var o=i.getGui();this.tooltipComp=i,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom");var s=this.gridOptionsWrapper.getLocaleTextFunc(),a=this.popupService.addPopup({eChild:o,ariaLabel:s("ariaLabelTooltip","Tooltip")});a&&(this.tooltipPopupDestroyFunc=a.hideFunc),this.positionTooltipUnderLastMouseEvent(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)},t.prototype.positionTooltipUnderLastMouseEvent=function(){this.popupService.positionPopupUnderMouseEvent({type:"tooltip",mouseEvent:this.lastMouseEvent,ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack})},t.prototype.clearTimeouts=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0),this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},_c([b("popupService")],t.prototype,"popupService",void 0),_c([b("userComponentFactory")],t.prototype,"userComponentFactory",void 0),_c([b("columnApi")],t.prototype,"columnApi",void 0),_c([b("gridApi")],t.prototype,"gridApi",void 0),_c([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var y7=function(){function r(t){this.cssClassStates={},this.getGui=t}return r.prototype.addCssClass=function(t){var e=this,i=(t||"").split(" ");if(i.length>1){i.forEach(function(s){return e.addCssClass(s)});return}var n=this.cssClassStates[t]!==!0;if(n&&t.length){var o=this.getGui();o&&o.classList.add(t),this.cssClassStates[t]=!0}},r.prototype.removeCssClass=function(t){var e=this,i=(t||"").split(" ");if(i.length>1){i.forEach(function(s){return e.removeCssClass(s)});return}var n=this.cssClassStates[t]!==!1;if(n&&t.length){var o=this.getGui();o&&o.classList.remove(t),this.cssClassStates[t]=!1}},r.prototype.containsCssClass=function(t){var e=this.getGui();return e?e.classList.contains(t):!1},r.prototype.addOrRemoveCssClass=function(t,e){var i=this;if(!!t){if(t.indexOf(" ")>=0){var n=(t||"").split(" ");if(n.length>1){n.forEach(function(a){return i.addOrRemoveCssClass(a,e)});return}}var o=this.cssClassStates[t]!==e;if(o&&t.length){var s=this.getGui();s&&s.classList.toggle(t,e),this.cssClassStates[t]=e}}},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Cv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},C7=new Nu,le=function(r){_7(t,r);function t(e){var i=r.call(this)||this;return i.displayed=!0,i.visible=!0,i.compId=C7.next(),i.cssClassManager=new y7(function(){return i.eGui}),e&&i.setTemplate(e),i}return t.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsWrapper.isEnableBrowserTooltips()},t.prototype.getCompId=function(){return this.compId},t.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},t.prototype.setTooltip=function(e){var i=this,n=function(){i.usingBrowserTooltips?i.getGui().removeAttribute("title"):i.tooltipFeature=i.destroyBean(i.tooltipFeature)},o=function(){i.usingBrowserTooltips?i.getGui().setAttribute("title",i.tooltipText):i.tooltipFeature=i.createBean(new uw(i))};this.tooltipText!=e&&(this.tooltipText&&n(),e!=null&&(this.tooltipText=e,this.tooltipText&&o()))},t.prototype.createChildComponentsFromTags=function(e,i){var n=this,o=BT(e.childNodes);o.forEach(function(s){if(s instanceof HTMLElement){var a=n.createComponentFromElement(s,function(u){var c=u.getGui();c&&n.copyAttributesFromNode(s,u.getGui())},i);if(a){if(a.addItems&&s.children.length){n.createChildComponentsFromTags(s,i);var l=Array.prototype.slice.call(s.children);a.addItems(l)}n.swapComponentForNode(a,e,s)}else s.childNodes&&n.createChildComponentsFromTags(s,i)}})},t.prototype.createComponentFromElement=function(e,i,n){var o=e.nodeName,s=n?n[e.getAttribute("ref")]:void 0,a=this.agStackComponentsRegistry.getComponentClass(o);if(a){t.elementGettingCreated=e;var l=new a(s);return l.setParentComponent(this),this.createBean(l,null,i),l}return null},t.prototype.copyAttributesFromNode=function(e,i){UT(e.attributes,function(n,o){return i.setAttribute(n,o)})},t.prototype.swapComponentForNode=function(e,i,n){var o=e.getGui();i.replaceChild(o,n),i.insertBefore(document.createComment(n.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,n)},t.prototype.swapInComponentForQuerySelectors=function(e,i){var n=this;this.iterateOverQuerySelectors(function(o){n[o.attributeName]===i&&(n[o.attributeName]=e)})},t.prototype.iterateOverQuerySelectors=function(e){for(var i=Object.getPrototypeOf(this);i!=null;){var n=i.__agComponentMetaData,o=Ig(i.constructor);n&&n[o]&&n[o].querySelectors&&n[o].querySelectors.forEach(function(s){return e(s)}),i=Object.getPrototypeOf(i)}},t.prototype.setTemplate=function(e,i){var n=Hi(e);this.setTemplateFromElement(n,i)},t.prototype.setTemplateFromElement=function(e,i){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),i)},t.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},t.prototype.wireQuerySelectors=function(){var e=this;if(!!this.eGui){var i=this;this.iterateOverQuerySelectors(function(n){var o=function(l){return i[n.attributeName]=l},s=n.refSelector&&e.eGui.getAttribute("ref")===n.refSelector;if(s)o(e.eGui);else{var a=e.eGui.querySelector(n.querySelector);a&&o(a.__agComponent||a)}})}},t.prototype.getGui=function(){return this.eGui},t.prototype.getFocusableElement=function(){return this.eGui},t.prototype.setParentComponent=function(e){this.parentComponent=e},t.prototype.getParentComponent=function(){return this.parentComponent},t.prototype.setGui=function(e){this.eGui=e},t.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)},t.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)},t.prototype.appendChild=function(e,i){if(e!=null)if(i||(i=this.eGui),sd(e))i.appendChild(e);else{var n=e;i.appendChild(n.getGui())}},t.prototype.isDisplayed=function(){return this.displayed},t.prototype.setVisible=function(e){e!==this.visible&&(this.visible=e,GT(this.eGui,e))},t.prototype.setDisplayed=function(e){if(e!==this.displayed){this.displayed=e,Ke(this.eGui,e);var i={type:t.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(i)}},t.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),r.prototype.destroy.call(this)},t.prototype.addGuiEventListener=function(e,i){var n=this;this.eGui.addEventListener(e,i),this.addDestroyFunc(function(){return n.eGui.removeEventListener(e,i)})},t.prototype.addCssClass=function(e){this.cssClassManager.addCssClass(e)},t.prototype.removeCssClass=function(e){this.cssClassManager.removeCssClass(e)},t.prototype.containsCssClass=function(e){return this.cssClassManager.containsCssClass(e)},t.prototype.addOrRemoveCssClass=function(e,i){this.cssClassManager.addOrRemoveCssClass(e,i)},t.prototype.getAttribute=function(e){var i=this.eGui;return i?i.getAttribute(e):null},t.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'+e+'"]')},t.EVENT_DISPLAYED_CHANGED="displayedChanged",Cv([b("agStackComponentsRegistry")],t.prototype,"agStackComponentsRegistry",void 0),Cv([nx],t.prototype,"preConstructOnComponent",null),Cv([nx],t.prototype,"createChildComponentsPreConstruct",null),t}(ft);function ut(r){return w7.bind(this,"[ref="+r+"]",r)}function w7(r,t,e,i,n){if(r===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof n=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}S7(e,"querySelectors",{attributeName:i,querySelector:r,refSelector:t})}function S7(r,t,e){var i=E7(r,Ig(r.constructor));i[t]||(i[t]=[]),i[t].push(e)}function E7(r,t){return r.__agComponentMetaData||(r.__agComponentMetaData={}),r.__agComponentMetaData[t]||(r.__agComponentMetaData[t]={}),r.__agComponentMetaData[t]}/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var x7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),hx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},R7=function(r){x7(t,r);function t(){return r.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){this.params=e;var i=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(i+" "+n("ariaFilterInput","Filter Input"))},t.prototype.onParentModelChanged=function(e){var i=this;if(!e){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(function(n){if(n.getModelAsString){var o=n.getModelAsString(e);i.eFloatingFilterText.setValue(o)}})},hx([ut("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),hx([b("columnModel")],t.prototype,"columnModel",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var uP=function(){function r(t,e,i,n){var o=this;this.alive=!0,this.context=t,this.eParent=n;var s=e.getDateCompDetails(i),a=s.newAgStackInstance();a.then(function(l){if(!o.alive){t.destroyBean(l);return}o.dateComp=l,l&&(n.appendChild(l.getGui()),l.afterGuiAttached&&l.afterGuiAttached(),o.tempValue&&l.setDate(o.tempValue),o.disabled!=null&&o.setDateCompDisabled(o.disabled))})}return r.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},r.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},r.prototype.setDate=function(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t},r.prototype.setDisabled=function(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t},r.prototype.setDisplayed=function(t){Ke(this.eParent,t)},r.prototype.setInputPlaceholder=function(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)},r.prototype.setInputAriaLabel=function(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)},r.prototype.afterGuiAttached=function(t){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(t)},r.prototype.setDateCompDisabled=function(t){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(t)},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var l_=function(){return l_=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},l_.apply(this,arguments)},cP=function(){function r(){this.customFilterOptions={}}return r.prototype.init=function(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t),this.checkForDeprecatedParams()},r.prototype.checkForDeprecatedParams=function(){this.filterOptions.some(function(t){return typeof t!="string"&&t.test!=null})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, test() has been replaced with predicate()."),this.filterOptions.some(function(t){return typeof t!="string"&&t.hideFilterInput!=null})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, useOfHideFilterInput has been replaced with numberOfInputs.")},r.prototype.getFilterOptions=function(){return this.filterOptions},r.prototype.mapCustomOptions=function(){var t=this;!this.filterOptions||this.filterOptions.forEach(function(e){if(typeof e!="string"){var i=[["displayKey"],["displayName"],["predicate","test"]],n=function(a){return a.some(function(l){return e[l]!=null})?!0:(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+a+"'"),!1)};if(!i.every(n)){t.filterOptions=t.filterOptions.filter(function(a){return a===e})||[];return}var o=e.test,s=l_({},e);o!=null&&e.predicate==null&&(s.predicate=function(a,l){return o(a[0],l)},delete s.test),s.hideFilterInput&&s.numberOfInputs==null&&(s.numberOfInputs=0,delete s.hideFilterInput),t.customFilterOptions[e.displayKey]=s}})},r.prototype.selectDefaultItem=function(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},r.prototype.getDefaultOption=function(){return this.defaultOption},r.prototype.getCustomOption=function(t){return this.customFilterOptions[t]},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var b7={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var M7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),u_=function(){return u_=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},u_.apply(this,arguments)},dx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},aa=function(r){M7(t,r);function t(e,i){i===void 0&&(i={});var n=r.call(this)||this;return n.eFocusableElement=e,n.callbacks=i,n.callbacks=u_({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(o){if(!o.defaultPrevented){var s=n.focusService.findNextFocusableElement(n.eFocusableElement,!1,o.shiftKey);!s||(s.focus(),o.preventDefault())}}},i),n}return t.prototype.postConstruct=function(){this.eFocusableElement.classList.add(t.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},t.prototype.addKeyDownListeners=function(e){var i=this;this.addManagedListener(e,"keydown",function(n){if(!(n.defaultPrevented||vo(n))){if(i.callbacks.shouldStopEventPropagation(n)){Lu(n);return}n.key===lt.TAB?i.callbacks.onTabKeyDown(n):i.callbacks.handleKeyDown&&i.callbacks.handleKeyDown(n)}})},t.FOCUS_MANAGED_CLASS="ag-focus-managed",dx([b("focusService")],t.prototype,"focusService",void 0),dx([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var T7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),px=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},zf=function(r){T7(t,r);function t(e){var i=r.call(this)||this;return i.filterNameKey=e,i.applyActive=!1,i.hidePopup=null,i.appliedModel=null,i}return t.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new aa(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)}))},t.prototype.handleKeyDown=function(e){},t.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},t.prototype.isFilterActive=function(){return!!this.appliedModel},t.prototype.resetTemplate=function(e){var i=this.getGui();i&&i.removeEventListener("submit",this.onFormSubmit);var n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-`+this.getCssIdentifier()+`-body-wrapper">
                    `+this.createBodyTemplate()+`
                </div>
            </form>`;this.setTemplate(n,e),i=this.getGui(),i&&i.addEventListener("submit",this.onFormSubmit)},t.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},t.prototype.init=function(e){var i=this;this.setParams(e),this.resetUiToDefaults(!0).then(function(){i.updateUiVisibility(),i.setupOnBtApplyDebounce()})},t.prototype.setParams=function(e){this.providedFilterParams=e,this.applyActive=t.isUseApplyButton(e),this.createButtonPanel()},t.prototype.createButtonPanel=function(){var e=this,i=this.providedFilterParams.buttons;if(!(!i||i.length<1||this.isReadOnly())){var n=document.createElement("div");n.classList.add("ag-filter-apply-panel");var o=function(s){var a,l;switch(s){case"apply":a=e.translate("applyFilter"),l=function(h){return e.onBtApply(!1,!1,h)};break;case"clear":a=e.translate("clearFilter"),l=function(){return e.onBtClear()};break;case"reset":a=e.translate("resetFilter"),l=function(){return e.onBtReset()};break;case"cancel":a=e.translate("cancelFilter"),l=function(h){e.onBtCancel(h)};break;default:console.warn("AG Grid: Unknown button type specified");return}var u=s==="apply"?"submit":"button",c=Hi(`<button
                    type="`+u+`"
                    ref="`+s+`FilterButton"
                    class="ag-standard-button ag-filter-apply-panel-button"
                >`+a+`
                </button>`);n.appendChild(c),e.addManagedListener(c,"click",l)};lw(i).forEach(function(s){return o(s)}),this.getGui().appendChild(n)}},t.prototype.getDefaultDebounceMs=function(){return 0},t.prototype.setupOnBtApplyDebounce=function(){var e=t.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs());this.onBtApplyDebounce=ea(this.onBtApply.bind(this),e)},t.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},t.prototype.setModel=function(e){var i=this,n=e!=null?this.setModelIntoUi(e):this.resetUiToDefaults();return n.then(function(){i.updateUiVisibility(),i.applyModel()})},t.prototype.onBtCancel=function(e){var i=this,n=this.getModel(),o=function(){i.onUiChanged(!1,"prevent"),i.providedFilterParams.closeOnApply&&i.close(e)};n!=null?this.setModelIntoUi(n).then(o):this.resetUiToDefaults().then(o)},t.prototype.onBtClear=function(){var e=this;this.resetUiToDefaults().then(function(){return e.onUiChanged()})},t.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},t.prototype.applyModel=function(){var e=this.getModelFromUi();if(!this.isModelValid(e))return!1;var i=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(i,e)},t.prototype.isModelValid=function(e){return!0},t.prototype.onFormSubmit=function(e){e.preventDefault()},t.prototype.onBtApply=function(e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!1),n&&n.preventDefault(),this.applyModel()&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:i});var o=this.providedFilterParams.closeOnApply;o&&this.applyActive&&!e&&!i&&this.close(n)},t.prototype.onNewRowsLoaded=function(){},t.prototype.close=function(e){if(!!this.hidePopup){var i=e,n=i&&i.key,o;(n==="Enter"||n==="Space")&&(o={keyboardEvent:i}),this.hidePopup(o),this.hidePopup=null}},t.prototype.onUiChanged=function(e,i){if(e===void 0&&(e=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly){var n=this.isModelValid(this.getModelFromUi());Iu(this.getRefElement("applyFilterButton"),!n)}e&&!i||i==="immediately"?this.onBtApply(e):(!this.applyActive&&!i||i==="debounce")&&this.onBtApplyDebounce()},t.prototype.afterGuiAttached=function(e){e!=null&&(this.hidePopup=e.hidePopup)},t.getDebounceMs=function(e,i){return t.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:i},t.isUseApplyButton=function(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0},t.prototype.destroy=function(){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,r.prototype.destroy.call(this)},t.prototype.translate=function(e){var i=this.gridOptionsWrapper.getLocaleTextFunc();return i(e,b7[e])},t.prototype.getCellValue=function(e){var i=this.providedFilterParams,n=i.api,o=i.colDef,s=i.column,a=i.columnApi,l=i.context;return this.providedFilterParams.valueGetter({api:n,colDef:o,column:s,columnApi:a,context:l,data:e.data,getValue:function(u){return e.data[u]},node:e})},px([b("rowModel")],t.prototype,"rowModel",void 0),px([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var P7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),O7=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},cw=function(r){P7(t,r);function t(e,i){var n=r.call(this,i)||this;return n.labelSeparator="",n.labelAlignment="left",n.disabled=!1,n.label="",n.config=e||{},n}return t.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var e=this.config,i=e.labelSeparator,n=e.label,o=e.labelWidth,s=e.labelAlignment;i!=null&&this.setLabelSeparator(i),n!=null&&this.setLabel(n),o!=null&&this.setLabelWidth(o),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()},t.prototype.refreshLabel=function(){qn(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(this.eLabel.classList.add("ag-hidden"),an(this.eLabel,"presentation")):(this.eLabel.classList.remove("ag-hidden"),an(this.eLabel,null))},t.prototype.setLabelSeparator=function(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)},t.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)},t.prototype.setLabelAlignment=function(e){var i=this.getGui(),n=i.classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this},t.prototype.setLabelWidth=function(e){return this.label==null?this:(od(this.eLabel,e),this)},t.prototype.setDisabled=function(e){e=!!e;var i=this.getGui();return Iu(i,e),i.classList.toggle("ag-disabled",e),this.disabled=e,this},t.prototype.isDisabled=function(){return!!this.disabled},O7([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var A7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zo=function(r){A7(t,r);function t(e,i,n){var o=r.call(this,e,i)||this;return o.className=n,o}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className)},t.prototype.onValueChange=function(e){var i=this;return this.addManagedListener(this,t.EVENT_CHANGED,function(){return e(i.getValue())}),this},t.prototype.getWidth=function(){return this.getGui().clientWidth},t.prototype.setWidth=function(e){return So(this.getGui(),e),this},t.prototype.getPreviousValue=function(){return this.previousValue},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e,i){return this.value===e?this:(this.previousValue=this.value,this.value=e,i||this.dispatchEvent({type:t.EVENT_CHANGED}),this)},t.EVENT_CHANGED="valueChange",t}(cw);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var D7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),up=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},hP=function(r){D7(t,r);function t(e,i,n,o){var s=r.call(this,e,`<div class="ag-picker-field" role="presentation">
                <div ref="eLabel"></div>
                <div ref="eWrapper"
                    class="ag-wrapper ag-picker-field-wrapper"
                    tabIndex="-1"
                    aria-expanded="false"
                    `+(o?'role="'+o+'"':"")+`
                >
                    <div ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,i)||this;return s.pickerIcon=n,s.isPickerDisplayed=!1,s.isDestroyingPicker=!1,s.skipClick=!1,s}return t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this);var i=this.getCompId()+"-display";this.eDisplayField.setAttribute("id",i),tw(this.eWrapper,i);var n=function(){if(e.skipClick){e.skipClick=!1;return}e.isDisabled()||(e.pickerComponent=e.showPicker())},o=this.getGui();if(this.addManagedListener(o,"mousedown",function(a){!e.skipClick&&e.pickerComponent&&e.pickerComponent.isAlive()&&Ju(e.pickerComponent.getGui())&&o.contains(a.target)&&(e.skipClick=!0)}),this.addManagedListener(o,"keydown",function(a){switch(a.key){case lt.UP:case lt.DOWN:case lt.ENTER:case lt.SPACE:n();case lt.ESCAPE:e.isPickerDisplayed&&a.preventDefault();break}}),this.addManagedListener(this.eWrapper,"click",n),this.addManagedListener(this.eLabel,"click",n),this.pickerIcon){var s=_i(this.pickerIcon,this.gridOptionsWrapper);s&&this.eIcon.appendChild(s)}},t.prototype.refreshLabel=function(){dt(this.getLabel())?QC(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),r.prototype.refreshLabel.call(this)},t.prototype.setAriaLabel=function(e){return cl(this.eWrapper,e),this},t.prototype.setInputWidth=function(e){return od(this.eWrapper,e),this},t.prototype.getFocusableElement=function(){return this.eWrapper},up([ut("eLabel")],t.prototype,"eLabel",void 0),up([ut("eWrapper")],t.prototype,"eWrapper",void 0),up([ut("eDisplayField")],t.prototype,"eDisplayField",void 0),up([ut("eIcon")],t.prototype,"eIcon",void 0),t}(Zo);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var L7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),I7=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},fx=function(r){L7(t,r);function t(e){e===void 0&&(e="default");var i=r.call(this,'<div class="ag-list ag-'+e+'-list" role="listbox"></div>')||this;return i.cssIdentifier=e,i.options=[],i.itemEls=[],i}return t.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){var i=e.key;switch(i){case lt.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{var n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case lt.DOWN:case lt.UP:var o=i===lt.DOWN,s=void 0;if(e.preventDefault(),!this.highlightedEl)s=this.itemEls[o?0:this.itemEls.length-1];else{var a=this.itemEls.indexOf(this.highlightedEl),l=a+(o?1:-1);l=Math.min(Math.max(l,0),this.itemEls.length-1),s=this.itemEls[l]}this.highlightItem(s);break}},t.prototype.addOptions=function(e){var i=this;return e.forEach(function(n){return i.addOption(n)}),this},t.prototype.addOption=function(e){var i=e.value,n=e.text,o=wo(n||i);return this.options.push({value:i,text:o}),this.renderOption(i,o),this.updateIndices(),this},t.prototype.updateIndices=function(){var e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(function(i,n){rw(i,n+1),nw(i,e.length)})},t.prototype.renderOption=function(e,i){var n=this,o=document.createElement("div");an(o,"option"),o.classList.add("ag-list-item","ag-"+this.cssIdentifier+"-list-item"),o.innerHTML="<span>"+i+"</span>",o.tabIndex=-1,this.itemEls.push(o),this.addManagedListener(o,"mouseover",function(){return n.highlightItem(o)}),this.addManagedListener(o,"mouseleave",function(){return n.clearHighlighted()}),this.addManagedListener(o,"click",function(){return n.setValue(e)}),this.getGui().appendChild(o)},t.prototype.setValue=function(e,i){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(),this;var n=this.options.findIndex(function(s){return s.value===e});if(n!==-1){var o=this.options[n];this.value=o.value,this.displayValue=o.text!=null?o.text:o.value,this.highlightItem(this.itemEls[n]),i||this.fireChangeEvent()}return this},t.prototype.setValueByIndex=function(e){return this.setValue(this.options[e].value)},t.prototype.getValue=function(){return this.value},t.prototype.getDisplayValue=function(){return this.displayValue},t.prototype.refreshHighlighted=function(){var e=this;this.clearHighlighted();var i=this.options.findIndex(function(n){return n.value===e.value});i!==-1&&this.highlightItem(this.itemEls[i])},t.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},t.prototype.highlightItem=function(e){!e.offsetParent||(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(t.ACTIVE_CLASS),Fu(this.highlightedEl,!0),this.highlightedEl.focus())},t.prototype.clearHighlighted=function(){!this.highlightedEl||!this.highlightedEl.offsetParent||(this.highlightedEl.classList.remove(t.ACTIVE_CLASS),Fu(this.highlightedEl,!1),this.highlightedEl=null)},t.prototype.fireChangeEvent=function(){this.dispatchEvent({type:Zo.EVENT_CHANGED}),this.fireItemSelected()},t.prototype.fireItemSelected=function(){this.dispatchEvent({type:t.EVENT_ITEM_SELECTED})},t.EVENT_ITEM_SELECTED="selectedItem",t.ACTIVE_CLASS="ag-active-item",I7([Ct],t.prototype,"init",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var F7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),gx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dP=function(r){F7(t,r);function t(e){return r.call(this,e,"ag-select","smallDown","listbox")||this}return t.prototype.init=function(){var e=this;this.listComponent=this.createBean(new fx("select")),this.listComponent.setParentComponent(this),this.eWrapper.tabIndex=0,this.listComponent.addManagedListener(this.listComponent,fx.EVENT_ITEM_SELECTED,function(){e.hideList&&e.hideList()}),this.listComponent.addManagedListener(this.listComponent,Zo.EVENT_CHANGED,function(){e.setValue(e.listComponent.getValue(),!1,!0),e.hideList&&e.hideList()})},t.prototype.showPicker=function(){var e=this,i=this.listComponent.getGui(),n=this.gridOptionsWrapper.getDocument(),o=this.addManagedListener(n.body,"wheel",function(u){!i.contains(u.target)&&e.hideList&&e.hideList()}),s=this.addManagedListener(i,"focusout",function(u){!i.contains(u.relatedTarget)&&e.hideList&&e.hideList()}),a=this.gridOptionsWrapper.getLocaleTextFunc(),l=this.popupService.addPopup({modal:!0,eChild:i,closeOnEsc:!0,closedCallback:function(){e.hideList=null,e.isPickerDisplayed=!1,s(),o(),e.isAlive()&&($n(e.eWrapper,!1),e.getFocusableElement().focus())},ariaLabel:a("ariaLabelSelectField","Select Field")});return l&&(this.hideList=l.hideFunc),this.isPickerDisplayed=!0,od(i,Wg(this.eWrapper)),$n(this.eWrapper,!0),i.style.maxHeight=rd(this.popupService.getPopupParent())+"px",i.style.position="absolute",this.popupService.positionPopupUnderComponent({type:"ag-list",eventSource:this.eWrapper,ePopup:i,keepWithinBounds:!0}),this.listComponent.refreshHighlighted(),this.listComponent},t.prototype.addOptions=function(e){var i=this;return e.forEach(function(n){return i.addOption(n)}),this},t.prototype.addOption=function(e){return this.listComponent.addOption(e),this},t.prototype.setValue=function(e,i,n){if(this.value===e)return this;n||this.listComponent.setValue(e,!0);var o=this.listComponent.getValue();return o===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),r.prototype.setValue.call(this,e,i))},t.prototype.destroy=function(){this.hideList&&this.hideList(),this.destroyBean(this.listComponent),r.prototype.destroy.call(this)},gx([b("popupService")],t.prototype,"popupService",void 0),gx([Ct],t.prototype,"init",null),t}(hP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var N7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),wv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},$o=function(r){N7(t,r);function t(e,i,n,o){n===void 0&&(n="text"),o===void 0&&(o="input");var s=r.call(this,e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <`+o+' ref="eInput" class="ag-input-field-input"></'+o+`>
                </div>
            </div>`,i)||this;return s.inputType=n,s.displayFieldTag=o,s}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add(this.className+"-label"),this.eWrapper.classList.add(this.className+"-input-wrapper"),this.eInput.classList.add(this.className+"-input"),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var e=this.config,i=e.width,n=e.value;i!=null&&this.setWidth(i),n!=null&&this.setValue(n),this.addInputListeners()},t.prototype.refreshLabel=function(){dt(this.getLabel())?QC(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),r.prototype.refreshLabel.call(this)},t.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(i){return e.setValue(i.target.value)})},t.prototype.setInputType=function(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)},t.prototype.getInputElement=function(){return this.eInput},t.prototype.setInputWidth=function(e){return od(this.eWrapper,e),this},t.prototype.setInputName=function(e){return this.getInputElement().setAttribute("name",e),this},t.prototype.getFocusableElement=function(){return this.eInput},t.prototype.setMaxLength=function(e){var i=this.eInput;return i.maxLength=e,this},t.prototype.setInputPlaceholder=function(e){return nh(this.eInput,"placeholder",e),this},t.prototype.setInputAriaLabel=function(e){return cl(this.eInput,e),this},t.prototype.setDisabled=function(e){return Iu(this.eInput,e),r.prototype.setDisabled.call(this,e)},wv([ut("eLabel")],t.prototype,"eLabel",void 0),wv([ut("eWrapper")],t.prototype,"eWrapper",void 0),wv([ut("eInput")],t.prototype,"eInput",void 0),t}(Zo);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var G7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ga=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ji;(function(r){r[r.One=0]="One",r[r.Two=1]="Two"})(Ji||(Ji={}));var si=function(r){G7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getNumberOfInputs=function(e){var i=this.optionsFactory.getCustomOption(e);if(i){var n=i.numberOfInputs;return n!=null?n:1}var o=[t.EMPTY,t.NOT_BLANK,t.BLANK];return e&&o.indexOf(e)>=0?0:e===t.IN_RANGE?2:1},t.prototype.onFloatingFilterChanged=function(e,i){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)},t.prototype.setTypeFromFloatingFilter=function(e){this.eType1.setValue(e),this.eType2.setValue(this.optionsFactory.getDefaultOption()),(this.isDefaultOperator("AND")?this.eJoinOperatorAnd:this.eJoinOperatorOr).setValue(!0)},t.prototype.getModelFromUi=function(){return this.isConditionUiComplete(Ji.One)?this.isAllowTwoConditions()&&this.isConditionUiComplete(Ji.Two)?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:this.createCondition(Ji.One),condition2:this.createCondition(Ji.Two)}:this.createCondition(Ji.One):null},t.prototype.getConditionTypes=function(){return[this.eType1.getValue(),this.eType2.getValue()]},t.prototype.getJoinOperator=function(){return this.eJoinOperatorOr.getValue()===!0?"OR":"AND"},t.prototype.areModelsEqual=function(e,i){if(!e&&!i)return!0;if(!e&&i||e&&!i)return!1;var n=!e.operator,o=!i.operator,s=!n&&o||n&&!o;if(s)return!1;var a;if(n){var l=e,u=i;a=this.areSimpleModelsEqual(l,u)}else{var c=e,h=i;a=c.operator===h.operator&&this.areSimpleModelsEqual(c.condition1,h.condition1)&&this.areSimpleModelsEqual(c.condition2,h.condition2)}return a},t.prototype.setModelIntoUi=function(e){var i=e.operator;if(i){var n=e,o=n.operator==="OR";this.eJoinOperatorAnd.setValue(!o),this.eJoinOperatorOr.setValue(o),this.eType1.setValue(n.condition1.type),this.eType2.setValue(n.condition2.type),this.setConditionIntoUi(n.condition1,Ji.One),this.setConditionIntoUi(n.condition2,Ji.Two)}else{var s=e;this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND")),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR")),this.eType1.setValue(s.type),this.eType2.setValue(this.optionsFactory.getDefaultOption()),this.setConditionIntoUi(s,Ji.One),this.setConditionIntoUi(null,Ji.Two)}return cr.resolve()},t.prototype.doesFilterPass=function(e){var i=this,n=this.getModel();if(n==null)return!0;var o=n.operator,s=[];if(o){var a=n;s.push(a.condition1,a.condition2)}else s.push(n);var l=o&&o==="OR"?"some":"every";return s[l](function(u){return i.individualConditionPasses(e,u)})},t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.optionsFactory=new cP,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.allowTwoConditions=!e.suppressAndOrCondition,this.alwaysShowBothConditions=!!e.alwaysShowBothConditions,this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.putOptionsIntoDropdown(),this.addChangedListeners()},t.prototype.getDefaultJoinOperator=function(e){return Xn(["AND","OR"],e)?e:"AND"},t.prototype.putOptionsIntoDropdown=function(){var e=this,i=this.optionsFactory.getFilterOptions(),n=[this.eType1,this.eType2];i.forEach(function(o){var s=typeof o=="string"?e.createBoilerplateListOption(o):e.createCustomListOption(o);n.forEach(function(a){return a.addOption(s)})}),n.forEach(function(o){return o.setDisabled(i.length<=1)})},t.prototype.createBoilerplateListOption=function(e){return{value:e,text:this.translate(e)}},t.prototype.createCustomListOption=function(e){var i=e.displayKey,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:i,text:n?this.gridOptionsWrapper.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(i)}},t.prototype.isAllowTwoConditions=function(){return this.allowTwoConditions},t.prototype.createBodyTemplate=function(){return`
            <ag-select class="ag-filter-select" ref="eOptions1"></ag-select>
            `+this.createValueTemplate(Ji.One)+`
            <div class="ag-filter-condition" ref="eJoinOperatorPanel">
               <ag-radio-button ref="eJoinOperatorAnd" class="ag-filter-condition-operator ag-filter-condition-operator-and"></ag-radio-button>
               <ag-radio-button ref="eJoinOperatorOr" class="ag-filter-condition-operator ag-filter-condition-operator-or"></ag-radio-button>
            </div>
            <ag-select class="ag-filter-select" ref="eOptions2"></ag-select>
            `+this.createValueTemplate(Ji.Two)},t.prototype.getCssIdentifier=function(){return"simple-filter"},t.prototype.updateUiVisibility=function(){var e=this,i=[[this.eType1],[this.eType2,this.eJoinOperatorPanel,this.eJoinOperatorAnd,this.eJoinOperatorOr]],n=[this.eCondition1Body,this.eCondition2Body];i.forEach(function(o,s){var a=e.isConditionVisible(s),l=e.isConditionDisabled(s);o.forEach(function(u){u instanceof $o||u instanceof dP?(u.setDisabled(l),u.setDisplayed(a)):(Iu(u,l),Ke(u,a))})}),n.forEach(function(o,s){Ke(o,e.isConditionBodyVisible(s))}),this.forEachInput(function(o,s,a,l){e.setElementDisplayed(o,s<l),e.setElementDisabled(o,e.isConditionDisabled(a))}),this.resetPlaceholder()},t.prototype.afterGuiAttached=function(e){if(r.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!e||!e.suppressFocus&&!this.isReadOnly()){var i=this.getInputs()[0][0];if(!i)return;i instanceof $o&&i.getInputElement().focus()}},t.prototype.getPlaceholderText=function(e,i){var n=this.translate(e);if(Fg(this.filterPlaceholder)){var o=this.filterPlaceholder,s=i===0?this.eType1.getValue():this.eType2.getValue(),a=this.translate(s);n=o({filterOptionKey:s,filterOption:a,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n},t.prototype.resetPlaceholder=function(){var e=this,i=this.gridOptionsWrapper.getLocaleTextFunc();this.forEachInput(function(n,o,s,a){if(n instanceof $o){var l=o===0&&a>1?"inRangeStart":o===0?"filterOoo":"inRangeEnd",u=o===0&&a>1?i("ariaFilterFromValue","Filter from value"):o===0?i("ariaFilterValue","Filter Value"):i("ariaFilterToValue","Filter to Value");n.setInputPlaceholder(e.getPlaceholderText(l,s)),n.setInputAriaLabel(u)}})},t.prototype.setElementValue=function(e,i,n){e instanceof $o&&e.setValue(i!=null?String(i):null,n)},t.prototype.setElementDisplayed=function(e,i){e instanceof le&&Ke(e.getGui(),i)},t.prototype.setElementDisabled=function(e,i){e instanceof le&&Iu(e.getGui(),i)},t.prototype.attachElementOnChange=function(e,i){e instanceof $o&&e.onValueChange(i)},t.prototype.forEachInput=function(e){var i=this,n=this.getInputs();this.getConditionTypes().forEach(function(o,s){for(var a=i.getNumberOfInputs(o),l=0;l<n[s].length;l++){var u=n[s][l];u!=null&&e(u,l,s,a)}})},t.prototype.isConditionVisible=function(e){return e===0?!0:this.allowTwoConditions?this.isReadOnly()?this.isConditionUiComplete(e):this.alwaysShowBothConditions?!0:this.isConditionUiComplete(e-1):!1},t.prototype.isConditionDisabled=function(e){return this.isReadOnly()||!this.isConditionVisible(e)?!0:e===0?!1:!this.isConditionUiComplete(e-1)},t.prototype.isConditionBodyVisible=function(e){if(!this.isConditionVisible(e))return!1;var i=this.getConditionTypes()[e],n=this.getNumberOfInputs(i);return n>0},t.prototype.isConditionUiComplete=function(e){var i=this.getConditionTypes()[e];return!(i===t.EMPTY||this.getValues(e).some(function(n){return n==null}))},t.prototype.resetUiToDefaults=function(e){var i=this,n=this.gridOptionsWrapper.getLocaleTextFunc(),o=n("ariaFilteringOperator","Filtering operator"),s="ag-simple-filter-and-or-"+this.getCompId(),a=this.optionsFactory.getDefaultOption();return this.eType1.setValue(a,e).setAriaLabel(o).setDisabled(this.isReadOnly()),this.eType2.setValue(this.optionsFactory.getDefaultOption(),e).setAriaLabel(o).setDisabled(this.isReadOnly()),this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"),e).setName(s).setLabel(this.translate("andCondition")).setDisabled(this.isReadOnly()),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"),e).setName(s).setLabel(this.translate("orCondition")).setDisabled(this.isReadOnly()),this.forEachInput(function(l){i.setElementValue(l,null,e),i.setElementDisabled(l,i.isReadOnly())}),this.resetPlaceholder(),cr.resolve()},t.prototype.setConditionIntoUi=function(e,i){var n=this,o=this.mapValuesFromModel(e);this.forEachInput(function(s,a,l,u){l===i&&n.setElementValue(s,o[a]!=null?o[a]:null)})},t.prototype.setValueFromFloatingFilter=function(e){var i=this;this.forEachInput(function(n,o,s,a){i.setElementValue(n,o===0&&s===0?e:null)})},t.prototype.isDefaultOperator=function(e){return e===this.defaultJoinOperator},t.prototype.addChangedListeners=function(){var e=this;if(!this.isReadOnly()){var i=function(){return e.onUiChanged()};this.eType1.onValueChange(i),this.eType2.onValueChange(i),this.eJoinOperatorOr.onValueChange(i),this.eJoinOperatorAnd.onValueChange(i),this.forEachInput(function(n){e.attachElementOnChange(n,i)})}},t.prototype.individualConditionPasses=function(e,i){var n=this.getCellValue(e.node),o=this.mapValuesFromModel(i),s=this.optionsFactory.getCustomOption(i.type),a=this.evaluateCustomFilter(s,o,n);return a!=null?a:n==null?this.evaluateNullValue(i.type):this.evaluateNonNullValue(o,n,i,e)},t.prototype.evaluateCustomFilter=function(e,i,n){if(e!=null){var o=e.predicate;if(o!=null&&!i.some(function(s){return s==null}))return o(i,n)}},t.prototype.isBlank=function(e){return e==null||typeof e=="string"&&e.trim().length===0},t.EMPTY="empty",t.BLANK="blank",t.NOT_BLANK="notBlank",t.EQUALS="equals",t.NOT_EQUAL="notEqual",t.LESS_THAN="lessThan",t.LESS_THAN_OR_EQUAL="lessThanOrEqual",t.GREATER_THAN="greaterThan",t.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",t.IN_RANGE="inRange",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.STARTS_WITH="startsWith",t.ENDS_WITH="endsWith",ga([ut("eOptions1")],t.prototype,"eType1",void 0),ga([ut("eOptions2")],t.prototype,"eType2",void 0),ga([ut("eJoinOperatorPanel")],t.prototype,"eJoinOperatorPanel",void 0),ga([ut("eJoinOperatorAnd")],t.prototype,"eJoinOperatorAnd",void 0),ga([ut("eJoinOperatorOr")],t.prototype,"eJoinOperatorOr",void 0),ga([ut("eCondition1Body")],t.prototype,"eCondition1Body",void 0),ga([ut("eCondition2Body")],t.prototype,"eCondition2Body",void 0),t}(zf);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var H7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Li=function(r){H7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.scalarFilterParams=e},t.prototype.evaluateNullValue=function(e){switch(e){case t.EQUALS:case t.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case t.GREATER_THAN:case t.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case t.LESS_THAN:case t.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case t.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case t.BLANK:return!0;case t.NOT_BLANK:return!1}return!1},t.prototype.evaluateNonNullValue=function(e,i,n){var o=this.comparator(),s=e[0]!=null?o(e[0],i):0;switch(n.type){case t.EQUALS:return s===0;case t.NOT_EQUAL:return s!==0;case t.GREATER_THAN:return s>0;case t.GREATER_THAN_OR_EQUAL:return s>=0;case t.LESS_THAN:return s<0;case t.LESS_THAN_OR_EQUAL:return s<=0;case t.IN_RANGE:{var a=o(e[1],i);return this.scalarFilterParams.inRangeInclusive?s>=0&&a<=0:s>0&&a<0}case t.BLANK:return this.isBlank(i);case t.NOT_BLANK:return!this.isBlank(i);default:return console.warn('AG Grid: Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},t}(si);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var W7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),c_=function(){return c_=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},c_.apply(this,arguments)},Cc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},mx=1e3,vx=1/0,pP=function(r){W7(t,r);function t(){var e=r.call(this,"dateFilter")||this;return e.minValidYear=mx,e.maxValidYear=vx,e}return t.prototype.afterGuiAttached=function(e){r.prototype.afterGuiAttached.call(this,e),this.dateCondition1FromComp.afterGuiAttached(e)},t.prototype.mapValuesFromModel=function(e){var i=e||{},n=i.dateFrom,o=i.dateTo,s=i.type;return[n&&Vs(n)||null,o&&Vs(o)||null].slice(0,this.getNumberOfInputs(s))},t.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},t.prototype.defaultComparator=function(e,i){var n=i;return i==null||n<e?-1:n>e?1:0},t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.dateFilterParams=e;var i=function(n,o){if(e[n]!=null)if(isNaN(e[n]))console.warn("AG Grid: DateFilter "+n+" is not a number");else return e[n]==null?o:Number(e[n]);return o};this.minValidYear=i("minValidYear",mx),this.maxValidYear=i("maxValidYear",vx),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.createDateComponents()},t.prototype.createDateComponents=function(){var e=this,i=function(n){return new uP(e.getContext(),e.userComponentFactory,{onDateChanged:function(){return e.onUiChanged()},filterParams:e.dateFilterParams},n)};this.dateCondition1FromComp=i(this.eCondition1PanelFrom),this.dateCondition1ToComp=i(this.eCondition1PanelTo),this.dateCondition2FromComp=i(this.eCondition2PanelFrom),this.dateCondition2ToComp=i(this.eCondition2PanelTo),this.addDestroyFunc(function(){e.forEachInput(function(n){return n.destroy()})})},t.prototype.setElementValue=function(e,i,n){e.setDate(i)},t.prototype.setElementDisplayed=function(e,i){e.setDisplayed(i)},t.prototype.setElementDisabled=function(e,i){e.setDisabled(i)},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueTemplate=function(e){var i=e===Ji.One?"1":"2";return`
            <div class="ag-filter-body" ref="eCondition`+i+`Body">
                <div class="ag-filter-from ag-filter-date-from" ref="eCondition`+i+`PanelFrom"></div>
                <div class="ag-filter-to ag-filter-date-to" ref="eCondition`+i+`PanelTo"></div>
            </div>`},t.prototype.isConditionUiComplete=function(e){var i=this;if(!r.prototype.isConditionUiComplete.call(this,e))return!1;var n=function(s){return s!=null&&s.getUTCFullYear()>=i.minValidYear&&s.getUTCFullYear()<=i.maxValidYear},o=!0;return this.forEachInput(function(s,a,l,u){l!==e||!o||a>=u||(o=o&&n(s.getDate()))}),o},t.prototype.areSimpleModelsEqual=function(e,i){return e.dateFrom===i.dateFrom&&e.dateTo===i.dateTo&&e.type===i.type},t.prototype.getFilterType=function(){return"date"},t.prototype.createCondition=function(e){var i=this.getConditionTypes()[e],n={},o=this.getValues(e);return o.length>0&&(n.dateFrom=Lh(o[0])),o.length>1&&(n.dateTo=Lh(o[1])),c_({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:i},n)},t.prototype.resetPlaceholder=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),i=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(function(o){o.setInputPlaceholder(i),o.setInputAriaLabel(n)})},t.prototype.getInputs=function(){return[[this.dateCondition1FromComp,this.dateCondition1ToComp],[this.dateCondition2FromComp,this.dateCondition2ToComp]]},t.prototype.getValues=function(e){var i=[];return this.forEachInput(function(n,o,s,a){e===s&&o<a&&i.push(n.getDate())}),i},t.DEFAULT_FILTER_OPTIONS=[Li.EQUALS,Li.GREATER_THAN,Li.LESS_THAN,Li.NOT_EQUAL,Li.IN_RANGE,Li.BLANK,Li.NOT_BLANK],Cc([ut("eCondition1PanelFrom")],t.prototype,"eCondition1PanelFrom",void 0),Cc([ut("eCondition1PanelTo")],t.prototype,"eCondition1PanelTo",void 0),Cc([ut("eCondition2PanelFrom")],t.prototype,"eCondition2PanelFrom",void 0),Cc([ut("eCondition2PanelTo")],t.prototype,"eCondition2PanelTo",void 0),Cc([b("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(Li);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var V7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),fP=function(r){V7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultDebounceMs=function(){return 0},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.getTextFromModel=function(e){if(!e)return null;var i=e.operator!=null;if(i){var n=e,o=n||{},s=o.condition1,a=o.condition2,l=this.getTextFromModel(s),u=this.getTextFromModel(a);return[l,n.operator,u].join(" ")}else if(e.type===si.BLANK||e.type===si.NOT_BLANK){var c=this.gridOptionsWrapper.getLocaleTextFunc();return c(e.type,e.type)}else{var h=e,d=this.optionsFactory.getCustomOption(h.type),p=d||{},f=p.displayKey,m=p.displayName,g=p.numberOfInputs;return f&&m&&g===0?(this.gridOptionsWrapper.getLocaleTextFunc()(f,m),m):this.conditionToString(h,d)}},t.prototype.isEventFromFloatingFilter=function(e){return e&&e.afterFloatingFilter},t.prototype.getLastType=function(){return this.lastType},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.setLastTypeFromModel=function(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}var i=e.operator,n;if(i){var o=e;n=o.condition1}else n=e;this.lastType=n.type},t.prototype.canWeEditAfterModelFromParentFilter=function(e){if(!e)return this.isTypeEditable(this.lastType);var i=e.operator;if(i)return!1;var n=e;return this.isTypeEditable(n.type)},t.prototype.init=function(e){this.optionsFactory=new cP,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;var i=this.isTypeEditable(this.lastType);this.setEditable(i)},t.prototype.doesFilterHaveSingleInput=function(e){var i=this.optionsFactory.getCustomOption(e),n=(i||{}).numberOfInputs;return n==null||n==1},t.prototype.isTypeEditable=function(e){var i=[si.IN_RANGE,si.EMPTY,si.BLANK,si.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&i.indexOf(e)<0},t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var k7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},B7=function(r){k7(t,r);function t(){return r.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)||this}return t.prototype.getDefaultFilterOptions=function(){return pP.DEFAULT_FILTER_OPTIONS},t.prototype.conditionToString=function(e,i){var n=e.type,o=(i||{}).numberOfInputs,s=n==si.IN_RANGE||o===2,a=Vs(e.dateFrom),l=Vs(e.dateTo),u=this.filterParams.inRangeFloatingFilterDateFormat;if(s){var c=a!==null?zp(a,u):"null",h=l!==null?zp(l,u):"null";return c+"-"+h}return a!=null?zp(a,u):""+n},t.prototype.init=function(e){r.prototype.init.call(this,e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent();var i=this.gridOptionsWrapper.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(i("ariaDateFilterInput","Date Filter Input"))},t.prototype.setEditable=function(e){Ke(this.eDateWrapper,e),Ke(this.eReadOnlyText.getGui(),!e)},t.prototype.onParentModelChanged=function(e,i){if(!this.isEventFromFloatingFilter(i)){r.prototype.setLastTypeFromModel.call(this,e);var n=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(n),n){if(e){var o=e;this.dateComp.setDate(Vs(o.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.getTextFromModel(e)),this.dateComp.setDate(null)}},t.prototype.onDateChanged=function(){var e=this,i=this.dateComp.getDate(),n=Lh(i);this.params.parentFilterInstance(function(o){if(o){var s=Vs(n);o.onFloatingFilterChanged(e.getLastType()||null,s)}})},t.prototype.createDateComponent=function(){var e=this,i=zf.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),n={onDateChanged:ea(this.onDateChanged.bind(this),i),filterParams:this.params.column.getColDef().filterParams};this.dateComp=new uP(this.getContext(),this.userComponentFactory,n,this.eDateWrapper),this.addDestroyFunc(function(){return e.dateComp.destroy()})},Sv([b("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Sv([ut("eReadOnlyText")],t.prototype,"eReadOnlyText",void 0),Sv([ut("eDateWrapper")],t.prototype,"eDateWrapper",void 0),t}(fP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var U7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),z7=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},j7=function(r){U7(t,r);function t(){return r.call(this,`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var i=this,n=this.gridOptionsWrapper.getDocument(),o=this.eDateInput.getInputElement();this.shouldUseBrowserDatePicker(e)&&(o.type="date"),this.addManagedListener(o,"mousedown",function(){i.eDateInput.isDisabled()||o.focus()}),this.addManagedListener(o,"input",function(u){u.target===n.activeElement&&(i.eDateInput.isDisabled()||e.onDateChanged())});var s=e.filterParams||{},a=s.minValidYear,l=s.maxValidYear;a&&(o.min=a+"-01-01"),l&&(o.max=l+"-12-31")},t.prototype.getDate=function(){return Vs(this.eDateInput.getValue())},t.prototype.setDate=function(e){this.eDateInput.setValue(Lh(e,!1))},t.prototype.setInputPlaceholder=function(e){this.eDateInput.setInputPlaceholder(e)},t.prototype.setDisabled=function(e){this.eDateInput.setDisabled(e)},t.prototype.afterGuiAttached=function(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()},t.prototype.shouldUseBrowserDatePicker=function(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:nd()||UC()},z7([ut("eDateInput")],t.prototype,"eDateInput",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var $7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),cp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gP=function(r){$7(t,r);function t(){return r.call(this,"numberFilter")||this}return t.prototype.mapValuesFromModel=function(e){var i=e||{},n=i.filter,o=i.filterTo,s=i.type;return[n==null?null:n,o==null?null:o].slice(0,this.getNumberOfInputs(s))},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.comparator=function(){return function(e,i){return e===i?0:e<i?1:-1}},t.prototype.setParams=function(e){this.numberFilterParams=e;var i=this.getAllowedCharPattern();if(i){var n={allowedCharPattern:i};this.resetTemplate({"eValue-index0-1":n,"eValue-index1-1":n,"eValue-index0-2":n,"eValue-index1-2":n})}r.prototype.setParams.call(this,e)},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueTemplate=function(e){var i=e===Ji.One?"1":"2",n=this.getAllowedCharPattern(),o=n?"ag-input-text-field":"ag-input-number-field";return`
            <div class="ag-filter-body" ref="eCondition`+i+`Body" role="presentation">
                <`+o+' class="ag-filter-from ag-filter-filter" ref="eValue-index0-'+i+'"></'+o+`>
                <`+o+' class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+i+'"></'+o+`>
            </div>`},t.prototype.getValues=function(e){var i=this,n=[];return this.forEachInput(function(o,s,a,l){e===a&&s<l&&n.push(i.stringToFloat(o.getValue()))}),n},t.prototype.areSimpleModelsEqual=function(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type},t.prototype.getFilterType=function(){return"number"},t.prototype.stringToFloat=function(e){if(typeof e=="number")return e;var i=Ys(e);return i!=null&&i.trim()===""&&(i=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(i):i==null||i.trim()==="-"?null:parseFloat(i)},t.prototype.createCondition=function(e){var i=this.getConditionTypes()[e],n={filterType:this.getFilterType(),type:i},o=this.getValues(e);return o.length>0&&(n.filter=o[0]),o.length>1&&(n.filterTo=o[1]),n},t.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},t.prototype.getAllowedCharPattern=function(){var e=(this.numberFilterParams||{}).allowedCharPattern;return e||(!nd()&&!Ng()?"\\d\\-\\.":null)},t.DEFAULT_FILTER_OPTIONS=[Li.EQUALS,Li.NOT_EQUAL,Li.LESS_THAN,Li.LESS_THAN_OR_EQUAL,Li.GREATER_THAN,Li.GREATER_THAN_OR_EQUAL,Li.IN_RANGE,Li.BLANK,Li.NOT_BLANK],cp([ut("eValue-index0-1")],t.prototype,"eValueFrom1",void 0),cp([ut("eValue-index1-1")],t.prototype,"eValueTo1",void 0),cp([ut("eValue-index0-2")],t.prototype,"eValueFrom2",void 0),cp([ut("eValue-index1-2")],t.prototype,"eValueTo2",void 0),t}(Li);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Y7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),jf=function(){return jf=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},jf.apply(this,arguments)},hp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},hw=function(r){Y7(t,r);function t(){return r.call(this,"textFilter")||this}return t.trimInput=function(e){var i=e&&e.trim();return i===""?e:i},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.textFilterParams=e,this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?t.DEFAULT_FORMATTER:t.DEFAULT_LOWERCASE_FORMATTER)},t.prototype.getTextMatcher=function(){var e=this.textFilterParams.textCustomComparator;return e?(Jt.doOnce(function(){return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.")},"textCustomComparator.deprecated"),function(i){var n=i.filterOption,o=i.value,s=i.filterText;return e(n,o,s)}):this.textFilterParams.textMatcher||t.DEFAULT_MATCHER},t.prototype.createCondition=function(e){var i=this.getConditionTypes()[e],n={filterType:this.getFilterType(),type:i},o=this.getValues(e);return o.length>0&&(n.filter=o[0]),o.length>1&&(n.filterTo=o[1]),n},t.prototype.getFilterType=function(){return"text"},t.prototype.areSimpleModelsEqual=function(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type},t.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},t.prototype.getValues=function(e){var i=this,n=[];return this.forEachInput(function(o,s,a,l){if(e===a&&s<l){var u=Ys(o.getValue()),c=(i.textFilterParams.trimInput?t.trimInput(u):u)||null;n.push(c),o.setValue(c,!0)}}),n},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueTemplate=function(e){var i=e===Ji.One?"1":"2";return`
            <div class="ag-filter-body" ref="eCondition`+i+`Body" role="presentation">
                <ag-input-text-field class=".ag-filter-from ag-filter-filter" ref="eValue-index0-`+i+`"></ag-input-text-field>
                <ag-input-text-field class="ag-filter-to ag-filter-filter" ref="eValue-index1-`+i+`"></ag-input-text-field>
            </div>`},t.prototype.mapValuesFromModel=function(e){var i=e||{},n=i.filter,o=i.filterTo,s=i.type;return[n||null,o||null].slice(0,this.getNumberOfInputs(s))},t.prototype.evaluateNullValue=function(e){var i=[si.NOT_EQUAL,si.NOT_CONTAINS,si.BLANK];return e?i.indexOf(e)>=0:!1},t.prototype.evaluateNonNullValue=function(e,i,n,o){var s=this,a=e.map(function(y){return s.formatter(y)})||[],l=this.formatter(i),u=this.textFilterParams,c=u.api,h=u.colDef,d=u.column,p=u.columnApi,f=u.context,m=u.textFormatter;if(n.type===si.BLANK)return this.isBlank(i);if(n.type===si.NOT_BLANK)return!this.isBlank(i);var g={api:c,colDef:h,column:d,columnApi:p,context:f,node:o.node,data:o.data,filterOption:n.type,value:l,textFormatter:m};return a.some(function(y){return s.matcher(jf(jf({},g),{filterText:y}))})},t.DEFAULT_FILTER_OPTIONS=[si.CONTAINS,si.NOT_CONTAINS,si.EQUALS,si.NOT_EQUAL,si.STARTS_WITH,si.ENDS_WITH,si.BLANK,si.NOT_BLANK],t.DEFAULT_FORMATTER=function(e){return e},t.DEFAULT_LOWERCASE_FORMATTER=function(e){return e==null?null:e.toString().toLowerCase()},t.DEFAULT_MATCHER=function(e){var i=e.filterOption,n=e.value,o=e.filterText;if(o==null)return!1;switch(i){case t.CONTAINS:return n.indexOf(o)>=0;case t.NOT_CONTAINS:return n.indexOf(o)<0;case t.EQUALS:return n===o;case t.NOT_EQUAL:return n!=o;case t.STARTS_WITH:return n.indexOf(o)===0;case t.ENDS_WITH:var s=n.lastIndexOf(o);return s>=0&&s===n.length-o.length;default:return!1}},hp([ut("eValue-index0-1")],t.prototype,"eValueFrom1",void 0),hp([ut("eValue-index1-1")],t.prototype,"eValueTo1",void 0),hp([ut("eValue-index0-2")],t.prototype,"eValueFrom2",void 0),hp([ut("eValue-index1-2")],t.prototype,"eValueTo2",void 0),t}(si);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var K7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ev=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},mP=function(r){K7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.resetTemplate()},t.prototype.resetTemplate=function(e){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterInput"></ag-input-text-field>
            </div>
        `,e)},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.onParentModelChanged=function(e,i){this.isEventFromFloatingFilter(i)||(this.setLastTypeFromModel(e),this.eFloatingFilterInput.setValue(this.getTextFromModel(e)),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)))},t.prototype.init=function(e){r.prototype.init.call(this,e),this.params=e,this.applyActive=zf.isUseApplyButton(this.params.filterParams);var i=this.params.filterParams.allowedCharPattern;if(i!=null&&this.resetTemplate({eFloatingFilterInput:{allowedCharPattern:i}}),!this.isReadOnly()){var n=zf.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),o=ea(this.syncUpWithParentFilter.bind(this),n),s=this.eFloatingFilterInput.getGui();this.addManagedListener(s,"input",o),this.addManagedListener(s,"keypress",o),this.addManagedListener(s,"keydown",o)}var a=e.column.getDefinition();(this.isReadOnly()||a.filterParams&&a.filterParams.filterOptions&&a.filterParams.filterOptions.length===1&&a.filterParams.filterOptions[0]==="inRange")&&this.eFloatingFilterInput.setDisabled(!0);var l=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),u=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterInput.setInputAriaLabel(l+" "+u("ariaFilterInput","Filter Input"))},t.prototype.syncUpWithParentFilter=function(e){var i=this,n=e.key===lt.ENTER;if(!(this.applyActive&&!n)){var o=this.eFloatingFilterInput.getValue();this.params.filterParams.trimInput&&(o=hw.trimInput(o),this.eFloatingFilterInput.setValue(o,!0)),this.params.parentFilterInstance(function(s){s&&s.onFloatingFilterChanged(i.getLastType()||null,o||null)})}},t.prototype.conditionToString=function(e,i){var n=(i||{}).numberOfInputs,o=e.type==si.IN_RANGE||n===2;return o?e.filter+"-"+e.filterTo:e.filter!=null?""+e.filter:""+e.type},t.prototype.setEditable=function(e){this.eFloatingFilterInput.setDisabled(!e)},Ev([b("columnModel")],t.prototype,"columnModel",void 0),Ev([ut("eFloatingFilterInput")],t.prototype,"eFloatingFilterInput",void 0),Ev([Ct],t.prototype,"postConstruct",null),t}(fP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var X7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),q7=function(r){X7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultFilterOptions=function(){return gP.DEFAULT_FILTER_OPTIONS},t}(mP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Z7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),J7=function(r){Z7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultFilterOptions=function(){return hw.DEFAULT_FILTER_OPTIONS},t}(mP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Yn=function(){function r(t,e){var i=this;e===void 0&&(e=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new ra,this.eElement=t,this.preventMouseClick=e;var n=this.onTouchStart.bind(this),o=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",o,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(function(){i.eElement.removeEventListener("touchstart",n,{passive:!0}),i.eElement.removeEventListener("touchmove",o,{passive:!0}),i.eElement.removeEventListener("touchend",s,{passive:!1})})}return r.prototype.getActiveTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e].identifier===this.touchStart.identifier;if(i)return t[e]}return null},r.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},r.prototype.onTouchStart=function(t){var e=this;if(!this.touching){this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;var i=this.touchStart;window.setTimeout(function(){var n=e.touchStart===i;if(e.touching&&n&&!e.moved){e.moved=!0;var o={type:r.EVENT_LONG_TAP,touchStart:e.touchStart,touchEvent:t};e.eventService.dispatchEvent(o)}},500)}},r.prototype.onTouchMove=function(t){if(!!this.touching){var e=this.getActiveTouch(t.touches);if(!!e){var i=!aw(e,this.touchStart,4);i&&(this.moved=!0)}}},r.prototype.onTouchEnd=function(t){if(!!this.touching){if(!this.moved){var e={type:r.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}},r.prototype.checkForDoubleTap=function(){var t=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0){var e=t-this.lastTapTime;if(e>r.DOUBLE_TAP_MILLIS){var i={type:r.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=t}else this.lastTapTime=t},r.prototype.destroy=function(){this.destroyFuncs.forEach(function(t){return t()})},r.EVENT_TAP="tap",r.EVENT_DOUBLE_TAP="doubleTap",r.EVENT_LONG_TAP="longTap",r.DOUBLE_TAP_MILLIS=500,r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Q7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ma=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dw=function(r){Q7(t,r);function t(e){var i=r.call(this)||this;return e||i.setTemplate(t.TEMPLATE),i}return t.prototype.attachCustomElements=function(e,i,n,o,s){this.eSortOrder=e,this.eSortAsc=i,this.eSortDesc=n,this.eSortMixed=o,this.eSortNone=s},t.prototype.setupSort=function(e,i){var n=this;i===void 0&&(i=!1),this.column=e,this.suppressOrder=i,this.setupMultiSortIndicator();var o=!!this.column.getColDef().sortable;!o||(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedListener(this.eventService,O.EVENT_SORT_CHANGED,function(){return n.onSortChanged()}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return n.onSortChanged()}),this.onSortChanged())},t.prototype.addInIcon=function(e,i,n){if(i!=null){var o=_i(e,this.gridOptionsWrapper,n);o&&i.appendChild(o)}},t.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},t.prototype.updateIcons=function(){var e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){var i=e==="asc";this.eSortAsc.classList.toggle("ag-hidden",!i)}if(this.eSortDesc){var n=e==="desc";this.eSortDesc.classList.toggle("ag-hidden",!n)}if(this.eSortNone){var o=!this.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon(),s=e==null;this.eSortNone.classList.toggle("ag-hidden",o||!s)}},t.prototype.setupMultiSortIndicator=function(){var e=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var i=this.column.getColDef().showRowGroup,n=this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();n&&i&&(this.addManagedListener(this.eventService,O.EVENT_SORT_CHANGED,function(){return e.updateMultiSortIndicator()}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.updateMultiSortIndicator()}),this.updateMultiSortIndicator())},t.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";this.eSortMixed.classList.toggle("ag-hidden",!e)}},t.prototype.updateSortOrder=function(){var e=this,i;if(!!this.eSortOrder){var n=this.sortController.getColumnsWithSortingOrdered(),o=(i=this.sortController.getDisplaySortIndexForColumn(this.column),i!=null?i:-1),s=n.some(function(l){var u;return u=e.sortController.getDisplaySortIndexForColumn(l),u!=null?u:-1>=1}),a=o>=0&&s;Ke(this.eSortOrder,a),o>=0?this.eSortOrder.innerHTML=(o+1).toString():qn(this.eSortOrder)}},t.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`,ma([ut("eSortOrder")],t.prototype,"eSortOrder",void 0),ma([ut("eSortAsc")],t.prototype,"eSortAsc",void 0),ma([ut("eSortDesc")],t.prototype,"eSortDesc",void 0),ma([ut("eSortMixed")],t.prototype,"eSortMixed",void 0),ma([ut("eSortNone")],t.prototype,"eSortNone",void 0),ma([b("columnModel")],t.prototype,"columnModel",void 0),ma([b("sortController")],t.prototype,"sortController",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var t9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vn=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},e9=function(r){t9(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.refresh=function(e){return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort?!1:(this.setDisplayName(e),!0)},t.prototype.workOutTemplate=function(){var e=gT(this.params.template,t.TEMPLATE);return e=e&&e.trim?e.trim():e,e},t.prototype.init=function(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)},t.prototype.setDisplayName=function(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;var i=wo(this.currentDisplayName);this.eText&&(this.eText.innerHTML=i)}},t.prototype.setupIcons=function(e){this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)},t.prototype.addInIcon=function(e,i,n){if(i!=null){var o=_i(e,this.gridOptionsWrapper,n);o&&i.appendChild(o)}},t.prototype.setupTap=function(){var e=this,i=this.gridOptionsWrapper;if(!i.isSuppressTouch()){var n=new Yn(this.getGui(),!0),o=i.isSuppressMenuHide(),s=o&&dt(this.eMenu),a=s?new Yn(this.eMenu,!0):n;if(this.params.enableMenu){var l=s?"EVENT_TAP":"EVENT_LONG_TAP",u=function(h){i.getApi().showColumnMenuAfterMouseClick(e.params.column,h.touchStart)};this.addManagedListener(a,Yn[l],u)}if(this.params.enableSorting){var c=function(h){var d=h.touchStart.target;o&&e.eMenu.contains(d)||e.sortController.progressSort(e.params.column,!1,"uiColumnSorted")};this.addManagedListener(n,Yn.EVENT_TAP,c)}this.addDestroyFunc(function(){return n.destroy()}),s&&this.addDestroyFunc(function(){return a.destroy()})}},t.prototype.workOutShowMenu=function(){var e=!this.gridOptionsWrapper.isSuppressMenuHide(),i=oa()&&e,n=this.params.enableMenu&&!i;return n},t.prototype.setMenu=function(){var e=this;if(!!this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Fa(this.eMenu);return}var i=this.gridOptionsWrapper.isSuppressMenuHide();this.addManagedListener(this.eMenu,"click",function(){return e.showMenu(e.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",i)}},t.prototype.showMenu=function(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")},t.prototype.workOutSort=function(){return this.params.enableSorting},t.prototype.setupSort=function(){var e=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new dw(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!!this.currentSort){var i=this.gridOptionsWrapper.isMultiSortKeyCtrl();this.addManagedListener(this.params.column,me.EVENT_MOVING_CHANGED,function(){e.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(o){var s=e.params.column.isMoving(),a=new Date().getTime(),l=a-e.lastMovingChanged<50,u=s||l;if(!u){var c=i?o.ctrlKey||o.metaKey:o.shiftKey;e.params.progressSort(c)}});var n=function(){var o;if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc",e.params.column.isSortAscending()),e.addOrRemoveCssClass("ag-header-cell-sorted-desc",e.params.column.isSortDescending()),e.addOrRemoveCssClass("ag-header-cell-sorted-none",e.params.column.isSortNone()),e.params.column.getColDef().showRowGroup){var s=e.columnModel.getSourceColumnsForGroupColumn(e.params.column),a=(o=s)===null||o===void 0?void 0:o.every(function(u){return e.params.column.getSort()==u.getSort()}),l=!a;e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",l)}};this.addManagedListener(this.eventService,O.EVENT_SORT_CHANGED,n),this.addManagedListener(this.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,n)}},t.prototype.setupFilterIcon=function(){!this.eFilter||(this.addManagedListener(this.params.column,me.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},t.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();this.eFilter.classList.toggle("ag-hidden",!e)},t.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`,Vn([b("sortController")],t.prototype,"sortController",void 0),Vn([b("menuFactory")],t.prototype,"menuFactory",void 0),Vn([b("columnModel")],t.prototype,"columnModel",void 0),Vn([ut("eFilter")],t.prototype,"eFilter",void 0),Vn([ut("eSortIndicator")],t.prototype,"eSortIndicator",void 0),Vn([ut("eMenu")],t.prototype,"eMenu",void 0),Vn([ut("eLabel")],t.prototype,"eLabel",void 0),Vn([ut("eText")],t.prototype,"eText",void 0),Vn([ut("eSortOrder")],t.prototype,"eSortOrder",void 0),Vn([ut("eSortAsc")],t.prototype,"eSortAsc",void 0),Vn([ut("eSortDesc")],t.prototype,"eSortDesc",void 0),Vn([ut("eSortMixed")],t.prototype,"eSortMixed",void 0),Vn([ut("eSortNone")],t.prototype,"eSortNone",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var i9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),xv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},n9=function(r){i9(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},t.prototype.checkWarnings=function(){var e=this.params;if(e.template){var i="AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)";ce(function(){return console.warn(i)},"HeaderGroupComp.templateNotSupported")}},t.prototype.setupExpandIcons=function(){var e=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var i=function(s){if(!vo(s)){var a=!e.params.columnGroup.isExpanded();e.columnModel.setColumnGroupOpened(e.params.columnGroup.getProvidedColumnGroup(),a,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,i),this.addTouchAndClickListeners(this.eOpenIcon,i);var n=function(s){Lu(s)};this.addManagedListener(this.eCloseIcon,"dblclick",n),this.addManagedListener(this.eOpenIcon,"dblclick",n),this.addManagedListener(this.getGui(),"dblclick",i),this.updateIconVisibility();var o=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(o,pi.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(o,pi.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},t.prototype.addTouchAndClickListeners=function(e,i){var n=new Yn(e,!0);this.addManagedListener(n,Yn.EVENT_TAP,i),this.addDestroyFunc(function(){return n.destroy()}),this.addManagedListener(e,"click",i)},t.prototype.updateIconVisibility=function(){var e=this.params.columnGroup;if(e.isExpandable()){var i=this.params.columnGroup.isExpanded();Ke(this.eOpenIcon,i),Ke(this.eCloseIcon,!i)}else Ke(this.eOpenIcon,!1),Ke(this.eCloseIcon,!1)},t.prototype.addInIcon=function(e,i){var n=_i(e,this.gridOptionsWrapper,null);n&&this.getRefElement(i).appendChild(n)},t.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable()){Ke(this.eOpenIcon,!1),Ke(this.eCloseIcon,!1);return}},t.prototype.setupLabel=function(){var e=this.params.displayName;if(dt(e)){var i=wo(e);this.getRefElement("agLabel").innerHTML=i}},t.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`,xv([b("columnModel")],t.prototype,"columnModel",void 0),xv([ut("agOpened")],t.prototype,"eOpenIcon",void 0),xv([ut("agClosed")],t.prototype,"eCloseIcon",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var r9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ad=function(r){r9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isPopup=function(){return!0},t.prototype.setParentComponent=function(e){e.addCssClass("ag-has-popup"),r.prototype.setParentComponent.call(this,e)},t.prototype.destroy=function(){var e=this.parentComponent,i=e&&e.isAlive();i&&e.getGui().classList.remove("ag-has-popup"),r.prototype.destroy.call(this)},t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var o9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),s9=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},a9=function(r){o9(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),dt(e.value)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},t.prototype.onKeyDown=function(e){var i=e.key;(i===lt.LEFT||i===lt.UP||i===lt.RIGHT||i===lt.DOWN||e.shiftKey&&i===lt.ENTER)&&e.stopPropagation()},t.prototype.afterGuiAttached=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},t.prototype.getValue=function(){return this.params.parseValue(this.eTextArea.getValue())},t.TEMPLATE=`<div class="ag-large-text" tabindex="0">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,s9([ut("eTextArea")],t.prototype,"eTextArea",void 0),t}(ad);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var l9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),yx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},vP=function(r){l9(t,r);function t(){var e=r.call(this,'<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>')||this;return e.startedByEnter=!1,e}return t.prototype.init=function(e){var i=this;if(this.focusAfterAttached=e.cellStartedEdit,kt(e.values)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=e.eventKey!=null?e.eventKey===lt.ENTER:!1;var n=!1;e.values.forEach(function(o){var s={value:o},a=i.valueFormatterService.formatValue(e.column,null,o),l=a!=null;s.text=l?a:o,i.eSelect.addOption(s),n=n||e.value===o}),n?this.eSelect.setValue(e.value,!0):e.values.length&&this.eSelect.setValue(e.values[0],!0),this.gridOptionsWrapper.isFullRowEdit()||this.eSelect.onValueChange(function(){return e.stopEditing()})},t.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&this.eSelect.showPicker()},t.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},t.prototype.getValue=function(){return this.eSelect.getValue()},t.prototype.isPopup=function(){return!1},yx([b("valueFormatterService")],t.prototype,"valueFormatterService",void 0),yx([ut("eSelect")],t.prototype,"eSelect",void 0),t}(ad);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var u9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),c9=function(r){u9(t,r);function t(){var e=r.call(this)||this;return ce(function(){return console.warn('AG Grid: The PopupSelectCellEditor (agPopupSelectCellEditor) is deprecated. Instead use {cellEditor: "agSelectCellEditor", cellEditorPopup: true} ')},"PopupSelectCellEditor.deprecated"),e}return t.prototype.isPopup=function(){return!0},t}(vP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var h9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),d9=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},h_=function(r){h9(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){this.params=e;var i=this.eInput,n;e.cellStartedEdit?(this.focusAfterAttached=!0,e.eventKey===lt.BACKSPACE||e.eventKey===lt.DELETE?n="":e.charPress?n=e.charPress:(n=this.getStartValue(e),e.eventKey!==lt.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,n=this.getStartValue(e)),n!=null&&i.setValue(n,!0),e.maxLength!=null&&i.setMaxLength(e.maxLength),this.addManagedListener(i.getGui(),"keydown",function(o){var s=o.key;(s===lt.PAGE_UP||s===lt.PAGE_DOWN)&&o.preventDefault()})},t.prototype.afterGuiAttached=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),i=this.eInput;if(i.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!!this.focusAfterAttached){ll()||i.getFocusableElement().focus();var n=i.getInputElement();if(this.highlightAllOnFocus)n.select();else{var o=i.getValue(),s=dt(o)&&o.length||0;s&&n.setSelectionRange(s,s)}}},t.prototype.focusIn=function(){var e=this.eInput,i=e.getFocusableElement(),n=e.getInputElement();i.focus(),n.select()},t.prototype.getValue=function(){var e=this.eInput;return this.params.parseValue(e.getValue())},t.prototype.getStartValue=function(e){var i=e.useFormatter||e.column.getColDef().refData;return i?e.formatValue(e.value):e.value},t.prototype.isPopup=function(){return!1},t.TEMPLATE=`<div class="ag-cell-edit-wrapper">
            <ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>
        </div>`,d9([ut("eInput")],t.prototype,"eInput",void 0),t}(ad);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var p9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),f9=function(r){p9(t,r);function t(){var e=r.call(this)||this;return ce(function(){return console.warn('AG Grid: The PopupTextCellEditor (agPopupTextCellEditor) is deprecated. Instead use {cellEditor: "agTextCellEditor", cellEditorPopup: true} ')},"PopupTextCellEditor.deprecated"),e}return t.prototype.isPopup=function(){return!0},t}(h_);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var g9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),m9=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},v9="\u2191",y9="\u2193",_9=function(r){g9(t,r);function t(){var e=r.call(this,t.TEMPLATE)||this;return e.refreshCount=0,e}return t.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)},t.prototype.showDelta=function(e,i){var n=Math.abs(i),o=e.formatValue(n),s=dt(o)?o:n,a=i>=0;a?this.eDelta.innerHTML=v9+s:this.eDelta.innerHTML=y9+s,this.eDelta.classList.toggle("ag-value-change-delta-up",a),this.eDelta.classList.toggle("ag-value-change-delta-down",!a)},t.prototype.setTimerToRemoveDelta=function(){var e=this;this.refreshCount++;var i=this.refreshCount;window.setTimeout(function(){i===e.refreshCount&&e.hideDeltaValue()},2e3)},t.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),qn(this.eDelta)},t.prototype.refresh=function(e){var i=e.value;if(i===this.lastValue||(dt(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:dt(e.value)?this.eValue.innerHTML=i:qn(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){var n=i-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=i,!0},t.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',m9([b("filterManager")],t.prototype,"filterManager",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var C9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),w9=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},S9=function(r){C9(t,r);function t(){var e=r.call(this,t.TEMPLATE)||this;return e.refreshCount=0,e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}return t.prototype.init=function(e){this.refresh(e)},t.prototype.addSlideAnimation=function(){var e=this;this.refreshCount++;var i=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=Hi('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){i===e.refreshCount&&e.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(function(){i===e.refreshCount&&(e.getGui().removeChild(e.ePrevious),e.ePrevious=null)},3e3)},t.prototype.refresh=function(e){var i=e.value;return kt(i)&&(i=""),i===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(this.addSlideAnimation(),this.lastValue=i,dt(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:dt(e.value)?this.eCurrent.innerHTML=i:qn(this.eCurrent),!0)},t.TEMPLATE=`<span>
            <span class="ag-value-slide-current"></span>
        </span>`,w9([b("filterManager")],t.prototype,"filterManager",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Jo;(function(r){r[r.Above=0]="Above",r[r.Below=1]="Below"})(Jo||(Jo={}));var ue=function(){function r(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=r.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.selected=!1,this.beans=t}return r.prototype.setData=function(t){this.setDataCommon(t,!1)},r.prototype.updateData=function(t){this.setDataCommon(t,!0)},r.prototype.setDataCommon=function(t,e){var i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable();var n=this.createDataChangedEvent(t,i,e);this.dispatchLocalEvent(n)},r.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},r.prototype.createDataChangedEvent=function(t,e,i){return{type:r.EVENT_DATA_CHANGED,node:this,oldData:e,newData:t,update:i}},r.prototype.createLocalRowEvent=function(t){return{type:t,node:this}},r.prototype.getRowIndexString=function(){return this.rowPinned===H.PINNED_TOP?"t-"+this.rowIndex:this.rowPinned===H.PINNED_BOTTOM?"b-"+this.rowIndex:this.rowIndex.toString()},r.prototype.createDaemonNode=function(){var t=new r(this.beans);return t.id=this.id,t.data=this.data,t.daemon=!0,t.selected=this.selected,t.level=this.level,t},r.prototype.setDataAndId=function(t,e){var i=dt(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(e),this.beans.selectionService.syncInRowNode(this,i),this.checkRowSelectable();var o=this.createDataChangedEvent(t,n,!1);this.dispatchLocalEvent(o)},r.prototype.checkRowSelectable=function(){var t=this.beans.gridOptionsWrapper.getIsRowSelectableFunc();this.setRowSelectable(t?t(this):!0)},r.prototype.setRowSelectable=function(t){if(this.selectable!==t){this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_SELECTABLE_CHANGED));var e=this.beans.gridOptionsWrapper.isGroupSelectsChildren();if(e){var i=this.calculateSelectedFromChildren();this.setSelected(i!=null?i:!1)}}},r.prototype.setId=function(t){var e=this.beans.gridOptionsWrapper.getRowIdFunc();if(e)if(this.data){var i=this.getGroupKeys(!0);this.id=e({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(r.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with "+r.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=t},r.prototype.getGroupKeys=function(t){t===void 0&&(t=!1);var e=[],i=this;for(t&&(i=i.parent);i&&i.level>=0;)e.push(i.key),i=i.parent;return e.reverse(),e},r.prototype.isPixelInRange=function(t){return!dt(this.rowTop)||!dt(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight},r.prototype.setFirstChild=function(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_FIRST_CHILD_CHANGED)))},r.prototype.setLastChild=function(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_LAST_CHILD_CHANGED)))},r.prototype.setChildIndex=function(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_CHILD_INDEX_CHANGED)))},r.prototype.setRowTop=function(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_TOP_CHANGED)),this.setDisplayed(t!==null))},r.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},r.prototype.setDisplayed=function(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DISPLAYED_CHANGED)))},r.prototype.setDragging=function(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DRAGGING_CHANGED)))},r.prototype.setHighlighted=function(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HIGHLIGHT_CHANGED)))},r.prototype.setAllChildrenCount=function(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},r.prototype.setMaster=function(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_MASTER_CHANGED)))},r.prototype.setGroup=function(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_GROUP_CHANGED)))},r.prototype.setRowHeight=function(t,e){e===void 0&&(e=!1),this.rowHeight=t,this.rowHeightEstimated=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HEIGHT_CHANGED))},r.prototype.setRowAutoHeight=function(t,e){this.__autoHeights||(this.__autoHeights={});var i=this.__autoHeights;i[e.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=ea(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},r.prototype.checkAutoHeights=function(){var t=!1,e=!0,i=0,n=this.__autoHeights;if(n!=null){var o=this.beans.columnModel.getAllDisplayedAutoHeightCols();if(o.forEach(function(a){var l=n[a.getId()];if(l==null){t=!0;return}e=!1,l>i&&(i=l)}),!t&&((e||i<10)&&(i=this.beans.gridOptionsWrapper.getRowHeightForNode(this).height),i!=this.rowHeight)){this.setRowHeight(i);var s=this.beans.rowModel;s.onRowHeightChangedDebounced&&s.onRowHeightChangedDebounced()}}},r.prototype.setRowIndex=function(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ROW_INDEX_CHANGED)))},r.prototype.setUiLevel=function(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_UI_LEVEL_CHANGED)))},r.prototype.setExpanded=function(t,e){if(this.expanded!==t){this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_EXPANDED_CHANGED));var i=Object.assign({},this.createGlobalRowEvent(O.EVENT_ROW_GROUP_OPENED),{expanded:t,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(i),this.beans.gridOptionsWrapper.isGroupIncludeFooter()&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},r.prototype.createGlobalRowEvent=function(t){return{type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi()}},r.prototype.dispatchLocalEvent=function(t){this.eventService&&this.eventService.dispatchEvent(t)},r.prototype.setDataValue=function(t,e,i){var n=this.beans.columnModel.getPrimaryColumn(t),o=this.beans.valueService.getValue(n,this),s=this.beans.valueService.setValue(this,n,e,i);return this.dispatchCellChangedEvent(n,e,o),this.checkRowSelectable(),s},r.prototype.setGroupValue=function(t,e){var i=this.beans.columnModel.getGridColumn(t);kt(this.groupData)&&(this.groupData={});var n=i.getColId(),o=this.groupData[n];o!==e&&(this.groupData[n]=e,this.dispatchCellChangedEvent(i,e,o))},r.prototype.setAggData=function(t){var e=this,i=aT([this.aggData,t]),n=this.aggData;this.aggData=t,this.eventService&&i.forEach(function(o){var s=e.beans.columnModel.getGridColumn(o),a=e.aggData?e.aggData[o]:void 0,l=n?n[o]:void 0;e.dispatchCellChangedEvent(s,a,l)})},r.prototype.updateHasChildren=function(){var t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HAS_CHILDREN_CHANGED)))},r.prototype.hasChildren=function(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren},r.prototype.isEmptyRowGroupNode=function(){return this.group&&Un(this.childrenAfterGroup)},r.prototype.dispatchCellChangedEvent=function(t,e,i){var n={type:r.EVENT_CELL_CHANGED,node:this,column:t,newValue:e,oldValue:i};this.dispatchLocalEvent(n)},r.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},r.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},r.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},r.prototype.depthFirstSearch=function(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(t)}),t(this)},r.prototype.calculateSelectedFromChildren=function(){var t,e=!1,i=!1,n=!1;if(!(!((t=this.childrenAfterGroup)===null||t===void 0)&&t.length))return this.selectable?this.selected:null;for(var o=0;o<this.childrenAfterGroup.length;o++){var s=this.childrenAfterGroup[o],a=s.isSelected();if(!s.selectable){var l=s.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:e=!0;break;case!1:i=!0;break;default:n=!0;break}}if(!(n||e&&i))return e?!0:i?!1:this.selectable?this.selected:null},r.prototype.setSelectedInitialValue=function(t){this.selected=t},r.prototype.setSelected=function(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1),this.setSelectedParams({newValue:t,clearSelection:e,suppressFinishActions:i,rangeSelect:!1})},r.prototype.isRowPinned=function(){return this.rowPinned===H.PINNED_TOP||this.rowPinned===H.PINNED_BOTTOM},r.prototype.setSelectedParams=function(t){var e,i=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),n=t.newValue===!0,o=t.clearSelection===!0,s=t.suppressFinishActions===!0,a=t.rangeSelect===!0,l=i&&t.groupSelectsFiltered===!0;if(this.id===void 0)return console.warn("AG Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.warn("AG Grid: cannot select pinned rows"),0;if(this.footer)return this.sibling.setSelectedParams(t);if(a&&this.beans.selectionService.getLastSelectedNode()){var u=this.beans.selectionService.getLastSelectedNode()!==this,c=this.beans.gridOptionsWrapper.isRowSelectionMulti();if(u&&c){var h=this.doRowRangeSelection(t.newValue);return this.beans.selectionService.setLastSelectedNode(this),h}}var d=0,p=l&&this.group;if(!p){var f=this.selectThisNode(n,t.event);f&&d++}if(i&&((e=this.childrenAfterGroup)===null||e===void 0?void 0:e.length)&&(d+=this.selectChildNodes(n,l)),!s){var m=n&&(o||!this.beans.gridOptionsWrapper.isRowSelectionMulti());if(m&&(d+=this.beans.selectionService.clearOtherNodes(this)),d>0){this.beans.selectionService.updateGroupsFromChildrenSelections();var g={type:O.EVENT_SELECTION_CHANGED};this.beans.eventService.dispatchEvent(g)}n&&this.beans.selectionService.setLastSelectedNode(this)}return d},r.prototype.doRowRangeSelection=function(t){var e=this;t===void 0&&(t=!0);var i=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),n=this.beans.selectionService.getLastSelectedNode(),o=this.beans.rowModel.getNodesInRangeForSelection(this,n),s=0;o.forEach(function(l){if(!(l.group&&i||t===!1&&e===l)){var u=l.selectThisNode(t);u&&s++}}),this.beans.selectionService.updateGroupsFromChildrenSelections();var a={type:O.EVENT_SELECTION_CHANGED};return this.beans.eventService.dispatchEvent(a),s},r.prototype.isParentOfNode=function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},r.prototype.selectThisNode=function(t,e){var i=!this.selectable&&t,n=this.selected===t;if(i||n)return!1;this.selected=t,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_ROW_SELECTED));var o=Object.assign({},this.createGlobalRowEvent(O.EVENT_ROW_SELECTED),{event:e||null});return this.beans.eventService.dispatchEvent(o),!0},r.prototype.selectChildNodes=function(t,e){var i=e?this.childrenAfterAggFilter:this.childrenAfterGroup;if(kt(i))return 0;for(var n=0,o=0;o<i.length;o++)n+=i[o].setSelectedParams({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:e});return n},r.prototype.addEventListener=function(t,e){this.eventService||(this.eventService=new ra),this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){!this.eventService||(this.eventService.removeEventListener(t,e),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},r.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_ENTER))},r.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_LEAVE))},r.prototype.getFirstChildOfFirstChild=function(t){for(var e=this,i=!0,n=!1,o=null;i&&!n;){var s=e.parent,a=dt(s)&&e.firstChild;a?s.rowGroupColumn===t&&(n=!0,o=s):i=!1,e=s}return n?o:null},r.prototype.isFullWidthCell=function(){var t=this.beans.gridOptionsWrapper.getIsFullWidthCellFunc();return t?t({rowNode:this}):!1},r.prototype.getRoute=function(){if(this.key!=null){for(var t=[],e=this;e.key!=null;)t.push(e.key),e=e.parent;return t.reverse()}},r.ID_PREFIX_ROW_GROUP="row-group-",r.ID_PREFIX_TOP_PINNED="t-",r.ID_PREFIX_BOTTOM_PINNED="b-",r.OBJECT_ID_SEQUENCE=0,r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_DATA_CHANGED="dataChanged",r.EVENT_CELL_CHANGED="cellChanged",r.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",r.EVENT_MASTER_CHANGED="masterChanged",r.EVENT_GROUP_CHANGED="groupChanged",r.EVENT_MOUSE_ENTER="mouseEnter",r.EVENT_MOUSE_LEAVE="mouseLeave",r.EVENT_HEIGHT_CHANGED="heightChanged",r.EVENT_TOP_CHANGED="topChanged",r.EVENT_DISPLAYED_CHANGED="displayedChanged",r.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",r.EVENT_LAST_CHILD_CHANGED="lastChildChanged",r.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",r.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",r.EVENT_SELECTABLE_CHANGED="selectableChanged",r.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",r.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",r.EVENT_DRAGGING_CHANGED="draggingChanged",r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var E9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),$f=function(){return $f=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},$f.apply(this,arguments)},_x=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},yP=function(r){E9(t,r);function t(){return r.call(this,`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)||this}return t.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0)},t.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},t.prototype.onDataChanged=function(){this.onSelectionChanged()},t.prototype.onSelectableChanged=function(){this.showOrHideSelect()},t.prototype.onSelectionChanged=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),i=this.rowNode.isSelected(),n=i===void 0?e("ariaIndeterminate","indeterminate"):i===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),o=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(i,!0),this.eCheckbox.setInputAriaLabel(o+" ("+n+")")},t.prototype.onCheckedClicked=function(e){var i=this.gridOptionsWrapper.isGroupSelectsFiltered(),n=this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:i});return n},t.prototype.onUncheckedClicked=function(e){var i=this.gridOptionsWrapper.isGroupSelectsFiltered(),n=this.rowNode.setSelectedParams({newValue:!0,rangeSelect:e.shiftKey,groupSelectsFiltered:i});return n},t.prototype.init=function(e){var i=this;this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(a){Lu(a)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(a){Lu(a);var l=i.eCheckbox.getValue(),u=i.eCheckbox.getPreviousValue();if(u===void 0||l===void 0){var c=i.onUncheckedClicked(a||{});c===0&&i.onCheckedClicked(a)}else l?i.onCheckedClicked(a):i.onUncheckedClicked(a||{})}),this.addManagedListener(this.rowNode,ue.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this));var n=this.gridOptionsWrapper.getIsRowSelectableFunc(),o=n||typeof this.getIsVisible()=="function";if(o){var s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,ue.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,ue.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},t.prototype.showOrHideSelect=function(){var e,i,n,o,s=this.rowNode.selectable,a=this.getIsVisible();if(s)if(typeof a=="function"){var l=(e=this.overrides)===null||e===void 0?void 0:e.callbackParams,u=(i=this.column)===null||i===void 0?void 0:i.createColumnFunctionCallbackParams(this.rowNode);s=u?a($f($f({},l),u)):!1}else s=a!=null?a:!1;var c=(n=this.column)===null||n===void 0?void 0:n.getColDef().showDisabledCheckboxes;if(c){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if(!((o=this.overrides)===null||o===void 0)&&o.removeHidden){this.setDisplayed(s);return}this.setVisible(s)},t.prototype.getIsVisible=function(){var e,i;return this.overrides?this.overrides.isVisible:(i=(e=this.column)===null||e===void 0?void 0:e.getColDef())===null||i===void 0?void 0:i.checkboxSelection},_x([ut("eCheckbox")],t.prototype,"eCheckbox",void 0),_x([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var x9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ys=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dp=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sn;(function(r){r[r.ToolPanel=0]="ToolPanel",r[r.HeaderCell=1]="HeaderCell",r[r.RowDrag=2]="RowDrag",r[r.ChartPanel=3]="ChartPanel"})(Sn||(Sn={}));var Gu;(function(r){r[r.Up=0]="Up",r[r.Down=1]="Down"})(Gu||(Gu={}));var ro;(function(r){r[r.Left=0]="Left",r[r.Right=1]="Right"})(ro||(ro={}));var ji=function(r){x9(t,r);function t(){var i=r!==null&&r.apply(this,arguments)||this;return i.dragSourceAndParamsList=[],i.dropTargets=[],i}e=t,t.prototype.init=function(){this.ePinnedIcon=ar("columnMovePin",this.gridOptionsWrapper,null),this.eHideIcon=ar("columnMoveHide",this.gridOptionsWrapper,null),this.eMoveIcon=ar("columnMoveMove",this.gridOptionsWrapper,null),this.eLeftIcon=ar("columnMoveLeft",this.gridOptionsWrapper,null),this.eRightIcon=ar("columnMoveRight",this.gridOptionsWrapper,null),this.eGroupIcon=ar("columnMoveGroup",this.gridOptionsWrapper,null),this.eAggregateIcon=ar("columnMoveValue",this.gridOptionsWrapper,null),this.ePivotIcon=ar("columnMovePivot",this.gridOptionsWrapper,null),this.eDropNotAllowedIcon=ar("dropNotAllowed",this.gridOptionsWrapper,null)},t.prototype.addDragSource=function(i,n){n===void 0&&(n=!1);var o={eElement:i.eElement,dragStartPixels:i.dragStartPixels,onDragStart:this.onDragStart.bind(this,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:o,dragSource:i}),this.dragService.addDragSource(o,n)},t.prototype.removeDragSource=function(i){var n=this.dragSourceAndParamsList.find(function(o){return o.dragSource===i});n&&(this.dragService.removeDragSource(n.params),en(this.dragSourceAndParamsList,n))},t.prototype.clearDragSourceParamsList=function(){var i=this;this.dragSourceAndParamsList.forEach(function(n){return i.dragService.removeDragSource(n.params)}),this.dragSourceAndParamsList.length=0},t.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},t.prototype.onDragStart=function(i,n){this.dragging=!0,this.dragSource=i,this.eventLastTime=n,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},t.prototype.onDragStop=function(i){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var n=this.createDropTargetEvent(this.lastDropTarget,i,null,null,!1);this.lastDropTarget.onDragStop(n)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},t.prototype.onDragging=function(i,n){var o=this,s,a,l,u,c=this.getHorizontalDirection(i),h=this.getVerticalDirection(i);this.eventLastTime=i,this.positionGhost(i);var d=this.dropTargets.filter(function(m){return o.isMouseOnDropTarget(i,m)}),p=this.findCurrentDropTarget(i,d);if(p!==this.lastDropTarget)this.leaveLastTargetIfExists(i,c,h,n),this.lastDropTarget!==null&&p===null&&((a=(s=this.dragSource).onGridExit)===null||a===void 0||a.call(s,this.dragItem)),this.lastDropTarget===null&&p!==null&&((u=(l=this.dragSource).onGridEnter)===null||u===void 0||u.call(l,this.dragItem)),this.enterDragTargetIfExists(p,i,c,h,n),this.lastDropTarget=p;else if(p&&p.onDragging){var f=this.createDropTargetEvent(p,i,c,h,n);p.onDragging(f)}},t.prototype.getAllContainersFromDropTarget=function(i){var n=i.getSecondaryContainers?i.getSecondaryContainers():null,o=[[i.getContainer()]];return n?o.concat(n):o},t.prototype.allContainersIntersect=function(i,n){var o,s;try{for(var a=dp(n),l=a.next();!l.done;l=a.next()){var u=l.value,c=u.getBoundingClientRect();if(c.width===0||c.height===0)return!1;var h=i.clientX>=c.left&&i.clientX<c.right,d=i.clientY>=c.top&&i.clientY<c.bottom;if(!h||!d)return!1}}catch(p){o={error:p}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return!0},t.prototype.isMouseOnDropTarget=function(i,n){var o,s,a=this.getAllContainersFromDropTarget(n),l=!1;try{for(var u=dp(a),c=u.next();!c.done;c=u.next()){var h=c.value;if(this.allContainersIntersect(i,h)){l=!0;break}}}catch(d){o={error:d}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}return n.targetContainsSource&&!n.getContainer().contains(this.dragSource.eElement)?!1:l&&n.isInterestedIn(this.dragSource.type,this.dragSource.eElement)},t.prototype.findCurrentDropTarget=function(i,n){var o,s,a,l,u=n.length;if(u===0)return null;if(u===1)return n[0];var c=this.gridOptionsWrapper.getDocument(),h=c.elementsFromPoint(i.clientX,i.clientY);try{for(var d=dp(h),p=d.next();!p.done;p=d.next()){var f=p.value;try{for(var m=(a=void 0,dp(n)),g=m.next();!g.done;g=m.next()){var y=g.value,C=vT(this.getAllContainersFromDropTarget(y));if(C.indexOf(f)!==-1)return y}}catch(w){a={error:w}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}}}catch(w){o={error:w}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}return null},t.prototype.enterDragTargetIfExists=function(i,n,o,s,a){if(!!i){if(i.onDragEnter){var l=this.createDropTargetEvent(i,n,o,s,a);i.onDragEnter(l)}this.setGhostIcon(i.getIconName?i.getIconName():null)}},t.prototype.leaveLastTargetIfExists=function(i,n,o,s){if(!!this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var a=this.createDropTargetEvent(this.lastDropTarget,i,n,o,s);this.lastDropTarget.onDragLeave(a)}this.setGhostIcon(null)}},t.prototype.addDropTarget=function(i){this.dropTargets.push(i)},t.prototype.removeDropTarget=function(i){this.dropTargets=this.dropTargets.filter(function(n){return n.getContainer()!==i.getContainer()})},t.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(i){return i.external})},t.prototype.findExternalZone=function(i){var n=this.dropTargets.filter(function(o){return o.external});return n.find(function(o){return o.getContainer()===i.getContainer()})||null},t.prototype.getHorizontalDirection=function(i){var n=this.eventLastTime&&this.eventLastTime.clientX,o=i.clientX;return n===o?null:n>o?ro.Left:ro.Right},t.prototype.getVerticalDirection=function(i){var n=this.eventLastTime&&this.eventLastTime.clientY,o=i.clientY;return n===o?null:n>o?Gu.Up:Gu.Down},t.prototype.createDropTargetEvent=function(i,n,o,s,a){var l=i.getContainer(),u=l.getBoundingClientRect(),c=this,h=c.gridApi,d=c.columnApi,p=c.dragItem,f=c.dragSource,m=n.clientX-u.left,g=n.clientY-u.top;return{event:n,x:m,y:g,vDirection:s,hDirection:o,dragSource:f,fromNudge:a,dragItem:p,api:h,columnApi:d,dropZoneTarget:l}},t.prototype.positionGhost=function(i){var n=this.eGhost;if(!!n){var o=n.getBoundingClientRect(),s=o.height,a=OT()-2,l=AT()-2,u=i.pageY-s/2,c=i.pageX-10,h=this.gridOptionsWrapper.getDocument(),d=h.defaultView||window,p=d.pageYOffset||h.documentElement.scrollTop,f=d.pageXOffset||h.documentElement.scrollLeft;a>0&&c+n.clientWidth>a+f&&(c=a+f-n.clientWidth),c<0&&(c=0),l>0&&u+n.clientHeight>l+p&&(u=l+p-n.clientHeight),u<0&&(u=0),n.style.left=c+"px",n.style.top=u+"px"}},t.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},t.prototype.createGhost=function(){this.eGhost=Hi(e.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var i=this.environment.getTheme().theme;i&&this.eGhost.classList.add(i),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var n=this.eGhost.querySelector(".ag-dnd-ghost-label"),o=this.dragSource.dragItemName;Fg(o)&&(o=o()),n.innerHTML=wo(o)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var s=this.gridOptionsWrapper.getDocument(),a=null;try{a=s.fullscreenElement}catch{}finally{a||(a=s.querySelector("body"))}this.eGhostParent=a,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},t.prototype.setGhostIcon=function(i,n){n===void 0&&(n=!1),qn(this.eGhostIcon);var o=null;switch(i||(i=this.dragSource.defaultIconName||e.ICON_NOT_ALLOWED),i){case e.ICON_PINNED:o=this.ePinnedIcon;break;case e.ICON_MOVE:o=this.eMoveIcon;break;case e.ICON_LEFT:o=this.eLeftIcon;break;case e.ICON_RIGHT:o=this.eRightIcon;break;case e.ICON_GROUP:o=this.eGroupIcon;break;case e.ICON_AGGREGATE:o=this.eAggregateIcon;break;case e.ICON_PIVOT:o=this.ePivotIcon;break;case e.ICON_NOT_ALLOWED:o=this.eDropNotAllowedIcon;break;case e.ICON_HIDE:o=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",n),!(o===this.eHideIcon&&this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns())&&o&&this.eGhostIcon.appendChild(o)};var e;return t.ICON_PINNED="pinned",t.ICON_MOVE="move",t.ICON_LEFT="left",t.ICON_RIGHT="right",t.ICON_GROUP="group",t.ICON_AGGREGATE="aggregate",t.ICON_PIVOT="pivot",t.ICON_NOT_ALLOWED="notAllowed",t.ICON_HIDE="hide",t.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`,ys([b("dragService")],t.prototype,"dragService",void 0),ys([b("mouseEventService")],t.prototype,"mouseEventService",void 0),ys([b("environment")],t.prototype,"environment",void 0),ys([b("columnApi")],t.prototype,"columnApi",void 0),ys([b("gridApi")],t.prototype,"gridApi",void 0),ys([Ct],t.prototype,"init",null),ys([Yi],t.prototype,"clearDragSourceParamsList",null),t=e=ys([Dt("dragAndDropService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Vg=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),rh=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Yf=function(r){Vg(t,r);function t(e,i,n,o,s,a){var l=r.call(this)||this;return l.cellValueFn=e,l.rowNode=i,l.column=n,l.customGui=o,l.dragStartPixels=s,l.suppressVisibilityChange=a,l.dragSource=null,l}return t.prototype.isCustomGui=function(){return this.customGui!=null},t.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(_i("rowDrag",this.beans.gridOptionsWrapper,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var e=this.beans.gridOptionsWrapper.isRowDragManaged()?new b9(this,this.beans,this.rowNode,this.column):new R9(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}},t.prototype.setDragElement=function(e,i){this.setTemplateFromElement(e),this.addDragSource(i)},t.prototype.getSelectedNodes=function(){var e=this.beans.gridOptionsWrapper.isRowDragMultiRow();if(!e)return[this.rowNode];var i=this.beans.selectionService.getSelectedNodes();return i.indexOf(this.rowNode)!==-1?i:[this.rowNode]},t.prototype.checkCompatibility=function(){var e=this.beans.gridOptionsWrapper.isRowDragManaged(),i=this.beans.gridOptionsWrapper.isTreeData();i&&e&&ce(function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},t.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},t.prototype.addDragSource=function(e){var i=this;e===void 0&&(e=4),this.dragSource&&this.removeDragSource();var n=this.gridOptionsWrapper.getRowDragText(this.column),o=this.gridOptionsWrapper.getLocaleTextFunc();this.dragSource={type:Sn.RowDrag,eElement:this.getGui(),dragItemName:function(){var s,a=i.getDragItem(),l=((s=a.rowNodes)===null||s===void 0?void 0:s.length)||1;return n?n(a,l):l===1?i.cellValueFn():l+" "+o("rowDragRows","rows")},getDragItem:function(){return i.getDragItem()},dragStartPixels:e,dragSourceDomDataKey:this.beans.gridOptionsWrapper.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},t.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},rh([b("beans")],t.prototype,"beans",void 0),rh([Ct],t.prototype,"postConstruct",null),rh([Yi],t.prototype,"removeDragSource",null),t}(le),_P=function(r){Vg(t,r);function t(e,i,n){var o=r.call(this)||this;return o.parent=e,o.rowNode=i,o.column=n,o}return t.prototype.setDisplayedOrVisible=function(e){if(e)this.parent.setDisplayed(!1);else{var i=!0,n=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=Fg(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0),this.parent.setVisible(i)):(this.parent.setDisplayed(i),this.parent.setVisible(!0))}},t}(ft),R9=function(r){Vg(t,r);function t(e,i,n,o){var s=r.call(this,e,n,o)||this;return s.beans=i,s}return t.prototype.postConstruct=function(){this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,O.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},t.prototype.workOutVisibility=function(){var e=this.beans.gridOptionsWrapper.isSuppressRowDrag();this.setDisplayedOrVisible(e)},rh([Ct],t.prototype,"postConstruct",null),t}(_P),b9=function(r){Vg(t,r);function t(e,i,n,o){var s=r.call(this,e,n,o)||this;return s.beans=i,s}return t.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,O.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,O.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,O.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},t.prototype.workOutVisibility=function(){var e=this.beans.ctrlsService.getGridBodyCtrl(),i=e.getRowDragFeature(),n=i&&i.shouldPreventRowMove(),o=this.beans.gridOptionsWrapper.isSuppressRowDrag(),s=this.beans.dragAndDropService.hasExternalDropZones(),a=n&&!s||o;this.setDisplayedOrVisible(a)},rh([Ct],t.prototype,"postConstruct",null),t}(_P);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var M9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kf=function(){return Kf=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Kf.apply(this,arguments)},Nl=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},T9=function(r){M9(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e,i,n,o,s,a,l){this.params=l,this.eGui=i,this.eCheckbox=n,this.eExpanded=o,this.eContracted=s,this.comp=e,this.compClass=a;var u=this.isTopLevelFooter(),c=this.isEmbeddedRowMismatch(),h=l.value==null,d=!1;if(this.gridOptionsWrapper.isGroupIncludeFooter()&&this.gridOptionsWrapper.isGroupHideOpenParents()){var p=l.node;if(p.footer){var f=l.colDef&&l.colDef.showRowGroup,m=p.rowGroupColumn&&p.rowGroupColumn.getColId();d=f!==m}}this.cellIsBlank=u?!1:c||h||d,!this.cellIsBlank&&(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded())},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.expandListener=null},t.prototype.refreshAriaExpanded=function(){var e=this.params,i=e.node,n=e.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){qT(n);return}var o=function(){$n(n,!!i.expanded)};this.expandListener=this.addManagedListener(i,ue.EVENT_EXPANDED_CHANGED,o)||null,o()},t.prototype.isTopLevelFooter=function(){if(!this.gridOptionsWrapper.isGroupIncludeTotalFooter()||this.params.value!=null||this.params.node.level!=-1)return!1;var e=this.params.colDef,i=e==null;if(i||e.showRowGroup===!0)return!0;var n=this.columnModel.getRowGroupColumns();if(!n||n.length===0)return!0;var o=n[0];return o.getId()===e.showRowGroup},t.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsWrapper.isEmbedFullWidthRows())return!1;var e=this.params.pinned===H.PINNED_LEFT,i=this.params.pinned===H.PINNED_RIGHT,n=!e&&!i;return this.gridOptionsWrapper.isEnableRtl()?this.columnModel.isPinningLeft()?!i:!n:this.columnModel.isPinningLeft()?!e:!n},t.prototype.findDisplayedGroupNode=function(){var e=this.params.column,i=this.params.node;if(this.showingValueForOpenedParent)for(var n=i.parent;n!=null;){if(n.rowGroupColumn&&e.isRowGroupDisplayed(n.rowGroupColumn.getId())){this.displayedGroupNode=n;break}n=n.parent}kt(this.displayedGroupNode)&&(this.displayedGroupNode=i)},t.prototype.setupShowingValueForOpenedParent=function(){var e=this.params.node,i=this.params.column;if(!this.gridOptionsWrapper.isGroupHideOpenParents()){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}var n=e.rowGroupColumn!=null;if(n){var o=e.rowGroupColumn.getId(),s=i.isRowGroupDisplayed(o);if(s){this.showingValueForOpenedParent=!1;return}}var a=e.groupData[i.getId()]!=null;this.showingValueForOpenedParent=a},t.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},t.prototype.addGroupValue=function(){var e=this.adjustParamsWithDetailsFromRelatedColumn(),i=this.getInnerCompDetails(e),n=e.valueFormatted,o=e.value,s=n!=null?n:o;this.comp.setInnerRenderer(i,s)},t.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var e=this.displayedGroupNode.rowGroupColumn,i=this.params.column;if(!e)return this.params;var n=i!=null;if(n){var o=i.isRowGroupDisplayed(e.getId());if(!o)return this.params}var s=this.params,a=this.params,l=a.value,u=a.node,c=this.valueFormatterService.formatValue(e,u,l),h=Kf(Kf({},s),{valueFormatted:c});return h},t.prototype.addFooterValue=function(){var e=this.params.footerValueGetter,i="";if(e){var n=HC(this.params);n.value=this.params.value,typeof e=="function"?i=e(n):typeof e=="string"?i=this.expressionService.evaluate(e,n):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else i="Total "+(this.params.value!=null?this.params.value:"");var o=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(o,i)},t.prototype.getInnerCompDetails=function(e){var i=this;if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptions.groupRowRendererParams,e);var n=this.userComponentFactory.getInnerRendererDetails(e,e),o=function(c){return c&&c.componentClass==i.compClass};if(n&&!o(n))return n;var s=this.displayedGroupNode.rowGroupColumn,a=s?s.getColDef():void 0;if(!!a){var l=this.userComponentFactory.getCellRendererDetails(a,e);if(l&&!o(l))return l;if(o(l)&&a.cellRendererParams&&a.cellRendererParams.innerRenderer){var u=this.userComponentFactory.getInnerRendererDetails(a.cellRendererParams,e);return u}}},t.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,ue.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},t.prototype.updateChildCount=function(){var e=this.displayedGroupNode.allChildrenCount,i=this.isShowRowGroupForThisRow(),n=i&&e!=null&&e>=0,o=n?"("+e+")":"";this.comp.setChildCount(o)},t.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsWrapper.isTreeData())return!0;var e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;var i=this.params.column,n=i==null||i.isRowGroupDisplayed(e.getId());return n},t.prototype.addExpandAndContract=function(){var e=this.params,i=_i("groupExpanded",this.gridOptionsWrapper,null),n=_i("groupContracted",this.gridOptionsWrapper,null);i&&this.eExpanded.appendChild(i),n&&this.eContracted.appendChild(n);var o=e.eGridCell;!this.gridOptionsWrapper.isEnableGroupEdit()&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(o,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(o,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,ue.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var s=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,ue.EVENT_ALL_CHILDREN_COUNT_CHANGED,s),this.addManagedListener(this.displayedGroupNode,ue.EVENT_MASTER_CHANGED,s),this.addManagedListener(this.displayedGroupNode,ue.EVENT_GROUP_CHANGED,s),this.addManagedListener(this.displayedGroupNode,ue.EVENT_HAS_CHILDREN_CHANGED,s)},t.prototype.onExpandClicked=function(e){vo(e)||(Lu(e),this.onExpandOrContract(e))},t.prototype.onExpandOrContract=function(e){var i=this.displayedGroupNode,n=!i.expanded;!n&&i.sticky&&this.scrollToStickyNode(i),i.setExpanded(n,e)},t.prototype.scrollToStickyNode=function(e){var i=this.ctrlsService.getGridBodyCtrl(),n=i.getScrollFeature();n.setVerticalScrollPosition(e.rowTop-e.stickyRowTop)},t.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var e=this.displayedGroupNode,i=this.columnModel.isPivotMode()&&e.leafGroup,n=e.isExpandable()&&!e.footer&&!i;if(!n)return!1;var o=this.params.column,s=o!=null&&typeof o.getColDef().showRowGroup=="string";if(s){var a=this.isShowRowGroupForThisRow();return a}return!0},t.prototype.showExpandAndContractIcons=function(){var e=this,i=e.params,n=e.displayedGroupNode,o=e.columnModel,s=i.node,a=this.isExpandable();if(a){var l=this.showingValueForOpenedParent?!0:s.expanded;this.comp.setExpandedDisplayed(l),this.comp.setContractedDisplayed(!l)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var u=o.isPivotMode(),c=u&&n.leafGroup,h=a&&!c,d=s.footer&&s.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",h),this.comp.addOrRemoveCssClass("ag-row-group",h),u?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",c):d||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!h)},t.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},t.prototype.setupIndent=function(){var e=this.params.node,i=this.params.suppressPadding;i||(this.addManagedListener(e,ue.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},t.prototype.setIndent=function(){if(!this.gridOptionsWrapper.isGroupHideOpenParents()){var e=this.params,i=e.node,n=!!e.colDef,o=this.gridOptionsWrapper.isTreeData(),s=!n||o||e.colDef.showRowGroup===!0,a=s?i.uiLevel:0,l=e.padding>=0;l&&ce(function(){return console.warn("AG Grid: cellRendererParams.padding no longer works, it was deprecated in since v14.2 and removed in v26, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the AG Grid documentation page for Themes, in particular the property $row-group-indent-size.")},"groupCellRenderer->doDeprecatedWay"),this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+a,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},t.prototype.addFullWidthRowDraggerIfNeeded=function(){var e=this;if(!(!this.params.fullWidth||!this.params.rowDrag)){var i=new Yf(function(){return e.params.value},this.params.node);this.createManagedBean(i,this.context),this.eGui.insertAdjacentElement("afterbegin",i.getGui())}},t.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;return typeof e=="function"||e===!0},t.prototype.addCheckboxIfNeeded=function(){var e=this,i=this.displayedGroupNode,n=this.isUserWantsSelected()&&!i.footer&&!i.rowPinned&&!i.detail;if(n){var o=new yP;this.getContext().createBean(o),o.init({rowNode:i,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(o.getGui()),this.addDestroyFunc(function(){return e.getContext().destroyBean(o)})}this.comp.setCheckboxVisible(n)},t.prototype.onKeyDown=function(e){var i=e.key===lt.ENTER;if(!(!i||this.params.suppressEnterExpand)){var n=this.params.column&&this.params.column.isCellEditable(this.params.node);n||this.onExpandOrContract(e)}},t.prototype.onCellDblClicked=function(e){if(!vo(e)){var i=Hf(this.eExpanded,e)||Hf(this.eContracted,e);i||this.onExpandOrContract(e)}},Nl([b("expressionService")],t.prototype,"expressionService",void 0),Nl([b("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Nl([b("columnModel")],t.prototype,"columnModel",void 0),Nl([b("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Nl([b("gridOptions")],t.prototype,"gridOptions",void 0),Nl([b("ctrlsService")],t.prototype,"ctrlsService",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var P9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),wc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Cx=function(r){P9(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){var i=this,n={setInnerRenderer:function(l,u){return i.setRenderDetails(l,u)},setChildCount:function(l){return i.eChildCount.innerHTML=l},addOrRemoveCssClass:function(l,u){return i.addOrRemoveCssClass(l,u)},setContractedDisplayed:function(l){return Ke(i.eContracted,l)},setExpandedDisplayed:function(l){return Ke(i.eExpanded,l)},setCheckboxVisible:function(l){return i.eCheckbox.classList.toggle("ag-invisible",!l)}},o=this.createManagedBean(new T9),s=!e.colDef,a=this.getGui();o.init(n,a,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),s&&an(a,"gridcell")},t.prototype.setRenderDetails=function(e,i){var n=this;if(e){var o=e.newAgStackInstance();if(!o)return;o.then(function(s){if(!!s){var a=function(){return n.context.destroyBean(s)};n.isAlive()?(n.eValue.appendChild(s.getGui()),n.addDestroyFunc(a)):a()}})}else this.eValue.innerText=i},t.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),r.prototype.destroy.call(this)},t.prototype.refresh=function(){return!1},t.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`,wc([ut("eExpanded")],t.prototype,"eExpanded",void 0),wc([ut("eContracted")],t.prototype,"eContracted",void 0),wc([ut("eCheckbox")],t.prototype,"eCheckbox",void 0),wc([ut("eValue")],t.prototype,"eValue",void 0),wc([ut("eChildCount")],t.prototype,"eChildCount",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var O9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),wx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},A9=function(r){O9(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){e.node.failedLoad?this.setupFailed():this.setupLoading()},t.prototype.setupFailed=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")},t.prototype.setupLoading=function(){var e=_i("groupLoading",this.gridOptionsWrapper,null);e&&this.eLoadingIcon.appendChild(e);var i=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=i("loadingOoo","Loading")},t.prototype.refresh=function(e){return!1},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`,wx([ut("eLoadingIcon")],t.prototype,"eLoadingIcon",void 0),wx([ut("eLoadingText")],t.prototype,"eLoadingText",void 0),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var D9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),L9=function(r){D9(t,r);function t(){return r.call(this)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var i=this.gridOptionsWrapper.getOverlayLoadingTemplate()?this.gridOptionsWrapper.getOverlayLoadingTemplate():t.DEFAULT_LOADING_OVERLAY_TEMPLATE,n=this.gridOptionsWrapper.getLocaleTextFunc(),o=i.replace("[LOADING...]",n("loadingOoo","Loading..."));this.setTemplate(o)},t.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var I9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),F9=function(r){I9(t,r);function t(){return r.call(this)||this}return t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var i=this.gridOptionsWrapper.getOverlayNoRowsTemplate()?this.gridOptionsWrapper.getOverlayNoRowsTemplate():t.DEFAULT_NO_ROWS_TEMPLATE,n=this.gridOptionsWrapper.getLocaleTextFunc(),o=i.replace("[NO_ROWS_TO_SHOW]",n("noRowsToShow","No Rows To Show"));this.setTemplate(o)},t.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var N9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),G9=function(r){N9(t,r);function t(){return r.call(this,'<div class="ag-tooltip"></div>')||this}return t.prototype.init=function(e){var i=e.value;this.getGui().innerHTML=wo(i)},t}(ad);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var H9=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),pp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},W9=function(r){H9(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:j7,agColumnHeader:e9,agColumnGroupHeader:n9,agSortIndicator:dw,agTextColumnFloatingFilter:J7,agNumberColumnFloatingFilter:q7,agDateColumnFloatingFilter:B7,agReadOnlyFloatingFilter:R7,agAnimateShowChangeCellRenderer:_9,agAnimateSlideCellRenderer:S9,agGroupCellRenderer:Cx,agGroupRowRenderer:Cx,agLoadingCellRenderer:A9,agCellEditor:h_,agTextCellEditor:h_,agSelectCellEditor:vP,agPopupTextCellEditor:f9,agPopupSelectCellEditor:c9,agLargeTextCellEditor:a9,agTextColumnFilter:hw,agNumberColumnFilter:gP,agDateColumnFilter:pP,agLoadingOverlay:L9,agNoRowsOverlay:F9,agTooltipComponent:G9},e.agDeprecatedNames={set:{newComponentName:"agSetColumnFilter",propertyHolder:"filter"},text:{newComponentName:"agTextColumnFilter",propertyHolder:"filter"},number:{newComponentName:"agNumberColumnFilter",propertyHolder:"filter"},date:{newComponentName:"agDateColumnFilter",propertyHolder:"filter"},group:{newComponentName:"agGroupCellRenderer",propertyHolder:"cellRenderer"},animateShowChange:{newComponentName:"agAnimateShowChangeCellRenderer",propertyHolder:"cellRenderer"},animateSlide:{newComponentName:"agAnimateSlideCellRenderer",propertyHolder:"cellRenderer"},select:{newComponentName:"agSelectCellEditor",propertyHolder:"cellEditor"},largeText:{newComponentName:"agLargeTextCellEditor",propertyHolder:"cellEditor"},popupSelect:{newComponentName:"agPopupSelectCellEditor",propertyHolder:"cellEditor"},popupText:{newComponentName:"agPopupTextCellEditor",propertyHolder:"cellEditor"},richSelect:{newComponentName:"agRichSelectCellEditor",propertyHolder:"cellEditor"},headerComponent:{newComponentName:"agColumnHeader",propertyHolder:"headerComponent"}},e.jsComps={},e.fwComps={},e}return t.prototype.init=function(){var e=this;this.gridOptions.components!=null&&We(this.gridOptions.components,function(i,n){return e.registerJsComponent(i,n)}),this.gridOptions.frameworkComponents!=null&&We(this.gridOptions.frameworkComponents,function(i,n){return e.registerFwComponent(i,n)})},t.prototype.registerDefaultComponent=function(e,i){var n=this.translateIfDeprecated(e);if(this.agGridDefaults[n]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[n]=i},t.prototype.registerJsComponent=function(e,i){var n=this.translateIfDeprecated(e);if(this.fwComps[n]){console.error("Trying to register a component that you have already registered for frameworks: "+n);return}this.jsComps[n]=i},t.prototype.registerFwComponent=function(e,i){var n="AG Grid: As of v27, registering components via grid property frameworkComponents is deprecated. Instead register both JavaScript AND Framework Components via the components property.";ce(function(){return console.warn(n)},"UserComponentRegistry.frameworkComponentsDeprecated");var o=this.translateIfDeprecated(e);this.fwComps[o]=i},t.prototype.retrieve=function(e){var i=this.translateIfDeprecated(e),n=function(c,h){return{componentFromFramework:h,component:c}},o=this.getFrameworkOverrides().frameworkComponent(i,this.gridOptions.components);if(o!=null)return n(o,!0);var s=this.fwComps[i];if(s)return n(s,!0);var a=this.jsComps[i];if(a){var l=this.getFrameworkOverrides().isFrameworkComponent(a);return n(a,l)}var u=this.agGridDefaults[i];return u?n(u,!1):(Object.keys(this.agGridDefaults).indexOf(i)<0&&console.warn("AG Grid: Looking for component ["+i+"] but it wasn't found."),null)},t.prototype.translateIfDeprecated=function(e){var i=this.agDeprecatedNames[e];return i!=null?(ce(function(){console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename "+i.propertyHolder+":"+e+" to "+i.propertyHolder+":"+i.newComponentName)},"DEPRECATE_COMPONENT_"+e),i.newComponentName):e},pp([b("gridOptions")],t.prototype,"gridOptions",void 0),pp([b("agComponentUtils")],t.prototype,"agComponentUtils",void 0),pp([Ct],t.prototype,"init",null),t=pp([Dt("userComponentRegistry")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var V9={propertyName:"dateComponent",cellRenderer:!1},k9={propertyName:"headerComponent",cellRenderer:!1},B9={propertyName:"headerGroupComponent",cellRenderer:!1},Sx={propertyName:"cellRenderer",cellRenderer:!0},U9={propertyName:"cellEditor",cellRenderer:!1},Ex={propertyName:"innerRenderer",cellRenderer:!0},z9={propertyName:"loadingOverlayComponent",cellRenderer:!1},j9={propertyName:"noRowsOverlayComponent",cellRenderer:!1},$9={propertyName:"tooltipComponent",cellRenderer:!1},d_={propertyName:"filter",cellRenderer:!1},Y9={propertyName:"floatingFilterComponent",cellRenderer:!1},K9={propertyName:"toolPanel",cellRenderer:!1},X9={propertyName:"statusPanel",cellRenderer:!1},q9={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Z9={propertyName:"loadingCellRenderer",cellRenderer:!0},J9={propertyName:"groupRowRenderer",cellRenderer:!0},Q9={propertyName:"detailCellRenderer",cellRenderer:!0};/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var tY=function(){function r(){}return r.getFloatingFilterType=function(t){return this.filterToFloatingFilterMapping[t]},r.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var eY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gl=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},iY=function(r){eY(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getHeaderCompDetails=function(e,i){return this.getCompDetails(e,k9,"agColumnHeader",i)},t.prototype.getHeaderGroupCompDetails=function(e){var i=e.columnGroup.getColGroupDef();return this.getCompDetails(i,B9,"agColumnGroupHeader",e)},t.prototype.getFullWidthCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,q9,null,e,!0)},t.prototype.getFullWidthLoadingCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,Z9,"agLoadingCellRenderer",e,!0)},t.prototype.getFullWidthGroupCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,J9,"agGroupRowRenderer",e,!0)},t.prototype.getFullWidthDetailCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,Q9,"agDetailCellRenderer",e,!0)},t.prototype.getInnerRendererDetails=function(e,i){return this.getCompDetails(e,Ex,null,i)},t.prototype.getFullWidthGroupRowInnerCellRenderer=function(e,i){return this.getCompDetails(e,Ex,null,i)},t.prototype.getCellRendererDetails=function(e,i){return this.getCompDetails(e,Sx,null,i)},t.prototype.getCellEditorDetails=function(e,i){return this.getCompDetails(e,U9,"agCellEditor",i,!0)},t.prototype.getFilterDetails=function(e,i,n){return this.getCompDetails(e,d_,n,i,!0)},t.prototype.getDateCompDetails=function(e){return this.getCompDetails(this.gridOptions,V9,"agDateInput",e,!0)},t.prototype.getLoadingOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,z9,"agLoadingOverlay",e,!0)},t.prototype.getNoRowsOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,j9,"agNoRowsOverlay",e,!0)},t.prototype.getTooltipCompDetails=function(e){return this.getCompDetails(e.colDef,$9,"agTooltipComponent",e,!0)},t.prototype.getSetFilterCellRendererDetails=function(e,i){return this.getCompDetails(e,Sx,null,i)},t.prototype.getFloatingFilterCompDetails=function(e,i,n){return this.getCompDetails(e,Y9,n,i)},t.prototype.getToolPanelCompDetails=function(e,i){return this.getCompDetails(e,K9,null,i,!0)},t.prototype.getStatusPanelCompDetails=function(e,i){return this.getCompDetails(e,X9,null,i,!0)},t.prototype.getCompDetails=function(e,i,n,o,s){var a=this;s===void 0&&(s=!1);var l=i.propertyName,u=i.cellRenderer,c=this.getCompKeys(e,i,o),h=c.compName,d=c.jsComp,p=c.fwComp,f=c.paramsFromSelector,m=c.popupFromSelector,g=c.popupPositionFromSelector,y=function(E){var M=a.userComponentRegistry.retrieve(E);M&&(d=M.componentFromFramework?void 0:M.component,p=M.componentFromFramework?M.component:void 0)};if(h!=null&&y(h),d==null&&p==null&&n!=null&&y(n),d&&u&&!this.agComponentUtils.doesImplementIComponent(d)&&(d=this.agComponentUtils.adaptFunction(l,d)),!d&&!p){s&&console.error("Could not find component "+h+", did you forget to configure this component?");return}var C=this.mergeParamsWithApplicationProvidedParams(e,i,o,f),w=d==null,S=d||p;return{componentFromFramework:w,componentClass:S,params:C,type:i,popupFromSelector:m,popupPositionFromSelector:g,newAgStackInstance:function(){return a.newAgStackInstance(S,w,C,i)}}},t.prototype.getCompKeys=function(e,i,n){var o=this,s=i.propertyName,a,l,u,c,h,d;if(e){var p=e,f=p[s+"Selector"],m=f?f(n):null,g=function(C,w){var S=function(){var M="AG Grid: As of v27, the property "+s+"Framework is deprecated. The property "+s+" can now be used for JavaScript AND Framework Components.";ce(function(){return console.warn(M)},"UserComponentFactory."+s+"FrameworkDeprecated")};if(typeof C=="string")a=C;else if(typeof w=="string")S(),a=w;else if(C!=null&&C!==!0){var E=o.getFrameworkOverrides().isFrameworkComponent(C);E?u=C:l=C}else w!=null&&(S(),u=w)};if(m){if(m.frameworkComponent!=null){var y="AG Grid: As of v27, the return for "+s+"Selector has attributes [component, params] only. The attribute frameworkComponent is deprecated. You should now return back Framework Components using the 'component' attribute and the grid works out if it's a framework component or not.";ce(function(){return console.warn(y)},"UserComponentFactory."+s+"FrameworkSelectorDeprecated"),g(m.frameworkComponent,void 0)}else g(m.component,void 0);c=m.params,h=m.popup,d=m.popupPosition}else g(p[s],p[s+"Framework"])}return{compName:a,jsComp:l,fwComp:u,paramsFromSelector:c,popupFromSelector:h,popupPositionFromSelector:d}},t.prototype.newAgStackInstance=function(e,i,n,o){var s=o.propertyName,a=!i,l;if(a)l=new e;else{var u=this.componentMetadataProvider.retrieve(s);l=this.frameworkComponentWrapper.wrap(e,u.mandatoryMethodList,u.optionalMethodList,o)}var c=this.initComponent(l,n);return c==null?cr.resolve(l):c.then(function(){return l})},t.prototype.mergeParamsWithApplicationProvidedParams=function(e,i,n,o){o===void 0&&(o=null);var s={context:this.gridOptionsWrapper.getContext(),columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi()};jn(s,n);var a=e,l=a&&a[i.propertyName+"Params"];if(typeof l=="function"){var u=l(n);jn(s,u)}else typeof l=="object"&&jn(s,l);return jn(s,o),s},t.prototype.initComponent=function(e,i){if(this.context.createBean(e),e.init!=null)return e.init(i)},t.prototype.getDefaultFloatingFilterType=function(e){if(e==null)return null;var i=null,n=this.getCompKeys(e,d_),o=n.compName,s=n.jsComp,a=n.fwComp;if(o)i=tY.getFloatingFilterType(o);else{var l=s==null&&a==null&&e.filter===!0;if(l){var u=te.isRegistered(qt.SetFilterModule);i=u?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter"}}return i},Gl([b("gridOptions")],t.prototype,"gridOptions",void 0),Gl([b("agComponentUtils")],t.prototype,"agComponentUtils",void 0),Gl([b("componentMetadataProvider")],t.prototype,"componentMetadataProvider",void 0),Gl([b("userComponentRegistry")],t.prototype,"userComponentRegistry",void 0),Gl([Ae("frameworkComponentWrapper")],t.prototype,"frameworkComponentWrapper",void 0),t=Gl([Dt("userComponentFactory")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var oh;(function(r){r[r.SINGLE_SHEET=0]="SINGLE_SHEET",r[r.MULTI_SHEET=1]="MULTI_SHEET"})(oh||(oh={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var nY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},rY=function(r){nY(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return t.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},t.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},t.prototype.removeListener=function(e){var i=e.dragSource.eElement,n=e.mouseDownListener;if(i.removeEventListener("mousedown",n),e.touchEnabled){var o=e.touchStartListener;i.removeEventListener("touchstart",o,{passive:!0})}},t.prototype.removeDragSource=function(e){var i=this.dragSources.find(function(n){return n.dragSource===e});!i||(this.removeListener(i),en(this.dragSources,i))},t.prototype.isDragging=function(){return this.dragging},t.prototype.addDragSource=function(e,i){var n=this;i===void 0&&(i=!1);var o=this.onMouseDown.bind(this,e);e.eElement.addEventListener("mousedown",o);var s=null,a=this.gridOptionsWrapper.isSuppressTouch();i&&!a&&(s=function(l){$C(l.target)||(l.cancelable&&l.preventDefault(),n.onTouchStart(e,l))},e.eElement.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:o,touchStartListener:s,touchEnabled:i})},t.prototype.onTouchStart=function(e,i){var n=this;this.currentDragParams=e,this.dragging=!1;var o=i.touches[0];this.touchLastTime=o,this.touchStart=o;var s=function(h){return n.onTouchMove(h,e.eElement)},a=function(h){return n.onTouchUp(h,e.eElement)},l=function(h){h.cancelable&&h.preventDefault()},u=i.target,c=[{target:document,type:"touchmove",listener:l,options:{passive:!1}},{target:u,type:"touchmove",listener:s,options:{passive:!0}},{target:u,type:"touchend",listener:a,options:{passive:!0}},{target:u,type:"touchcancel",listener:a,options:{passive:!0}}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onCommonMove(o,this.touchStart,e.eElement)},t.prototype.onMouseDown=function(e,i){var n=this,o=i;if(!(e.skipMouseEvent&&e.skipMouseEvent(i))&&!o._alreadyProcessedByDragService&&(o._alreadyProcessedByDragService=!0,i.button===0)){this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=i;var s=this.gridOptionsWrapper.getDocument(),a=function(d){return n.onMouseMove(d,e.eElement)},l=function(d){return n.onMouseUp(d,e.eElement)},u=function(d){return d.preventDefault()},c=s,h=[{target:c,type:"mousemove",listener:a},{target:c,type:"mouseup",listener:l},{target:c,type:"contextmenu",listener:u}];this.addTemporaryEvents(h),e.dragStartPixels===0&&this.onMouseMove(i,e.eElement)}},t.prototype.addTemporaryEvents=function(e){e.forEach(function(i){var n=i.target,o=i.type,s=i.listener,a=i.options;n.addEventListener(o,s,a)}),this.dragEndFunctions.push(function(){e.forEach(function(i){var n=i.target,o=i.type,s=i.listener,a=i.options;n.removeEventListener(o,s,a)})})},t.prototype.isEventNearStartEvent=function(e,i){var n=this.currentDragParams.dragStartPixels,o=dt(n)?n:4;return aw(e,i,o)},t.prototype.getFirstActiveTouch=function(e){for(var i=0;i<e.length;i++)if(e[i].identifier===this.touchStart.identifier)return e[i];return null},t.prototype.onCommonMove=function(e,i,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,i))return;this.dragging=!0;var o={type:O.EVENT_DRAG_STARTED,target:n};this.eventService.dispatchEvent(o),this.currentDragParams.onDragStart(i),this.currentDragParams.onDragging(i)}this.currentDragParams.onDragging(e)},t.prototype.onTouchMove=function(e,i){var n=this.getFirstActiveTouch(e.touches);!n||this.onCommonMove(n,this.touchStart,i)},t.prototype.onMouseMove=function(e,i){(this.gridOptionsWrapper.isEnableCellTextSelect()||ll())&&e.type==="mousemove"&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,i)},t.prototype.isOverFormFieldElement=function(e){var i,n,o=e.target,s=(i=o)===null||i===void 0?void 0:i.tagName.toLocaleLowerCase();return!!(!((n=s)===null||n===void 0)&&n.match("^a$|textarea|input|select|button"))},t.prototype.onTouchUp=function(e,i){var n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,i)},t.prototype.onMouseUp=function(e,i){this.onUpCommon(e,i)},t.prototype.onUpCommon=function(e,i){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);var n={type:O.EVENT_DRAG_STOPPED,target:i};this.eventService.dispatchEvent(n)}this.mouseStartEvent=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(o){return o()}),this.dragEndFunctions.length=0},Sc([b("loggerFactory")],t.prototype,"loggerFactory",void 0),Sc([b("mouseEventService")],t.prototype,"mouseEventService",void 0),Sc([Ct],t.prototype,"init",null),Sc([Yi],t.prototype,"removeAllListeners",null),t=Sc([Dt("dragService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var oY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xf=function(){return Xf=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Xf.apply(this,arguments)},_s=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},sY=function(r){oY(t,r);function t(){var i=r!==null&&r.apply(this,arguments)||this;return i.allColumnFilters=new Map,i.activeAggregateFilters=[],i.activeColumnFilters=[],i.quickFilter=null,i.quickFilterParts=null,i.processingFilterChange=!1,i}e=t,t.prototype.init=function(){var i=this;this.addManagedListener(this.eventService,O.EVENT_GRID_COLUMNS_CHANGED,function(){return i.onColumnsChanged()}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_VALUE_CHANGED,function(){return i.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PIVOT_CHANGED,function(){return i.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return i.refreshFiltersForAggregations()}),this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText()),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsWrapper.isAllowShowChangeAfterFilter(),this.externalFilterPresent=this.gridOptionsWrapper.isExternalFilterPresent()},t.prototype.setQuickFilterParts=function(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null},t.prototype.setFilterModel=function(i){var n=this,o=[],s=this.getFilterModel();if(i){var a=lw(Object.keys(i));this.allColumnFilters.forEach(function(l,u){var c=i[u];o.push(n.setModelOnFilterWrapper(l.filterPromise,c)),a.delete(u)}),a.forEach(function(l){var u=n.columnModel.getPrimaryColumn(l)||n.columnModel.getGridColumn(l);if(!u){console.warn("AG Grid: setFilterModel() - no column found for colId: "+l);return}if(!u.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+l);return}var c=n.getOrCreateFilterWrapper(u,"NO_UI");if(!c){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+l);return}o.push(n.setModelOnFilterWrapper(c.filterPromise,i[l]))})}else this.allColumnFilters.forEach(function(l){o.push(n.setModelOnFilterWrapper(l.filterPromise,null))});cr.all(o).then(function(){var l=n.getFilterModel(),u=[];n.allColumnFilters.forEach(function(c,h){var d=s?s[h]:null,p=l?l[h]:null;Jt.jsonEquals(d,p)||u.push(c.column)}),u.length>0&&n.onFilterChanged({columns:u})})},t.prototype.setModelOnFilterWrapper=function(i,n){return new cr(function(o){i.then(function(s){typeof s.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),o()),(s.setModel(n)||cr.resolve()).then(function(){return o()})})})},t.prototype.getFilterModel=function(){var i={};return this.allColumnFilters.forEach(function(n,o){var s=n.filterPromise,a=s.resolveNow(null,function(u){return u});if(a==null)return null;if(typeof a.getModel!="function"){console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel");return}var l=a.getModel();dt(l)&&(i[o]=l)}),i},t.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},t.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},t.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},t.prototype.doAggregateFiltersPass=function(i,n){return this.doColumnFiltersPass(i,n,!0)},t.prototype.updateActiveFilters=function(){var i=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var n=function(a){return a?a.isFilterActive?a.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1},o=!!this.gridOptionsWrapper.getGroupAggFiltering(),s=function(a){var l=!a.isPrimary();if(l)return!0;var u=!i.columnModel.isPivotActive(),c=a.isValueActive();return!c||!u?!1:i.columnModel.isPivotMode()?!0:o};this.allColumnFilters.forEach(function(a){if(a.filterPromise.resolveNow(!1,n)){var l=a.filterPromise.resolveNow(null,function(u){return u});s(a.column)?i.activeAggregateFilters.push(l):i.activeColumnFilters.push(l)}})},t.prototype.updateFilterFlagInColumns=function(i,n){this.allColumnFilters.forEach(function(o){var s=o.filterPromise.resolveNow(!1,function(a){return a.isFilterActive()});o.column.setFilterActive(s,i,n)})},t.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()},t.prototype.doColumnFiltersPass=function(i,n,o){for(var s=i.data,a=i.aggData,l=o?this.activeAggregateFilters:this.activeColumnFilters,u=o?a:s,c=0;c<l.length;c++){var h=l[c];if(!(h==null||h===n)){if(typeof h.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!h.doesFilterPass({node:i,data:u}))return!1}}return!0},t.prototype.parseQuickFilter=function(i){return dt(i)?this.gridOptionsWrapper.isRowModelDefault()?i.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},t.prototype.setQuickFilter=function(i){if(i!=null&&typeof i!="string"){console.warn("AG Grid - setQuickFilter() only supports string inputs, received: "+typeof i);return}var n=this.parseQuickFilter(i);this.quickFilter!==n&&(this.quickFilter=n,this.setQuickFilterParts(),this.onFilterChanged())},t.prototype.refreshFiltersForAggregations=function(){var i=this.gridOptionsWrapper.getGroupAggFiltering();i&&this.onFilterChanged()},t.prototype.callOnFilterChangedOutsideRenderCycle=function(i){var n=this;i===void 0&&(i={});var o=function(){return n.onFilterChanged(i)};this.rowRenderer.isRefreshInProgress()?setTimeout(o,0):o()},t.prototype.onFilterChanged=function(i){i===void 0&&(i={});var n=i.filterInstance,o=i.additionalEventAttributes,s=i.columns;this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",o),this.externalFilterPresent=this.gridOptionsWrapper.isExternalFilterPresent(),this.allColumnFilters.forEach(function(l){!l.filterPromise||l.filterPromise.then(function(u){u&&u!==n&&u.onAnyFilterChanged&&u.onAnyFilterChanged()})});var a={type:O.EVENT_FILTER_CHANGED,columns:s||[]};o&&jn(a,o),this.processingFilterChange=!0,this.eventService.dispatchEvent(a),this.processingFilterChange=!1},t.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},t.prototype.isQuickFilterPresent=function(){return this.quickFilter!==null},t.prototype.doesRowPassOtherFilters=function(i,n){return this.doesRowPassFilter({rowNode:n,filterInstanceToSkip:i})},t.prototype.doesRowPassQuickFilterNoCache=function(i,n){var o=this,s=this.columnModel.getAllColumnsForQuickFilter();return s.some(function(a){var l=o.getQuickFilterTextForColumn(a,i);return dt(l)&&l.indexOf(n)>=0})},t.prototype.doesRowPassQuickFilterCache=function(i,n){return i.quickFilterAggregateText||this.aggregateRowForQuickFilter(i),i.quickFilterAggregateText.indexOf(n)>=0},t.prototype.doesRowPassQuickFilter=function(i){var n=this,o=this.gridOptionsWrapper.isCacheQuickFilter();return this.quickFilterParts.every(function(s){return o?n.doesRowPassQuickFilterCache(i,s):n.doesRowPassQuickFilterNoCache(i,s)})},t.prototype.doesRowPassAggregateFilters=function(i){return!(this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(i.rowNode,i.filterInstanceToSkip))},t.prototype.doesRowPassFilter=function(i){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(i.rowNode)||this.isExternalFilterPresent()&&!this.gridOptionsWrapper.doesExternalFilterPass(i.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(i.rowNode,i.filterInstanceToSkip))},t.prototype.getQuickFilterTextForColumn=function(i,n){var o=this.valueService.getValue(i,n,!0),s=i.getColDef();if(s.getQuickFilterText){var a={value:o,node:n,data:n.data,column:i,colDef:s,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};o=s.getQuickFilterText(a)}return dt(o)?o.toString().toUpperCase():null},t.prototype.aggregateRowForQuickFilter=function(i){var n=this,o=[],s=this.columnModel.getAllColumnsForQuickFilter();s.forEach(function(a){var l=n.getQuickFilterTextForColumn(a,i);dt(l)&&o.push(l)}),i.quickFilterAggregateText=o.join(e.QUICK_FILTER_SEPARATOR)},t.prototype.onNewRowsLoaded=function(i){this.allColumnFilters.forEach(function(n){n.filterPromise.then(function(o){o.onNewRowsLoaded&&o.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(i),this.updateActiveFilters()},t.prototype.createValueGetter=function(i){var n=this;return function(o){var s=o.node;return n.valueService.getValue(i,s,!0)}},t.prototype.getFilterComponent=function(i,n,o){o===void 0&&(o=!0);var s;if(o)return((s=this.getOrCreateFilterWrapper(i,n))===null||s===void 0?void 0:s.filterPromise)||null;var a=this.cachedFilter(i);return a?a.filterPromise:null},t.prototype.isFilterActive=function(i){var n=this.cachedFilter(i);return!!n&&n.filterPromise.resolveNow(!1,function(o){return o.isFilterActive()})},t.prototype.getOrCreateFilterWrapper=function(i,n){if(!i.isFilterAllowed())return null;var o=this.cachedFilter(i);return o?n!=="NO_UI"&&this.putIntoGui(o,n):(o=this.createFilterWrapper(i,n),this.allColumnFilters.set(i.getColId(),o)),o},t.prototype.cachedFilter=function(i){return this.allColumnFilters.get(i.getColId())},t.prototype.createFilterInstance=function(i){var n=this,o=te.isRegistered(qt.SetFilterModule)?"agSetColumnFilter":"agTextColumnFilter",s=i.getColDef(),a,l=Xf(Xf({},this.createFilterParams(i,s)),{filterModifiedCallback:function(){var h={type:O.EVENT_FILTER_MODIFIED,column:i,filterInstance:a};n.eventService.dispatchEvent(h)},filterChangedCallback:function(h){var d={filterInstance:a,additionalEventAttributes:h,columns:[i]};n.callOnFilterChangedOutsideRenderCycle(d)},doesRowPassOtherFilter:function(h){return n.doesRowPassOtherFilters(a,h)}}),u=this.userComponentFactory.getFilterDetails(s,l,o);if(!u)return null;var c=u.newAgStackInstance();return c&&c.then(function(h){return a=h}),c},t.prototype.createFilterParams=function(i,n){var o={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),column:i,colDef:HC(n),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(i),context:this.gridOptionsWrapper.getContext(),doesRowPassOtherFilter:function(){return!0}};return o},t.prototype.createFilterWrapper=function(i,n){var o={column:i,filterPromise:null,compiledElement:null,guiPromise:cr.resolve(null)};return o.filterPromise=this.createFilterInstance(i),o.filterPromise&&this.putIntoGui(o,n),o},t.prototype.putIntoGui=function(i,n){var o=this,s=document.createElement("div");s.className="ag-filter",i.guiPromise=new cr(function(a){i.filterPromise.then(function(l){var u=l.getGui();dt(u)||console.warn("AG Grid: getGui method from filter returned "+u+", it should be a DOM element or an HTML template string."),typeof u=="string"&&(u=Hi(u)),s.appendChild(u),a(s);var c={type:O.EVENT_FILTER_OPENED,column:i.column,source:n,eGui:s};o.eventService.dispatchEvent(c)})})},t.prototype.onColumnsChanged=function(){var i=this,n=[];this.allColumnFilters.forEach(function(o,s){var a;o.column.isPrimary()?a=i.columnModel.getPrimaryColumn(s):a=i.columnModel.getGridColumn(s),!a&&(n.push(o.column),i.disposeFilterWrapper(o,"filterDestroyed"))}),n.length>0&&this.onFilterChanged({columns:n})},t.prototype.destroyFilter=function(i,n){n===void 0&&(n="api");var o=this.allColumnFilters.get(i.getColId());o&&(this.disposeFilterWrapper(o,n),this.onFilterChanged({columns:[i]}))},t.prototype.disposeFilterWrapper=function(i,n){var o=this;i.filterPromise.then(function(s){(s.setModel(null)||cr.resolve()).then(function(){o.getContext().destroyBean(s),i.column.setFilterActive(!1,n),o.allColumnFilters.delete(i.column.getColId())})})},t.prototype.destroy=function(){var i=this;r.prototype.destroy.call(this),this.allColumnFilters.forEach(function(n){return i.disposeFilterWrapper(n,"filterDestroyed")})};var e;return t.QUICK_FILTER_SEPARATOR=`
`,_s([b("valueService")],t.prototype,"valueService",void 0),_s([b("columnModel")],t.prototype,"columnModel",void 0),_s([b("rowModel")],t.prototype,"rowModel",void 0),_s([b("userComponentFactory")],t.prototype,"userComponentFactory",void 0),_s([b("rowRenderer")],t.prototype,"rowRenderer",void 0),_s([Ct],t.prototype,"init",null),_s([Yi],t.prototype,"destroy",null),t=e=_s([Dt("filterManager")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var aY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),pw=function(r){aY(t,r);function t(e,i){var n=r.call(this,e)||this;return n.ctrl=i,n}return t.prototype.getCtrl=function(){return this.ctrl},t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var lY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),fp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},uY=function(r){lY(t,r);function t(e){return r.call(this,t.TEMPLATE,e)||this}return t.prototype.postConstruct=function(){var e=this,i=this.getGui(),n={addOrRemoveCssClass:function(o,s){return e.addOrRemoveCssClass(o,s)},addOrRemoveBodyCssClass:function(o,s){return e.eFloatingFilterBody.classList.toggle(o,s)},addOrRemoveButtonWrapperCssClass:function(o,s){return e.eButtonWrapper.classList.toggle(o,s)},setCompDetails:function(o){return e.setCompDetails(o)},getFloatingFilterComp:function(){return e.compPromise},setWidth:function(o){return i.style.width=o},setMenuIcon:function(o){return e.eButtonShowMainFilter.appendChild(o)}};this.ctrl.setComp(n,i,this.eButtonShowMainFilter,this.eFloatingFilterBody)},t.prototype.setCompDetails=function(e){var i=this;this.compPromise=e.newAgStackInstance(),this.compPromise.then(function(n){return i.afterCompCreated(n)})},t.prototype.afterCompCreated=function(e){var i=this;!e||(this.addDestroyFunc(function(){return i.context.destroyBean(e)}),this.isAlive()&&(this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()))},t.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,fp([ut("eFloatingFilterBody")],t.prototype,"eFloatingFilterBody",void 0),fp([ut("eButtonWrapper")],t.prototype,"eButtonWrapper",void 0),fp([ut("eButtonShowMainFilter")],t.prototype,"eButtonShowMainFilter",void 0),fp([Ct],t.prototype,"postConstruct",null),t}(pw);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var cY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),xx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},wi;(function(r){r.AUTO_HEIGHT="ag-layout-auto-height",r.NORMAL="ag-layout-normal",r.PRINT="ag-layout-print"})(wi||(wi={}));var fw=function(r){cY(t,r);function t(e){var i=r.call(this)||this;return i.view=e,i}return t.prototype.postConstruct=function(){this.addManagedListener(this.gridOptionsWrapper,Et.PROP_DOM_LAYOUT,this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},t.prototype.updateLayoutClasses=function(){var e=this.gridOptionsWrapper.getDomLayout(),i={autoHeight:e===H.DOM_LAYOUT_AUTO_HEIGHT,normal:e===H.DOM_LAYOUT_NORMAL,print:e===H.DOM_LAYOUT_PRINT},n=i.autoHeight?wi.AUTO_HEIGHT:i.print?wi.PRINT:wi.NORMAL;this.view.updateLayoutClasses(n,i)},xx([b("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),xx([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Cs=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dY=function(r){hY(t,r);function t(e){var i=r.call(this)||this;return i.scrollLeft=-1,i.nextScrollTop=-1,i.scrollTop=-1,i.eBodyViewport=e,i.resetLastHorizontalScrollElementDebounced=ea(i.resetLastHorizontalScrollElement.bind(i),500),i}return t.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(i){e.centerRowContainerCtrl=i.centerRowContainerCtrl,e.onDisplayedColumnsWidthChanged(),e.addScrollListener()})},t.prototype.addScrollListener=function(){var e=this.ctrlsService.getFakeHScrollCtrl();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onCenterViewportScroll.bind(this)),this.addManagedListener(e.getViewport(),"scroll",this.onFakeHorizontalScroll.bind(this));var i=this.gridOptionsWrapper.isDebounceVerticalScrollbar()?ea(this.onVerticalScroll.bind(this),100):this.onVerticalScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",i)},t.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},t.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(e){var i=this.centerRowContainerCtrl==null;if(!i){e===void 0&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var n=this.enableRtl?e:-e,o=this.ctrlsService.getTopCenterRowContainerCtrl(),s=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),a=this.ctrlsService.getBottomCenterRowContainerCtrl(),l=this.ctrlsService.getFakeHScrollCtrl(),u=this.ctrlsService.getHeaderRowContainerCtrl();u.setHorizontalScroll(n),a.setContainerTranslateX(n),o.setContainerTranslateX(n),s.setContainerTranslateX(n);var c=this.centerRowContainerCtrl.getViewportElement(),h=this.lastHorizontalScrollElement===c,d=h?l.getViewport():this.centerRowContainerCtrl.getViewportElement();Bf(d,Math.abs(e),this.enableRtl)}},t.prototype.isControllingScroll=function(e){return this.lastHorizontalScrollElement?e===this.lastHorizontalScrollElement:(this.lastHorizontalScrollElement=e,!0)},t.prototype.onFakeHorizontalScroll=function(){var e=this.ctrlsService.getFakeHScrollCtrl().getViewport();!this.isControllingScroll(e)||this.onBodyHorizontalScroll(e)},t.prototype.onCenterViewportScroll=function(){var e=this.centerRowContainerCtrl.getViewportElement();!this.isControllingScroll(e)||this.onBodyHorizontalScroll(e)},t.prototype.onBodyHorizontalScroll=function(e){var i=this.centerRowContainerCtrl.getViewportElement(),n=i.scrollLeft;this.shouldBlockScrollUpdate("horizontal",n,!0)||(this.doHorizontalScroll(Math.round(Dh(e,this.enableRtl))),this.resetLastHorizontalScrollElementDebounced())},t.prototype.onVerticalScroll=function(){var e=this.eBodyViewport.scrollTop;this.shouldBlockScrollUpdate("vertical",e,!0)||(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,this.gridOptionsWrapper.isSuppressAnimationFrame()?(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()):this.animationFrameService.schedule())},t.prototype.resetLastHorizontalScrollElement=function(){this.lastHorizontalScrollElement=null},t.prototype.doHorizontalScroll=function(e){var i=this.ctrlsService.getFakeHScrollCtrl().getViewport(),n=Dh(i,this.enableRtl);this.scrollLeft===e&&e===n||(this.scrollLeft=e,this.fireScrollEvent("horizontal"),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.onHorizontalViewportChanged())},t.prototype.fireScrollEvent=function(e){var i=this,n={type:O.EVENT_BODY_SCROLL,direction:e,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(n),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var o=Object.assign({},n,{type:O.EVENT_BODY_SCROLL_END});i.eventService.dispatchEvent(o)},100)},t.prototype.shouldBlockScrollUpdate=function(e,i,n){if(n===void 0&&(n=!1),n&&!oa())return!1;if(e==="vertical"){var o=rd(this.eBodyViewport),s=this.eBodyViewport.scrollHeight;if(i<0||i+o>s)return!0}if(e==="horizontal"){var a=this.centerRowContainerCtrl.getCenterWidth(),l=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&Ah()){if(i>0)return!0}else if(i<0)return!0;if(Math.abs(i)+a>l)return!0}return!1},t.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent("vertical")},t.prototype.onHorizontalViewportChanged=function(){this.centerRowContainerCtrl.onHorizontalViewportChanged()},t.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onBodyHorizontalScroll(this.centerRowContainerCtrl.getViewportElement())},t.prototype.executeAnimationFrameScroll=function(){var e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e},t.prototype.setHorizontalScrollPosition=function(e){var i=0,n=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();this.shouldBlockScrollUpdate("horizontal",e)&&(this.enableRtl&&Ah()?e=e>0?0:n:e=Math.min(Math.max(e,i),n)),Bf(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)},t.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e},t.prototype.getVScrollPosition=function(){var e={top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight};return e},t.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},t.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},t.prototype.scrollHorizontally=function(e){var i=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(i+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-i},t.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},t.prototype.ensureNodeVisible=function(e,i){i===void 0&&(i=null);for(var n=this.rowModel.getRowCount(),o=-1,s=0;s<n;s++){var a=this.rowModel.getRow(s);if(typeof e=="function"){var l=e;if(a&&l(a)){o=s;break}}else if(e===a||e===a.data){o=s;break}}o>=0&&this.ensureIndexVisible(o,i)},t.prototype.ensureIndexVisible=function(e,i){if(this.gridOptionsWrapper.getDomLayout()!==H.DOM_LAYOUT_PRINT){var n=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=n){console.warn("invalid row index for ensureIndexVisible: "+e);return}var o=this.gridOptionsWrapper.isPagination(),s=o&&!this.gridOptionsWrapper.isSuppressPaginationPanel();s||this.paginationProxy.goToPageWithIndex(e);var a=this.ctrlsService.getGridBodyCtrl(),l=a.getStickyTopHeight(),u=this.paginationProxy.getRow(e),c;do{var h=u.rowTop,d=u.rowHeight,p=this.paginationProxy.getPixelOffset(),f=u.rowTop-p,m=f+u.rowHeight,g=this.getVScrollPosition(),y=this.heightScaler.getDivStretchOffset(),C=g.top+y,w=g.bottom+y,S=w-C,E=this.heightScaler.getScrollPositionForPixel(f),M=this.heightScaler.getScrollPositionForPixel(m-S),L=Math.min((E+M)/2,f),x=C+l>f,T=w<m,N=null;i==="top"?N=E:i==="bottom"?N=M:i==="middle"?N=L:x?N=E-l:T&&(N=M),N!==null&&(this.eBodyViewport.scrollTop=N,this.rowRenderer.redrawAfterScroll()),c=h!==u.rowTop||d!==u.rowHeight}while(c);this.animationFrameService.flushAllFrames()}},t.prototype.ensureColumnVisible=function(e,i){i===void 0&&(i="auto");var n=this.columnModel.getGridColumn(e);if(!!n&&!n.isPinned()&&!!this.columnModel.isColumnDisplayed(n)){var o=this.getPositionedHorizontalScroll(n,i);o!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(o),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},t.prototype.getPositionedHorizontalScroll=function(e,i){var n=this.isColumnOutsideViewport(e),o=n.columnBeforeStart,s=n.columnAfterEnd,a=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),l=this.centerRowContainerCtrl.getCenterWidth(),u=this.enableRtl,c=(u?o:s)||a,h=u?s:o;i!=="auto"&&(c=i==="start",h=i==="end");var d=i==="middle";if(c||h||d){var p=this.getColumnBounds(e),f=p.colLeft,m=p.colMiddle,g=p.colRight;return d?m-l/2:c?u?g:f:u?f-l:g-l}return null},t.prototype.isColumnOutsideViewport=function(e){var i=this.getViewportBounds(),n=i.start,o=i.end,s=this.getColumnBounds(e),a=s.colLeft,l=s.colRight,u=this.enableRtl,c=u?n>l:o<l,h=u?o<a:n>a;return{columnBeforeStart:c,columnAfterEnd:h}},t.prototype.getColumnBounds=function(e){var i=this.enableRtl,n=this.columnModel.getBodyContainerWidth(),o=e.getActualWidth(),s=e.getLeft(),a=i?-1:1,l=i?n-s:s,u=l+o*a,c=l+o/2*a;return{colLeft:l,colMiddle:c,colRight:u}},t.prototype.getViewportBounds=function(){var e=this.centerRowContainerCtrl.getCenterWidth(),i=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),n=i,o=e+i;return{start:n,end:o,width:e}},Cs([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Cs([b("animationFrameService")],t.prototype,"animationFrameService",void 0),Cs([b("paginationProxy")],t.prototype,"paginationProxy",void 0),Cs([b("rowModel")],t.prototype,"rowModel",void 0),Cs([b("rowContainerHeightService")],t.prototype,"heightScaler",void 0),Cs([b("rowRenderer")],t.prototype,"rowRenderer",void 0),Cs([b("columnModel")],t.prototype,"columnModel",void 0),Cs([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pY=function(){function r(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=t.scrollAxis.indexOf("x")!==-1,this.scrollVertically=t.scrollAxis.indexOf("y")!==-1,this.scrollByTick=t.scrollByTick!=null?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||function(){return!1}}return r.prototype.check=function(t,e){e===void 0&&(e=!1);var i=e||this.shouldSkipVerticalScroll();if(!(i&&this.shouldSkipHorizontalScroll())){var n=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=t.clientX<n.left+o,this.tickRight=t.clientX>n.right-o,this.tickUp=t.clientY<n.top+o&&!i,this.tickDown=t.clientY>n.bottom-o&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},r.prototype.ensureTickingStarted=function(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},r.prototype.doTick=function(){this.tickCount++;var t;if(t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){var i=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(i-t),this.tickRight&&this.setHorizontalPosition(i+t)}this.onScrollCallback&&this.onScrollCallback()},r.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var fY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),p_=function(){return p_=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},p_.apply(this,arguments)},er=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gY=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},mY=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(gY(arguments[t]));return r},vY=function(r){fY(t,r);function t(e){var i=r.call(this)||this;return i.isMultiRowDrag=!1,i.isGridSorted=!1,i.isGridFiltered=!1,i.isRowGroupActive=!1,i.eContainer=e,i}return t.prototype.postConstruct=function(){var e=this;this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel);var i=function(){e.onSortChanged(),e.onFilterChanged(),e.onRowGroupChanged()};this.addManagedListener(this.eventService,O.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_MODEL_UPDATED,function(){i()}),i(),this.ctrlsService.whenReady(function(){var n=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new pY({scrollContainer:n.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return n.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(o){return n.getScrollFeature().setVerticalScrollPosition(o)},onScrollCallback:function(){e.onDragging(e.lastDraggingEvent)}})})},t.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},t.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},t.prototype.onRowGroupChanged=function(){var e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!Un(e)},t.prototype.getContainer=function(){return this.eContainer},t.prototype.isInterestedIn=function(e){return e===Sn.RowDrag},t.prototype.getIconName=function(){var e=this.gridOptionsWrapper.isRowDragManaged();return e&&this.shouldPreventRowMove()?ji.ICON_NOT_ALLOWED:ji.ICON_MOVE},t.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},t.prototype.getRowNodes=function(e){var i=this;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];var n=this.gridOptionsWrapper.isRowDragMultiRow(),o=mY(this.selectionService.getSelectedNodes()).sort(function(a,l){return a.rowIndex==null||l.rowIndex==null?0:i.getRowIndexNumber(a)-i.getRowIndexNumber(l)}),s=e.dragItem.rowNode;return n&&o.indexOf(s)!==-1?(this.isMultiRowDrag=!0,o):(this.isMultiRowDrag=!1,[s])},t.prototype.onDragEnter=function(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(O.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(function(i){i.setDragging(!0)}),this.onEnterOrDragging(e)},t.prototype.onDragging=function(e){this.onEnterOrDragging(e)},t.prototype.isFromThisGrid=function(e){var i=e.dragSource.dragSourceDomDataKey;return i===this.gridOptionsWrapper.getDomDataKey()},t.prototype.isDropZoneWithinThisGrid=function(e){var i=this.ctrlsService.getGridBodyCtrl(),n=i.getGui(),o=e.dropZoneTarget;return!n.contains(o)},t.prototype.onEnterOrDragging=function(e){this.dispatchGridEvent(O.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;var i=this.mouseEventService.getNormalisedPosition(e).y,n=this.gridOptionsWrapper.isRowDragManaged();n&&this.doManagedDrag(e,i),this.autoScrollService.check(e.event)},t.prototype.doManagedDrag=function(e,i){var n=this.isFromThisGrid(e),o=this.gridOptionsWrapper.isRowDragManaged(),s=e.dragItem.rowNodes;o&&this.shouldPreventRowMove()||(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!n?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],i):this.moveRows(s,i))},t.prototype.getRowIndexNumber=function(e){return parseInt(Ue(e.getRowIndexString().split("-")),10)},t.prototype.moveRowAndClearHighlight=function(e){var i=this,n=this.clientSideRowModel.getLastHighlightedRowNode(),o=n&&n.highlighted===Jo.Below,s=this.mouseEventService.getNormalisedPosition(e).y,a=e.dragItem.rowNodes,l=o?1:0;if(this.isFromThisGrid(e))a.forEach(function(h){h.rowTop<s&&(l-=1)}),this.moveRows(a,s,l);else{var u=this.gridOptionsWrapper.getRowIdFunc(),c=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===Jo.Above&&c--,this.clientSideRowModel.updateRowData({add:a.map(function(h){return h.data}).filter(function(h){return!i.clientSideRowModel.getRowNode(u?u({data:h,level:0}):h.id)}),addIndex:c})}this.clearRowHighlight()},t.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},t.prototype.moveRows=function(e,i,n){n===void 0&&(n=0);var o=this.clientSideRowModel.ensureRowsAtPixel(e,i,n);o&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},t.prototype.addRowDropZone=function(e){var i=this;if(!e.getContainer()){ce(function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")},"add-drop-zone-empty-target");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}var n={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,n=e):(e.onDragEnter&&(n.onDragEnter=function(o){e.onDragEnter(i.draggingToRowDragEvent(O.EVENT_ROW_DRAG_ENTER,o))}),e.onDragLeave&&(n.onDragLeave=function(o){e.onDragLeave(i.draggingToRowDragEvent(O.EVENT_ROW_DRAG_LEAVE,o))}),e.onDragging&&(n.onDragging=function(o){e.onDragging(i.draggingToRowDragEvent(O.EVENT_ROW_DRAG_MOVE,o))}),e.onDragStop&&(n.onDragStop=function(o){e.onDragStop(i.draggingToRowDragEvent(O.EVENT_ROW_DRAG_END,o))})),this.dragAndDropService.addDropTarget(p_({isInterestedIn:function(o){return o===Sn.RowDrag},getIconName:function(){return ji.ICON_MOVE},external:!0},n))},t.prototype.getRowDropZone=function(e){var i=this,n=this.getContainer.bind(this),o=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),a=this.onDragging.bind(this),l=this.onDragStop.bind(this);return e?{getContainer:n,onDragEnter:e.onDragEnter?function(u){o(u),e.onDragEnter(i.draggingToRowDragEvent(O.EVENT_ROW_DRAG_ENTER,u))}:o,onDragLeave:e.onDragLeave?function(u){s(u),e.onDragLeave(i.draggingToRowDragEvent(O.EVENT_ROW_DRAG_LEAVE,u))}:s,onDragging:e.onDragging?function(u){a(u),e.onDragging(i.draggingToRowDragEvent(O.EVENT_ROW_DRAG_MOVE,u))}:a,onDragStop:e.onDragStop?function(u){l(u),e.onDragStop(i.draggingToRowDragEvent(O.EVENT_ROW_DRAG_END,u))}:l,fromGrid:!0}:{getContainer:n,onDragEnter:o,onDragLeave:s,onDragging:a,onDragStop:l,fromGrid:!0}},t.prototype.draggingToRowDragEvent=function(e,i){var n=this.mouseEventService.getNormalisedPosition(i).y,o=n>this.paginationProxy.getCurrentPageHeight(),s=-1,a;o||(s=this.rowModel.getRowIndexAtPixel(n),a=this.rowModel.getRow(s));var l;switch(i.vDirection){case Gu.Down:l="down";break;case Gu.Up:l="up";break;default:l=null;break}var u={type:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),event:i.event,node:i.dragItem.rowNode,nodes:i.dragItem.rowNodes,overIndex:s,overNode:a,y:n,vDirection:l};return u},t.prototype.dispatchGridEvent=function(e,i){var n=this.draggingToRowDragEvent(e,i);this.eventService.dispatchEvent(n)},t.prototype.onDragLeave=function(e){this.dispatchGridEvent(O.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsWrapper.isRowDragManaged()&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)},t.prototype.onDragStop=function(e){this.dispatchGridEvent(O.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsWrapper.isRowDragManaged()&&(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)},t.prototype.stopDragging=function(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(function(i){i.setDragging(!1)})},er([b("dragAndDropService")],t.prototype,"dragAndDropService",void 0),er([b("rowModel")],t.prototype,"rowModel",void 0),er([b("paginationProxy")],t.prototype,"paginationProxy",void 0),er([b("columnModel")],t.prototype,"columnModel",void 0),er([b("focusService")],t.prototype,"focusService",void 0),er([b("sortController")],t.prototype,"sortController",void 0),er([b("filterManager")],t.prototype,"filterManager",void 0),er([b("selectionService")],t.prototype,"selectionService",void 0),er([b("mouseEventService")],t.prototype,"mouseEventService",void 0),er([b("ctrlsService")],t.prototype,"ctrlsService",void 0),er([Ae("rangeService")],t.prototype,"rangeService",void 0),er([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ir=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Hu;(function(r){r.ANIMATION_ON="ag-row-animation",r.ANIMATION_OFF="ag-row-no-animation"})(Hu||(Hu={}));var CP="ag-selectable",wP="ag-force-vertical-scroll",SP="ag-column-moving",_Y=function(r){yY(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stickyTopHeight=0,e}return t.prototype.getScrollFeature=function(){return this.bodyScrollFeature},t.prototype.getBodyViewportElement=function(){return this.eBodyViewport},t.prototype.setComp=function(e,i,n,o,s,a){this.comp=e,this.eGridBody=i,this.eBodyViewport=n,this.eTop=o,this.eBottom=s,this.eStickyTop=a,this.setCellTextSelection(this.gridOptionsWrapper.isEnableCellTextSelect()),this.createManagedBean(new fw(this.comp)),this.bodyScrollFeature=this.createManagedBean(new dY(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,n,s,a]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.ctrlsService.registerGridBodyCtrl(this)},t.prototype.getComp=function(){return this.comp},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,O.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},t.prototype.addFocusListeners=function(e){var i=this;e.forEach(function(n){i.addManagedListener(n,"focusin",function(o){var s=o.target,a=Ba(s,"ag-root",n);n.classList.toggle("ag-has-focus",!a)}),i.addManagedListener(n,"focusout",function(o){var s=o.target,a=o.relatedTarget,l=n.contains(a),u=Ba(a,"ag-root",n),c=Ba(s,"ag-root",n);c||(!l||u)&&n.classList.remove("ag-has-focus")})})},t.prototype.setColumnMovingCss=function(e){this.comp.setColumnMovingCss(e?SP:null,e)},t.prototype.setCellTextSelection=function(e){e===void 0&&(e=!1);var i=e?CP:null;this.comp.setCellSelectableCss(i,e)},t.prototype.onScrollVisibilityChanged=function(){var e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e)},t.prototype.onGridColumnsChanged=function(){var e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)},t.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(e){if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})},t.prototype.addStopEditingWhenGridLosesFocus=function(){var e=this;if(!!this.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus()){var i=function(o){var s=o.relatedTarget;if(Wf(s)===null){e.rowRenderer.stopEditing();return}var a=n.some(function(u){return u.contains(s)})&&e.mouseEventService.isElementInThisGrid(s);if(!a){var l=e.popupService;a=l.getActivePopups().some(function(u){return u.contains(s)})||l.isElementWithinCustomPopup(s)}a||e.rowRenderer.stopEditing()},n=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];n.forEach(function(o){return e.addManagedListener(o,"focusout",i)})}},t.prototype.updateRowCount=function(){var e=this.headerNavigationService.getHeaderRowCount(),i=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=i===-1?-1:e+i;this.comp.setRowCount(n)},t.prototype.registerBodyViewportResizeListener=function(e){this.comp.registerBodyViewportResizeListener(e)},t.prototype.setVerticalScrollPaddingVisible=function(e){var i=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(i)},t.prototype.isVerticalScrollShowing=function(){var e=this.gridOptionsWrapper.isAlwaysShowVerticalScroll(),i=e?wP:null,n=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_NORMAL;return this.comp.setAlwaysVerticalScrollClass(i,e),e||n&&WT(this.eBodyViewport)},t.prototype.setupRowAnimationCssClass=function(){var e=this,i=function(){var n=e.gridOptionsWrapper.isAnimateRows()&&!e.rowContainerHeightService.isStretching(),o=n?Hu.ANIMATION_ON:Hu.ANIMATION_OFF;e.comp.setRowAnimationCssOnBodyViewport(o,n)};i(),this.addManagedListener(this.eventService,O.EVENT_HEIGHT_SCALE_CHANGED,i)},t.prototype.getGridBodyElement=function(){return this.eGridBody},t.prototype.addBodyViewportListener=function(){var e=this,i=function(n,o,s){if(!(!n&&!s)){if(e.gridOptionsWrapper.isPreventDefaultOnContextMenu()){var a=n||s;a.preventDefault()}var l=(n||o).target;(l===e.eBodyViewport||l===e.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&e.contextMenuFactory&&(n?e.contextMenuFactory.onContextMenu(n,null,null,null,null,e.eGridBody):s&&e.contextMenuFactory.onContextMenu(null,s,null,null,null,e.eGridBody))}};this.addManagedListener(this.eBodyViewport,"contextmenu",i),this.mockContextMenuForIPad(i),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this))},t.prototype.mockContextMenuForIPad=function(e){if(!!oa()){var i=new Yn(this.eBodyViewport),n=function(o){e(void 0,o.touchStart,o.touchEvent)};this.addManagedListener(i,Yn.EVENT_LONG_TAP,n),this.addDestroyFunc(function(){return i.destroy()})}},t.prototype.onBodyViewportWheel=function(e){!this.gridOptionsWrapper.isSuppressScrollWhenPopupsAreOpen()||this.popupService.hasAnchoredPopup()&&e.preventDefault()},t.prototype.onStickyTopWheel=function(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)},t.prototype.getGui=function(){return this.eGridBody},t.prototype.scrollVertically=function(e){var i=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(i+e),this.eBodyViewport.scrollTop-i},t.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new vY(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},t.prototype.getRowDragFeature=function(){return this.rowDragFeature},t.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},t.prototype.setFloatingHeights=function(){var e=this.pinnedRowModel,i=e.getPinnedTopTotalHeight();i&&(i+=1);var n=e.getPinnedBottomTotalHeight();n&&(n+=1),this.comp.setTopHeight(i),this.comp.setBottomHeight(n),this.comp.setTopDisplay(i?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop()},t.prototype.setStickyTopHeight=function(e){e===void 0&&(e=0),this.comp.setStickyTopHeight(e+"px"),this.stickyTopHeight=e},t.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},t.prototype.setStickyTopWidth=function(e){if(!e)this.comp.setStickyTopWidth("100%");else{var i=this.gridOptionsWrapper.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - "+i+"px)")}},t.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},t.prototype.setStickyTopOffsetTop=function(){var e=this.ctrlsService.getGridHeaderCtrl(),i=e.getHeaderHeight(),n=this.pinnedRowModel.getPinnedTopTotalHeight(),o=0;i>0&&(o+=i+1),n>0&&(o+=n+1),this.comp.setStickyTopTop(o+"px")},t.prototype.sizeColumnsToFit=function(e,i){var n=this,o=this.isVerticalScrollShowing(),s=o?this.gridOptionsWrapper.getScrollbarWidth():0,a=Hg(this.eBodyViewport),l=a-s;if(l>0){this.columnModel.sizeColumnsToFit(l,"sizeColumnsToFit",!1,e);return}i===void 0?window.setTimeout(function(){n.sizeColumnsToFit(e,100)},0):i===100?window.setTimeout(function(){n.sizeColumnsToFit(e,500)},100):i===500?window.setTimeout(function(){n.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},t.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e)},t.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)},ir([b("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),ir([b("ctrlsService")],t.prototype,"ctrlsService",void 0),ir([b("columnModel")],t.prototype,"columnModel",void 0),ir([b("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),ir([Ae("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),ir([b("headerNavigationService")],t.prototype,"headerNavigationService",void 0),ir([b("dragAndDropService")],t.prototype,"dragAndDropService",void 0),ir([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),ir([b("rowRenderer")],t.prototype,"rowRenderer",void 0),ir([b("popupService")],t.prototype,"popupService",void 0),ir([b("mouseEventService")],t.prototype,"mouseEventService",void 0),ir([b("rowModel")],t.prototype,"rowModel",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var qf;(function(r){r[r.FILL=0]="FILL",r[r.RANGE=1]="RANGE"})(qf||(qf={}));var ou;(function(r){r[r.VALUE=0]="VALUE",r[r.DIMENSION=1]="DIMENSION"})(ou||(ou={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ec="ag-cell-range-selected",CY="ag-cell-range-chart",wY="ag-cell-range-single-cell",SY="ag-cell-range-chart-category",EY="ag-cell-range-handle",xY="ag-cell-range-top",RY="ag-cell-range-right",bY="ag-cell-range-bottom",MY="ag-cell-range-left",TY=function(){function r(t,e){this.beans=t,this.cellCtrl=e}return r.prototype.setComp=function(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()},r.prototype.onRangeSelectionChanged=function(){!this.cellComp||(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Ec,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(Ec+"-1",this.rangeCount===1),this.cellComp.addOrRemoveCssClass(Ec+"-2",this.rangeCount===2),this.cellComp.addOrRemoveCssClass(Ec+"-3",this.rangeCount===3),this.cellComp.addOrRemoveCssClass(Ec+"-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(CY,this.hasChartRange),Fu(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(wY,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},r.prototype.updateRangeBorders=function(){var t=this.getRangeBorders(),e=this.isSingleCell(),i=!e&&t.top,n=!e&&t.right,o=!e&&t.bottom,s=!e&&t.left;this.cellComp.addOrRemoveCssClass(xY,i),this.cellComp.addOrRemoveCssClass(RY,n),this.cellComp.addOrRemoveCssClass(bY,o),this.cellComp.addOrRemoveCssClass(MY,s)},r.prototype.isSingleCell=function(){var t=this.beans.rangeService;return this.rangeCount===1&&t&&!t.isMoreThanOneCell()},r.prototype.getHasChartRange=function(){var t=this.beans.rangeService;if(!this.rangeCount||!t)return!1;var e=t.getCellRanges();return e.length>0&&e.every(function(i){return Xn([ou.DIMENSION,ou.VALUE],i.type)})},r.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},r.prototype.getRangeBorders=function(){var t=this,e=this.beans.gridOptionsWrapper.isEnableRtl(),i=!1,n=!1,o=!1,s=!1,a=this.cellCtrl.getCellPosition().column,l=this.beans,u=l.rangeService,c=l.columnModel,h,d;e?(h=c.getDisplayedColAfter(a),d=c.getDisplayedColBefore(a)):(h=c.getDisplayedColBefore(a),d=c.getDisplayedColAfter(a));var p=u.getCellRanges().filter(function(C){return u.isCellInSpecificRange(t.cellCtrl.getCellPosition(),C)});h||(s=!0),d||(n=!0);for(var f=0;f<p.length&&!(i&&n&&o&&s);f++){var m=p[f],g=u.getRangeStartRow(m),y=u.getRangeEndRow(m);!i&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(i=!0),!o&&this.beans.rowPositionUtils.sameRow(y,this.cellCtrl.getCellPosition())&&(o=!0),!s&&h&&m.columns.indexOf(h)<0&&(s=!0),!n&&d&&m.columns.indexOf(d)<0&&(n=!0)}return{top:i,right:n,bottom:o,left:s}},r.prototype.refreshHandle=function(){if(!!this.beans.rangeService){var t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(EY,!!this.selectionHandle)}},r.prototype.shouldHaveSelectionHandle=function(){var t=this.beans,e=t.gridOptionsWrapper,i=t.rangeService,n=i.getCellRanges(),o=n.length;if(this.rangeCount<1||o<1)return!1;var s=Ue(n),a=this.cellCtrl.getCellPosition(),l=e.isEnableFillHandle()&&!this.cellCtrl.isSuppressFillHandle(),u=e.isEnableRangeHandle(),c=o===1&&!this.cellCtrl.isEditing()&&(l||u);if(this.hasChartRange){var h=n[0].type===ou.DIMENSION,d=h&&i.isCellInSpecificRange(a,n[0]);this.cellComp.addOrRemoveCssClass(SY,d),c=s.type===ou.VALUE}return c&&s.endRow!=null&&i.isContiguousRange(s)&&i.isBottomRightCell(s,a)},r.prototype.addSelectionHandle=function(){var t=this.beans,e=t.gridOptionsWrapper,i=t.rangeService,n=Ue(i.getCellRanges()).type,o=e.isEnableFillHandle()&&kt(n),s=o?qf.FILL:qf.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)},r.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var PY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),OY=function(r){PY(t,r);function t(e,i){var n=r.call(this)||this;return n.cellCtrl=e,n.beans=i,n.column=e.getColumn(),n.rowNode=e.getRowNode(),n.setupColSpan(),n.setupRowSpan(),n}return t.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},t.prototype.setComp=function(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},t.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();Ws(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())},t.prototype.setupColSpan=function(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},t.prototype.onWidthChanged=function(){if(!!this.eGui){var e=this.getCellWidth();this.eGui.style.width=e+"px"}},t.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(e,i){return e+i.getActualWidth()},0):this.column.getActualWidth()},t.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode),i=[];if(e===1)i.push(this.column);else for(var n=this.column,o=this.column.getPinned(),s=0;n&&s<e&&(i.push(n),n=this.beans.columnModel.getDisplayedColAfter(n),!(!n||kt(n)||o!==n.getPinned()));s++);return i},t.prototype.onLeftChanged=function(){if(!!this.eGui){var e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}},t.prototype.getCellLeft=function(){var e;return this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?e=Ue(this.colsSpanning):e=this.column,e.getLeft()},t.prototype.modifyLeftForPrintLayout=function(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()===H.PINNED_LEFT)return e;var i=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()===H.PINNED_RIGHT){var n=this.beans.columnModel.getBodyContainerWidth();return i+n+(e||0)}return i+(e||0)},t.prototype.applyRowSpan=function(){if(this.rowSpan!==1){var e=this.beans.gridOptionsWrapper.getRowHeightAsNumber(),i=e*this.rowSpan;this.eGui.style.height=i+"px",this.eGui.style.zIndex="1"}},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var AY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),DY=function(r){AY(t,r);function t(e,i){var n=r.call(this)||this;return n.staticClasses=[],n.cellCtrl=e,n.beans=i,n.column=e.getColumn(),n.rowNode=e.getRowNode(),n}return t.prototype.setComp=function(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},t.prototype.applyCellClassRules=function(){var e=this,i=this.column.getColDef(),n={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:i,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};this.beans.stylingService.processClassRules(i.cellClassRules,n,function(o){return e.cellComp.addOrRemoveCssClass(o,!0)},function(o){return e.cellComp.addOrRemoveCssClass(o,!1)})},t.prototype.applyUserStyles=function(){var e=this.column.getColDef();if(!!e.cellStyle){var i;if(typeof e.cellStyle=="function"){var n={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()},o=e.cellStyle;i=o(n)}else i=e.cellStyle;this.cellComp.setUserStyles(i)}},t.prototype.applyClassesFromColDef=function(){var e=this,i=this.column.getColDef(),n={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:i,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};this.staticClasses.length&&this.staticClasses.forEach(function(o){return e.cellComp.addOrRemoveCssClass(o,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(i,n),this.staticClasses.length&&this.staticClasses.forEach(function(o){return e.cellComp.addOrRemoveCssClass(o,!0)})},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var LY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),gw=function(r){LY(t,r);function t(e,i){var n=r.call(this)||this;return n.ctrl=e,n.beans=i,n}return t.prototype.setComp=function(e){this.comp=e,this.setupTooltip()},t.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsWrapper.isEnableBrowserTooltips(),this.updateTooltipText(),this.browserTooltips?this.comp.setTitle(this.tooltip!=null?this.tooltip:void 0):this.createTooltipFeatureIfNeeded()},t.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},t.prototype.createTooltipFeatureIfNeeded=function(){var e=this;if(this.genericTooltipFeature==null){var i={getTooltipParams:function(){return e.getTooltipParams()},getGui:function(){return e.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new uw(i),this.beans.context)}},t.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.comp.setTitle(this.tooltip!=null?this.tooltip:void 0)},t.prototype.getTooltipParams=function(){var e=this.ctrl,i=e.getColumn?e.getColumn():void 0,n=e.getColDef?e.getColDef():void 0,o=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:n,column:i,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:o,data:o?o.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0}},t.prototype.getTooltipText=function(){return this.tooltip},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var se=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},EP=function(){function r(){}return r.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail(),this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel),this.gridOptionsWrapper.isRowModelServerSide()&&(this.serverSideRowModel=this.rowModel)},se([b("resizeObserverService")],r.prototype,"resizeObserverService",void 0),se([b("paginationProxy")],r.prototype,"paginationProxy",void 0),se([b("context")],r.prototype,"context",void 0),se([b("columnApi")],r.prototype,"columnApi",void 0),se([b("gridApi")],r.prototype,"gridApi",void 0),se([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),se([b("expressionService")],r.prototype,"expressionService",void 0),se([b("rowRenderer")],r.prototype,"rowRenderer",void 0),se([b("templateService")],r.prototype,"templateService",void 0),se([b("valueService")],r.prototype,"valueService",void 0),se([b("eventService")],r.prototype,"eventService",void 0),se([b("columnModel")],r.prototype,"columnModel",void 0),se([b("headerNavigationService")],r.prototype,"headerNavigationService",void 0),se([b("navigationService")],r.prototype,"navigationService",void 0),se([b("columnAnimationService")],r.prototype,"columnAnimationService",void 0),se([Ae("rangeService")],r.prototype,"rangeService",void 0),se([b("focusService")],r.prototype,"focusService",void 0),se([Ae("contextMenuFactory")],r.prototype,"contextMenuFactory",void 0),se([b("popupService")],r.prototype,"popupService",void 0),se([b("valueFormatterService")],r.prototype,"valueFormatterService",void 0),se([b("stylingService")],r.prototype,"stylingService",void 0),se([b("columnHoverService")],r.prototype,"columnHoverService",void 0),se([b("userComponentFactory")],r.prototype,"userComponentFactory",void 0),se([b("userComponentRegistry")],r.prototype,"userComponentRegistry",void 0),se([b("animationFrameService")],r.prototype,"animationFrameService",void 0),se([b("dragAndDropService")],r.prototype,"dragAndDropService",void 0),se([b("sortController")],r.prototype,"sortController",void 0),se([b("filterManager")],r.prototype,"filterManager",void 0),se([b("rowContainerHeightService")],r.prototype,"rowContainerHeightService",void 0),se([b("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),se([b("cellPositionUtils")],r.prototype,"cellPositionUtils",void 0),se([b("rowPositionUtils")],r.prototype,"rowPositionUtils",void 0),se([b("selectionService")],r.prototype,"selectionService",void 0),se([Ae("selectionHandleFactory")],r.prototype,"selectionHandleFactory",void 0),se([b("rowCssClassCalculator")],r.prototype,"rowCssClassCalculator",void 0),se([b("rowModel")],r.prototype,"rowModel",void 0),se([b("ctrlsService")],r.prototype,"ctrlsService",void 0),se([b("ctrlsFactory")],r.prototype,"ctrlsFactory",void 0),se([b("agStackComponentsRegistry")],r.prototype,"agStackComponentsRegistry",void 0),se([b("valueCache")],r.prototype,"valueCache",void 0),se([b("rowNodeEventThrottle")],r.prototype,"rowNodeEventThrottle",void 0),se([Ct],r.prototype,"postConstruct",null),r=se([Dt("beans")],r),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var IY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),FY=function(r){IY(t,r);function t(e,i,n){var o=r.call(this)||this;return o.cellCtrl=e,o.beans=i,o.column=n,o}return t.prototype.onMouseEvent=function(e,i){if(!vo(i))switch(e){case"click":this.onCellClicked(i);break;case"mousedown":case"touchstart":this.onMouseDown(i);break;case"dblclick":this.onCellDoubleClicked(i);break;case"mouseout":this.onMouseOut(i);break;case"mouseover":this.onMouseOver(i);break}},t.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}var i=this.beans,n=i.eventService,o=i.rangeService,s=i.gridOptionsWrapper,a=e.ctrlKey||e.metaKey;o&&a&&o.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&o.intersectLastRange(!0);var l=this.cellCtrl.createEvent(e,O.EVENT_CELL_CLICKED);n.dispatchEvent(l);var u=this.column.getColDef();u.onCellClicked&&window.setTimeout(function(){return u.onCellClicked(l)},0);var c=(s.isSingleClickEdit()||u.singleClickEdit)&&!s.isSuppressClickEdit();c&&this.cellCtrl.startRowOrCellEdit()},t.prototype.isDoubleClickOnIPad=function(){if(!oa()||VC("dblclick"))return!1;var e=new Date().getTime(),i=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,i},t.prototype.onCellDoubleClicked=function(e){var i=this.column.getColDef(),n=this.cellCtrl.createEvent(e,O.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(n),typeof i.onCellDoubleClicked=="function"&&window.setTimeout(function(){return i.onCellDoubleClicked(n)},0);var o=!this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit();o&&this.cellCtrl.startRowOrCellEdit(null,null,e)},t.prototype.onMouseDown=function(e){var i=e.ctrlKey,n=e.metaKey,o=e.shiftKey,s=e.target,a=this.beans,l=a.eventService,u=a.rangeService;if(!this.isRightClickInExistingRange(e)){var c=u&&u.getCellRanges().length!=0;if(!o||!c){var h=(Ng()||ll())&&!this.cellCtrl.isEditing()&&!$C(s);this.cellCtrl.focusCell(h)}if(o&&c&&e.preventDefault(),!this.containsWidget(s)){if(u){var d=this.cellCtrl.getCellPosition();if(o)u.extendLatestRangeToCell(d);else{var p=i||n;u.setRangeToCell(d,p)}}l.dispatchEvent(this.cellCtrl.createEvent(e,O.EVENT_CELL_MOUSE_DOWN))}}},t.prototype.isRightClickInExistingRange=function(e){var i=this.beans.rangeService;if(i){var n=i.isCellInAnyRange(this.cellCtrl.getCellPosition());if(n&&e.button===2)return!0}return!1},t.prototype.containsWidget=function(e){return Ba(e,"ag-selection-checkbox",3)},t.prototype.onMouseOut=function(e){if(!this.mouseStayingInsideCell(e)){var i=this.cellCtrl.createEvent(e,O.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(i),this.beans.columnHoverService.clearMouseOver()}},t.prototype.onMouseOver=function(e){if(!this.mouseStayingInsideCell(e)){var i=this.cellCtrl.createEvent(e,O.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(i),this.beans.columnHoverService.setMouseOver([this.column])}},t.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var i=this.cellCtrl.getGui(),n=i.contains(e.target),o=i.contains(e.relatedTarget);return n&&o},t.prototype.destroy=function(){},t}(EP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var NY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),GY=function(r){NY(t,r);function t(e,i,n,o,s){var a=r.call(this)||this;return a.cellCtrl=e,a.beans=i,a.rowNode=o,a.rowCtrl=s,a}return t.prototype.setComp=function(e){this.eGui=e},t.prototype.onKeyDown=function(e){var i=e.key;switch(i){case lt.ENTER:this.onEnterKeyDown(e);break;case lt.F2:this.onF2KeyDown(e);break;case lt.ESCAPE:this.onEscapeKeyDown(e);break;case lt.TAB:this.onTabKeyDown(e);break;case lt.BACKSPACE:case lt.DELETE:this.onBackspaceOrDeleteKeyPressed(i,e);break;case lt.DOWN:case lt.UP:case lt.RIGHT:case lt.LEFT:this.onNavigationKeyPressed(e,i);break}},t.prototype.onNavigationKeyPressed=function(e,i){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,i,this.cellCtrl.getCellPosition(),!0),e.preventDefault())},t.prototype.onShiftRangeSelect=function(e){if(!!this.beans.rangeService){var i=this.beans.rangeService.extendLatestRangeInDirection(e);i&&this.beans.navigationService.ensureCellVisible(i)}},t.prototype.onTabKeyDown=function(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)},t.prototype.onBackspaceOrDeleteKeyPressed=function(e,i){var n=this,o=n.cellCtrl,s=n.beans,a=n.rowNode,l=s.gridOptionsWrapper,u=s.rangeService,c=s.eventService;o.isEditing()||(c.dispatchEvent({type:O.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),lP(e,l.isEnableCellEditingOnBackspace())?u&&l.isEnableRangeSelection()?u.clearCellRangeCellValues():o.isCellEditable()&&a.setDataValue(o.getColumn(),null,"cellKeyboardListenerFeature"):o.startRowOrCellEdit(e,void 0,i),c.dispatchEvent({type:O.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},t.prototype.onEnterKeyDown=function(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus():this.beans.gridOptionsWrapper.isEnterMovesDown()?this.beans.navigationService.navigateToNextCell(null,lt.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit(lt.ENTER,void 0,e),this.cellCtrl.isEditing()&&e.preventDefault())},t.prototype.onF2KeyDown=function(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(lt.F2,void 0,e)},t.prototype.onEscapeKeyDown=function(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},t.prototype.onKeyPress=function(e){var i=e.target,n=i!==this.eGui;if(!(n||this.cellCtrl.isEditing())){var o=String.fromCharCode(e.charCode);o===" "?this.onSpaceKeyPressed(e):oP(e)&&(this.cellCtrl.startRowOrCellEdit(null,o,e),e.preventDefault())}},t.prototype.onSpaceKeyPressed=function(e){var i=this.beans.gridOptionsWrapper;if(!this.cellCtrl.isEditing()&&i.isRowSelection()){var n=this.rowNode.isSelected(),o=!n;if(o||!i.isSuppressRowDeselection()){var s=this.beans.gridOptionsWrapper.isGroupSelectsFiltered(),a=this.rowNode.setSelectedParams({newValue:o,rangeSelect:e.shiftKey,groupSelectsFiltered:s});n===void 0&&a===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s})}}e.preventDefault()},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var HY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),WY=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},VY=function(r){HY(t,r);function t(e,i,n,o){var s=r.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return s.rowNode=e,s.column=i,s.beans=n,s.eCell=o,s}return t.prototype.postConstruct=function(){var e=this.getGui();e.appendChild(_i("rowDrag",this.beans.gridOptionsWrapper,null)),this.addGuiEventListener("mousedown",function(i){i.stopPropagation()}),this.addDragSource(),this.checkVisibility()},t.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},t.prototype.onDragStart=function(e){var i=this,n=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);var o=function(){try{var a=JSON.stringify(i.rowNode.data);e.dataTransfer.setData("application/json",a),e.dataTransfer.setData("text/plain",a)}catch{}};if(n){var s={rowNode:this.rowNode,dragEvent:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};n(s)}else o()},t.prototype.checkVisibility=function(){var e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)},WY([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var kY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zf=function(){return Zf=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Zf.apply(this,arguments)},BY="ag-cell",UY="ag-cell-auto-height",zY="ag-cell-normal-height",jY="ag-cell-focus",$Y="ag-cell-first-right-pinned",YY="ag-cell-last-left-pinned",Rx="ag-cell-not-inline-editing",KY="ag-cell-inline-editing",XY="ag-cell-popup-editing",qY="ag-column-hover",ZY="ag-cell-wrap-text",JY=0,za=function(r){kY(t,r);function t(e,i,n,o){var s=r.call(this)||this;return s.suppressRefreshCell=!1,s.onCellCompAttachedFuncs=[],s.column=e,s.rowNode=i,s.beans=n,s.rowCtrl=o,s.instanceId=e.getId()+"-"+JY++,s.createCellPosition(),s.addFeatures(),s}return t.prototype.addFeatures=function(){var e=this;this.cellPositionFeature=new OY(this,this.beans),this.addDestroyFunc(function(){return e.cellPositionFeature.destroy()}),this.cellCustomStyleFeature=new DY(this,this.beans),this.addDestroyFunc(function(){return e.cellCustomStyleFeature.destroy()}),this.cellMouseListenerFeature=new FY(this,this.beans,this.column),this.addDestroyFunc(function(){return e.cellMouseListenerFeature.destroy()}),this.cellKeyboardListenerFeature=new GY(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(function(){return e.cellKeyboardListenerFeature.destroy()});var i=this.beans.rangeService&&this.beans.gridOptionsWrapper.isEnableRangeSelection();i&&(this.cellRangeFeature=new TY(this.beans,this),this.addDestroyFunc(function(){return e.cellRangeFeature.destroy()})),this.addTooltipFeature()},t.prototype.addTooltipFeature=function(){var e=this,i=function(){var o=e.column.getColDef(),s=e.rowNode.data;if(o.tooltipField&&dt(s))return Ff(s,o.tooltipField,e.column.isTooltipFieldContainsDots());var a=o.tooltipValueGetter;return a?a({location:"cell",api:e.beans.gridOptionsWrapper.getApi(),columnApi:e.beans.gridOptionsWrapper.getColumnApi(),context:e.beans.gridOptionsWrapper.getContext(),colDef:e.column.getColDef(),column:e.column,rowIndex:e.cellPosition.rowIndex,node:e.rowNode,data:e.rowNode.data,value:e.value,valueFormatted:e.valueFormatted}):null},n={getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getRowIndex:function(){return e.cellPosition.rowIndex},getRowNode:function(){return e.rowNode},getGui:function(){return e.getGui()},getLocation:function(){return"cell"},getTooltipValue:i,getValueFormatted:function(){return e.valueFormatted}};this.tooltipFeature=new gw(n,this.beans),this.addDestroyFunc(function(){return e.tooltipFeature.destroy()})},t.prototype.setComp=function(e,i,n,o,s){this.cellComp=e,this.gow=this.beans.gridOptionsWrapper,this.eGui=i,this.printLayout=o,this.updateAndFormatValue(!0),this.addDomData(),this.onCellFocused(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),n&&this.setupAutoHeight(n),this.setAriaColIndex(),this.gow.isSuppressCellFocus()||this.cellComp.setTabIndex(-1);var a=wo(this.column.getId());this.cellComp.setColId(a),this.cellComp.setRole("gridcell"),this.cellPositionFeature.setComp(i),this.cellCustomStyleFeature.setComp(e),this.tooltipFeature.setComp(e),this.cellKeyboardListenerFeature.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,i),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(function(l){return l()}),this.onCellCompAttachedFuncs=[])},t.prototype.setupAutoHeight=function(e){var i=this;if(!!this.column.isAutoHeight()){var n=e.parentElement,o=this.beans.gridOptionsWrapper.getRowHeightForNode(this.rowNode).height,s=function(u){if(!i.editing&&!!i.isAlive()){var c=ul(n),h=c.paddingTop,d=c.paddingBottom,p=e.offsetHeight,f=p+h+d;if(u<5){var m=i.beans.gridOptionsWrapper.getDocument(),g=!m||!m.contains(e),y=f==0;if(g||y){i.beans.frameworkOverrides.setTimeout(function(){return s(u+1)},0);return}}var C=Math.max(f,o);i.rowNode.setRowAutoHeight(C,i.column)}},a=function(){return s(0)};a();var l=this.beans.resizeObserverService.observeResize(e,a);this.addDestroyFunc(function(){l(),i.rowNode.setRowAutoHeight(void 0,i.column)})}},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.showValue=function(e){e===void 0&&(e=!1);var i=this.valueFormatted!=null?this.valueFormatted:this.value,n=this.createCellRendererParams(),o=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),n);this.cellComp.setRenderDetails(o,i,e),this.refreshHandle()},t.prototype.setupControlComps=function(){var e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},t.prototype.isForceWrapper=function(){var e=this.beans.gridOptionsWrapper.isEnableCellTextSelection()||this.column.isAutoHeight();return e},t.prototype.isIncludeControl=function(e){var i=this.rowNode.rowPinned!=null,n=typeof e=="function",o=i?!1:n||e===!0;return o},t.prototype.refreshShouldDestroy=function(){var e=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),o=this.includeDndSource!=this.isIncludeControl(e.dndSource);return i||n||o},t.prototype.startEditing=function(e,i,n,o){var s=this;e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),o===void 0&&(o=null);var a,l;if(!(!this.isCellEditable()||this.editing)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(function(){s.startEditing(e,i,n,o)});return}var u=this.createCellEditorParams(e,i,n),c=this.column.getColDef(),h=this.beans.userComponentFactory.getCellEditorDetails(c,u),d=((a=h)===null||a===void 0?void 0:a.popupFromSelector)!=null?h.popupFromSelector:!!c.cellEditorPopup,p=((l=h)===null||l===void 0?void 0:l.popupPositionFromSelector)!=null?h.popupPositionFromSelector:c.cellEditorPopupPosition;this.setEditing(!0,d),this.cellComp.setEditDetails(h,d,p);var f=this.createEvent(o,O.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(f)}},t.prototype.setEditing=function(e,i){i===void 0&&(i=!1),this.editing!==e&&(this.editing=e,this.editingInPopup=i,this.setInlineEditingClass(),this.refreshHandle())},t.prototype.stopRowOrCellEdit=function(e){e===void 0&&(e=!1),this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)},t.prototype.onPopupEditorClosed=function(){!this.isEditing()||this.stopEditingAndFocus()},t.prototype.takeValueFromCellEditor=function(e){var i={newValueExists:!1};if(e)return i;var n=this.cellComp.getCellEditor();if(!n)return i;var o=n.isCancelAfterEnd&&n.isCancelAfterEnd();if(o)return i;var s=n.getValue();return{newValue:s,newValueExists:!0}},t.prototype.saveNewValue=function(e,i){if(i===e)return!1;if(this.beans.gridOptionsWrapper.isReadOnlyEdit())return this.dispatchEventForSaveValueReadOnly(e,i),!1;this.suppressRefreshCell=!0;var n=this.rowNode.setDataValue(this.column,i);return this.suppressRefreshCell=!1,n},t.prototype.dispatchEventForSaveValueReadOnly=function(e,i){var n=this.rowNode,o={type:O.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:this.column,api:this.beans.gridApi,columnApi:this.beans.columnApi,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),data:n.data,node:n,oldValue:e,newValue:i,value:i,source:void 0};this.beans.eventService.dispatchEvent(o)},t.prototype.stopEditing=function(e){if(e===void 0&&(e=!1),!this.editing)return!1;var i=this.takeValueFromCellEditor(e),n=i.newValue,o=i.newValueExists,s=this.getValueFromValueService(),a=!1;return o&&(a=this.saveNewValue(s,n)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(s,n,!e&&!!a),a},t.prototype.dispatchEditingStoppedEvent=function(e,i,n){var o=Zf(Zf({},this.createEvent(null,O.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:i,valueChanged:n});this.beans.eventService.dispatchEvent(o)},t.prototype.setInlineEditingClass=function(){var e=this;if(!!this.isAlive()){if(!this.cellComp){this.onCellCompAttachedFuncs.push(function(){e.setInlineEditingClass()});return}var i=this.editing&&!this.editingInPopup,n=this.editing&&this.editingInPopup;this.cellComp.addOrRemoveCssClass(KY,i),this.cellComp.addOrRemoveCssClass(Rx,!i),this.cellComp.addOrRemoveCssClass(XY,n),this.rowCtrl.setInlineEditingCss(this.editing)}},t.prototype.hackSayEditingInPopup=function(){this.editingInPopup||(this.editingInPopup=!0,this.setInlineEditingClass())},t.prototype.createCellEditorParams=function(e,i,n){var o={value:this.getValueFromValueService(),key:e,eventKey:e,charPress:i,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsWrapper.getApi(),cellStartedEdit:n,columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)};return o},t.prototype.createCellRendererParams=function(){var e=this,i=function(o,s){console.warn("AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided."),e.rowCtrl.addEventListener(o,s)},n={value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValueFromValueService.bind(this),setValue:function(o){return e.beans.valueService.setValue(e.rowNode,e.column,o)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(o,s,a,l){return e.registerRowDragger(o,s,l)},addRowCompListener:i};return n},t.prototype.parseValue=function(e){var i=this.column.getColDef(),n={node:this.rowNode,data:this.rowNode.data,oldValue:this.getValue(),newValue:e,colDef:i,column:this.column,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()},o=i.valueParser;return dt(o)?this.beans.expressionService.evaluate(o,n):e},t.prototype.setFocusOutOnEditor=function(){if(!!this.editing){var e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}},t.prototype.setFocusInOnEditor=function(){if(!!this.editing){var e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}},t.prototype.onCellChanged=function(e){if(!!this.cellComp){var i=e.column===this.column;i&&this.refreshCell({})}},t.prototype.refreshCell=function(e){if(!(this.suppressRefreshCell||this.editing)&&!!this.cellComp){var i=this.column.getColDef(),n=e!=null&&!!e.newData,o=e!=null&&!!e.suppressFlash||!!i.suppressCellFlash,s=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,a=e&&e.forceRefresh||s||n,l=this.updateAndFormatValue(),u=a||l;if(u){this.showValue(n);var c=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering(),h=!o&&!c&&(this.beans.gridOptionsWrapper.isEnableCellChangeFlash()||i.enableCellChangeFlash);h&&this.flashCell(),this.cellCustomStyleFeature.applyUserStyles(),this.cellCustomStyleFeature.applyClassesFromColDef()}this.refreshToolTip(),this.cellCustomStyleFeature.applyCellClassRules()}},t.prototype.stopEditingAndFocus=function(e){e===void 0&&(e=!1),this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit()},t.prototype.navigateAfterEdit=function(){var e=this.beans.gridOptionsWrapper.isFullRowEdit();if(!e){var i=this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit();i&&this.beans.navigationService.navigateToNextCell(null,lt.DOWN,this.getCellPosition(),!1)}},t.prototype.flashCell=function(e){var i=e&&e.flashDelay,n=e&&e.fadeDelay;this.animateCell("data-changed",i,n)},t.prototype.animateCell=function(e,i,n){var o=this,s="ag-cell-"+e,a="ag-cell-"+e+"-animation",l=this.beans.gridOptionsWrapper;i||(i=l.getCellFlashDelay()),dt(n)||(n=l.getCellFadeDelay()),this.cellComp.addOrRemoveCssClass(s,!0),this.cellComp.addOrRemoveCssClass(a,!1),window.setTimeout(function(){!o.isAlive()||(o.cellComp.addOrRemoveCssClass(s,!1),o.cellComp.addOrRemoveCssClass(a,!0),o.eGui.style.transition="background-color "+n+"ms",window.setTimeout(function(){!o.isAlive()||(o.cellComp.addOrRemoveCssClass(a,!1),o.eGui.style.transition="")},n))},i)},t.prototype.onFlashCells=function(e){if(!!this.cellComp){var i=this.beans.cellPositionUtils.createId(this.getCellPosition()),n=e.cells[i];n&&this.animateCell("highlight")}},t.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},t.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},t.prototype.formatValue=function(e){var i=this.callValueFormatter(e);return i!=null?i:e},t.prototype.callValueFormatter=function(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)},t.prototype.updateAndFormatValue=function(e){e===void 0&&(e=!1);var i=this.value,n=this.valueFormatted;this.value=this.getValueFromValueService(),this.valueFormatted=this.callValueFormatter(this.value);var o=e?!0:!this.valuesAreEqual(i,this.value)||this.valueFormatted!=n;return o},t.prototype.valuesAreEqual=function(e,i){var n=this.column.getColDef();return n.equals?n.equals(e,i):e===i},t.prototype.getComp=function(){return this.cellComp},t.prototype.getValueFromValueService=function(){var e=this.rowNode.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!e,n=this.beans.gridOptionsWrapper.isGroupIncludeFooter(),o=this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader(),s=i&&n&&!o,a=this.beans.valueService.getValue(this.column,this.rowNode,!1,s);return a},t.prototype.getValue=function(){return this.value},t.prototype.getValueFormatted=function(){return this.valueFormatted},t.prototype.addDomData=function(){var e=this,i=this.getGui();this.beans.gridOptionsWrapper.setDomData(i,t.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return e.beans.gridOptionsWrapper.setDomData(i,t.DOM_DATA_KEY_CELL_CTRL,null)})},t.prototype.createEvent=function(e,i){var n={type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex};return n},t.prototype.onKeyPress=function(e){this.cellKeyboardListenerFeature.onKeyPress(e)},t.prototype.onKeyDown=function(e){this.cellKeyboardListenerFeature.onKeyDown(e)},t.prototype.onMouseEvent=function(e,i){this.cellMouseListenerFeature.onMouseEvent(e,i)},t.prototype.getGui=function(){return this.eGui},t.prototype.refreshToolTip=function(){this.tooltipFeature.refreshToolTip()},t.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},t.prototype.onLeftChanged=function(){!this.cellComp||this.cellPositionFeature.onLeftChanged()},t.prototype.onDisplayedColumnsChanged=function(){!this.eGui||this.setAriaColIndex()},t.prototype.setAriaColIndex=function(){var e=this.beans.columnModel.getAriaColumnIndex(this.column);sw(this.getGui(),e)},t.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},t.prototype.onWidthChanged=function(){return this.cellPositionFeature.onWidthChanged()},t.prototype.getColumn=function(){return this.column},t.prototype.getRowNode=function(){return this.rowNode},t.prototype.getBeans=function(){return this.beans},t.prototype.isPrintLayout=function(){return this.printLayout},t.prototype.appendChild=function(e){this.eGui.appendChild(e)},t.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},t.prototype.getCellPosition=function(){return this.cellPosition},t.prototype.isEditing=function(){return this.editing},t.prototype.startRowOrCellEdit=function(e,i,n){n===void 0&&(n=null),this.cellComp&&(this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.startRowEditing(e,i,this):this.startEditing(e,i,!0,n))},t.prototype.getRowCtrl=function(){return this.rowCtrl},t.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},t.prototype.updateRangeBordersIfRangeCount=function(){!this.cellComp||this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},t.prototype.onRangeSelectionChanged=function(){!this.cellComp||this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},t.prototype.isRangeSelectionEnabled=function(){return this.cellRangeFeature!=null},t.prototype.focusCell=function(e){e===void 0&&(e=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})},t.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},t.prototype.onFirstRightPinnedChanged=function(){if(!!this.cellComp){var e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass($Y,e)}},t.prototype.onLastLeftPinnedChanged=function(){if(!!this.cellComp){var e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(YY,e)}},t.prototype.onCellFocused=function(e){if(!(!this.cellComp||this.gow.isSuppressCellFocus())){var i=this.beans.focusService.isCellFocused(this.cellPosition);if(this.cellComp.addOrRemoveCssClass(jY,i),i&&e&&e.forceBrowserFocus){var n=this.cellComp.getFocusableElement();n.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}var o=this.beans.gridOptionsWrapper.isFullRowEdit();!i&&!o&&this.editing&&this.stopRowOrCellEdit()}},t.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Ys(this.rowNode.rowPinned),column:this.column}},t.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass(BY,!0),this.cellComp.addOrRemoveCssClass(Rx,!0);var e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(UY,e),this.cellComp.addOrRemoveCssClass(zY,!e)},t.prototype.onColumnHover=function(){if(!!this.cellComp&&!!this.beans.gridOptionsWrapper.isColumnHoverHighlight()){var e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(qY,e)}},t.prototype.onColDefChanged=function(){!this.cellComp||(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},t.prototype.setWrapText=function(){var e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(ZY,e)},t.prototype.dispatchCellContextMenuEvent=function(e){var i=this.column.getColDef(),n=this.createEvent(e,O.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(n),i.onCellContextMenu&&window.setTimeout(function(){return i.onCellContextMenu(n)},0)},t.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},t.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},t.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],r.prototype.destroy.call(this)},t.prototype.createSelectionCheckbox=function(){var e=new yP;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e},t.prototype.createDndSource=function(){var e=new VY(this.rowNode,this.column,this.beans,this.eGui);return this.beans.context.createBean(e),e},t.prototype.registerRowDragger=function(e,i,n){var o=this;if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,i);return}var s=this.createRowDragComp(e,i,n);s&&(this.customRowDragComp=s,this.addDestroyFunc(function(){return o.beans.context.destroyBean(s)}))},t.prototype.createRowDragComp=function(e,i,n){var o=this,s=this.beans.gridOptionsWrapper.isPagination(),a=this.beans.gridOptionsWrapper.isRowDragManaged(),l=this.beans.gridOptionsWrapper.isRowModelDefault();if(a){if(!l){ce(function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")},"CellComp.addRowDragging");return}if(s){ce(function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")},"CellComp.addRowDragging");return}}var u=new Yf(function(){return o.value},this.rowNode,this.column,e,i,n);return this.beans.context.createBean(u),u},t.DOM_DATA_KEY_CELL_CTRL="cellCtrl",t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var QY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),tK=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eK=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},iK=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(eK(arguments[t]));return r},Pn;(function(r){r.Normal="Normal",r.FullWidth="FullWidth",r.FullWidthLoading="FullWidthLoading",r.FullWidthGroup="FullWidthGroup",r.FullWidthDetail="FullWidthDetail"})(Pn||(Pn={}));var nK=0,ja=function(r){QY(t,r);function t(e,i,n,o,s){var a=r.call(this)||this;return a.allRowGuis=[],a.active=!0,a.centerCellCtrls={list:[],map:{}},a.leftCellCtrls={list:[],map:{}},a.rightCellCtrls={list:[],map:{}},a.lastMouseDownOnDragger=!1,a.updateColumnListsPending=!1,a.beans=i,a.rowNode=e,a.paginationPage=a.beans.paginationProxy.getCurrentPage(),a.useAnimationFrameForCreate=o,a.printLayout=s,a.instanceId=e.id+"-"+nK++,a.setAnimateFlags(n),a.rowFocused=a.beans.focusService.isRowFocused(a.rowNode.rowIndex,a.rowNode.rowPinned),a.rowLevel=a.beans.rowCssClassCalculator.calculateRowLevel(a.rowNode),a.setRowType(),a.addListeners(),a}return t.prototype.isSticky=function(){return this.rowNode.sticky},t.prototype.getBeans=function(){return this.beans},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setComp=function(e,i,n){var o={rowComp:e,element:i,containerType:n};this.allRowGuis.push(o),n===Bn.LEFT?this.leftGui=o:n===Bn.RIGHT?this.rightGui=o:n===Bn.FULL_WIDTH?this.fullWidthGui=o:this.centerGui=o;var s=this.leftGui!=null&&this.rightGui!=null&&this.centerGui!=null,a=this.fullWidthGui!=null;(s||a)&&this.initialiseRowComps(),this.rowType!=="FullWidthLoading"&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},t.prototype.isCacheable=function(){return this.rowType===Pn.FullWidthDetail&&this.beans.gridOptionsWrapper.isKeepDetailRows()},t.prototype.setCached=function(e){var i=e?"none":"";this.allRowGuis.forEach(function(n){return n.element.style.display=i})},t.prototype.initialiseRowComps=function(){var e=this,i=this.beans.gridOptionsWrapper;this.onRowHeightChanged(),this.updateRowIndexes(),this.setFocusedClasses(),this.setStylesFromGridOptions(),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(),this.updateColumnLists(!this.useAnimationFrameForCreate),this.slideRowIn&&Ky(this.onTopChanged.bind(this)),this.fadeRowIn&&Ky(function(){e.allRowGuis.forEach(function(a){return a.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})});var n=this.getRowBusinessKey(),o=wo(this.rowNode.id),s=wo(n);this.allRowGuis.forEach(function(a){var l=a.rowComp;l.setRole("row");var u=e.getInitialRowClasses(a.containerType);u.forEach(function(c){return l.addOrRemoveCssClass(c,!0)}),e.rowNode.group&&$n(a.element,e.rowNode.expanded==!0),o!=null&&l.setRowId(o),s!=null&&l.setRowBusinessKey(s),e.isFullWidth()&&!e.beans.gridOptionsWrapper.isSuppressCellFocus()&&l.setTabIndex(-1),i.setDomData(a.element,t.DOM_DATA_KEY_ROW_CTRL,e),e.addDestroyFunc(function(){return i.setDomData(a.element,t.DOM_DATA_KEY_ROW_CTRL,null)}),e.useAnimationFrameForCreate?e.beans.animationFrameService.createTask(e.addHoverFunctionality.bind(e,a.element),e.rowNode.rowIndex,"createTasksP2"):e.addHoverFunctionality(a.element),e.isFullWidth()&&e.setupFullWidth(a),i.isRowDragEntireRow()&&e.addRowDraggerToRow(a),e.useAnimationFrameForCreate&&e.beans.animationFrameService.addDestroyTask(function(){!e.isAlive()||a.rowComp.addOrRemoveCssClass("ag-after-created",!0)})}),this.executeProcessRowPostCreateFunc()},t.prototype.addRowDraggerToRow=function(e){var i=this.beans.gridOptionsWrapper;if(i.isEnableRangeSelection()){ce(function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");return}var n=i.getLocaleTextFunc(),o=new Yf(function(){return"1 "+n("rowDragRow","row")},this.rowNode,void 0,e.element,void 0,!0);this.createManagedBean(o,this.beans.context)},t.prototype.setupFullWidth=function(e){var i=this.getPinnedForContainer(e.containerType),n=this.createFullWidthParams(e.element,i),o=te.isRegistered(qt.MasterDetailModule);if(this.rowType==Pn.FullWidthDetail&&!o){te.isPackageBased()?console.warn("AG Grid: cell renderer 'agDetailCellRenderer' (for master detail) not found. Can only be used with ag-grid-enterprise package."):console.warn("AG Grid: cell renderer 'agDetailCellRenderer' (for master detail) not found. Can only be used with AG Grid Enterprise Module "+qt.MasterDetailModule);return}var s;switch(this.rowType){case Pn.FullWidthDetail:s=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(n);break;case Pn.FullWidthGroup:s=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(n);break;case Pn.FullWidthLoading:s=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(n);break;default:s=this.beans.userComponentFactory.getFullWidthCellRendererDetails(n);break}e.rowComp.showFullWidth(s)},t.prototype.isPrintLayout=function(){return this.printLayout},t.prototype.getCellElement=function(e){var i=this.getCellCtrl(e);return i?i.getGui():null},t.prototype.executeProcessRowPostCreateFunc=function(){var e=this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();if(!!e){var i={eRow:this.centerGui?this.centerGui.element:void 0,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(i)}},t.prototype.setRowType=function(){var e=this.rowNode.stub,i=this.rowNode.isFullWidthCell(),n=this.beans.doingMasterDetail&&this.rowNode.detail,o=this.beans.columnModel.isPivotMode(),s=!!this.rowNode.group&&!this.rowNode.footer,a=s&&this.beans.gridOptionsWrapper.isGroupUseEntireRow(o);e?this.rowType=Pn.FullWidthLoading:n?this.rowType=Pn.FullWidthDetail:i?this.rowType=Pn.FullWidth:a?this.rowType=Pn.FullWidthGroup:this.rowType=Pn.Normal},t.prototype.updateColumnLists=function(e){var i=this;if(e===void 0&&(e=!1),!this.isFullWidth()){var n=e||this.beans.gridOptionsWrapper.isSuppressAnimationFrame()||this.printLayout;if(n){this.updateColumnListsImpl();return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){!i.active||i.updateColumnListsImpl()},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},t.prototype.createCellCtrls=function(e,i,n){var o=this;n===void 0&&(n=null);var s={list:[],map:{}},a=function(l,u){s.list.push(u),s.map[l]=u};return i.forEach(function(l){var u=l.getInstanceId(),c=e.map[u];c||(c=new za(l,o.rowNode,o.beans,o)),a(u,c)}),e.list.forEach(function(l){var u=s.map[l.getColumn().getInstanceId()]!=null;if(!u){var c=!o.isCellEligibleToBeRemoved(l,n);if(c){a(l.getColumn().getInstanceId(),l);return}l.destroy()}}),s},t.prototype.updateColumnListsImpl=function(){var e=this;this.updateColumnListsPending=!1;var i=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var n=i.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);var o=i.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,o,H.PINNED_LEFT);var s=i.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,H.PINNED_RIGHT)}this.allRowGuis.forEach(function(a){var l=a.containerType===Bn.LEFT?e.leftCellCtrls:a.containerType===Bn.RIGHT?e.rightCellCtrls:e.centerCellCtrls;a.rowComp.setCellCtrls(l.list)})},t.prototype.isCellEligibleToBeRemoved=function(e,i){var n=!0,o=!1,s=e.getColumn();if(s.getPinned()!=i)return n;var a=e.isEditing(),l=this.beans.focusService.isCellFocused(e.getCellPosition()),u=a||l;if(u){var c=e.getColumn(),h=this.beans.columnModel.getAllDisplayedColumns(),d=h.indexOf(c)>=0;return d?o:n}return n},t.prototype.setAnimateFlags=function(e){if(!this.isSticky()&&e){var i=dt(this.rowNode.oldRowTop);this.slideRowIn=i,this.fadeRowIn=!i}else this.slideRowIn=!1,this.fadeRowIn=!1},t.prototype.isEditing=function(){return this.editingRow},t.prototype.stopRowEditing=function(e){this.stopEditing(e)},t.prototype.isFullWidth=function(){return this.rowType!==Pn.Normal},t.prototype.getRowType=function(){return this.rowType},t.prototype.refreshFullWidth=function(){var e=this,i=function(u,c){if(!u)return!0;var h=u.rowComp.getFullWidthCellRenderer();if(!h||!h.refresh)return!1;var d=e.createFullWidthParams(u.element,c),p=h.refresh(d);return p},n=i(this.fullWidthGui,null),o=i(this.centerGui,null),s=i(this.leftGui,H.PINNED_LEFT),a=i(this.rightGui,H.PINNED_RIGHT),l=n&&o&&s&&a;return l},t.prototype.addListeners=function(){this.addManagedListener(this.rowNode,ue.EVENT_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_ROW_SELECTED,this.onRowSelected.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,ue.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var e=this.beans.eventService;this.addManagedListener(e,O.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,O.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,O.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,O.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,O.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,O.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,O.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(e,O.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},t.prototype.onColumnMoved=function(){this.updateColumnLists()},t.prototype.addListenersForCellComps=function(){var e=this;this.addManagedListener(this.rowNode,ue.EVENT_ROW_INDEX_CHANGED,function(){e.getAllCellCtrls().forEach(function(i){return i.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,ue.EVENT_CELL_CHANGED,function(i){e.getAllCellCtrls().forEach(function(n){return n.onCellChanged(i)})})},t.prototype.onRowNodeDataChanged=function(e){this.getAllCellCtrls().forEach(function(i){return i.refreshCell({suppressFlash:!e.update,newData:!e.update})}),this.onRowSelected(),this.postProcessCss()},t.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},t.prototype.postProcessCss=function(){this.setStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},t.prototype.onRowNodeHighlightChanged=function(){var e=this.rowNode.highlighted;this.allRowGuis.forEach(function(i){var n=e===Jo.Above,o=e===Jo.Below;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",o)})},t.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},t.prototype.postProcessRowDragging=function(){var e=this.rowNode.dragging;this.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass("ag-row-dragging",e)})},t.prototype.updateExpandedCss=function(){var e=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(function(n){n.rowComp.addOrRemoveCssClass("ag-row-group",e),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&i),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!i),$n(n.element,e&&i)})},t.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},t.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists()},t.prototype.getRowPosition=function(){return{rowPinned:Ys(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},t.prototype.onKeyboardNavigate=function(e){var i=this.allRowGuis.find(function(u){return u.element.contains(e.target)}),n=i?i.element:null,o=n===e.target;if(!!o){var s=this.rowNode,a=this.beans.focusService.getFocusedCell(),l={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:a&&a.column};this.beans.navigationService.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}},t.prototype.onTabKeyDown=function(e){if(!(e.defaultPrevented||vo(e))){var i=this.allRowGuis.find(function(a){return a.element.contains(e.target)}),n=i?i.element:null,o=n===e.target,s=null;o||(s=this.beans.focusService.findNextFocusableElement(n,!1,e.shiftKey)),(this.isFullWidth()&&o||!s)&&this.beans.navigationService.onTabKeyDown(this,e)}},t.prototype.onFullWidthRowFocused=function(e){var i,n=this.rowNode,o=this.isFullWidth()&&e.rowIndex===n.rowIndex&&e.rowPinned==n.rowPinned,s=this.fullWidthGui?this.fullWidthGui.element:(i=this.centerGui)===null||i===void 0?void 0:i.element;!s||(s.classList.toggle("ag-full-width-focus",o),o&&s.focus({preventScroll:!0}))},t.prototype.refreshCell=function(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()},t.prototype.removeCellCtrl=function(e,i){var n={list:[],map:{}};return e.list.forEach(function(o){o!==i&&(n.list.push(o),n.map[o.getInstanceId()]=o)}),n},t.prototype.onMouseEvent=function(e,i){switch(e){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}},t.prototype.createRowEvent=function(e,i){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),event:i}},t.prototype.createRowEventWithSource=function(e,i){var n=this.createRowEvent(e,i);return n.source=this,n},t.prototype.onRowDblClick=function(e){if(!vo(e)){var i=this.createRowEventWithSource(O.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(i)}},t.prototype.onRowMouseDown=function(e){if(this.lastMouseDownOnDragger=Ba(e.target,"ag-row-drag",3),!!this.isFullWidth()){var i=this.rowNode,n=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:n.getAllDisplayedColumns()[0],rowPinned:i.rowPinned,forceBrowserFocus:!0})}},t.prototype.onRowClick=function(e){var i=vo(e)||this.lastMouseDownOnDragger;if(!i){var n=this.createRowEventWithSource(O.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(n);var o=e.ctrlKey||e.metaKey,s=e.shiftKey,a=this.beans.gridOptionsWrapper.isGroupSelectsChildren();if(!(a&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.beans.gridOptionsWrapper.isRowSelection()||this.beans.gridOptionsWrapper.isSuppressRowClickSelection())){var l=this.beans.gridOptionsWrapper.isRowMultiSelectWithClick(),u=!this.beans.gridOptionsWrapper.isSuppressRowDeselection();if(this.rowNode.isSelected())l?this.rowNode.setSelectedParams({newValue:!1,event:e}):o?u&&this.rowNode.setSelectedParams({newValue:!1,event:e}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e});else{var c=l?!1:!o;this.rowNode.setSelectedParams({newValue:!0,clearSelection:c,rangeSelect:s,event:e})}}}},t.prototype.setupDetailRowAutoHeight=function(e){var i=this;if(this.rowType===Pn.FullWidthDetail&&!!this.beans.gridOptionsWrapper.isDetailRowAutoHeight()){var n=function(){var s=e.clientHeight;if(s!=null&&s>0){var a=function(){i.rowNode.setRowHeight(s),i.beans.clientSideRowModel?i.beans.clientSideRowModel.onRowHeightChanged():i.beans.serverSideRowModel&&i.beans.serverSideRowModel.onRowHeightChanged()};i.beans.frameworkOverrides.setTimeout(a,0)}},o=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(o),n()}},t.prototype.createFullWidthParams=function(e,i){var n=this,o={fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),eGridCell:e,eParentOfValue:e,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(s,a,l,u){return n.addFullWidthRowDragging(s,a,l,u)}};return o},t.prototype.addFullWidthRowDragging=function(e,i,n,o){if(n===void 0&&(n=""),!!this.isFullWidth()){var s=new Yf(function(){return n},this.rowNode,void 0,e,i,o);this.createManagedBean(s,this.beans.context)}},t.prototype.onUiLevelChanged=function(){var e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){var i="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(o){o.rowComp.addOrRemoveCssClass(i,!0),o.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=e},t.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},t.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},t.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},t.prototype.refreshFirstAndLastRowStyles=function(){var e=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-first",e)})),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-last",i)}))},t.prototype.stopEditing=function(e){var i,n;if(e===void 0&&(e=!1),!this.stoppingRowEdit){var o=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;var a=!1;try{for(var l=tK(o),u=l.next();!u.done;u=l.next()){var c=u.value,h=c.stopEditing(e);s&&!e&&!a&&h&&(a=!0)}}catch(p){i={error:p}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}if(a){var d=this.createRowEvent(O.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(d)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},t.prototype.setInlineEditingCss=function(e){this.allRowGuis.forEach(function(i){i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})},t.prototype.setEditingRow=function(e){this.editingRow=e,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-editing",e)});var i=e?this.createRowEvent(O.EVENT_ROW_EDITING_STARTED):this.createRowEvent(O.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(i)},t.prototype.startRowEditing=function(e,i,n,o){if(e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=null),o===void 0&&(o=null),!this.editingRow){var s=this.getAllCellCtrls().reduce(function(a,l){var u=l===n;return u?l.startEditing(e,i,u,o):l.startEditing(null,null,u,o),a?!0:l.isEditing()},!1);s&&this.setEditingRow(!0)}},t.prototype.getAllCellCtrls=function(){var e=iK(this.centerCellCtrls.list,this.leftCellCtrls.list,this.rightCellCtrls.list);return e},t.prototype.postProcessClassesFromGridOptions=function(){var e=this,i=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!i||!i.length||i.forEach(function(n){e.allRowGuis.forEach(function(o){return o.rowComp.addOrRemoveCssClass(n,!0)})})},t.prototype.postProcessRowClassRules=function(){var e=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,function(i){e.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass(i,!0)})},function(i){e.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass(i,!1)})})},t.prototype.setStylesFromGridOptions=function(){var e=this.processStylesFromGridOptions();this.allRowGuis.forEach(function(i){return i.rowComp.setUserStyles(e)})},t.prototype.getRowBusinessKey=function(){var e=this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();if(typeof e=="function")return e(this.rowNode)},t.prototype.getPinnedForContainer=function(e){var i=e===Bn.LEFT?H.PINNED_LEFT:e===Bn.RIGHT?H.PINNED_RIGHT:null;return i},t.prototype.getInitialRowClasses=function(e){var i=this.getPinnedForContainer(e),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeRowIn,rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)},t.prototype.processStylesFromGridOptions=function(){var e=this.beans.gridOptionsWrapper.getRowStyle();if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}var i=this.beans.gridOptionsWrapper.getRowStyleFunc(),n;if(i){var o={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};n=i(o)}return Object.assign({},e,n)},t.prototype.onRowSelected=function(){var e=this,i=!!this.rowNode.isSelected();this.allRowGuis.forEach(function(n){n.rowComp.addOrRemoveCssClass("ag-row-selected",i),Fu(n.element,i?!0:void 0);var o=e.createAriaLabel();cl(n.element,o==null?"":o)})},t.prototype.createAriaLabel=function(){var e=this.rowNode.isSelected();if(!(e&&this.beans.gridOptionsWrapper.isSuppressRowDeselection())){var i=this.beans.gridOptionsWrapper.getLocaleTextFunc(),n=i(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(e?"deselect":"select")+" this row.");return n}},t.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},t.prototype.addHoverFunctionality=function(e){var i=this;!this.active||(this.addManagedListener(e,"mouseenter",function(){return i.rowNode.onMouseEnter()}),this.addManagedListener(e,"mouseleave",function(){return i.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,ue.EVENT_MOUSE_ENTER,function(){i.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()||e.classList.add("ag-row-hover")}),this.addManagedListener(this.rowNode,ue.EVENT_MOUSE_LEAVE,function(){e.classList.remove("ag-row-hover")}))},t.prototype.roundRowTopToBounds=function(e){var i=this.beans.ctrlsService.getGridBodyCtrl(),n=i.getScrollFeature().getVScrollPosition(),o=this.applyPaginationOffset(n.top,!0)-100,s=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(o,e),s)},t.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},t.prototype.onRowHeightChanged=function(){if(this.rowNode.rowHeight!=null){var e=this.rowNode.rowHeight,i=this.beans.gridOptionsWrapper.getDefaultRowHeight(),n=this.beans.gridOptionsWrapper.isGetRowHeightFunction(),o=n?this.beans.gridOptionsWrapper.getRowHeightForNode(this.rowNode).height:void 0,s=o?Math.min(i,o)-2+"px":void 0;this.allRowGuis.forEach(function(a){a.element.style.height=e+"px",s&&a.element.style.setProperty("--ag-line-height",s)})}},t.prototype.addEventListener=function(e,i){(e==="renderedRowRemoved"||e==="rowRemoved")&&(e=O.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved is now called "+O.EVENT_VIRTUAL_ROW_REMOVED)),r.prototype.addEventListener.call(this,e,i)},t.prototype.removeEventListener=function(e,i){(e==="renderedRowRemoved"||e==="rowRemoved")&&(e=O.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called "+O.EVENT_VIRTUAL_ROW_REMOVED)),r.prototype.removeEventListener.call(this,e,i)},t.prototype.destroyFirstPass=function(){this.active=!1,this.setupRemoveAnimation();var e=this.createRowEvent(O.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),r.prototype.destroy.call(this)},t.prototype.setupRemoveAnimation=function(){if(!this.isSticky()){var e=this.rowNode.rowTop!=null;if(e){var i=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(i)}else this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})}},t.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var e=function(i){return i.list.forEach(function(n){return n.destroy()}),{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)},t.prototype.setFocusedClasses=function(){var e=this;this.allRowGuis.forEach(function(i){i.rowComp.addOrRemoveCssClass("ag-row-focus",e.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!e.rowFocused)})},t.prototype.onCellFocusChanged=function(){var e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)},t.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},t.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},t.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},t.prototype.applyPaginationOffset=function(e,i){if(i===void 0&&(i=!1),this.rowNode.isRowPinned())return e;var n=this.beans.paginationProxy.getPixelOffset(),o=i?1:-1;return e+n*o},t.prototype.setRowTop=function(e){if(!this.printLayout&&dt(e)){var i=this.applyPaginationOffset(e),n=this.rowNode.isRowPinned()?i:this.beans.rowContainerHeightService.getRealPixelPosition(i),o=n+"px";this.setRowTopStyle(o)}},t.prototype.getInitialRowTop=function(){var e=this.beans.gridOptionsWrapper.isSuppressRowTransform();return e?this.getInitialRowTopShared():void 0},t.prototype.getInitialTransform=function(){var e=this.beans.gridOptionsWrapper.isSuppressRowTransform();return e?void 0:"translateY("+this.getInitialRowTopShared()+")"},t.prototype.getInitialRowTopShared=function(){if(this.printLayout)return"";var e;if(this.isSticky())e=this.rowNode.stickyRowTop;else{var i=this.slideRowIn?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,n=this.applyPaginationOffset(i);e=this.rowNode.isRowPinned()?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}return e+"px"},t.prototype.setRowTopStyle=function(e){var i=this.beans.gridOptionsWrapper.isSuppressRowTransform();this.allRowGuis.forEach(function(n){return i?n.rowComp.setTop(e):n.rowComp.setTransform("translateY("+e+")")})},t.prototype.getRowNode=function(){return this.rowNode},t.prototype.getCellCtrl=function(e){var i=null;return this.getAllCellCtrls().forEach(function(n){n.getColumn()==e&&(i=n)}),i!=null||this.getAllCellCtrls().forEach(function(n){n.getColSpanningList().indexOf(e)>=0&&(i=n)}),i},t.prototype.onRowIndexChanged=function(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},t.prototype.updateRowIndexes=function(){var e=this.rowNode.getRowIndexString(),i=this.beans.headerNavigationService.getHeaderRowCount(),n=this.rowNode.rowIndex%2===0,o=i+this.rowNode.rowIndex+1;this.allRowGuis.forEach(function(s){s.rowComp.setRowIndex(e),s.rowComp.addOrRemoveCssClass("ag-row-even",n),s.rowComp.addOrRemoveCssClass("ag-row-odd",!n),ow(s.element,o)})},t.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},t.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},t.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},t.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},t.DOM_DATA_KEY_ROW_CTRL="renderedRow",t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var rK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),kn=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},oK=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},sK=function(r){rK(t,r);function t(e){var i=r.call(this)||this;return i.element=e,i}return t.prototype.postConstruct=function(){this.addMouseListeners(),this.mockContextMenuForIPad(),this.addKeyboardEvents()},t.prototype.addKeyboardEvents=function(){var e=this,i=["keydown","keypress"];i.forEach(function(n){var o=e.processKeyboardEvent.bind(e,n);e.addManagedListener(e.element,n,o)})},t.prototype.addMouseListeners=function(){var e=this,i=VC("touchstart")?"touchstart":"mousedown",n=["dblclick","contextmenu","mouseover","mouseout","click",i];n.forEach(function(o){var s=e.processMouseEvent.bind(e,o);e.addManagedListener(e.element,o,s)})},t.prototype.processMouseEvent=function(e,i){if(!(!this.mouseEventService.isEventFromThisGrid(i)||vo(i))){var n=this.getRowForEvent(i),o=this.mouseEventService.getRenderedCellForEvent(i);e==="contextmenu"?this.handleContextMenuMouseEvent(i,null,n,o):(o&&o.onMouseEvent(e,i),n&&n.onMouseEvent(e,i))}},t.prototype.mockContextMenuForIPad=function(){var e=this;if(!!oa()){var i=new Yn(this.element),n=function(o){var s=e.getRowForEvent(o.touchEvent),a=e.mouseEventService.getRenderedCellForEvent(o.touchEvent);e.handleContextMenuMouseEvent(null,o.touchEvent,s,a)};this.addManagedListener(i,Yn.EVENT_LONG_TAP,n),this.addDestroyFunc(function(){return i.destroy()})}},t.prototype.getRowForEvent=function(e){for(var i=e.target;i;){var n=this.gridOptionsWrapper.getDomData(i,ja.DOM_DATA_KEY_ROW_CTRL);if(n)return n;i=i.parentElement}return null},t.prototype.handleContextMenuMouseEvent=function(e,i,n,o){var s=n?n.getRowNode():null,a=o?o.getColumn():null,l=null;if(a){var u=e||i;o.dispatchCellContextMenuEvent(u),l=this.valueService.getValue(a,s)}var c=this.ctrlsService.getGridBodyCtrl(),h=o?o.getGui():c.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,i,s,a,l,h)},t.prototype.processKeyboardEvent=function(e,i){var n=Gf(this.gridOptionsWrapper,i,za.DOM_DATA_KEY_CELL_CTRL),o=Gf(this.gridOptionsWrapper,i,ja.DOM_DATA_KEY_ROW_CTRL);i.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,i):o&&o.isFullWidth()&&this.processFullWidthRowKeyboardEvent(o,e,i))},t.prototype.processCellKeyboardEvent=function(e,i,n){var o=e.getRowNode(),s=e.getColumn(),a=e.isEditing(),l=!Uf(this.gridOptionsWrapper,n,o,s,a);if(l)switch(i){case"keydown":var u=!a&&this.navigationService.handlePageScrollingKey(n);u||e.onKeyDown(n),this.doGridOperations(n,e.isEditing());break;case"keypress":e.onKeyPress(n);break}if(i==="keydown"){var c=e.createEvent(n,O.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(c)}if(i==="keypress"){var h=e.createEvent(n,O.EVENT_CELL_KEY_PRESS);this.eventService.dispatchEvent(h)}},t.prototype.processFullWidthRowKeyboardEvent=function(e,i,n){var o=e.getRowNode(),s=this.focusService.getFocusedCell(),a=s&&s.column,l=!Uf(this.gridOptionsWrapper,n,o,a,!1);if(l){var u=n.key;if(i==="keydown")switch(u){case lt.UP:case lt.DOWN:e.onKeyboardNavigate(n);break;case lt.TAB:e.onTabKeyDown(n)}}if(i==="keydown"){var c=e.createRowEvent(O.EVENT_CELL_KEY_DOWN,n);this.eventService.dispatchEvent(c)}if(i==="keypress"){var h=e.createRowEvent(O.EVENT_CELL_KEY_PRESS,n);this.eventService.dispatchEvent(h)}},t.prototype.doGridOperations=function(e,i){if(!(!e.ctrlKey&&!e.metaKey)&&!i&&!!this.mouseEventService.isEventFromThisGrid(e)){var n=aP(e);if(n===lt.A)return this.onCtrlAndA(e);if(n===lt.C)return this.onCtrlAndC(e);if(n===lt.V)return this.onCtrlAndV();if(n===lt.D)return this.onCtrlAndD(e);if(n===lt.Z)return this.onCtrlAndZ(e);if(n===lt.Y)return this.onCtrlAndY()}},t.prototype.onCtrlAndA=function(e){var i=this,n=i.pinnedRowModel,o=i.paginationProxy,s=i.rangeService,a=H.PINNED_BOTTOM,l=H.PINNED_TOP;if(s&&o.isRowsToRender()){var u=oK([n.isEmpty(l),n.isEmpty(a)],2),c=u[0],h=u[1],d=c?null:l,p=void 0,f=void 0;h?(p=null,f=this.paginationProxy.getRowCount()-1):(p=a,f=n.getPinnedBottomRowData().length-1);var m=this.columnModel.getAllDisplayedColumns();if(Un(m))return;s.setCellRange({rowStartIndex:0,rowStartPinned:d,rowEndIndex:f,rowEndPinned:p,columnStart:m[0],columnEnd:Ue(m)})}e.preventDefault()},t.prototype.onCtrlAndC=function(e){!this.clipboardService||this.gridOptionsWrapper.isEnableCellTextSelection()||(this.clipboardService.copyToClipboard(),e.preventDefault())},t.prototype.onCtrlAndV=function(){te.isRegistered(qt.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.pasteFromClipboard()},t.prototype.onCtrlAndD=function(e){te.isRegistered(qt.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.copyRangeDown(),e.preventDefault()},t.prototype.onCtrlAndZ=function(e){!this.gridOptionsWrapper.isUndoRedoCellEditing()||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo():this.undoRedoService.undo())},t.prototype.onCtrlAndY=function(){this.undoRedoService.redo()},kn([b("mouseEventService")],t.prototype,"mouseEventService",void 0),kn([b("valueService")],t.prototype,"valueService",void 0),kn([Ae("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),kn([b("ctrlsService")],t.prototype,"ctrlsService",void 0),kn([b("navigationService")],t.prototype,"navigationService",void 0),kn([b("focusService")],t.prototype,"focusService",void 0),kn([b("undoRedoService")],t.prototype,"undoRedoService",void 0),kn([b("columnModel")],t.prototype,"columnModel",void 0),kn([b("paginationProxy")],t.prototype,"paginationProxy",void 0),kn([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),kn([Ae("rangeService")],t.prototype,"rangeService",void 0),kn([Ae("clipboardService")],t.prototype,"clipboardService",void 0),kn([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var aK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),gp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},lK=function(r){aK(t,r);function t(e){var i=r.call(this)||this;return i.centerContainerCtrl=e,i}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.listenForResize()}),this.addManagedListener(this.eventService,O.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},t.prototype.listenForResize=function(){var e=this,i=function(){return e.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(i),this.gridBodyCtrl.registerBodyViewportResizeListener(i)},t.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},t.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();var e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},t.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},t.prototype.getBodyHeight=function(){return this.bodyHeight},t.prototype.checkBodyHeight=function(){var e=this.gridBodyCtrl.getBodyViewportElement(),i=rd(e);if(this.bodyHeight!==i){this.bodyHeight=i;var n={type:O.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(n)}},t.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},t.prototype.updateScrollVisibleServiceImpl=function(){var e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e),this.gridBodyCtrl.setVerticalScrollPaddingVisible(e.verticalScrollShowing)},t.prototype.isHorizontalScrollShowing=function(){var e=this.gridOptionsWrapper.isAlwaysShowHorizontalScroll();return e||this.centerContainerCtrl.isViewportHScrollShowing()},t.prototype.onHorizontalViewportChanged=function(){var e=this.centerContainerCtrl.getCenterWidth(),i=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,i)},gp([b("ctrlsService")],t.prototype,"ctrlsService",void 0),gp([b("columnModel")],t.prototype,"columnModel",void 0),gp([b("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),gp([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var uK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),bx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},cK=function(r){uK(t,r);function t(e){var i=r.call(this)||this;return i.element=e,i}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,O.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},t.prototype.onPinnedLeftWidthChanged=function(){var e=this.pinnedWidthService.getPinnedLeftWidth(),i=e>0;Ke(this.element,i),i&&So(this.element,e)},bx([b("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),bx([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dK=function(r){hK(t,r);function t(e){var i=r.call(this)||this;return i.element=e,i}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,O.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},t.prototype.onPinnedRightWidthChanged=function(){var e=this.pinnedWidthService.getPinnedRightWidth(),i=e>0;Ke(this.element,i),i&&So(this.element,e)},Mx([b("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),Mx([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},fK=function(r){pK(t,r);function t(e,i){var n=r.call(this)||this;return n.eContainer=e,n.eWrapper=i,n}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,O.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},t.prototype.onHeightChanged=function(){var e=this.maxDivHeightScaler.getUiContainerHeight(),i=e!=null?e+"px":"";this.eContainer.style.height=i,this.eWrapper&&(this.eWrapper.style.height=i)},Tx([b("rowContainerHeightService")],t.prototype,"maxDivHeightScaler",void 0),Tx([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var gK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},mK=function(r){gK(t,r);function t(e){var i=r.call(this)||this;return i.eContainer=e,i}return t.prototype.postConstruct=function(){var e=this;if(!(!this.gridOptionsWrapper.isEnableRangeSelection()||kt(this.rangeService))){var i={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(i),this.addDestroyFunc(function(){return e.dragService.removeDragSource(i)})}},Rv([Ae("rangeService")],t.prototype,"rangeService",void 0),Rv([b("dragService")],t.prototype,"dragService",void 0),Rv([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var vK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Px=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},mw=function(r){vK(t,r);function t(e){var i=r.call(this)||this;return i.callback=e,i}return t.prototype.postConstruct=function(){var e=this.setWidth.bind(this);this.addManagedListener(this.gridOptionsWrapper,Et.PROP_DOM_LAYOUT,e),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.setWidth()},t.prototype.setWidth=function(){var e=this.columnModel,i=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_PRINT,n=e.getBodyContainerWidth(),o=e.getDisplayedColumnsLeftWidth(),s=e.getDisplayedColumnsRightWidth(),a=i?n+o+s:n;this.callback(a)},Px([b("columnModel")],t.prototype,"columnModel",void 0),Px([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),va=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},_K=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},CK=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(_K(arguments[t]));return r},nt;(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r.TOP_LEFT="topLeft",r.TOP_RIGHT="topRight",r.TOP_CENTER="topCenter",r.TOP_FULL_WIDTH="topFullWidth",r.STICKY_TOP_LEFT="stickyTopLeft",r.STICKY_TOP_RIGHT="stickyTopRight",r.STICKY_TOP_CENTER="stickyTopCenter",r.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",r.BOTTOM_LEFT="bottomLeft",r.BOTTOM_RIGHT="bottomRight",r.BOTTOM_CENTER="bottomCenter",r.BOTTOM_FULL_WIDTH="bottomFullWidth"})(nt||(nt={}));var Bn;(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth"})(Bn||(Bn={}));function wK(r){switch(r){case nt.CENTER:case nt.TOP_CENTER:case nt.STICKY_TOP_CENTER:case nt.BOTTOM_CENTER:return Bn.CENTER;case nt.LEFT:case nt.TOP_LEFT:case nt.STICKY_TOP_LEFT:case nt.BOTTOM_LEFT:return Bn.LEFT;case nt.RIGHT:case nt.TOP_RIGHT:case nt.STICKY_TOP_RIGHT:case nt.BOTTOM_RIGHT:return Bn.RIGHT;case nt.FULL_WIDTH:case nt.TOP_FULL_WIDTH:case nt.STICKY_TOP_FULL_WIDTH:case nt.BOTTOM_FULL_WIDTH:return Bn.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}var SK=jo([[nt.CENTER,"ag-center-cols-container"],[nt.LEFT,"ag-pinned-left-cols-container"],[nt.RIGHT,"ag-pinned-right-cols-container"],[nt.FULL_WIDTH,"ag-full-width-container"],[nt.TOP_CENTER,"ag-floating-top-container"],[nt.TOP_LEFT,"ag-pinned-left-floating-top"],[nt.TOP_RIGHT,"ag-pinned-right-floating-top"],[nt.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[nt.STICKY_TOP_CENTER,"ag-sticky-top-container"],[nt.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[nt.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[nt.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[nt.BOTTOM_CENTER,"ag-floating-bottom-container"],[nt.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[nt.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[nt.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),EK=jo([[nt.CENTER,"ag-center-cols-viewport"],[nt.TOP_CENTER,"ag-floating-top-viewport"],[nt.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[nt.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),xK=jo([[nt.CENTER,"ag-center-cols-clipper"]]),f_=function(r){yK(t,r);function t(e){var i=r.call(this)||this;return i.name=e,i}return t.getRowContainerCssClasses=function(e){var i=SK.get(e),n=EK.get(e),o=xK.get(e);return{container:i,viewport:n,wrapper:o}},t.getPinned=function(e){switch(e){case nt.BOTTOM_LEFT:case nt.TOP_LEFT:case nt.STICKY_TOP_LEFT:case nt.LEFT:return H.PINNED_LEFT;case nt.BOTTOM_RIGHT:case nt.TOP_RIGHT:case nt.STICKY_TOP_RIGHT:case nt.RIGHT:return H.PINNED_RIGHT;default:return null}},t.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.embedFullWidthRows=this.gridOptionsWrapper.isEmbedFullWidthRows(),this.forContainers([nt.CENTER],function(){return e.viewportSizeFeature=e.createManagedBean(new lK(e))})},t.prototype.registerWithCtrlsService=function(){switch(this.name){case nt.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case nt.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case nt.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case nt.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case nt.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case nt.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case nt.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case nt.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case nt.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case nt.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case nt.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case nt.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}},t.prototype.forContainers=function(e,i){e.indexOf(this.name)>=0&&i()},t.prototype.getContainerElement=function(){return this.eContainer},t.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},t.prototype.setComp=function(e,i,n,o){var s=this;this.comp=e,this.eContainer=i,this.eViewport=n,this.eWrapper=o,this.createManagedBean(new sK(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var a=[nt.TOP_CENTER,nt.TOP_LEFT,nt.TOP_RIGHT],l=[nt.STICKY_TOP_CENTER,nt.STICKY_TOP_LEFT,nt.STICKY_TOP_RIGHT],u=[nt.BOTTOM_CENTER,nt.BOTTOM_LEFT,nt.BOTTOM_RIGHT],c=[nt.CENTER,nt.LEFT,nt.RIGHT],h=CK(a,u,c,l),d=[nt.CENTER,nt.LEFT,nt.RIGHT,nt.FULL_WIDTH],p=[nt.CENTER,nt.TOP_CENTER,nt.STICKY_TOP_CENTER,nt.BOTTOM_CENTER],f=[nt.LEFT,nt.BOTTOM_LEFT,nt.TOP_LEFT,nt.STICKY_TOP_LEFT],m=[nt.RIGHT,nt.BOTTOM_RIGHT,nt.TOP_RIGHT,nt.STICKY_TOP_RIGHT];this.forContainers(f,function(){return s.createManagedBean(new cK(s.eContainer))}),this.forContainers(m,function(){return s.createManagedBean(new dK(s.eContainer))}),this.forContainers(d,function(){return s.createManagedBean(new fK(s.eContainer,s.eWrapper))}),this.forContainers(h,function(){return s.createManagedBean(new mK(s.eContainer))}),this.forContainers(p,function(){return s.createManagedBean(new mw(function(g){return s.comp.setContainerWidth(g+"px")}))}),this.addListeners(),this.registerWithCtrlsService()},t.prototype.addListeners=function(){var e=this;this.addManagedListener(this.eventService,O.EVENT_SCROLL_VISIBILITY_CHANGED,function(){return e.onScrollVisibilityChanged()}),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return e.onDisplayedColumnsChanged()}),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){return e.onDisplayedColumnsWidthChanged()}),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_ROWS_CHANGED,function(){return e.onDisplayedRowsChanged()}),this.onScrollVisibilityChanged(),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},t.prototype.listenOnDomOrder=function(){var e=this,i=[nt.STICKY_TOP_CENTER,nt.STICKY_TOP_LEFT,nt.STICKY_TOP_RIGHT,nt.STICKY_TOP_FULL_WIDTH],n=i.indexOf(this.name)>=0;if(n){this.comp.setDomOrder(!0);return}var o=function(){return e.comp.setDomOrder(e.gridOptionsWrapper.isEnsureDomOrder())};this.addManagedListener(this.gridOptionsWrapper,Et.PROP_DOM_LAYOUT,o),o()},t.prototype.stopHScrollOnPinnedRows=function(){var e=this;this.forContainers([nt.TOP_CENTER,nt.STICKY_TOP_CENTER,nt.BOTTOM_CENTER],function(){var i=function(){return e.eViewport.scrollLeft=0};e.addManagedListener(e.eViewport,"scroll",i)})},t.prototype.onDisplayedColumnsChanged=function(){var e=this;this.forContainers([nt.CENTER],function(){return e.onHorizontalViewportChanged()})},t.prototype.onDisplayedColumnsWidthChanged=function(){var e=this;this.forContainers([nt.CENTER],function(){return e.onHorizontalViewportChanged()})},t.prototype.onScrollVisibilityChanged=function(){if(this.name===nt.CENTER){var e=this.scrollVisibleService.isHorizontalScrollShowing(),i=e&&this.gridOptionsWrapper.getScrollbarWidth()||0,n=i==0?"100%":"calc(100% + "+i+"px)";this.comp.setViewportHeight(n)}},t.prototype.addPreventScrollWhileDragging=function(){var e=this,i=function(n){e.dragService.isDragging()&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",i,{passive:!1}),this.addDestroyFunc(function(){return e.eContainer.removeEventListener("touchmove",i)})},t.prototype.onHorizontalViewportChanged=function(){var e=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,i)},t.prototype.getCenterWidth=function(){return Hg(this.eViewport)},t.prototype.getCenterViewportScrollLeft=function(){return Dh(this.eViewport,this.enableRtl)},t.prototype.registerViewportResizeListener=function(e){var i=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(function(){return i()})},t.prototype.isViewportVisible=function(){return Ju(this.eViewport)},t.prototype.isViewportHScrollShowing=function(){return s_(this.eViewport)},t.prototype.getViewportScrollLeft=function(){return Dh(this.eViewport,this.enableRtl)},t.prototype.isHorizontalScrollShowing=function(){var e=this.gridOptionsWrapper.isAlwaysShowHorizontalScroll();return e||s_(this.eViewport)},t.prototype.getViewportElement=function(){return this.eViewport},t.prototype.setContainerTranslateX=function(e){this.eContainer.style.transform="translateX("+e+"px)"},t.prototype.getHScrollPosition=function(){var e={left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth};return e},t.prototype.setCenterViewportScrollLeft=function(e){Bf(this.eViewport,e,this.enableRtl)},t.prototype.onDisplayedRowsChanged=function(){var e=this,i=this.name===nt.TOP_FULL_WIDTH||this.name===nt.STICKY_TOP_FULL_WIDTH||this.name===nt.BOTTOM_FULL_WIDTH||this.name===nt.FULL_WIDTH,n=function(a){var l=a.isFullWidth(),u=e.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_PRINT,c=e.embedFullWidthRows||u,h=i?!c&&l:c||!l;return h},o=this.getRowCtrls(),s=o.filter(n);this.comp.setRowCtrls(s)},t.prototype.getRowCtrls=function(){switch(this.name){case nt.TOP_CENTER:case nt.TOP_LEFT:case nt.TOP_RIGHT:case nt.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case nt.STICKY_TOP_CENTER:case nt.STICKY_TOP_LEFT:case nt.STICKY_TOP_RIGHT:case nt.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case nt.BOTTOM_CENTER:case nt.BOTTOM_LEFT:case nt.BOTTOM_RIGHT:case nt.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getRowCtrls()}},va([b("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),va([b("dragService")],t.prototype,"dragService",void 0),va([b("ctrlsService")],t.prototype,"ctrlsService",void 0),va([b("columnModel")],t.prototype,"columnModel",void 0),va([b("resizeObserverService")],t.prototype,"resizeObserverService",void 0),va([b("rowRenderer")],t.prototype,"rowRenderer",void 0),va([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var RK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ws=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},bK=`<div class="ag-root ag-unselectable" role="grid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="`+nt.TOP_LEFT+`"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="`+nt.TOP_CENTER+`"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="`+nt.TOP_RIGHT+`"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="`+nt.TOP_FULL_WIDTH+`"></ag-row-container>
        </div>
        <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
            <ag-row-container ref="leftContainer" name="`+nt.LEFT+`"></ag-row-container>
            <ag-row-container ref="centerContainer" name="`+nt.CENTER+`"></ag-row-container>
            <ag-row-container ref="rightContainer" name="`+nt.RIGHT+`"></ag-row-container>
            <ag-row-container ref="fullWidthContainer" name="`+nt.FULL_WIDTH+`"></ag-row-container>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="`+nt.STICKY_TOP_LEFT+`"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="`+nt.STICKY_TOP_CENTER+`"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="`+nt.STICKY_TOP_RIGHT+`"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="`+nt.STICKY_TOP_FULL_WIDTH+`"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="`+nt.BOTTOM_LEFT+`"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="`+nt.BOTTOM_CENTER+`"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="`+nt.BOTTOM_RIGHT+`"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="`+nt.BOTTOM_FULL_WIDTH+`"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,MK=function(r){RK(t,r);function t(){return r.call(this,bK)||this}return t.prototype.init=function(){var e=this,i=function(o,s){var a=o+"px";s.style.minHeight=a,s.style.height=a},n={setRowAnimationCssOnBodyViewport:function(o,s){return e.setRowAnimationCssOnBodyViewport(o,s)},setColumnCount:function(o){return QT(e.getGui(),o)},setRowCount:function(o){return JT(e.getGui(),o)},setTopHeight:function(o){return i(o,e.eTop)},setBottomHeight:function(o){return i(o,e.eBottom)},setTopDisplay:function(o){return e.eTop.style.display=o},setBottomDisplay:function(o){return e.eBottom.style.display=o},setStickyTopHeight:function(o){return e.eStickyTop.style.height=o},setStickyTopTop:function(o){return e.eStickyTop.style.top=o},setStickyTopWidth:function(o){return e.eStickyTop.style.width=o},setColumnMovingCss:function(o,s){return e.addOrRemoveCssClass(SP,s)},updateLayoutClasses:function(o,s){var a=e.eBodyViewport.classList;a.toggle(wi.AUTO_HEIGHT,s.autoHeight),a.toggle(wi.NORMAL,s.normal),a.toggle(wi.PRINT,s.print),e.addOrRemoveCssClass(wi.AUTO_HEIGHT,s.autoHeight),e.addOrRemoveCssClass(wi.NORMAL,s.normal),e.addOrRemoveCssClass(wi.PRINT,s.print)},setAlwaysVerticalScrollClass:function(o,s){return e.eBodyViewport.classList.toggle(wP,s)},registerBodyViewportResizeListener:function(o){var s=e.resizeObserverService.observeResize(e.eBodyViewport,o);e.addDestroyFunc(function(){return s()})},setPinnedTopBottomOverflowY:function(o){return e.eTop.style.overflowY=e.eBottom.style.overflowY=o},setCellSelectableCss:function(o,s){[e.eTop,e.eBodyViewport,e.eBottom].forEach(function(a){return a.classList.toggle(CP,s)})}};this.ctrl=this.createManagedBean(new _Y),this.ctrl.setComp(n,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||this.gridOptionsWrapper.isRowSelectionMulti())&&ZT(this.getGui(),!0)},t.prototype.setRowAnimationCssOnBodyViewport=function(e,i){var n=this.eBodyViewport.classList;n.toggle(Hu.ANIMATION_ON,i),n.toggle(Hu.ANIMATION_OFF,!i)},t.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},ws([b("resizeObserverService")],t.prototype,"resizeObserverService",void 0),ws([Ae("rangeService")],t.prototype,"rangeService",void 0),ws([ut("eBodyViewport")],t.prototype,"eBodyViewport",void 0),ws([ut("eStickyTop")],t.prototype,"eStickyTop",void 0),ws([ut("eTop")],t.prototype,"eTop",void 0),ws([ut("eBottom")],t.prototype,"eBottom",void 0),ws([ut("gridHeader")],t.prototype,"headerRootComp",void 0),ws([Ct],t.prototype,"init",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var TK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),bv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},PK=function(r){TK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},t.prototype.onDisplayedColumnsChanged=function(){this.update()},t.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},t.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},t.prototype.updateImpl=function(){var e=this.ctrlsService.getCenterRowContainerCtrl();if(!!e){var i={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(i)}},t.prototype.setScrollsVisible=function(e){var i=this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing;if(i){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;var n={type:O.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(n)}},t.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},t.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},bv([b("ctrlsService")],t.prototype,"ctrlsService",void 0),bv([Ct],t.prototype,"postConstruct",null),t=bv([Dt("scrollVisibleService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var OK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ox=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},AK=function(r){OK(t,r);function t(){var i=r!==null&&r.apply(this,arguments)||this;return i.gridInstanceId=e.gridInstanceSequence.next(),i}e=t,t.prototype.stampTopLevelGridCompWithGridInstance=function(i){i[e.GRID_DOM_KEY]=this.gridInstanceId},t.prototype.getRenderedCellForEvent=function(i){return Gf(this.gridOptionsWrapper,i,za.DOM_DATA_KEY_CELL_CTRL)},t.prototype.isEventFromThisGrid=function(i){var n=this.isElementInThisGrid(i.target);return n},t.prototype.isElementInThisGrid=function(i){for(var n=i;n;){var o=n[e.GRID_DOM_KEY];if(dt(o)){var s=o===this.gridInstanceId;return s}n=n.parentElement}return!1},t.prototype.getCellPositionForEvent=function(i){var n=this.getRenderedCellForEvent(i);return n?n.getCellPosition():null},t.prototype.getNormalisedPosition=function(i){var n=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_NORMAL,o=i,s,a;if(o.clientX!=null||o.clientY!=null?(s=o.clientX,a=o.clientY):(s=o.x,a=o.y),n){var l=this.ctrlsService.getGridBodyCtrl(),u=l.getScrollFeature().getVScrollPosition(),c=l.getScrollFeature().getHScrollPosition();s+=c.left,a+=u.top}return{x:s,y:a}};var e;return t.gridInstanceSequence=new Nu,t.GRID_DOM_KEY="__ag_grid_instance",Ox([b("ctrlsService")],t.prototype,"ctrlsService",void 0),t=e=Ox([Dt("mouseEventService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var DK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Jf=function(){return Jf=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Jf.apply(this,arguments)},xn=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},LK=function(r){DK(t,r);function t(){var e=r.call(this)||this;return e.onPageDown=Xy(e.onPageDown,100),e.onPageUp=Xy(e.onPageUp,100),e}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.gridBodyCon=i.gridBodyCtrl})},t.prototype.handlePageScrollingKey=function(e){var i=e.key,n=e.altKey,o=e.ctrlKey||e.metaKey,s=!!this.rangeService&&e.shiftKey,a=this.mouseEventService.getCellPositionForEvent(e);if(!a)return!1;var l=!1;switch(i){case lt.PAGE_HOME:case lt.PAGE_END:!o&&!n&&(this.onHomeOrEndKey(i),l=!0);break;case lt.LEFT:case lt.RIGHT:case lt.UP:case lt.DOWN:o&&!n&&!s&&(this.onCtrlUpDownLeftRight(i,a),l=!0);break;case lt.PAGE_DOWN:!o&&!n&&(this.onPageDown(a),l=!0);break;case lt.PAGE_UP:!o&&!n&&(this.onPageUp(a),l=!0);break}return l&&e.preventDefault(),l},t.prototype.navigateTo=function(e){var i=e.scrollIndex,n=e.scrollType,o=e.scrollColumn,s=e.focusIndex,a=e.focusColumn;if(dt(o)&&!o.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(o),dt(i)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,n),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:a,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){var l={rowIndex:s,rowPinned:null,column:a};this.rangeService.setRangeToCell(l)}},t.prototype.onPageDown=function(e){var i=this.ctrlsService.getGridBodyCtrl(),n=i.getScrollFeature().getVScrollPosition(),o=this.getViewportHeight(),s=this.paginationProxy.getPixelOffset(),a=n.top+o,l=this.paginationProxy.getRowIndexAtPixel(a+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,l):this.navigateToNextPage(e,l)},t.prototype.onPageUp=function(e){var i=this.ctrlsService.getGridBodyCtrl(),n=i.getScrollFeature().getVScrollPosition(),o=this.paginationProxy.getPixelOffset(),s=n.top,a=this.paginationProxy.getRowIndexAtPixel(s+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a,!0):this.navigateToNextPage(e,a,!0)},t.prototype.navigateToNextPage=function(e,i,n){n===void 0&&(n=!1);var o,s,a=this.getViewportHeight(),l=this.paginationProxy.getPageFirstRow(),u=this.paginationProxy.getPageLastRow(),c=this.paginationProxy.getPixelOffset(),h=this.paginationProxy.getRow(e.rowIndex),d=n?((o=h)===null||o===void 0?void 0:o.rowHeight)-a-c:a-c,p=((s=h)===null||s===void 0?void 0:s.rowTop)+d,f=this.paginationProxy.getRowIndexAtPixel(p+c);if(f===e.rowIndex){var m=n?-1:1;i=f=e.rowIndex+m}var g;n?(g="bottom",f<l&&(f=l),i<l&&(i=l)):(g="top",f>u&&(f=u),i>u&&(i=u)),this.isRowTallerThanView(f)&&(i=f,g="top"),this.navigateTo({scrollIndex:i,scrollType:g,scrollColumn:null,focusIndex:f,focusColumn:e.column})},t.prototype.navigateToNextPageWithAutoHeight=function(e,i,n){var o=this;n===void 0&&(n=!1),this.navigateTo({scrollIndex:i,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column}),setTimeout(function(){var s=o.getNextFocusIndexForAutoHeight(e,n);o.navigateTo({scrollIndex:i,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)},t.prototype.getNextFocusIndexForAutoHeight=function(e,i){i===void 0&&(i=!1);for(var n,o=i?-1:1,s=this.getViewportHeight(),a=this.paginationProxy.getPageLastRow(),l=0,u=e.rowIndex;u>=0&&u<=a;){var c=this.paginationProxy.getRow(u);if(c){var h=(n=c.rowHeight,n!=null?n:0);if(l+h>s)break;l+=h}u+=o}return Math.max(0,Math.min(u,a))},t.prototype.getViewportHeight=function(){var e=this.ctrlsService.getGridBodyCtrl(),i=e.getScrollFeature().getVScrollPosition(),n=this.gridOptionsWrapper.getScrollbarWidth(),o=i.bottom-i.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(o-=n),o},t.prototype.isRowTallerThanView=function(e){var i=this.paginationProxy.getRow(e);if(!i)return!1;var n=i.rowHeight;return typeof n!="number"?!1:n>this.getViewportHeight()},t.prototype.onCtrlUpDownLeftRight=function(e,i){var n=this.cellNavigationService.getNextCellToFocus(e,i,!0),o=n.rowIndex,s=n.column;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:s,focusIndex:o,focusColumn:s})},t.prototype.onHomeOrEndKey=function(e){var i=e===lt.PAGE_HOME,n=this.columnModel.getAllDisplayedColumns(),o=i?n[0]:Ue(n),s=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:o,focusIndex:s,focusColumn:o})},t.prototype.onTabKeyDown=function(e,i){var n=i.shiftKey,o=this.tabToNextCellCommon(e,n,i);if(o){i.preventDefault();return}if(n){var s=e.getRowPosition(),a=s.rowIndex,l=s.rowPinned,u=l?a===0:a===this.paginationProxy.getPageFirstRow();u&&(i.preventDefault(),this.focusService.focusLastHeader(i))}else e instanceof za&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&i.preventDefault()},t.prototype.tabToNextCell=function(e,i){var n=this.focusService.getFocusedCell();if(!n)return!1;var o=this.getCellByPosition(n);return!o&&(o=this.rowRenderer.getRowByPosition(n),!o||!o.isFullWidth())?!1:this.tabToNextCellCommon(o,e,i)},t.prototype.tabToNextCellCommon=function(e,i,n){var o=e.isEditing();if(!o&&e instanceof za){var s=e,a=s.getRowCtrl();a&&(o=a.isEditing())}var l;return o?this.gridOptionsWrapper.isFullRowEdit()?l=this.moveToNextEditingRow(e,i,n):l=this.moveToNextEditingCell(e,i,n):l=this.moveToNextCellNotEditing(e,i),l||!!this.focusService.getFocusedHeader()},t.prototype.moveToNextEditingCell=function(e,i,n){n===void 0&&(n=null);var o=e.getCellPosition();e.getGui().focus(),e.stopEditing();var s=this.findNextCellToFocusOn(o,i,!0);return s==null?!1:(s.startEditing(null,null,!0,n),s.focusCell(!1),!0)},t.prototype.moveToNextEditingRow=function(e,i,n){n===void 0&&(n=null);var o=e.getCellPosition(),s=this.findNextCellToFocusOn(o,i,!0);if(s==null)return!1;var a=s.getCellPosition(),l=this.isCellEditable(o),u=this.isCellEditable(a),c=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;if(l&&e.setFocusOutOnEditor(),!c){var h=e.getRowCtrl();h.stopEditing();var d=s.getRowCtrl();d.startRowEditing(void 0,void 0,void 0,n)}return u?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0},t.prototype.moveToNextCellNotEditing=function(e,i){var n=this.columnModel.getAllDisplayedColumns(),o;e instanceof ja?o=Jf(Jf({},e.getRowPosition()),{column:i?n[0]:Ue(n)}):o=e.getCellPosition();var s=this.findNextCellToFocusOn(o,i,!1);if(s instanceof za)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),i);return dt(s)},t.prototype.findNextCellToFocusOn=function(e,i,n){for(var o=e;;){e!==o&&(e=o),i||(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextTabbedCell(o,i);var s=this.gridOptionsWrapper.getTabToNextCellFunc();if(dt(s)){var a={backwards:i,editing:n,previousCellPosition:e,nextCellPosition:o||null},l=s(a);dt(l)?(l.floating&&(ce(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),l.rowPinned=l.floating),o={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}):o=null}if(!o)return null;if(o.rowIndex<0){var u=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:u+o.rowIndex,column:o.column}}),null}var c=this.gridOptionsWrapper.isFullRowEdit();if(n&&!c){var h=this.isCellEditable(o);if(!h)continue}this.ensureCellVisible(o);var d=this.getCellByPosition(o);if(!d){var p=this.rowRenderer.getRowByPosition(o);if(!p||!p.isFullWidth())continue;return p}if(!d.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(o),d}},t.prototype.isCellEditable=function(e){var i=this.lookupRowNodeForCell(e);return i?e.column.isCellEditable(i):!1},t.prototype.getCellByPosition=function(e){var i=this.rowRenderer.getRowByPosition(e);return i?i.getCellCtrl(e.column):null},t.prototype.lookupRowNodeForCell=function(e){return e.rowPinned===H.PINNED_TOP?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned===H.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)},t.prototype.navigateToNextCell=function(e,i,n,o){for(var s=n,a=!1;s&&(s===n||!this.isValidNavigateCell(s));)this.gridOptionsWrapper.isEnableRtl()?i===lt.LEFT&&(s=this.getLastCellOfColSpan(s)):i===lt.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(i,s),a=kt(s);if(a&&e&&e.key===lt.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),o){var l=this.gridOptionsWrapper.getNavigateToNextCellFunc();if(dt(l)){var u={key:i,previousCellPosition:n,nextCellPosition:s||null,event:e},c=l(u);dt(c)?(c.floating&&(ce(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),c.rowPinned=c.floating),s={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}):s=null}}if(!!s){if(s.rowIndex<0){var h=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:h+s.rowIndex,column:n.column},event:e||void 0});return}var d=this.getNormalisedPosition(s);d?this.focusPosition(d):this.tryToFocusFullWidthRow(s)}},t.prototype.getNormalisedPosition=function(e){this.ensureCellVisible(e);var i=this.getCellByPosition(e);return i?(e=i.getCellPosition(),this.ensureCellVisible(e),e):null},t.prototype.tryToFocusFullWidthRow=function(e,i){i===void 0&&(i=!1);var n=this.columnModel.getAllDisplayedColumns(),o=this.rowRenderer.getRowByPosition(e);if(!o||!o.isFullWidth())return!1;var s=this.focusService.getFocusedCell(),a={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(i?Ue(n):n[0])};this.focusPosition(a);var l=s!=null?this.rowPositionUtils.before(a,s):!1,u={type:O.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:a.column,isFullWidthCell:!0,floating:a.rowPinned,fromBelow:l};return this.eventService.dispatchEvent(u),!0},t.prototype.focusPosition=function(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)},t.prototype.isValidNavigateCell=function(e){var i=this.rowPositionUtils.getRowNode(e);return!!i},t.prototype.getLastCellOfColSpan=function(e){var i=this.getCellByPosition(e);if(!i)return e;var n=i.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:Ue(n),rowPinned:e.rowPinned}},t.prototype.ensureCellVisible=function(e){var i,n=this.gridOptionsWrapper.isGroupRowsSticky(),o=this.rowModel.getRow(e.rowIndex),s=n&&((i=o)===null||i===void 0?void 0:i.sticky);!s&&kt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)},xn([b("mouseEventService")],t.prototype,"mouseEventService",void 0),xn([b("paginationProxy")],t.prototype,"paginationProxy",void 0),xn([b("focusService")],t.prototype,"focusService",void 0),xn([Ae("rangeService")],t.prototype,"rangeService",void 0),xn([b("columnModel")],t.prototype,"columnModel",void 0),xn([b("rowModel")],t.prototype,"rowModel",void 0),xn([b("ctrlsService")],t.prototype,"ctrlsService",void 0),xn([b("rowRenderer")],t.prototype,"rowRenderer",void 0),xn([b("headerNavigationService")],t.prototype,"headerNavigationService",void 0),xn([b("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),xn([b("cellNavigationService")],t.prototype,"cellNavigationService",void 0),xn([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),xn([Ct],t.prototype,"postConstruct",null),t=xn([Dt("navigationService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var IK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),FK=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},NK=function(r){IK(t,r);function t(e){var i=r.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return i.params=e,i}return t.prototype.postConstruct=function(){this.gridOptionsWrapper.setDomData(this.getGui(),t.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},t.prototype.addKeyDownListener=function(){var e=this,i=this.getGui(),n=this.params,o=function(s){Uf(e.gridOptionsWrapper,s,n.node,n.column,!0)||n.onKeyDown(s)};this.addManagedListener(i,"keydown",o)},t.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",FK([Ct],t.prototype,"postConstruct",null),t}(ad);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var GK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),HK=function(r){GK(t,r);function t(e,i,n,o,s){var a=r.call(this)||this;a.rendererVersion=0,a.editorVersion=0,a.beans=e,a.column=i.getColumn(),a.rowNode=i.getRowNode(),a.rowCtrl=i.getRowCtrl(),a.eRow=o,a.setTemplate('<div comp-id="'+a.getCompId()+'"/>');var l=a.getGui();a.forceWrapper=i.isForceWrapper(),a.refreshWrapper(!1);var u=function(h,d,p){var f=p||l;d!=null&&d!=""?f.setAttribute(h,d):f.removeAttribute(h)},c={addOrRemoveCssClass:function(h,d){return a.addOrRemoveCssClass(h,d)},setUserStyles:function(h){return qC(l,h)},getFocusableElement:function(){return a.getFocusableElement()},setTabIndex:function(h){return u("tabindex",h.toString())},setRole:function(h){return an(l,h)},setColId:function(h){return u("col-id",h)},setTitle:function(h){return u("title",h)},setIncludeSelection:function(h){return a.includeSelection=h},setIncludeRowDrag:function(h){return a.includeRowDrag=h},setIncludeDndSource:function(h){return a.includeDndSource=h},setRenderDetails:function(h,d,p){return a.setRenderDetails(h,d,p)},setEditDetails:function(h,d,p){return a.setEditDetails(h,d,p)},getCellEditor:function(){return a.cellEditor||null},getCellRenderer:function(){return a.cellRenderer||null},getParentOfValue:function(){return a.getParentOfValue()}};return a.cellCtrl=i,i.setComp(c,a.getGui(),a.eCellWrapper,n,s),a}return t.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},t.prototype.setRenderDetails=function(e,i,n){var o=this.cellEditor&&!this.cellEditorPopupWrapper;if(!o){this.firstRender=this.firstRender==null;var s=this.refreshWrapper(!1);if(e){var a=n||s,l=a?!1:this.refreshCellRenderer(e);l||(this.destroyRenderer(),this.createCellRendererInstance(e))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(i)}},t.prototype.setEditDetails=function(e,i,n){e?this.createCellEditorInstance(e,i,n):this.destroyEditor()},t.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},t.prototype.refreshWrapper=function(e){var i=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=i||this.forceWrapper,o=n&&this.eCellWrapper==null;o&&(this.eCellWrapper=Hi('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));var s=!n&&this.eCellWrapper!=null;s&&(Fa(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);var a=!e&&n,l=a&&this.eCellValue==null;l&&(this.eCellValue=Hi('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var u=!a&&this.eCellValue!=null;u&&(Fa(this.eCellValue),this.eCellValue=void 0);var c=o||s||l||u;return c&&this.removeControls(),!e&&i&&this.addControls(),c},t.prototype.addControls=function(){var e=this.eCellValue.id="cell-"+this.getCompId(),i=[];iw(this.eCellWrapper,!0),this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&(this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue)),i.push(this.checkboxSelectionComp.getCheckboxId())),i.push(e),tw(this.getGui(),i.join(" "))},t.prototype.createCellEditorInstance=function(e,i,n){var o=this,s=this.editorVersion,a=e.newAgStackInstance();if(!!a){var l=e.params;a.then(function(c){return o.afterCellEditorCreated(s,c,l,i,n)});var u=kt(this.cellEditor);u&&l.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},t.prototype.insertValueWithoutCellRenderer=function(e){var i=this.getParentOfValue();qn(i);var n=e!=null?wo(e):null;n!=null&&(i.innerHTML=n)},t.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},t.prototype.destroyRenderer=function(){var e=this.beans.context;this.cellRenderer=e.destroyBean(this.cellRenderer),Fa(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},t.prototype.destroyEditor=function(){var e=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Fa(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},t.prototype.refreshCellRenderer=function(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;var i=this.cellRenderer.refresh(e.params);return i===!0||i===void 0},t.prototype.createCellRendererInstance=function(e){var i=this,n=this.beans.gridOptionsWrapper.isAngularCompileRows(),o=this.beans.gridOptionsWrapper.isSuppressAnimationFrame(),s=!n&&!o,a=this.rendererVersion,l=e.componentClass,u=function(){var c=i.rendererVersion!==a||!i.isAlive();if(!c){var h=e.newAgStackInstance(),d=i.afterCellRendererCreated.bind(i,a,l);h&&h.then(d)}};s&&this.firstRender?this.beans.animationFrameService.createTask(u,this.rowNode.rowIndex,"createTasksP2"):u()},t.prototype.getCtrl=function(){return this.cellCtrl},t.prototype.getRowCtrl=function(){return this.rowCtrl},t.prototype.getCellRenderer=function(){return this.cellRenderer},t.prototype.getCellEditor=function(){return this.cellEditor},t.prototype.afterCellRendererCreated=function(e,i,n){var o=!this.isAlive()||e!==this.rendererVersion;if(o){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=i,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){var s=this.getParentOfValue();qn(s),s.appendChild(this.cellRendererGui)}},t.prototype.afterCellEditorCreated=function(e,i,n,o,s){var a=e!==this.editorVersion;if(a){this.beans.context.destroyBean(i);return}var l=i.isCancelBeforeStart&&i.isCancelBeforeStart();if(l){this.beans.context.destroyBean(i),this.cellCtrl.stopEditing();return}if(!i.getGui){console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),this.beans.context.destroyBean(i);return}this.cellEditor=i,this.cellEditorGui=i.getGui();var u=o||i.isPopup!==void 0&&i.isPopup();u?(o||this.cellCtrl.hackSayEditingInPopup(),this.addPopupCellEditor(n,s)):this.addInCellEditor(),i.afterGuiAttached&&i.afterGuiAttached()},t.prototype.addInCellEditor=function(){var e=this.getGui(),i=this.beans.gridOptionsWrapper.getDocument();if(e.contains(i.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui){var n=this.getParentOfValue();n.appendChild(this.cellEditorGui)}},t.prototype.addPopupCellEditor=function(e,i){var n=this;this.beans.gridOptionsWrapper.isFullRowEdit()&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var o=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new NK(e));var s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);var a=this.beans.popupService,l=this.beans.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus(),u=i!=null?i:o.getPopupPosition?o.getPopupPosition():"over",c={column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),ePopup:s,keepWithinBounds:!0},h=u==="under"?a.positionPopupUnderComponent.bind(a,c):a.positionPopupOverComponent.bind(a,c),d=this.beans.gridOptionsWrapper.getLocaleTextFunc(),p=a.addPopup({modal:l,eChild:s,closeOnEsc:!0,closedCallback:function(){n.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:h,ariaLabel:d("ariaLabelCellEditor","Cell Editor")});p&&(this.hideEditorPopup=p.hideFunc)},t.prototype.detach=function(){this.eRow.removeChild(this.getGui())},t.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),r.prototype.destroy.call(this)},t.prototype.clearParentOfValue=function(){var e=this.getGui(),i=this.beans.gridOptionsWrapper.getDocument();e.contains(i.activeElement)&&Gg()&&e.focus({preventScroll:!0}),qn(this.getParentOfValue())},t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var WK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),VK=function(r){WK(t,r);function t(e,i,n){var o=r.call(this)||this;o.cellComps={},o.beans=i,o.rowCtrl=e,o.setTemplate('<div comp-id="'+o.getCompId()+'" style="'+o.getInitialStyle()+'"/>');var s=o.getGui(),a=s.style,l={setDomOrder:function(u){return o.domOrder=u},setCellCtrls:function(u){return o.setCellCtrls(u)},showFullWidth:function(u){return o.showFullWidth(u)},getFullWidthCellRenderer:function(){return o.getFullWidthCellRenderer()},addOrRemoveCssClass:function(u,c){return o.addOrRemoveCssClass(u,c)},setUserStyles:function(u){return qC(s,u)},setTop:function(u){return a.top=u},setTransform:function(u){return a.transform=u},setRowIndex:function(u){return s.setAttribute("row-index",u)},setRole:function(u){return an(s,u)},setRowId:function(u){return s.setAttribute("row-id",u)},setRowBusinessKey:function(u){return s.setAttribute("row-business-key",u)},setTabIndex:function(u){return s.setAttribute("tabindex",u.toString())}};return e.setComp(l,o.getGui(),n),o}return t.prototype.getInitialStyle=function(){var e=this.rowCtrl.getInitialTransform(),i=this.rowCtrl.getInitialRowTop();return e?"transform: "+e:"top: "+i},t.prototype.showFullWidth=function(e){var i=this,n=function(s){if(i.isAlive()){var a=s.getGui();i.getGui().appendChild(a),i.rowCtrl.setupDetailRowAutoHeight(a),i.setFullWidthRowComp(s)}else i.beans.context.destroyBean(s)},o=e.newAgStackInstance();!o||o.then(n)},t.prototype.setCellCtrls=function(e){var i=this,n=Object.assign({},this.cellComps);e.forEach(function(s){var a=s.getInstanceId(),l=i.cellComps[a];l==null?i.newCellComp(s):n[a]=null});var o=Br(n).filter(function(s){return s!=null});this.destroyCells(o),this.ensureDomOrder(e)},t.prototype.ensureDomOrder=function(e){var i=this;if(!!this.domOrder){var n=[];e.forEach(function(o){var s=i.cellComps[o.getInstanceId()];s&&n.push(s.getGui())}),XC(this.getGui(),n)}},t.prototype.newCellComp=function(e){var i=new HK(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=i,this.getGui().appendChild(i.getGui())},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.destroyAllCells()},t.prototype.destroyAllCells=function(){var e=Br(this.cellComps).filter(function(i){return i!=null});this.destroyCells(e)},t.prototype.setFullWidthRowComp=function(e){var i=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(function(){i.fullWidthCellRenderer=i.beans.context.destroyBean(i.fullWidthCellRenderer)})},t.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},t.prototype.destroyCells=function(e){var i=this;e.forEach(function(n){if(!!n){var o=n.getCtrl().getInstanceId();i.cellComps[o]===n&&(n.detach(),n.destroy(),i.cellComps[o]=null)}})},t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var kK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),g_=function(){return g_=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},g_.apply(this,arguments)},Hl=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function BK(){var r=le.elementGettingCreated.getAttribute("name"),t=f_.getRowContainerCssClasses(r),e,i=r===nt.CENTER,n=r===nt.TOP_CENTER||r===nt.STICKY_TOP_CENTER||r===nt.BOTTOM_CENTER;return i?e='<div class="'+t.wrapper+`" ref="eWrapper" role="presentation">
                <div class="`+t.viewport+`" ref="eViewport" role="presentation">
                    <div class="`+t.container+`" ref="eContainer"></div>
                </div>
            </div>`:n?e='<div class="'+t.viewport+`" ref="eViewport" role="presentation">
                <div class="`+t.container+`" ref="eContainer"></div>
            </div>`:e='<div class="'+t.container+'" ref="eContainer"></div>',e}var UK=function(r){kK(t,r);function t(){var e=r.call(this,BK())||this;return e.rowComps={},e.name=le.elementGettingCreated.getAttribute("name"),e.type=wK(e.name),e}return t.prototype.postConstruct=function(){var e=this,i={setViewportHeight:function(o){return e.eViewport.style.height=o},setRowCtrls:function(o){return e.setRowCtrls(o)},setDomOrder:function(o){e.domOrder=o},setContainerWidth:function(o){return e.eContainer.style.width=o}},n=this.createManagedBean(new f_(this.name));n.setComp(i,this.eContainer,this.eViewport,this.eWrapper)},t.prototype.preDestroy=function(){this.setRowCtrls([])},t.prototype.setRowCtrls=function(e){var i=this,n=g_({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;var o=function(s){var a=s.getInstanceId(),l=n[a];if(l)i.rowComps[a]=l,delete n[a],i.ensureDomOrder(l.getGui());else{var u=i.newRowComp(s);i.rowComps[a]=u,i.appendRow(u.getGui())}};e.forEach(o),Br(n).forEach(function(s){i.eContainer.removeChild(s.getGui()),s.destroy()}),an(this.eContainer,e.length?"rowgroup":"presentation")},t.prototype.appendRow=function(e){this.domOrder?HT(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e},t.prototype.ensureDomOrder=function(e){this.domOrder&&(KC(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)},t.prototype.newRowComp=function(e){f_.getPinned(this.name);var i=new VK(e,this.beans,this.type);return i},Hl([b("beans")],t.prototype,"beans",void 0),Hl([ut("eViewport")],t.prototype,"eViewport",void 0),Hl([ut("eContainer")],t.prototype,"eContainer",void 0),Hl([ut("eWrapper")],t.prototype,"eWrapper",void 0),Hl([Ct],t.prototype,"postConstruct",null),Hl([Yi],t.prototype,"preDestroy",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Ax=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},zK=function(){function r(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}return r.prototype.onDragEnter=function(t){var e=this;if(this.clearColumnsList(),!this.gridOptionsWrapper.isFunctionsReadOnly()){var i=t.dragItem.columns;!i||i.forEach(function(n){!n.isPrimary()||n.isAnyFunctionActive()||(n.isAllowValue()?e.columnsToAggregate.push(n):n.isAllowRowGroup()?e.columnsToGroup.push(n):n.isAllowPivot()&&e.columnsToPivot.push(n))})}},r.prototype.getIconName=function(){var t=this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length;return t>0?this.pinned?ji.ICON_PINNED:ji.ICON_MOVE:null},r.prototype.onDragLeave=function(t){this.clearColumnsList()},r.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},r.prototype.onDragging=function(t){},r.prototype.onDragStop=function(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},Ax([b("columnModel")],r.prototype,"columnModel",void 0),Ax([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var xc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},jK=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},$K=function(){function r(t,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.pinned=t,this.eContainer=e,this.centerContainer=!dt(t)}return r.prototype.init=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCon=t.ctrlsService.getGridBodyCtrl()})},r.prototype.getIconName=function(){return this.pinned?ji.ICON_PINNED:ji.ICON_MOVE},r.prototype.onDragEnter=function(t){var e=t.dragItem.columns,i=t.dragSource.type===Sn.ToolPanel;if(i)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var n=t.dragItem.visibleState,o=(e||[]).filter(function(s){return n[s.getId()]});this.setColumnsVisible(o,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)},r.prototype.onDragLeave=function(t){this.ensureIntervalCleared()},r.prototype.setColumnsVisible=function(t,e,i){if(i===void 0&&(i="api"),t){var n=t.filter(function(o){return!o.getColDef().lockVisible});this.columnModel.setColumnsVisible(n,e,i)}},r.prototype.setColumnsPinned=function(t,e,i){if(i===void 0&&(i="api"),t){var n=t.filter(function(o){return!o.getColDef().lockPinned});this.columnModel.setColumnsPinned(n,e,i)}},r.prototype.onDragStop=function(){this.ensureIntervalCleared()},r.prototype.normaliseX=function(t){if(this.gridOptionsWrapper.isEnableRtl()){var e=this.eContainer.clientWidth;t=e-t}return this.centerContainer&&(t+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),t},r.prototype.checkCenterForScrolling=function(t){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),i=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsWrapper.isEnableRtl()?(this.needToMoveRight=t<e+50,this.needToMoveLeft=t>i-50):(this.needToMoveLeft=t<e+50,this.needToMoveRight=t>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},r.prototype.onDragging=function(t,e,i){var n=this;if(e===void 0&&(e=!1),i===void 0&&(i=!1),this.lastDraggingEvent=t,!kt(t.hDirection)){var o=this.normaliseX(t.x);e||this.checkCenterForScrolling(o);var s=this.normaliseDirection(t.hDirection),a=t.dragSource.type,l=t.dragSource.getDragItem().columns;l=l.filter(function(u){return u.getColDef().lockPinned?u.getPinned()==n.pinned:!0}),this.attemptMoveColumns(a,l,s,o,e,i)}},r.prototype.normaliseDirection=function(t){if(this.gridOptionsWrapper.isEnableRtl())switch(t){case ro.Left:return ro.Right;case ro.Right:return ro.Left;default:console.error("AG Grid: Unknown direction "+t)}else return t},r.prototype.calculateOldIndex=function(t){var e=this.columnModel.getAllGridColumns(),i=mT(t.map(function(l){return e.indexOf(l)})),n=i[0],o=Ue(i),s=o-n,a=s!==i.length-1;return a?null:n},r.prototype.attemptMoveColumns=function(t,e,i,n,o,s){var a=i===ro.Left,l=i===ro.Right;if(t===Sn.HeaderCell){var u=[];e.forEach(function(x){for(var T=null,N=x.getParent();N!=null&&N.getDisplayedLeafColumns().length===1;)T=N,N=N.getParent();T!=null?T.getLeafColumns().forEach(function(K){u.includes(K)||u.push(K)}):u.includes(x)||u.push(x)}),e=u}var c=e.slice();this.columnModel.sortColumnsLikeGridColumns(c);var h=this.calculateValidMoves(c,l,n),d=this.calculateOldIndex(c);if(h.length!==0){var p=h[0],f=d!==null&&!o;if(t==Sn.HeaderCell&&(f=d!==null),!(f&&!s&&(a&&p>=d||l&&p<=d))){for(var m=this.columnModel.getAllDisplayedColumns(),g=[],y=null,C=0;C<h.length;C++){var w=h[C],S=this.columnModel.getProposedColumnOrder(c,w);if(!!this.columnModel.doesOrderPassRules(S)){var E=S.filter(function(x){return m.includes(x)});if(y===null)y=E;else if(!Jt.areEqual(E,y))break;var M=this.groupFragCount(S);g.push({move:w,fragCount:M})}}if(g.length!==0){g.sort(function(x,T){return x.fragCount-T.fragCount});var L=g[0].move;this.columnModel.moveColumns(c,L,"uiColumnDragged")}}}},r.prototype.groupFragCount=function(t){function e(s){for(var a=[],l=s.getOriginalParent();l!=null;)a.push(l),l=l.getOriginalParent();return a}for(var i=0,n=function(s){var a,l=e(t[s]),u=e(t[s+1]);a=jK(l.length>u.length?[l,u]:[u,l],2),l=a[0],u=a[1],l.forEach(function(c){u.indexOf(c)===-1&&i++})},o=0;o<t.length-1;o++)n(o);return i},r.prototype.calculateValidMoves=function(t,e,i){var n=this.gridOptionsWrapper.isSuppressMovableColumns()||t.some(function(L){return L.getColDef().suppressMovable});if(n)return[];var o=this.columnModel.getDisplayedColumns(this.pinned),s=this.columnModel.getAllGridColumns(),a=o.filter(function(L){return Xn(t,L)}),l=o.filter(function(L){return!Xn(t,L)}),u=s.filter(function(L){return!Xn(t,L)}),c=0,h=i;if(e){var d=0;a.forEach(function(L){return d+=L.getActualWidth()}),h-=d}if(h>0){for(var p=0;p<l.length;p++){var f=l[p];if(h-=f.getActualWidth(),h<0)break;c++}e&&c++}var m;if(c>0){var g=l[c-1];m=u.indexOf(g)+1}else m=u.indexOf(l[0]),m===-1&&(m=0);var y=[m],C=function(L,x){return L-x};if(e){for(var w=m+1,S=s.length-1;w<=S;)y.push(w),w++;y.sort(C)}else{for(var w=m,S=s.length-1,E=s[w];w<=S&&this.isColumnHidden(o,E);)w++,y.push(w),E=s[w];w=m-1;for(var M=0;w>=M;)y.push(w),w--;y.sort(C).reverse()}return y},r.prototype.isColumnHidden=function(t,e){return t.indexOf(e)<0},r.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(ji.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(ji.ICON_RIGHT,!0))},r.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(ji.ICON_MOVE))},r.prototype.moveInterval=function(){var t;this.intervalCount++,t=10+this.intervalCount*5,t>100&&(t=100);var e=null,i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=i.scrollHorizontally(-t):this.needToMoveRight&&(e=i.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var n=this.lastDraggingEvent.dragItem.columns,o=n.filter(function(a){return!a.getColDef().lockPinned});if(o.length>0&&(this.dragAndDropService.setGhostIcon(ji.ICON_PINNED),this.failedMoveAttempts>7)){var s=this.needToMoveLeft?H.PINNED_LEFT:H.PINNED_RIGHT;this.setColumnsPinned(o,s,"uiColumnDragged"),this.dragAndDropService.nudge()}}},xc([b("columnModel")],r.prototype,"columnModel",void 0),xc([b("dragAndDropService")],r.prototype,"dragAndDropService",void 0),xc([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),xc([b("ctrlsService")],r.prototype,"ctrlsService",void 0),xc([Ct],r.prototype,"init",null),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var YK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},KK=function(r){YK(t,r);function t(e,i){var n=r.call(this)||this;return n.pinned=e,n.eContainer=i,n}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){switch(e.pinned){case H.PINNED_LEFT:e.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.leftRowContainerCtrl.getContainerElement()],[i.bottomLeftRowContainerCtrl.getContainerElement()],[i.topLeftRowContainerCtrl.getContainerElement()]];break;case H.PINNED_RIGHT:e.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.rightRowContainerCtrl.getContainerElement()],[i.bottomRightRowContainerCtrl.getContainerElement()],[i.topRightRowContainerCtrl.getContainerElement()]];break;default:e.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.centerRowContainerCtrl.getViewportElement()],[i.bottomCenterRowContainerCtrl.getViewportElement()],[i.topCenterRowContainerCtrl.getViewportElement()]];break}})},t.prototype.isInterestedIn=function(e){return e===Sn.HeaderCell||e===Sn.ToolPanel&&this.gridOptionsWrapper.isAllowDragFromColumnsToolPanel()},t.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},t.prototype.getContainer=function(){return this.eContainer},t.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new $K(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new zK(this.pinned)),this.dragAndDropService.addDropTarget(this)},t.prototype.getIconName=function(){return this.currentDropListener.getIconName()},t.prototype.isDropColumnInPivotMode=function(e){return this.columnModel.isPivotMode()&&e.dragSource.type===Sn.ToolPanel},t.prototype.onDragEnter=function(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)},t.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)},t.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)},t.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)},Rc([b("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Rc([b("columnModel")],t.prototype,"columnModel",void 0),Rc([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Rc([Ct],t.prototype,"postConstruct",null),Rc([Ct],t.prototype,"init",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var XK=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},qK=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(XK(arguments[t]));return r},xP=function(){function r(){}return r.getHeaderClassesFromColDef=function(t,e,i,n){return kt(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,i,n)},r.getToolPanelClassesFromColDef=function(t,e,i,n){return kt(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,i,n)},r.getClassParams=function(t,e,i,n){return{colDef:t,column:i,columnGroup:n,api:e.getApi(),columnApi:e.getColumnApi(),context:e.getContext()}},r.getColumnClassesFromCollDef=function(t,e,i,n,o){if(kt(t))return[];var s;if(typeof t=="function"){var a=this.getClassParams(e,i,n,o);s=t(a)}else s=t;return typeof s=="string"?[s]:Array.isArray(s)?qK(s):[]},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var ZK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),mp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},JK=function(r){ZK(t,r);function t(e){var i=r.call(this,t.TEMPLATE,e)||this;return i.headerCompVersion=0,i.column=e.getColumnGroupChild(),i.pinned=e.getPinned(),i}return t.prototype.postConstruct=function(){var e=this,i=this.getGui(),n=function(a,l,u){var c=u||i;l!=null&&l!=""?c.setAttribute(a,l):c.removeAttribute(a)},o={setWidth:function(a){return i.style.width=a},addOrRemoveCssClass:function(a,l){return e.addOrRemoveCssClass(a,l)},setColId:function(a){return n("col-id",a)},setTitle:function(a){return n("title",a)},setAriaDescription:function(a){return KT(i,a)},setAriaSort:function(a){return a?eP(i,a):iP(i)},setUserCompDetails:function(a){return e.setUserCompDetails(a)},getUserCompInstance:function(){return e.headerComp}};this.ctrl.setComp(o,this.getGui(),this.eResize,this.eHeaderCompWrapper);var s=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",s)},t.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},t.prototype.setUserCompDetails=function(e){var i=this;this.headerCompVersion++;var n=this.headerCompVersion;e.newAgStackInstance().then(function(o){return i.afterCompCreated(n,o)})},t.prototype.afterCompCreated=function(e,i){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(i);return}this.destroyHeaderComp(),this.headerComp=i,this.headerCompGui=i.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())},t.TEMPLATE=`<div class="ag-header-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,mp([ut("eResize")],t.prototype,"eResize",void 0),mp([ut("eHeaderCompWrapper")],t.prototype,"eHeaderCompWrapper",void 0),mp([Ct],t.prototype,"postConstruct",null),mp([Yi],t.prototype,"destroyHeaderComp",null),t}(pw);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var QK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},tX=function(r){QK(t,r);function t(e){return r.call(this,t.TEMPLATE,e)||this}return t.prototype.postConstruct=function(){var e=this,i=this.getGui(),n=function(s,a){return a!=null?i.setAttribute(s,a):i.removeAttribute(s)},o={addOrRemoveCssClass:function(s,a){return e.addOrRemoveCssClass(s,a)},addOrRemoveResizableCssClass:function(s,a){return e.eResize.classList.toggle(s,a)},setWidth:function(s){return i.style.width=s},setColId:function(s){return i.setAttribute("col-id",s)},setAriaExpanded:function(s){return n("aria-expanded",s)},setTitle:function(s){return n("title",s)},setUserCompDetails:function(s){return e.setUserCompDetails(s)}};this.ctrl.setComp(o,i,this.eResize)},t.prototype.setUserCompDetails=function(e){var i=this;e.newAgStackInstance().then(function(n){return i.afterHeaderCompCreated(n)})},t.prototype.afterHeaderCompCreated=function(e){var i=this,n=function(){return i.destroyBean(e)};if(!this.isAlive()){n();return}this.getGui().appendChild(e.getGui()),this.addDestroyFunc(n),this.ctrl.setDragSource(e.getGui())},t.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,Mv([b("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Mv([ut("eResize")],t.prototype,"eResize",void 0),Mv([Ct],t.prototype,"postConstruct",null),t}(pw);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var eX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Dx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},wn;(function(r){r.COLUMN_GROUP="group",r.COLUMN="column",r.FLOATING_FILTER="filter"})(wn||(wn={}));var iX=function(r){eX(t,r);function t(e){var i=r.call(this)||this;i.headerComps={};var n=e.getType()==wn.COLUMN_GROUP?"ag-header-row-column-group":e.getType()==wn.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return i.setTemplate('<div class="ag-header-row '+n+'" role="row"></div>'),i.ctrl=e,i}return t.prototype.init=function(){var e=this,i={setTransform:function(n){return e.getGui().style.transform=n},setHeight:function(n){return e.getGui().style.height=n},setTop:function(n){return e.getGui().style.top=n},setHeaderCtrls:function(n){return e.setHeaderCtrls(n)},setWidth:function(n){return e.getGui().style.width=n},setAriaRowIndex:function(n){return ow(e.getGui(),n)}};this.ctrl.setComp(i)},t.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([])},t.prototype.setHeaderCtrls=function(e){var i=this;if(!!this.isAlive()){var n=this.headerComps;this.headerComps={},e.forEach(function(l){var u=l.getInstanceId(),c=n[u];delete n[u],c==null&&(c=i.createHeaderComp(l),i.getGui().appendChild(c.getGui())),i.headerComps[u]=c}),We(n,function(l,u){i.getGui().removeChild(u.getGui()),i.destroyBean(u)});var o=this.gridOptionsWrapper.isEnsureDomOrder();if(o){var s=Br(this.headerComps);s.sort(function(l,u){var c=l.getCtrl().getColumnGroupChild().getLeft(),h=u.getCtrl().getColumnGroupChild().getLeft();return c-h});var a=s.map(function(l){return l.getGui()});XC(this.getGui(),a)}}},t.prototype.createHeaderComp=function(e){var i;switch(this.ctrl.getType()){case wn.COLUMN_GROUP:i=new tX(e);break;case wn.FLOATING_FILTER:i=new uY(e);break;default:i=new JK(e);break}return this.createBean(i),i.setParentComponent(this),i},Dx([Ct],t.prototype,"init",null),Dx([Yi],t.prototype,"destroyHeaderCtrls",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var nX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},rX=0,kg=function(r){nX(t,r);function t(e,i){var n=r.call(this)||this;return n.lastFocusEvent=null,n.columnGroupChild=e,n.parentRowCtrl=i,n.instanceId=e.getUniqueId()+"-"+rX++,n}return t.prototype.shouldStopEventPropagation=function(e){var i=this.focusService.getFocusedHeader(),n=i.headerRowIndex,o=i.column;return sP(this.gridOptionsWrapper,e,n,o)},t.prototype.getWrapperHasFocus=function(){var e=this.gridOptionsWrapper.getDocument(),i=e.activeElement;return i===this.eGui},t.prototype.setGui=function(e){this.eGui=e,this.addDomData()},t.prototype.handleKeyDown=function(e){var i=this.getWrapperHasFocus();switch(e.key){case lt.PAGE_DOWN:case lt.PAGE_UP:case lt.PAGE_HOME:case lt.PAGE_END:i&&e.preventDefault()}},t.prototype.addDomData=function(){var e=this,i=t.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsWrapper.setDomData(this.eGui,i,this),this.addDestroyFunc(function(){return e.gridOptionsWrapper.setDomData(e.eGui,i,null)})},t.prototype.getGui=function(){return this.eGui},t.prototype.focus=function(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1},t.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},t.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},t.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.getColumnGroupChild=function(){return this.columnGroupChild},t.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",Tv([b("focusService")],t.prototype,"focusService",void 0),Tv([b("beans")],t.prototype,"beans",void 0),Tv([b("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Oe;(function(r){r.EVERYTHING="group",r.FILTER="filter",r.SORT="sort",r.MAP="map",r.AGGREGATE="aggregate",r.FILTER_AGGREGATES="filter_aggregates",r.PIVOT="pivot",r.NOTHING="nothing"})(Oe||(Oe={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var xe=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function xa(r){var t=r,e=t!=null&&t.getFrameworkComponentInstance!=null;return e?t.getFrameworkComponentInstance():r}var oX=function(){function r(){this.detailGridInfoMap={},this.destroyCalled=!1}return r.prototype.registerOverlayWrapperComp=function(t){this.overlayWrapperComp=t},r.prototype.registerSideBarComp=function(t){this.sideBarComp=t},r.prototype.init=function(){var t=this;switch(this.rowModel.getType()){case H.ROW_MODEL_TYPE_CLIENT_SIDE:this.clientSideRowModel=this.rowModel;break;case H.ROW_MODEL_TYPE_INFINITE:this.infiniteRowModel=this.rowModel;break;case H.ROW_MODEL_TYPE_SERVER_SIDE:this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl()})},r.prototype.__getAlignedGridService=function(){return this.alignedGridsService},r.prototype.__getContext=function(){return this.context},r.prototype.addDetailGridInfo=function(t,e){this.detailGridInfoMap[t]=e},r.prototype.removeDetailGridInfo=function(t){this.detailGridInfoMap[t]=void 0},r.prototype.getDetailGridInfo=function(t){return this.detailGridInfoMap[t]},r.prototype.forEachDetailGridInfo=function(t){var e=0;We(this.detailGridInfoMap,function(i,n){dt(n)&&(t(n,e),e++)})},r.prototype.getDataAsCsv=function(t){if(te.assertRegistered(qt.CsvExportModule,"api.getDataAsCsv"))return this.csvCreator.getDataAsCsv(t)},r.prototype.exportDataAsCsv=function(t){te.assertRegistered(qt.CsvExportModule,"api.exportDataAsCSv")&&this.csvCreator.exportDataAsCsv(t)},r.prototype.getExcelExportMode=function(t){var e=this.gridOptionsWrapper.getDefaultExportParams("excel"),i=Object.assign({exportMode:"xlsx"},e,t);return i.exportMode},r.prototype.getDataAsExcel=function(t){if(!!te.assertRegistered(qt.ExcelExportModule,"api.getDataAsExcel")){var e=this.getExcelExportMode(t);if(this.excelCreator.getFactoryMode(e)===oh.MULTI_SHEET){console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");return}return this.excelCreator.getDataAsExcel(t)}},r.prototype.exportDataAsExcel=function(t){if(!!te.assertRegistered(qt.ExcelExportModule,"api.exportDataAsExcel")){var e=this.getExcelExportMode(t);if(this.excelCreator.getFactoryMode(e)===oh.MULTI_SHEET){console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");return}this.excelCreator.exportDataAsExcel(t)}},r.prototype.getSheetDataForExcel=function(t){if(!!te.assertRegistered(qt.ExcelExportModule,"api.getSheetDataForExcel")){var e=this.getExcelExportMode(t);return this.excelCreator.setFactoryMode(oh.MULTI_SHEET,e),this.excelCreator.getSheetDataForExcel(t)}},r.prototype.getMultipleSheetsAsExcel=function(t){if(te.assertRegistered(qt.ExcelExportModule,"api.getMultipleSheetsAsExcel"))return this.excelCreator.getMultipleSheetsAsExcel(t)},r.prototype.exportMultipleSheetsAsExcel=function(t){if(te.assertRegistered(qt.ExcelExportModule,"api.exportMultipleSheetsAsExcel"))return this.excelCreator.exportMultipleSheetsAsExcel(t)},r.prototype.setEnterpriseDatasource=function(t){console.warn("AG Grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()"),this.setServerSideDatasource(t)},r.prototype.setGridAriaProperty=function(t,e){if(!!t){var i=this.ctrlsService.getGridBodyCtrl().getGui(),n="aria-"+t;e===null?i.removeAttribute(n):i.setAttribute(n,e)}},r.prototype.setServerSideDatasource=function(t){this.serverSideRowModel?this.serverSideRowModel.setDatasource(t):console.warn("AG Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+H.ROW_MODEL_TYPE_SERVER_SIDE+"'")},r.prototype.setCacheBlockSize=function(t){if(!this.serverSideRowModel){console.warn("AG Grid: you can only set cacheBlockSize with gridOptions.rowModelType '"+H.ROW_MODEL_TYPE_SERVER_SIDE+"'");return}this.gridOptionsWrapper.setProperty("cacheBlockSize",t),this.serverSideRowModel.resetRootStore()},r.prototype.setDatasource=function(t){this.gridOptionsWrapper.isRowModelInfinite()?this.rowModel.setDatasource(t):console.warn("AG Grid: you can only use a datasource when gridOptions.rowModelType is '"+H.ROW_MODEL_TYPE_INFINITE+"'")},r.prototype.setViewportDatasource=function(t){this.gridOptionsWrapper.isRowModelViewport()?this.rowModel.setViewportDatasource(t):console.warn("AG Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+H.ROW_MODEL_TYPE_VIEWPORT+"'")},r.prototype.setRowData=function(t){var e=this.immutableService==null;if(e){console.warn("AG Grid: you can only set rowData when using the Client Side Row Model");return}this.immutableService.isActive()?this.immutableService.setRowData(t):(this.selectionService.reset(),this.clientSideRowModel.setRowData(t))},r.prototype.setFloatingTopRowData=function(t){console.warn("AG Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()"),this.setPinnedTopRowData(t)},r.prototype.setFloatingBottomRowData=function(t){console.warn("AG Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()"),this.setPinnedBottomRowData(t)},r.prototype.getFloatingTopRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()"),this.getPinnedTopRowCount()},r.prototype.getFloatingBottomRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()"),this.getPinnedBottomRowCount()},r.prototype.getFloatingTopRow=function(t){return console.warn("AG Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()"),this.getPinnedTopRow(t)},r.prototype.getFloatingBottomRow=function(t){return console.warn("AG Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()"),this.getPinnedBottomRow(t)},r.prototype.setPinnedTopRowData=function(t){this.pinnedRowModel.setPinnedTopRowData(t)},r.prototype.setPinnedBottomRowData=function(t){this.pinnedRowModel.setPinnedBottomRowData(t)},r.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},r.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},r.prototype.getPinnedTopRow=function(t){return this.pinnedRowModel.getPinnedTopRow(t)},r.prototype.getPinnedBottomRow=function(t){return this.pinnedRowModel.getPinnedBottomRow(t)},r.prototype.setColumnDefs=function(t,e){e===void 0&&(e="api"),this.columnModel.setColumnDefs(t,e)},r.prototype.setAutoGroupColumnDef=function(t,e){this.gridOptionsWrapper.setProperty(Et.PROP_AUTO_GROUP_COLUMN_DEF,t,!0)},r.prototype.setDefaultColDef=function(t,e){this.gridOptionsWrapper.setProperty(Et.PROP_DEFAULT_COL_DEF,t,!0)},r.prototype.expireValueCache=function(){this.valueCache.expire()},r.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},r.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},r.prototype.setAlwaysShowHorizontalScroll=function(t){this.gridOptionsWrapper.setProperty("alwaysShowHorizontalScroll",t)},r.prototype.setAlwaysShowVerticalScroll=function(t){this.gridOptionsWrapper.setProperty("alwaysShowVerticalScroll",t)},r.prototype.refreshToolPanel=function(){!this.sideBarComp||this.sideBarComp.refresh()},r.prototype.refreshCells=function(t){if(t===void 0&&(t={}),Array.isArray(t)){console.warn("since AG Grid v11.1, refreshCells() now takes parameters, please see the documentation.");return}this.rowRenderer.refreshCells(t)},r.prototype.flashCells=function(t){t===void 0&&(t={}),this.rowRenderer.flashCells(t)},r.prototype.redrawRows=function(t){t===void 0&&(t={});var e=t?t.rowNodes:void 0;this.rowRenderer.redrawRows(e)},r.prototype.setFunctionsReadOnly=function(t){this.gridOptionsWrapper.setProperty("functionsReadOnly",t)},r.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(t){return t.refresh()})},r.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},r.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},r.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},r.prototype.getModel=function(){return this.rowModel},r.prototype.setRowNodeExpanded=function(t,e){t&&t.setExpanded(e)},r.prototype.onGroupExpandedOrCollapsed=function(t){kt(this.clientSideRowModel)&&console.warn("AG Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model"),dt(t)&&console.warn("AG Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows"),this.clientSideRowModel.refreshModel({step:Oe.MAP})},r.prototype.refreshInMemoryRowModel=function(t){console.warn("AG Grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()"),this.refreshClientSideRowModel(t)},r.prototype.refreshClientSideRowModel=function(t){kt(this.clientSideRowModel)&&console.warn("cannot call refreshClientSideRowModel unless using normal row model");var e=Oe.EVERYTHING,i={everything:Oe.EVERYTHING,group:Oe.EVERYTHING,filter:Oe.FILTER,map:Oe.MAP,aggregate:Oe.AGGREGATE,sort:Oe.SORT,pivot:Oe.PIVOT};if(dt(t)&&(e=i[t]),kt(e)){console.error("AG Grid: invalid step "+t+", available steps are "+Object.keys(i).join(", "));return}var n=!this.gridOptionsWrapper.isSuppressAnimationFrame(),o={step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:n};this.clientSideRowModel.refreshModel(o)},r.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},r.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},r.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},r.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),headerHeight:this.gridOptionsWrapper.getHeaderHeight()}},r.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):console.warn("AG Grid: expandAll only works with Client Side Row Model and Server Side Row Model")},r.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):console.warn("AG Grid: collapseAll only works with Client Side Row Model and Server Side Row Model")},r.prototype.getToolPanelInstance=function(t){if(!this.sideBarComp){console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");return}var e=this.sideBarComp.getToolPanelInstance(t);return xa(e)},r.prototype.addVirtualRowListener=function(t,e,i){typeof t!="string"&&console.warn("AG Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener."),this.addRenderedRowListener(t,e,i)},r.prototype.addRenderedRowListener=function(t,e,i){t==="virtualRowSelected"&&console.warn(`AG Grid: event virtualRowSelected is deprecated, to register for individual row
                selection events, add a listener directly to the row node.`),this.rowRenderer.addRenderedRowListener(t,e,i)},r.prototype.setQuickFilter=function(t){this.filterManager.setQuickFilter(t)},r.prototype.selectIndex=function(t,e,i){console.warn("AG Grid: do not use api for selection, call rowNode.setSelected(value) instead"),i&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.selectIndex(t,e)},r.prototype.deselectIndex=function(t,e){e===void 0&&(e=!1),console.warn("AG Grid: do not use api for selection, call rowNode.setSelected(value) instead"),e&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.deselectIndex(t)},r.prototype.selectNode=function(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1),console.warn("AG Grid: API for selection is deprecated, call rowNode.setSelected(value) instead"),i&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),t.setSelectedParams({newValue:!0,clearSelection:!e})},r.prototype.deselectNode=function(t,e){e===void 0&&(e=!1),console.warn("AG Grid: API for selection is deprecated, call rowNode.setSelected(value) instead"),e&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),t.setSelectedParams({newValue:!1})},r.prototype.selectAll=function(){this.selectionService.selectAllRowNodes()},r.prototype.deselectAll=function(){this.selectionService.deselectAllRowNodes()},r.prototype.selectAllFiltered=function(){this.selectionService.selectAllRowNodes(!0)},r.prototype.deselectAllFiltered=function(){this.selectionService.deselectAllRowNodes(!0)},r.prototype.recomputeAggregates=function(){kt(this.clientSideRowModel)&&console.warn("cannot call recomputeAggregates unless using normal row model"),console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead"),this.clientSideRowModel.refreshModel({step:Oe.AGGREGATE})},r.prototype.sizeColumnsToFit=function(t){this.gridBodyCtrl.sizeColumnsToFit(t)},r.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},r.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},r.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},r.prototype.isNodeSelected=function(t){return console.warn("AG Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead"),t.isSelected()},r.prototype.getSelectedNodesById=function(){return console.error("AG Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead"),null},r.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},r.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},r.prototype.getBestCostNodeSelection=function(){return this.selectionService.getBestCostNodeSelection()},r.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},r.prototype.ensureColIndexVisible=function(t){console.warn("AG Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")},r.prototype.ensureColumnVisible=function(t,e){e===void 0&&(e="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e)},r.prototype.ensureIndexVisible=function(t,e){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e)},r.prototype.ensureNodeVisible=function(t,e){e===void 0&&(e=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e)},r.prototype.forEachLeafNode=function(t){kt(this.clientSideRowModel)&&console.warn("cannot call forEachNode unless using normal row model"),this.clientSideRowModel.forEachLeafNode(t)},r.prototype.forEachNode=function(t){this.rowModel.forEachNode(t)},r.prototype.forEachNodeAfterFilter=function(t){kt(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilter unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilter(t)},r.prototype.forEachNodeAfterFilterAndSort=function(t){kt(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilterAndSort unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)},r.prototype.getFilterInstance=function(t,e){var i=this.getFilterInstanceImpl(t,function(o){if(!!e){var s=xa(o);e(s)}}),n=xa(i);return n},r.prototype.getFilterInstanceImpl=function(t,e){var i=this.columnModel.getPrimaryColumn(t);if(!!i){var n=this.filterManager.getFilterComponent(i,"NO_UI"),o=n&&n.resolveNow(null,function(s){return s});return o?setTimeout(e,0,o):n&&n.then(function(s){e(s)}),o}},r.prototype.destroyFilter=function(t){var e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"filterDestroyed")},r.prototype.getStatusPanel=function(t){if(!!this.statusBarService){var e=this.statusBarService.getStatusPanel(t);return xa(e)}},r.prototype.getColumnDef=function(t){var e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null},r.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},r.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},r.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},r.prototype.setFilterModel=function(t){this.filterManager.setFilterModel(t)},r.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},r.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},r.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},r.prototype.setFocusedCell=function(t,e,i){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:i,forceBrowserFocus:!0})},r.prototype.setSuppressRowDrag=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_SUPPRESS_ROW_DRAG,t)},r.prototype.setSuppressMoveWhenRowDragging=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG,t)},r.prototype.setSuppressRowClickSelection=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_SUPPRESS_ROW_CLICK_SELECTION,t)},r.prototype.addRowDropZone=function(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)},r.prototype.removeRowDropZone=function(t){var e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)},r.prototype.getRowDropZoneParams=function(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)},r.prototype.setHeaderHeight=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_HEADER_HEIGHT,t)},r.prototype.setDomLayout=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_DOM_LAYOUT,t)},r.prototype.setEnableCellTextSelection=function(t){this.gridBodyCtrl.setCellTextSelection(t)},r.prototype.setFillHandleDirection=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_FILL_HANDLE_DIRECTION,t)},r.prototype.setGroupHeaderHeight=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GROUP_HEADER_HEIGHT,t)},r.prototype.setFloatingFiltersHeight=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_FLOATING_FILTERS_HEIGHT,t)},r.prototype.setPivotHeaderHeight=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_PIVOT_HEADER_HEIGHT,t)},r.prototype.setPivotGroupHeaderHeight=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_PIVOT_GROUP_HEADER_HEIGHT,t)},r.prototype.setIsExternalFilterPresent=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_IS_EXTERNAL_FILTER_PRESENT,t)},r.prototype.setDoesExternalFilterPass=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_DOES_EXTERNAL_FILTER_PASS,t)},r.prototype.setNavigateToNextCell=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_NAVIGATE_TO_NEXT_CELL,t)},r.prototype.setTabToNextCell=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_TAB_TO_NEXT_CELL,t)},r.prototype.setTabToNextHeader=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_TAB_TO_NEXT_HEADER,t)},r.prototype.setNavigateToNextHeader=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_NAVIGATE_TO_NEXT_HEADER,t)},r.prototype.setRowGroupPanelShow=function(t){this.gridOptionsWrapper.setProperty("rowGroupPanelShow",t)},r.prototype.setGroupRowAggNodes=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GROUP_ROW_AGG_NODES,t)},r.prototype.setGetGroupRowAgg=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_GROUP_ROW_AGG,t)},r.prototype.setGetBusinessKeyForNode=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_BUSINESS_KEY_FOR_NODE,t)},r.prototype.setGetChildCount=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_CHILD_COUNT,t)},r.prototype.setProcessRowPostCreate=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_PROCESS_ROW_POST_CREATE,t)},r.prototype.setGetRowNodeId=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_ROW_NODE_ID,t)},r.prototype.setGetRowId=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_ROW_ID,t)},r.prototype.setGetRowClass=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_ROW_CLASS,t)},r.prototype.setIsFullWidthCell=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_IS_FULL_WIDTH_CELL,t)},r.prototype.setIsFullWidthRow=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_IS_FULL_WIDTH_ROW,t)},r.prototype.setIsRowSelectable=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_IS_ROW_SELECTABLE,t)},r.prototype.setIsRowMaster=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_IS_ROW_MASTER,t)},r.prototype.setPostSort=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_POST_SORT,t)},r.prototype.setPostSortRows=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_POST_SORT_ROWS,t)},r.prototype.setGetDocument=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_DOCUMENT,t)},r.prototype.setGetContextMenuItems=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_CONTEXT_MENU_ITEMS,t)},r.prototype.setGetMainMenuItems=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_MAIN_MENU_ITEMS,t)},r.prototype.setProcessCellForClipboard=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_PROCESS_CELL_FOR_CLIPBOARD,t)},r.prototype.setSendToClipboard=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_SEND_TO_CLIPBOARD,t)},r.prototype.setProcessCellFromClipboard=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_PROCESS_CELL_FROM_CLIPBOARD,t)},r.prototype.setProcessSecondaryColDef=function(t){console.warn("AG Grid: since version 28.0.x setProcessSecondaryColDef has been renamed, please use setProcessPivotResultColDef instead"),this.setProcessPivotResultColDef(t)},r.prototype.setProcessSecondaryColGroupDef=function(t){console.warn("AG Grid: since version 28.0.x setProcessSecondaryColGroupDef has been renamed, please use setProcessPivotResultColGroupDef instead"),this.setProcessPivotResultColGroupDef(t)},r.prototype.setProcessPivotResultColDef=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_PROCESS_PIVOT_RESULT_COL_DEF,t)},r.prototype.setProcessPivotResultColGroupDef=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_PROCESS_PIVOT_RESULT_COL_GROUP_DEF,t)},r.prototype.setPostProcessPopup=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_POST_PROCESS_POPUP,t)},r.prototype.setDefaultGroupOrderComparator=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_DEFAULT_GROUP_ORDER_COMPARATOR,t)},r.prototype.setInitialGroupOrderComparator=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_INITIAL_GROUP_ORDER_COMPARATOR,t)},r.prototype.setGetChartToolbarItems=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_CHART_TOOLBAR_ITEMS,t)},r.prototype.setPaginationNumberFormatter=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_PAGINATION_NUMBER_FORMATTER,t)},r.prototype.setGetServerSideStoreParams=function(t){this.setGetServerSideGroupLevelParams(t)},r.prototype.setGetServerSideGroupLevelParams=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_SERVER_SIDE_GROUP_PARAMS,t)},r.prototype.setIsServerSideGroupOpenByDefault=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT,t)},r.prototype.setIsApplyServerSideTransaction=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION,t)},r.prototype.setIsServerSideGroup=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_IS_SERVER_SIDE_GROUP,t)},r.prototype.setGetServerSideGroupKey=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_SERVER_SIDE_GROUP_KEY,t)},r.prototype.setGetRowStyle=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_ROW_STYLE,t)},r.prototype.setGetRowHeight=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GET_ROW_HEIGHT,t)},r.prototype.isSideBarVisible=function(){return this.sideBarComp?this.sideBarComp.isDisplayed():!1},r.prototype.setSideBarVisible=function(t){if(!this.sideBarComp){t&&console.warn("AG Grid: sideBar is not loaded");return}this.sideBarComp.setDisplayed(t)},r.prototype.setSideBarPosition=function(t){if(!this.sideBarComp){console.warn("AG Grid: sideBar is not loaded");return}this.sideBarComp.setSideBarPosition(t)},r.prototype.openToolPanel=function(t){if(!this.sideBarComp){console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");return}this.sideBarComp.openToolPanel(t)},r.prototype.closeToolPanel=function(){if(!this.sideBarComp){console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");return}this.sideBarComp.close()},r.prototype.getOpenedToolPanel=function(){return this.sideBarComp?this.sideBarComp.openedItem():null},r.prototype.getSideBar=function(){return this.gridOptionsWrapper.getSideBar()},r.prototype.setSideBar=function(t){this.gridOptionsWrapper.setProperty("sideBar",xT.parse(t))},r.prototype.setSuppressClipboardPaste=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_SUPPRESS_CLIPBOARD_PASTE,t)},r.prototype.isToolPanelShowing=function(){return this.sideBarComp.isToolPanelShowing()},r.prototype.doLayout=function(){var t="AG Grid - since version 25.1, doLayout was taken out, as it's not needed. The grid responds to grid size changes automatically";ce(function(){return console.warn(t)},"doLayoutDeprecated")},r.prototype.resetRowHeights=function(){if(dt(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}},r.prototype.setGroupRemoveSingleChildren=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GROUP_REMOVE_SINGLE_CHILDREN,t)},r.prototype.setGroupRemoveLowestSingleChildren=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,t)},r.prototype.setGroupDisplayType=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_GROUP_DISPLAY_TYPE,t)},r.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},r.prototype.getValue=function(t,e){var i=this.columnModel.getPrimaryColumn(t);return kt(i)&&(i=this.columnModel.getGridColumn(t)),kt(i)?null:this.valueService.getValue(i,e)},r.prototype.addEventListener=function(t,e){var i=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(t,e,i)},r.prototype.addGlobalListener=function(t){var e=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(t,e)},r.prototype.removeEventListener=function(t,e){var i=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeEventListener(t,e,i)},r.prototype.removeGlobalListener=function(t){var e=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeGlobalListener(t,e)},r.prototype.dispatchEvent=function(t){this.eventService.dispatchEvent(t)},r.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0;var t=this.ctrlsService.getGridCtrl();t&&t.destroyGridUi(),this.context.destroy()}},r.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(uT.bind(window,this,"Grid API"),100)},r.prototype.warnIfDestroyed=function(t){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+t+" was called on a grid that was destroyed."),this.destroyCalled},r.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.rowModel.forEachNode(function(t){return t.quickFilterAggregateText=null})},r.prototype.getRangeSelections=function(){return console.warn(`AG Grid: in v20.1.x, api.getRangeSelections() is gone, please use getCellRanges() instead.
        We had to change how cell selections works a small bit to allow charting to integrate. The return type of
        getCellRanges() is a bit different, please check the AG Grid documentation.`),null},r.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),null)},r.prototype.camelCaseToHumanReadable=function(t){return BC(t)},r.prototype.addRangeSelection=function(t){console.warn("AG Grid: As of version 21.x, range selection changed slightly to allow charting integration. Please call api.addCellRange() instead of api.addRangeSelection()")},r.prototype.addCellRange=function(t){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.addCellRange(t)},r.prototype.clearRangeSelection=function(){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.removeAllCellRanges()},r.prototype.undoCellEditing=function(){this.undoRedoService.undo()},r.prototype.redoCellEditing=function(){this.undoRedoService.redo()},r.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},r.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},r.prototype.getChartModels=function(){if(te.assertRegistered(qt.RangeSelectionModule,"api.getChartModels")&&te.assertRegistered(qt.GridChartsModule,"api.getChartModels"))return this.chartService.getChartModels()},r.prototype.getChartRef=function(t){if(te.assertRegistered(qt.RangeSelectionModule,"api.getChartRef")&&te.assertRegistered(qt.GridChartsModule,"api.getChartRef"))return this.chartService.getChartRef(t)},r.prototype.getChartImageDataURL=function(t){if(te.assertRegistered(qt.GridChartsModule,"api.getChartImageDataURL"))return this.chartService.getChartImageDataURL(t)},r.prototype.downloadChart=function(t){if(te.assertRegistered(qt.GridChartsModule,"api.downloadChart"))return this.chartService.downloadChart(t)},r.prototype.openChartToolPanel=function(t){if(te.assertRegistered(qt.GridChartsModule,"api.openChartToolPanel"))return this.chartService.openChartToolPanel(t)},r.prototype.closeChartToolPanel=function(t){if(te.assertRegistered(qt.GridChartsModule,"api.closeChartToolPanel"))return this.chartService.closeChartToolPanel(t.chartId)},r.prototype.createRangeChart=function(t){if(te.assertRegistered(qt.RangeSelectionModule,"api.createRangeChart")&&te.assertRegistered(qt.GridChartsModule,"api.createRangeChart"))return this.chartService.createRangeChart(t)},r.prototype.createCrossFilterChart=function(t){if(te.assertRegistered(qt.RangeSelectionModule,"api.createCrossFilterChart")&&te.assertRegistered(qt.GridChartsModule,"api.createCrossFilterChart"))return this.chartService.createCrossFilterChart(t)},r.prototype.restoreChart=function(t,e){if(te.assertRegistered(qt.RangeSelectionModule,"api.restoreChart")&&te.assertRegistered(qt.GridChartsModule,"api.restoreChart"))return this.chartService.restoreChart(t,e)},r.prototype.createPivotChart=function(t){if(te.assertRegistered(qt.RangeSelectionModule,"api.createPivotChart")&&te.assertRegistered(qt.GridChartsModule,"api.createPivotChart"))return this.chartService.createPivotChart(t)},r.prototype.copyToClipboard=function(t){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copyToClipboard(t)},r.prototype.copySelectedRowsToClipboard=function(t){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRowsToClipboard(t)},r.prototype.copySelectedRangeToClipboard=function(t){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRangeToClipboard(t)},r.prototype.copySelectedRangeDown=function(){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copyRangeDown()},r.prototype.showColumnMenuAfterButtonClick=function(t,e){var i=this.columnModel.getGridColumn(t);this.menuFactory.showMenuAfterButtonClick(i,e,"columnMenu")},r.prototype.showColumnMenuAfterMouseClick=function(t,e){var i=this.columnModel.getGridColumn(t);if(i||(i=this.columnModel.getPrimaryColumn(t)),!i){console.error("AG Grid: column '"+t+"' not found");return}this.menuFactory.showMenuAfterMouseEvent(i,e)},r.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},r.prototype.setPopupParent=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_POPUP_PARENT,t)},r.prototype.tabToNextCell=function(t){return this.navigationService.tabToNextCell(!1,t)},r.prototype.tabToPreviousCell=function(t){return this.navigationService.tabToNextCell(!0,t)},r.prototype.getCellRendererInstances=function(t){t===void 0&&(t={});var e=this.rowRenderer.getCellRendererInstances(t),i=e.map(xa);return i},r.prototype.getCellEditorInstances=function(t){t===void 0&&(t={});var e=this.rowRenderer.getCellEditorInstances(t),i=e.map(xa);return i},r.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},r.prototype.stopEditing=function(t){t===void 0&&(t=!1),this.rowRenderer.stopEditing(t)},r.prototype.startEditingCell=function(t){var e=this.columnModel.getGridColumn(t.colKey);if(!e){console.warn("AG Grid: no column found for "+t.colKey);return}var i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e},n=t.rowPinned==null;n&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t.rowIndex);var o=this.navigationService.getCellByPosition(i);!o||o.startRowOrCellEdit(t.key,t.charPress)},r.prototype.addAggFunc=function(t,e){this.aggFuncService&&this.aggFuncService.addAggFunc(t,e)},r.prototype.addAggFuncs=function(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)},r.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},r.prototype.applyServerSideTransaction=function(t){if(!this.serverSideTransactionManager){console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.");return}return this.serverSideTransactionManager.applyTransaction(t)},r.prototype.applyServerSideTransactionAsync=function(t,e){if(!this.serverSideTransactionManager){console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.");return}return this.serverSideTransactionManager.applyTransactionAsync(t,e)},r.prototype.retryServerSideLoads=function(){if(!this.serverSideRowModel){console.warn("AG Grid: API retryServerSideLoads() can only be used when using Server-Side Row Model.");return}this.serverSideRowModel.retryLoads()},r.prototype.flushServerSideAsyncTransactions=function(){if(!this.serverSideTransactionManager){console.warn("AG Grid: Cannot flush Server Side Transaction if not using the Server Side Row Model.");return}return this.serverSideTransactionManager.flushAsyncTransactions()},r.prototype.applyTransaction=function(t){if(!this.clientSideRowModel){console.error("AG Grid: updateRowData() only works with ClientSideRowModel. Working with InfiniteRowModel was deprecated in v23.1 and removed in v24.1");return}var e=this.clientSideRowModel.updateRowData(t);return this.rowRenderer.refreshFullWidthRows(e.update),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells(),e},r.prototype.setDeltaSort=function(t){this.gridOptionsWrapper.setProperty("deltaSort",t)},r.prototype.updateRowData=function(t){var e="AG Grid: as of v23.1, grid API updateRowData(transaction) is now called applyTransaction(transaction). updateRowData is deprecated and will be removed in a future major release.";return ce(function(){return console.warn(e)},"updateRowData deprecated"),this.applyTransaction(t)},r.prototype.applyTransactionAsync=function(t,e){if(!this.clientSideRowModel){console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.");return}this.clientSideRowModel.batchUpdateRowData(t,e)},r.prototype.flushAsyncTransactions=function(){if(!this.clientSideRowModel){console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.");return}this.clientSideRowModel.flushAsyncTransactions()},r.prototype.batchUpdateRowData=function(t,e){var i="AG Grid: as of v23.1, grid API batchUpdateRowData(transaction, callback) is now called applyTransactionAsync(transaction, callback). batchUpdateRowData is deprecated and will be removed in a future major release.";ce(function(){return console.warn(i)},"batchUpdateRowData deprecated"),this.applyTransactionAsync(t,e)},r.prototype.insertItemsAtIndex=function(t,e,i){console.warn("AG Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:e,addIndex:t,update:null,remove:null})},r.prototype.removeItems=function(t,e){console.warn("AG Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");var i=t.map(function(n){return n.data});this.updateRowData({add:null,addIndex:null,update:null,remove:i})},r.prototype.addItems=function(t,e){console.warn("AG Grid: addItems() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:t,addIndex:null,update:null,remove:null})},r.prototype.refreshVirtualPageCache=function(){console.warn("AG Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},r.prototype.refreshInfinitePageCache=function(){console.warn("AG Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},r.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():console.warn("AG Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")},r.prototype.purgeVirtualPageCache=function(){console.warn("AG Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfinitePageCache()},r.prototype.purgeInfinitePageCache=function(){console.warn("AG Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfiniteCache()},r.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():console.warn("AG Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")},r.prototype.purgeEnterpriseCache=function(t){console.warn("AG Grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.refreshServerSide({purge: true})"),this.purgeServerSideCache(t)},r.prototype.purgeServerSideCache=function(t){t===void 0&&(t=[]),this.serverSideRowModel?(console.warn("AG Grid: since v25.0, api.purgeServerSideCache is deprecated. Please use api.refreshServerSide({purge: true}) instead."),this.refreshServerSide({route:t,purge:!0})):console.warn("AG Grid: api.purgeServerSideCache is only available when rowModelType='serverSide'.")},r.prototype.refreshServerSide=function(t){if(!this.serverSideRowModel){console.warn("AG Grid: api.refreshServerSide is only available when rowModelType='serverSide'.");return}this.serverSideRowModel.refreshStore(t)},r.prototype.refreshServerSideStore=function(t){var e="AG Grid: Grid API refreshServerSideStore() was renamed to refreshServerSide() in v28.0";return ce(function(){return console.warn(e)},"refreshServerSideStore-renamed"),this.refreshServerSide(t)},r.prototype.getServerSideStoreState=function(){var t="AG Grid: Grid API getServerSideStoreState() was renamed to getServerSideGroupLevelState() in v28.0";return ce(function(){return console.warn(t)},"getServerSideStoreState-renamed"),this.getServerSideGroupLevelState()},r.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(console.warn("AG Grid: api.getServerSideGroupLevelState is only available when rowModelType='serverSide'."),[])},r.prototype.getVirtualRowCount=function(){return console.warn("AG Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead"),this.getInfiniteRowCount()},r.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();console.warn("AG Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")},r.prototype.isMaxRowFound=function(){return console.warn("AG Grid: api.isMaxRowFound is deprecated, please use api.isLastRowIndexKnown()"),this.isLastRowIndexKnown()},r.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();console.warn("AG Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")},r.prototype.setVirtualRowCount=function(t,e){console.warn("AG Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead"),this.setRowCount(t,e)},r.prototype.setInfiniteRowCount=function(t,e){console.warn("AG Grid: setInfiniteRowCount() is now called setRowCount(), please call setRowCount() instead"),this.setRowCount(t,e)},r.prototype.setRowCount=function(t,e){this.infiniteRowModel?this.infiniteRowModel.setRowCount(t,e):console.warn("AG Grid: api.setRowCount is only available for Infinite Row Model.")},r.prototype.getVirtualPageState=function(){return console.warn("AG Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},r.prototype.getInfinitePageState=function(){return console.warn("AG Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},r.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},r.prototype.checkGridSize=function(){console.warn("In AG Grid v25.2.0, checkGridSize() was removed, as it was legacy and didn't do anything useful.")},r.prototype.getFirstRenderedRow=function(){return console.warn("In AG Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()"),this.getFirstDisplayedRow()},r.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},r.prototype.getLastRenderedRow=function(){return console.warn("in AG Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()"),this.getLastDisplayedRow()},r.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},r.prototype.getDisplayedRowAtIndex=function(t){return this.rowModel.getRow(t)},r.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},r.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},r.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},r.prototype.paginationSetPageSize=function(t){this.gridOptionsWrapper.setProperty("paginationPageSize",t)},r.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},r.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},r.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},r.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},r.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},r.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},r.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},r.prototype.paginationGoToPage=function(t){this.paginationProxy.goToPage(t)},r.prototype.setRowClass=function(t){this.gridOptionsWrapper.setProperty(Et.PROP_ROW_CLASS,t)},xe([Ae("immutableService")],r.prototype,"immutableService",void 0),xe([Ae("csvCreator")],r.prototype,"csvCreator",void 0),xe([Ae("excelCreator")],r.prototype,"excelCreator",void 0),xe([b("rowRenderer")],r.prototype,"rowRenderer",void 0),xe([b("navigationService")],r.prototype,"navigationService",void 0),xe([b("filterManager")],r.prototype,"filterManager",void 0),xe([b("columnModel")],r.prototype,"columnModel",void 0),xe([b("selectionService")],r.prototype,"selectionService",void 0),xe([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),xe([b("valueService")],r.prototype,"valueService",void 0),xe([b("alignedGridsService")],r.prototype,"alignedGridsService",void 0),xe([b("eventService")],r.prototype,"eventService",void 0),xe([b("pinnedRowModel")],r.prototype,"pinnedRowModel",void 0),xe([b("context")],r.prototype,"context",void 0),xe([b("rowModel")],r.prototype,"rowModel",void 0),xe([b("sortController")],r.prototype,"sortController",void 0),xe([b("paginationProxy")],r.prototype,"paginationProxy",void 0),xe([b("focusService")],r.prototype,"focusService",void 0),xe([b("dragAndDropService")],r.prototype,"dragAndDropService",void 0),xe([Ae("rangeService")],r.prototype,"rangeService",void 0),xe([Ae("clipboardService")],r.prototype,"clipboardService",void 0),xe([Ae("aggFuncService")],r.prototype,"aggFuncService",void 0),xe([b("menuFactory")],r.prototype,"menuFactory",void 0),xe([Ae("contextMenuFactory")],r.prototype,"contextMenuFactory",void 0),xe([b("valueCache")],r.prototype,"valueCache",void 0),xe([b("animationFrameService")],r.prototype,"animationFrameService",void 0),xe([Ae("statusBarService")],r.prototype,"statusBarService",void 0),xe([Ae("chartService")],r.prototype,"chartService",void 0),xe([Ae("undoRedoService")],r.prototype,"undoRedoService",void 0),xe([Ae("rowNodeBlockLoader")],r.prototype,"rowNodeBlockLoader",void 0),xe([Ae("ssrmTransactionManager")],r.prototype,"serverSideTransactionManager",void 0),xe([b("ctrlsService")],r.prototype,"ctrlsService",void 0),xe([Ae("frameworkComponentWrapper")],r.prototype,"frameworkComponentWrapper",void 0),xe([Ct],r.prototype,"init",null),xe([Yi],r.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),r=xe([Dt("gridApi")],r),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var sX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),aX=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},vw=function(r){sX(t,r);function t(e,i,n,o){var s=r.call(this)||this;return s.columnOrGroup=e,s.eCell=i,s.ariaEl=s.eCell.querySelector("[role=columnheader]")||s.eCell,s.colsSpanning=o,s.beans=n,s}return t.prototype.setColsSpanning=function(e){this.colsSpanning=e,this.onLeftChanged()},t.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?Ue(this.colsSpanning):this.columnOrGroup},t.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,me.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,Et.PROP_DOM_LAYOUT,this.onLeftChanged.bind(this))},t.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation(),i=dt(this.columnOrGroup.getOldLeft()),n=this.beans.columnAnimationService.isActive()&&i&&!e;n?this.animateInLeft():this.onLeftChanged()},t.prototype.animateInLeft=function(){var e=this,i=this.getColumnOrGroup(),n=i.getLeft(),o=i.getOldLeft(),s=this.modifyLeftForPrintLayout(i,o),a=this.modifyLeftForPrintLayout(i,n);this.setLeft(s),this.actualLeft=a,this.beans.columnAnimationService.executeNextVMTurn(function(){e.actualLeft===a&&e.setLeft(a)})},t.prototype.onLeftChanged=function(){var e=this.getColumnOrGroup(),i=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,i),this.setLeft(this.actualLeft)},t.prototype.modifyLeftForPrintLayout=function(e,i){var n=this.beans.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_PRINT;if(!n||e.getPinned()===H.PINNED_LEFT)return i;var o=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()===H.PINNED_RIGHT){var s=this.beans.columnModel.getBodyContainerWidth();return o+s+i}return o+i},t.prototype.setLeft=function(e){dt(e)&&(this.eCell.style.left=e+"px");var i;if(this.columnOrGroup instanceof me)i=this.columnOrGroup;else{var n=this.columnOrGroup,o=n.getLeafColumns();if(!o.length)return;o.length>1&&tP(this.ariaEl,o.length),i=o[0]}var s=this.beans.columnModel.getAriaColumnIndex(i);sw(this.ariaEl,s)},aX([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var lX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Lx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},yw=function(r){lX(t,r);function t(e,i){var n=r.call(this)||this;return n.columns=e,n.element=i,n}return t.prototype.postConstruct=function(){this.gridOptionsWrapper.isColumnHoverHighlight()&&this.addMouseHoverListeners()},t.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},t.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},t.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},Lx([b("columnHoverService")],t.prototype,"columnHoverService",void 0),Lx([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var uX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Pv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},cX=function(r){uX(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.column=e,n}return t.prototype.setComp=function(e,i,n,o){r.prototype.setGui.call(this,i),this.comp=e,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=o;var s=this.column.getColDef(),a=!!s.filter||!!s.filterFramework,l=!!s.floatingFilter;this.active=a&&l,this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))},t.prototype.setupUi=function(){if(this.comp.addOrRemoveButtonWrapperCssClass("ag-hidden",!this.active||this.suppressFilterButton),!!this.active){this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton);var e=_i("filter",this.gridOptionsWrapper,this.column);e&&this.eButtonShowMainFilter.appendChild(e)}},t.prototype.setupFocus=function(){this.createManagedBean(new aa(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},t.prototype.onTabKeyDown=function(e){var i=this.gridOptionsWrapper.getDocument(),n=i.activeElement,o=n===this.eGui;if(!o){var s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),s.focus();return}var a=this.findNextColumnWithFloatingFilter(e.shiftKey);!a||this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:a},event:e})&&e.preventDefault()}},t.prototype.findNextColumnWithFloatingFilter=function(e){var i=this.beans.columnModel,n=this.column;do if(n=e?i.getDisplayedColBefore(n):i.getDisplayedColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e);var i=this.getWrapperHasFocus();switch(e.key){case lt.UP:case lt.DOWN:i||e.preventDefault();case lt.LEFT:case lt.RIGHT:if(i)return;e.stopPropagation();case lt.ENTER:i&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case lt.ESCAPE:i||this.eGui.focus()}},t.prototype.onFocusIn=function(e){var i=this.eGui.contains(e.relatedTarget);if(!i){var n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),o=!!e.relatedTarget&&Ba(e.relatedTarget,"ag-floating-filter");if(n&&o&&e.target===this.eGui){var s=this.lastFocusEvent,a=!!(s&&s.key===lt.TAB);if(s&&a){var l=s.shiftKey;this.focusService.focusInto(this.eGui,l)}}var u=this.getRowIndex();this.beans.focusService.setFocusedHeader(u,this.column)}},t.prototype.setupHover=function(){var e=this;this.createManagedBean(new yw([this.column],this.eGui));var i=function(){if(!!e.gridOptionsWrapper.isColumnHoverHighlight()){var n=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",n)}};this.addManagedListener(this.eventService,O.EVENT_COLUMN_HOVER_CHANGED,i),i()},t.prototype.setupLeft=function(){var e=new vw(this.column,this.eGui,this.beans);this.createManagedBean(e)},t.prototype.setupUserComp=function(){var e=this;if(!!this.active){var i=this.column.getColDef(),n=this.filterManager.createFilterParams(this.column,i),o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,d_,n),s=this.userComponentFactory.getDefaultFloatingFilterType(i);s==null&&(s="agReadOnlyFloatingFilter");var a={column:this.column,filterParams:o,currentParentModel:function(){return e.currentParentModel()},parentFilterInstance:function(u){return e.parentFilterInstance(u)},showParentFilter:function(){return e.showParentFilter()},suppressFilterButton:!1};this.suppressFilterButton=i.floatingFilterComponentParams?!!i.floatingFilterComponentParams.suppressFilterButton:!1;var l=this.userComponentFactory.getFloatingFilterCompDetails(i,a,s);l&&this.comp.setCompDetails(l)}},t.prototype.currentParentModel=function(){var e=this.getFilterComponent(!1);return e?e.resolveNow(null,function(i){return i&&i.getModel()}):null},t.prototype.getFilterComponent=function(e){return e===void 0&&(e=!0),this.filterManager.getFilterComponent(this.column,"NO_UI",e)},t.prototype.parentFilterInstance=function(e){var i=this.getFilterComponent();i!=null&&i.then(function(n){e(xa(n))})},t.prototype.showParentFilter=function(){var e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,e,"floatingFilter","filterMenuTab",["filterMenuTab"])},t.prototype.setupSyncWithFilter=function(){var e=this;if(!!this.active){var i=function(n){var o=e.comp.getFloatingFilterComp();if(!!o){var s=e.currentParentModel();o.then(function(a){a&&a.onParentModelChanged(s,n)})}};this.addManagedListener(this.column,me.EVENT_FILTER_CHANGED,i),this.filterManager.isFilterActive(this.column)&&i(null)}},t.prototype.setupWidth=function(){var e=this,i=function(){var n=e.column.getActualWidth()+"px";e.comp.setWidth(n)};this.addManagedListener(this.column,me.EVENT_WIDTH_CHANGED,i),i()},Pv([b("filterManager")],t.prototype,"filterManager",void 0),Pv([b("columnHoverService")],t.prototype,"columnHoverService",void 0),Pv([b("menuFactory")],t.prototype,"menuFactory",void 0),t}(kg);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ov=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dX=function(r){hX(t,r);function t(e,i,n,o,s){var a=r.call(this)||this;return a.pinned=e,a.column=i,a.eResize=n,a.comp=o,a.ctrl=s,a}return t.prototype.postConstruct=function(){var e=this,i=this.column.getColDef(),n=[],o,s,a=function(){if(Ke(e.eResize,o),!!o){var c=e.horizontalResizeService.addResizeBar({eResizeBar:e.eResize,onResizeStart:e.onResizeStart.bind(e),onResizing:e.onResizing.bind(e,!1),onResizeEnd:e.onResizing.bind(e,!0)});if(n.push(c),s){var h=e.gridOptionsWrapper.isSkipHeaderOnAutoSize(),d=function(){e.columnModel.autoSizeColumn(e.column,h,"uiColumnResized")};e.eResize.addEventListener("dblclick",d);var p=new Yn(e.eResize);p.addEventListener(Yn.EVENT_DOUBLE_TAP,d),e.addDestroyFunc(function(){e.eResize.removeEventListener("dblclick",d),p.removeEventListener(Yn.EVENT_DOUBLE_TAP,d),p.destroy()})}}},l=function(){n.forEach(function(c){return c()}),n.length=0},u=function(){var c=e.column.isResizable(),h=!e.gridOptionsWrapper.isSuppressAutoSize()&&!i.suppressAutoSize,d=c!==o||h!==s;d&&(o=c,s=h,l(),a())};u(),this.addDestroyFunc(l),this.ctrl.addRefreshFunction(u)},t.prototype.onResizing=function(e,i){var n=this.normaliseResizeAmount(i),o=[{key:this.column,newWidth:this.resizeStartWidth+n}];this.columnModel.setColumnWidths(o,this.resizeWithShiftKey,e,"uiColumnDragged"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},t.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},t.prototype.normaliseResizeAmount=function(e){var i=e,n=this.pinned!==H.PINNED_LEFT,o=this.pinned===H.PINNED_RIGHT;return this.gridOptionsWrapper.isEnableRtl()?n&&(i*=-1):o&&(i*=-1),i},Ov([b("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),Ov([b("columnModel")],t.prototype,"columnModel",void 0),Ov([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ih=function(r){pX(t,r);function t(e,i,n){i===void 0&&(i="ag-checkbox"),n===void 0&&(n="checkbox");var o=r.call(this,e,i,n)||this;return o.labelAlignment="right",o.selected=!1,o.readOnly=!1,o.passive=!1,o}return t.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},t.prototype.getNextValue=function(){return this.selected===void 0?!0:!this.selected},t.prototype.setPassive=function(e){this.passive=e},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.setReadOnly=function(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e},t.prototype.setDisabled=function(e){return this.eWrapper.classList.toggle("ag-disabled",e),r.prototype.setDisabled.call(this,e)},t.prototype.toggle=function(){if(!this.eInput.disabled){var e=this.isSelected(),i=this.getNextValue();this.passive?this.dispatchChange(i,e):this.setValue(i)}},t.prototype.getValue=function(){return this.isSelected()},t.prototype.setValue=function(e,i){return this.refreshSelectedClass(e),this.setSelected(e,i),this},t.prototype.setName=function(e){var i=this.getInputElement();return i.name=e,this},t.prototype.isSelected=function(){return this.selected},t.prototype.setSelected=function(e,i){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,i||this.dispatchChange(this.selected,this.previousValue))},t.prototype.dispatchChange=function(e,i,n){this.dispatchEvent({type:t.EVENT_CHANGED,selected:e,previousValue:i,event:n});var o=this.getInputElement(),s={type:O.EVENT_CHECKBOX_CHANGED,id:o.id,name:o.name,selected:e,previousValue:i};this.eventService.dispatchEvent(s)},t.prototype.onCheckboxClick=function(e){if(!(this.passive||this.eInput.disabled)){var i=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,i,e)}},t.prototype.refreshSelectedClass=function(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)},t}($o);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var fX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),vp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gX=function(r){fX(t,r);function t(e){var i=r.call(this)||this;i.cbSelectAllVisible=!1,i.processingEventFromCheckbox=!1,i.column=e;var n=e.getColDef();return i.filteredOnly=n?!!n.headerCheckboxSelectionFilteredOnly:!1,i}return t.prototype.onSpaceKeyPressed=function(e){var i=this.cbSelectAll,n=this.gridOptionsWrapper.getDocument();i.isDisplayed()&&!i.getGui().contains(n.activeElement)&&(e.preventDefault(),i.setValue(!i.getValue()))},t.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},t.prototype.setComp=function(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Ih),this.cbSelectAll.addCssClass("ag-header-select-all"),an(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,O.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,O.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,Ih.EVENT_CHANGED,this.onCbSelectAll.bind(this)),iw(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},t.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType(),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},t.prototype.onModelChanged=function(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()},t.prototype.onSelectionChanged=function(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()},t.prototype.getNextCheckboxState=function(e){return e.selected===0&&e.notSelected===0?!1:e.selected>0&&e.notSelected>0?null:e.selected>0},t.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var e=this.getSelectionCount(),i=this.getNextCheckboxState(e);this.cbSelectAll.setValue(i),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},t.prototype.refreshSelectAllLabel=function(){if(!this.cbSelectAllVisible)this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(null);else{var e=this.gridOptionsWrapper.getLocaleTextFunc(),i=this.cbSelectAll.getValue(),n=i?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),o=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.headerCellCtrl.setAriaDescriptionProperty("selectAll",o+" ("+n+")"),this.cbSelectAll.setInputAriaLabel(o+" ("+n+")")}this.headerCellCtrl.refreshAriaDescription()},t.prototype.getSelectionCount=function(){var e=this,i=0,n=0,o=function(s){e.gridOptionsWrapper.isGroupSelectsChildren()&&s.group||(s.isSelected()?i++:s.selectable&&n++)};return this.filteredOnly?this.gridApi.forEachNodeAfterFilter(o):this.gridApi.forEachNode(o),{notSelected:n,selected:i}},t.prototype.checkRightRowModelType=function(){var e=this.rowModel.getType(),i=e===H.ROW_MODEL_TYPE_CLIENT_SIDE;i||console.warn("AG Grid: selectAllCheckbox is only available if using normal row model, you are using "+e)},t.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&!!this.cbSelectAllVisible){var e=this.cbSelectAll.getValue();e?this.selectionService.selectAllRowNodes(this.filteredOnly):this.selectionService.deselectAllRowNodes(this.filteredOnly)}},t.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){var i=e,n={column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsWrapper.getContext()};e=i(n)}return e?this.gridOptionsWrapper.isRowModelServerSide()?(console.warn("AG Grid: headerCheckboxSelection is not supported for Server Side Row Model"),!1):this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("AG Grid: headerCheckboxSelection is not supported for Infinite Row Model"),!1):this.gridOptionsWrapper.isRowModelViewport()?(console.warn("AG Grid: headerCheckboxSelection is not supported for Viewport Row Model"),!1):!0:!1},vp([b("gridApi")],t.prototype,"gridApi",void 0),vp([b("columnApi")],t.prototype,"columnApi",void 0),vp([b("rowModel")],t.prototype,"rowModel",void 0),vp([b("selectionService")],t.prototype,"selectionService",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var mX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Io=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},vX=function(r){mX(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.refreshFunctions=[],n.userHeaderClasses=new Set,n.ariaDescriptionProperties=new Map,n.column=e,n}return t.prototype.setComp=function(e,i,n,o){var s=this;r.prototype.setGui.call(this,i),this.comp=e,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.setupAutoHeight(o),this.addColumnHoverListener(),this.setupFilterCss(),this.setupColId(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new dX(this.getPinned(),this.column,n,e,this)),this.createManagedBean(new yw([this.column],i)),this.createManagedBean(new vw(this.column,i,this.beans)),this.createManagedBean(new aa(i,{shouldStopEventPropagation:function(a){return s.shouldStopEventPropagation(a)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.column,me.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this))},t.prototype.setupUserComp=function(){var e=this.lookupUserCompDetails();this.setCompDetails(e)},t.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)},t.prototype.lookupUserCompDetails=function(){var e=this.createParams(),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,e)},t.prototype.createParams=function(){var e=this,i=this.column.getColDef(),n={column:this.column,displayName:this.displayName,enableSorting:i.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(o){e.gridApi.showColumnMenuAfterButtonClick(e.column,o)},progressSort:function(o){e.sortController.progressSort(e.column,!!o,"uiColumnSorted")},setSort:function(o,s){e.sortController.setSortForColumn(e.column,o,!!s,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext(),eGridHeader:this.getGui()};return n},t.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new gX(this.column)),this.selectAllFeature.setComp(this)},t.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e),e.key===lt.SPACE&&this.selectAllFeature.onSpaceKeyPressed(e),e.key===lt.ENTER&&this.onEnterKeyPressed(e)},t.prototype.onEnterKeyPressed=function(e){var i=this.comp.getUserCompInstance();if(!!i){if(e.ctrlKey||e.metaKey)this.menuEnabled&&i.showMenu&&(e.preventDefault(),i.showMenu());else if(this.sortable){var n=e.shiftKey;this.sortController.progressSort(this.column,n,"uiColumnSorted")}}},t.prototype.isMenuEnabled=function(){return this.menuEnabled},t.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var i=this.getRowIndex();this.focusService.setFocusedHeader(i,this.column)}this.setActiveHeader(!0)},t.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},t.prototype.setupTooltip=function(){var e=this,i={getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getGui:function(){return e.eGui},getLocation:function(){return"header"},getTooltipValue:function(){var o=e.column.getColDef().headerTooltip;return o}},n=this.createManagedBean(new gw(i,this.beans));n.setComp(this.comp),this.refreshFunctions.push(function(){return n.refreshToolTip()})},t.prototype.setupClassesFromColDef=function(){var e=this,i=function(){var n=e.column.getColDef(),o=e.gridOptionsWrapper,s=xP.getHeaderClassesFromColDef(n,o,e.column,null),a=e.userHeaderClasses;e.userHeaderClasses=new Set(s),s.forEach(function(l){a.has(l)?a.delete(l):e.comp.addOrRemoveCssClass(l,!0)}),a.forEach(function(l){return e.comp.addOrRemoveCssClass(l,!1)})};this.refreshFunctions.push(i),i()},t.prototype.setDragSource=function(e){var i=this;if(this.dragSourceElement=e,this.removeDragSource(),!!e&&!!this.draggable){var n=!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns();this.moveDragSource={type:Sn.HeaderCell,eElement:e,defaultIconName:n?ji.ICON_HIDE:ji.ICON_NOT_ALLOWED,getDragItem:function(){return i.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){return i.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return i.column.setMoving(!1,"uiColumnMoved")},onGridEnter:function(o){var s,a;if(n){var l=((a=(s=o)===null||s===void 0?void 0:s.columns)===null||a===void 0?void 0:a.filter(function(u){return!u.getColDef().lockVisible}))||[];i.columnModel.setColumnsVisible(l,!0,"uiColumnMoved")}},onGridExit:function(o){var s,a;if(n){var l=((a=(s=o)===null||s===void 0?void 0:s.columns)===null||a===void 0?void 0:a.filter(function(u){return!u.getColDef().lockVisible}))||[];i.columnModel.setColumnsVisible(l,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},t.prototype.onColDefChanged=function(){this.refresh()},t.prototype.updateState=function(){var e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},t.prototype.addRefreshFunction=function(e){this.refreshFunctions.push(e)},t.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(function(e){return e()})},t.prototype.refreshHeaderComp=function(){var e=this.lookupUserCompDetails(),i=this.comp.getUserCompInstance(),n=i!=null&&this.userCompDetails.componentClass==e.componentClass,o=n?this.attemptHeaderCompRefresh(e.params):!1;o?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)},t.prototype.attemptHeaderCompRefresh=function(e){var i=this.comp.getUserCompInstance();if(!i||!i.refresh)return!1;var n=i.refresh(e);return n},t.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},t.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},t.prototype.workOutDraggable=function(){var e=this.column.getColDef(),i=this.gridOptionsWrapper.isSuppressMovableColumns(),n=!i&&!e.suppressMovable&&!e.lockPosition;return!!n||!!e.enableRowGroup||!!e.enablePivot},t.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},t.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},t.prototype.onColumnValueChanged=function(){this.checkDisplayName()},t.prototype.setupWidth=function(){var e=this,i=function(){e.comp.setWidth(e.column.getActualWidth()+"px")};this.addManagedListener(this.column,me.EVENT_WIDTH_CHANGED,i),i()},t.prototype.setupMovingCss=function(){var e=this,i=function(){e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.column.isMoving())};this.addManagedListener(this.column,me.EVENT_MOVING_CHANGED,i),i()},t.prototype.setupMenuClass=function(){var e=this,i=function(){e.comp.addOrRemoveCssClass("ag-column-menu-visible",e.column.isMenuVisible())};this.addManagedListener(this.column,me.EVENT_MENU_VISIBLE_CHANGED,i),i()},t.prototype.setupSortableClass=function(){var e=this,i=function(){e.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!e.sortable)};i(),this.addRefreshFunction(i),this.addManagedListener(this.column,me.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},t.prototype.setupWrapTextClass=function(){var e=this,i=function(){var n=!!e.column.getColDef().wrapHeaderText;e.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",n)};i(),this.addRefreshFunction(i)},t.prototype.setupAutoHeight=function(e){var i=this,n=function(c){if(!!i.isAlive()){var h=ul(i.getGui()),d=h.paddingTop,p=h.paddingBottom,f=e.offsetHeight,m=f+d+p;if(c<5){var g=i.beans.gridOptionsWrapper.getDocument(),y=!g||!g.contains(e),C=m==0;if(y||C){i.beans.frameworkOverrides.setTimeout(function(){return n(c+1)},0);return}}i.columnModel.setColumnHeaderHeight(i.column,m)}},o=!1,s,a=function(){var c=i.column.isAutoHeaderHeight();c&&!o&&l(),!c&&o&&u()},l=function(){o=!0,n(0),i.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),s=i.resizeObserverService.observeResize(e,function(){return n(0)})},u=function(){o=!1,s&&s(),i.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),s=void 0};a(),this.addDestroyFunc(function(){return u()}),this.addManagedListener(this.column,me.EVENT_WIDTH_CHANGED,function(){return o&&n(0)}),this.addManagedListener(this.column,me.EVENT_SORT_CHANGED,function(){o&&i.beans.frameworkOverrides.setTimeout(function(){return n(0)})}),this.addRefreshFunction(a)},t.prototype.refreshAriaSort=function(){if(this.sortable){var e=this.gridOptionsWrapper.getLocaleTextFunc();this.comp.setAriaSort(jT(this.column)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},t.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var e=this.gridOptionsWrapper.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},t.prototype.setAriaDescriptionProperty=function(e,i){i!=null?this.ariaDescriptionProperties.set(e,i):this.ariaDescriptionProperties.delete(e)},t.prototype.refreshAriaDescription=function(){var e=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(e.length?e.join(" "):void 0)},t.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()},t.prototype.addColumnHoverListener=function(){var e=this,i=function(){if(!!e.gridOptionsWrapper.isColumnHoverHighlight()){var n=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",n)}};this.addManagedListener(this.eventService,O.EVENT_COLUMN_HOVER_CHANGED,i),i()},t.prototype.setupFilterCss=function(){var e=this,i=function(){e.comp.addOrRemoveCssClass("ag-header-cell-filtered",e.column.isFilterActive())};this.addManagedListener(this.column,me.EVENT_FILTER_ACTIVE_CHANGED,i),i()},t.prototype.setupColId=function(){this.comp.setColId(this.column.getColId())},t.prototype.addActiveHeaderMouseListeners=function(){var e=this,i=function(n){return e.setActiveHeader(n.type==="mouseenter")};this.addManagedListener(this.getGui(),"mouseenter",i),this.addManagedListener(this.getGui(),"mouseleave",i)},t.prototype.setActiveHeader=function(e){this.comp.addOrRemoveCssClass("ag-header-active",e)},Io([b("columnModel")],t.prototype,"columnModel",void 0),Io([b("columnHoverService")],t.prototype,"columnHoverService",void 0),Io([b("sortController")],t.prototype,"sortController",void 0),Io([b("menuFactory")],t.prototype,"menuFactory",void 0),Io([b("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Io([b("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Io([b("gridApi")],t.prototype,"gridApi",void 0),Io([b("columnApi")],t.prototype,"columnApi",void 0),Io([Yi],t.prototype,"removeDragSource",null),t}(kg);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),yp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},_X=function(r){yX(t,r);function t(e,i,n,o){var s=r.call(this)||this;return s.eResize=i,s.comp=e,s.pinned=n,s.columnGroup=o,s}return t.prototype.postConstruct=function(){var e=this;if(!this.columnGroup.isResizable()){this.comp.addOrRemoveResizableCssClass("ag-hidden",!0);return}var i=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(i),!this.gridOptionsWrapper.isSuppressAutoSize()){var n=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();this.eResize.addEventListener("dblclick",function(){var o=[],s=e.columnGroup.getDisplayedLeafColumns();s.forEach(function(a){a.getColDef().suppressAutoSize||o.push(a.getColId())}),o.length>0&&e.columnModel.autoSizeColumns({columns:o,skipHeader:n,stopAtGroup:e.columnGroup,source:"uiColumnResized"}),e.resizeLeafColumnsToFit()})}},t.prototype.onResizeStart=function(e){var i=this;this.calculateInitialValues();var n=null;if(e&&(n=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),n){var o=n.getDisplayedLeafColumns();this.resizeTakeFromCols=o.filter(function(s){return s.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(s){return i.resizeTakeFromStartWidth+=s.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(s){return i.resizeTakeFromRatios.push(s.getActualWidth()/i.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},t.prototype.onResizing=function(e,i){var n=this.normaliseDragChange(i),o=this.resizeStartWidth+n;this.resizeColumns(o,e)},t.prototype.resizeLeafColumnsToFit=function(){var e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),e>this.resizeStartWidth&&this.resizeColumns(e,!0)},t.prototype.resizeColumns=function(e,i){i===void 0&&(i=!0);var n=[];if(n.push({columns:this.resizeCols,ratios:this.resizeRatios,width:e}),this.resizeTakeFromCols){var o=e-this.resizeStartWidth;n.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-o})}this.columnModel.resizeColumnSets({resizeSets:n,finished:i,source:"uiColumnDragged"}),i&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},t.prototype.calculateInitialValues=function(){var e=this,i=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=i.filter(function(n){return n.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(n){return e.resizeStartWidth+=n.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(n){return e.resizeRatios.push(n.getActualWidth()/e.resizeStartWidth)})},t.prototype.normaliseDragChange=function(e){var i=e;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==H.PINNED_LEFT&&(i*=-1):this.pinned===H.PINNED_RIGHT&&(i*=-1),i},yp([b("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),yp([b("autoWidthCalculator")],t.prototype,"autoWidthCalculator",void 0),yp([b("columnModel")],t.prototype,"columnModel",void 0),yp([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var CX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),wX=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SX=function(r){CX(t,r);function t(e,i){var n=r.call(this)||this;return n.removeChildListenersFuncs=[],n.columnGroup=i,n.comp=e,n}return t.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,on.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},t.prototype.addListenersToChildrenColumns=function(){var e=this;this.removeListenersOnChildrenColumns();var i=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(n){n.addEventListener(me.EVENT_WIDTH_CHANGED,i),n.addEventListener(me.EVENT_VISIBLE_CHANGED,i),e.removeChildListenersFuncs.push(function(){n.removeEventListener(me.EVENT_WIDTH_CHANGED,i),n.removeEventListener(me.EVENT_VISIBLE_CHANGED,i)})})},t.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(e){return e()}),this.removeChildListenersFuncs=[]},t.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},t.prototype.onWidthChanged=function(){this.comp.setWidth(this.columnGroup.getActualWidth()+"px")},wX([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var EX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),_p=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},xX=function(r){EX(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.columnGroup=e,n}return t.prototype.setComp=function(e,i,n){r.prototype.setGui.call(this,i),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.addAttributes(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var o=this.getParentRowCtrl().getPinned(),s=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new yw(s,i)),this.createManagedBean(new vw(this.columnGroup,i,this.beans)),this.createManagedBean(new SX(e,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new _X(e,n,o,this.columnGroup)),this.createManagedBean(new aa(i,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},t.prototype.resizeLeafColumnsToFit=function(){this.groupResizeFeature.onResizeStart(!1),this.groupResizeFeature.resizeLeafColumnsToFit()},t.prototype.setupUserComp=function(){var e=this,i=this.displayName,n={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(u){e.columnModel.setColumnGroupOpened(e.columnGroup.getProvidedColumnGroup(),u,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(!i){for(var o=this.columnGroup,s=o.getLeafColumns();o.getParent()&&o.getParent().getLeafColumns().length===s.length;)o=o.getParent();var a=o.getColGroupDef();a&&(i=a.headerName),i||(i=s?this.columnModel.getDisplayNameForColumn(s[0],"header",!0):"")}var l=this.userComponentFactory.getHeaderGroupCompDetails(n);this.comp.setUserCompDetails(l)},t.prototype.setupTooltip=function(){var e=this,i=this.columnGroup.getColGroupDef(),n={getColumn:function(){return e.columnGroup},getGui:function(){return e.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return i&&i.headerTooltip}};i&&(n.getColDef=function(){return i});var o=this.createManagedBean(new gw(n,this.beans));o.setComp(this.comp)},t.prototype.setupExpandable=function(){var e=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,pi.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,pi.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},t.prototype.refreshExpanded=function(){var e=this.columnGroup;this.expandable=e.isExpandable();var i=e.isExpanded();this.expandable?this.comp.setAriaExpanded(i?"true":"false"):this.comp.setAriaExpanded(void 0)},t.prototype.addAttributes=function(){this.comp.setColId(this.columnGroup.getUniqueId())},t.prototype.addClasses=function(){var e=this,i=this.columnGroup.getColGroupDef(),n=xP.getHeaderClassesFromColDef(i,this.gridOptionsWrapper,null,this.columnGroup);n.push(this.columnGroup.isPadding()?"ag-header-group-cell-no-group":"ag-header-group-cell-with-group"),n.forEach(function(o){return e.comp.addOrRemoveCssClass(o,!0)})},t.prototype.setupMovingCss=function(){var e=this,i=this.columnGroup.getProvidedColumnGroup(),n=i.getLeafColumns(),o=function(){return e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.columnGroup.isMoving())};n.forEach(function(s){e.addManagedListener(s,me.EVENT_MOVING_CHANGED,o)}),o()},t.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var i=this.getRowIndex();this.beans.focusService.setFocusedHeader(i,this.columnGroup)}},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e);var i=this.getWrapperHasFocus();if(!(!this.expandable||!i)&&e.key===lt.ENTER){var n=this.columnGroup,o=!n.isExpanded();this.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),o,"uiColumnExpanded")}},t.prototype.setDragSource=function(e){var i=this;if(!this.isSuppressMoving()){var n=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),o=!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns(),s={type:Sn.HeaderCell,eElement:e,defaultIconName:o?ji.ICON_HIDE:ji.ICON_NOT_ALLOWED,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){return n.forEach(function(a){return a.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return n.forEach(function(a){return a.setMoving(!1,"uiColumnDragged")})},onGridEnter:function(a){var l,u;if(o){var c=((u=(l=a)===null||l===void 0?void 0:l.columns)===null||u===void 0?void 0:u.filter(function(h){return!h.getColDef().lockVisible}))||[];i.columnModel.setColumnsVisible(c,!0,"uiColumnMoved")}},onGridExit:function(a){var l,u;if(o){var c=((u=(l=a)===null||l===void 0?void 0:l.columns)===null||u===void 0?void 0:u.filter(function(h){return!h.getColDef().lockVisible}))||[];i.columnModel.setColumnsVisible(c,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(s,!0),this.addDestroyFunc(function(){return i.dragAndDropService.removeDragSource(s)})}},t.prototype.getDragItemForGroup=function(){var e=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),i={};e.forEach(function(o){return i[o.getId()]=o.isVisible()});var n=[];return this.columnModel.getAllDisplayedColumns().forEach(function(o){e.indexOf(o)>=0&&(n.push(o),en(e,o))}),e.forEach(function(o){return n.push(o)}),{columns:n,visibleState:i}},t.prototype.isSuppressMoving=function(){var e=!1;this.columnGroup.getLeafColumns().forEach(function(n){(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(e=!0)});var i=e||this.gridOptionsWrapper.isSuppressMovableColumns();return i},_p([b("columnModel")],t.prototype,"columnModel",void 0),_p([b("dragAndDropService")],t.prototype,"dragAndDropService",void 0),_p([b("gridApi")],t.prototype,"gridApi",void 0),_p([b("columnApi")],t.prototype,"columnApi",void 0),t}(kg);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var RX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Av=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},bX=0,Dv=function(r){RX(t,r);function t(e,i,n){var o=r.call(this)||this;return o.instanceId=bX++,o.headerCellCtrls={},o.rowIndex=e,o.pinned=i,o.type=n,o}return t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setComp=function(e){this.comp=e,this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addEventListeners(),ll()&&this.comp.setTransform("translateZ(0)"),e.setAriaRowIndex(this.rowIndex+1)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,O.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_DOM_LAYOUT,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this))},t.prototype.getHeaderCellCtrl=function(e){return al(this.headerCellCtrls).find(function(i){return i.getColumnGroupChild()===e})},t.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},t.prototype.getType=function(){return this.type},t.prototype.onColumnResized=function(){this.setWidth()},t.prototype.setWidth=function(){var e=this.getWidthForRow();this.comp.setWidth(e+"px")},t.prototype.getWidthForRow=function(){var e=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_PRINT;if(e){var i=this.pinned!=null;return i?0:this.columnModel.getContainerWidth(H.PINNED_RIGHT)+this.columnModel.getContainerWidth(H.PINNED_LEFT)+this.columnModel.getContainerWidth(null)}return this.columnModel.getContainerWidth(this.pinned)},t.prototype.onRowHeightChanged=function(){var e=this.columnModel.getHeaderRowCount(),i=[],n=0;this.columnModel.hasFloatingFilters()&&(e++,n=1);for(var o=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),a=1+n,l=e-a,u=0;u<l;u++)i.push(o);i.push(s);for(var u=0;u<n;u++)i.push(this.gridOptionsWrapper.getFloatingFiltersHeight());for(var c=0,u=0;u<this.rowIndex;u++)c+=i[u];var h=i[this.rowIndex]+"px";this.comp.setTop(c+"px"),this.comp.setHeight(h)},t.prototype.getPinned=function(){return this.pinned},t.prototype.getRowIndex=function(){return this.rowIndex},t.prototype.onVirtualColumnsChanged=function(){var e=this,i=this.headerCellCtrls;this.headerCellCtrls={};var n=this.getColumnsInViewport();n.forEach(function(a){if(!a.isEmptyGroup()){var l=a.getUniqueId(),u=i[l];delete i[l];var c=u&&u.getColumnGroupChild()!=a;if(c&&(e.destroyBean(u),u=void 0),u==null)switch(e.type){case wn.FLOATING_FILTER:u=e.createBean(new cX(a,e));break;case wn.COLUMN_GROUP:u=e.createBean(new xX(a,e));break;default:u=e.createBean(new vX(a,e));break}e.headerCellCtrls[l]=u}});var o=function(a){var l=e.focusService.isHeaderWrapperFocused(a);if(!l)return!1;var u=e.columnModel.isDisplayed(a.getColumnGroupChild());return u};We(i,function(a,l){var u=o(l);u?e.headerCellCtrls[a]=l:e.destroyBean(l)});var s=Br(this.headerCellCtrls);this.comp.setHeaderCtrls(s)},t.prototype.destroyCtrls=function(){var e=this;We(this.headerCellCtrls,function(i,n){e.destroyBean(n)}),this.headerCellCtrls={}},t.prototype.getColumnsInViewport=function(){var e=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_PRINT;return e?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},t.prototype.getColumnsInViewportPrintLayout=function(){var e=this;if(this.pinned!=null)return[];var i=[],n=this.getActualDepth();return[H.PINNED_LEFT,null,H.PINNED_RIGHT].forEach(function(o){var s=e.columnModel.getVirtualHeaderGroupRow(o,n);i=i.concat(s)}),i},t.prototype.getActualDepth=function(){return this.type==wn.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},t.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},t.prototype.focusHeader=function(e,i){var n=Br(this.headerCellCtrls),o=n.find(function(s){return s.getColumnGroupChild()==e});return o?(o.focus(i),!0):!1},Av([b("columnModel")],t.prototype,"columnModel",void 0),Av([b("focusService")],t.prototype,"focusService",void 0),Av([Yi],t.prototype,"destroyCtrls",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var MX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),bc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TX=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},PX=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(TX(arguments[t]));return r},OX=function(r){MX(t,r);function t(e){var i=r.call(this)||this;return i.groupsRowCtrls=[],i.pinned=e,i}return t.prototype.setComp=function(e,i){this.comp=e,this.eViewport=i,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,O.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eViewport,"scroll",this.resetScrollLeft.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},t.prototype.setupDragAndDrop=function(e){var i=new KK(this.pinned,e);this.createManagedBean(i)},t.prototype.refresh=function(e){var i=this;e===void 0&&(e=!1);var n=new Nu,o=this.focusService.getFocusHeaderToUseAfterRefresh(),s=function(){var c=i.columnModel.getHeaderRowCount()-1;i.groupsRowCtrls=i.destroyBeans(i.groupsRowCtrls);for(var h=0;h<c;h++){var d=i.createBean(new Dv(n.next(),i.pinned,wn.COLUMN_GROUP));i.groupsRowCtrls.push(d)}},a=function(){var c=n.next(),h=i.columnsRowCtrl==null||!e||i.columnsRowCtrl.getRowIndex()!==c;h&&(i.destroyBean(i.columnsRowCtrl),i.columnsRowCtrl=i.createBean(new Dv(c,i.pinned,wn.COLUMN)))},l=function(){var c=i.columnModel.hasFloatingFilters(),h=function(){i.filtersRowCtrl=i.destroyBean(i.filtersRowCtrl)};if(!c){h();return}var d=n.next();if(i.filtersRowCtrl){var p=i.filtersRowCtrl.getRowIndex()!==d;(!e||p)&&h()}i.filtersRowCtrl||(i.filtersRowCtrl=i.createBean(new Dv(d,i.pinned,wn.FLOATING_FILTER)))};s(),a(),l();var u=this.getAllCtrls();this.comp.setCtrls(u),this.restoreFocusOnHeader(o)},t.prototype.restoreFocusOnHeader=function(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})},t.prototype.getAllCtrls=function(){var e=PX(this.groupsRowCtrls,[this.columnsRowCtrl]);return this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e},t.prototype.onGridColumnsChanged=function(){this.refresh(!0)},t.prototype.setupCenterWidth=function(){var e=this;this.pinned==null&&this.createManagedBean(new mw(function(i){return e.comp.setCenterWidth(i+"px")}))},t.prototype.setHorizontalScroll=function(e){this.comp.setContainerTransform("translateX("+e+"px)")},t.prototype.resetScrollLeft=function(){this.eViewport.scrollLeft=0},t.prototype.setupPinnedWidth=function(){var e=this;if(this.pinned!=null){var i=this.pinned===H.PINNED_LEFT,n=this.pinned===H.PINNED_RIGHT,o=function(){var s=i?e.pinnedWidthService.getPinnedLeftWidth():e.pinnedWidthService.getPinnedRightWidth();if(s!=null){var a=s==0,l=e.gridOptionsWrapper.isEnableRtl(),u=e.gridOptionsWrapper.getScrollbarWidth(),c=e.scrollVisibleService.isVerticalScrollShowing()&&(l&&i||!l&&n),h=c?s+u:s;e.comp.setPinnedContainerWidth(h+"px"),e.comp.addOrRemoveCssClass("ag-hidden",a)}};this.addManagedListener(this.eventService,O.EVENT_LEFT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,O.EVENT_RIGHT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,O.EVENT_SCROLL_VISIBILITY_CHANGED,o),this.addManagedListener(this.eventService,O.EVENT_SCROLLBAR_WIDTH_CHANGED,o)}},t.prototype.getHeaderCtrlForColumn=function(e){if(e instanceof me)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(var i=0;i<this.groupsRowCtrls.length;i++){var n=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(n)return n}},t.prototype.getHtmlElementForColumnHeader=function(e){var i=this.getHeaderCtrlForColumn(e);return i?i.getGui():null},t.prototype.getRowType=function(e){var i=this.getAllCtrls(),n=i[e];return n?n.getType():void 0},t.prototype.focusHeader=function(e,i,n){var o=this.getAllCtrls(),s=o[e];return s?s.focusHeader(i,n):!1},t.prototype.getRowCount=function(){return this.getAllCtrls().length},bc([b("ctrlsService")],t.prototype,"ctrlsService",void 0),bc([b("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),bc([b("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),bc([b("columnModel")],t.prototype,"columnModel",void 0),bc([b("focusService")],t.prototype,"focusService",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var AX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Lv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Iv=function(r){AX(t,r);function t(e){var i=r.call(this)||this;return i.headerRowComps={},i.rowCompsList=[],i.pinned=e,i}return t.prototype.init=function(){var e=this;this.selectAndSetTemplate();var i={addOrRemoveCssClass:function(o,s){return e.addOrRemoveCssClass(o,s)},setCtrls:function(o){return e.setCtrls(o)},setCenterWidth:function(o){return e.eCenterContainer.style.width=o},setContainerTransform:function(o){return e.eCenterContainer.style.transform=o},setPinnedContainerWidth:function(o){var s=e.getGui();s.style.width=o,s.style.maxWidth=o,s.style.minWidth=o}},n=this.createManagedBean(new OX(this.pinned));n.setComp(i,this.getGui())},t.prototype.selectAndSetTemplate=function(){var e=this.pinned==H.PINNED_LEFT,i=this.pinned==H.PINNED_RIGHT,n=e?t.PINNED_LEFT_TEMPLATE:i?t.PINNED_RIGHT_TEMPLATE:t.CENTER_TEMPLATE;this.setTemplate(n),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},t.prototype.destroyRowComps=function(){this.setCtrls([])},t.prototype.destroyRowComp=function(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())},t.prototype.setCtrls=function(e){var i=this,n=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];var o,s=function(a){var l=a.getGui(),u=l.parentElement!=i.eRowContainer;u&&i.eRowContainer.appendChild(l),o&&KC(i.eRowContainer,l,o),o=l};e.forEach(function(a){var l=a.getInstanceId(),u=n[l];delete n[l];var c=u||i.createBean(new iX(a));i.headerRowComps[l]=c,i.rowCompsList.push(c),s(c)}),Br(n).forEach(function(a){return i.destroyRowComp(a)})},t.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"/>',t.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"/>',t.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`,Lv([ut("eCenterContainer")],t.prototype,"eCenterContainer",void 0),Lv([Ct],t.prototype,"init",null),Lv([Yi],t.prototype,"destroyRowComps",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var DX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wl=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},oo;(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"})(oo||(oo={}));var LX=function(r){DX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.gridBodyCon=i.gridBodyCtrl})},t.prototype.getHeaderRowCount=function(){var e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0},t.prototype.getHeaderRowType=function(e){var i=this.ctrlsService.getHeaderRowContainerCtrl();if(i)return i.getRowType(e)},t.prototype.navigateVertically=function(e,i,n){if(i||(i=this.focusService.getFocusedHeader()),!i)return!1;var o=i.headerRowIndex,s=i.column,a=this.getHeaderRowCount(),l=e===oo.UP,u=l?o-1:o+1,c=null,h=!1;u<0&&(u=0,c=s,h=!0),u>=a&&(u=-1);var d=this.getHeaderRowType(o);if(!h){if(d===wn.COLUMN_GROUP){var p=s;c=l?s.getParent():p.getDisplayedChildren()[0]}else if(d===wn.FLOATING_FILTER)c=s;else{var p=s;c=l?p.getParent():p}if(!c)return!1}return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:u,column:c},allowUserOverride:!0,event:n})},t.prototype.navigateHorizontally=function(e,i,n){i===void 0&&(i=!1);var o=this.focusService.getFocusedHeader(),s=e===oo.LEFT,a=this.gridOptionsWrapper.isEnableRtl(),l,u;return s!==a?(u="Before",l=this.headerPositionUtils.findHeader(o,u)):(u="After",l=this.headerPositionUtils.findHeader(o,u)),l||!i?this.focusService.focusHeaderPosition({headerPosition:l,direction:u,fromTab:i,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(o,u,n)},t.prototype.focusNextHeaderRow=function(e,i,n){var o=e.headerRowIndex,s=null,a;return i==="Before"?o>0&&(a=o-1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(a,"end")):(a=o+1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(a,"start")),this.focusService.focusHeaderPosition({headerPosition:s,direction:i,fromTab:!0,allowUserOverride:!0,event:n})},t.prototype.scrollToColumn=function(e,i){if(i===void 0&&(i="After"),!e.getPinned()){var n;if(e instanceof on){var o=e.getDisplayedLeafColumns();n=i==="Before"?Ue(o):o[0]}else n=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}},Wl([b("focusService")],t.prototype,"focusService",void 0),Wl([b("headerPositionUtils")],t.prototype,"headerPositionUtils",void 0),Wl([b("animationFrameService")],t.prototype,"animationFrameService",void 0),Wl([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Wl([Ct],t.prototype,"postConstruct",null),t=Wl([Dt("headerNavigationService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var IX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Cp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FX=function(r){IX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setComp=function(e,i,n){this.comp=e,this.eGui=i,this.createManagedBean(new aa(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},t.prototype.setupHeaderHeight=function(){var e=this.setHeaderHeight.bind(this);e(),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_PIVOT_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_GROUP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_PIVOT_GROUP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_FLOATING_FILTERS_HEIGHT,e),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,O.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e)},t.prototype.getHeaderHeight=function(){return this.headerHeight},t.prototype.setHeaderHeight=function(){var e=this,i=e.columnModel,n=e.gridOptionsWrapper,o=0,s=i.getHeaderRowCount(),a,l=i.hasFloatingFilters();l&&(s++,o=1);var u=this.columnModel.getColumnGroupHeaderRowHeight(),c=this.columnModel.getColumnHeaderRowHeight(),h=1+o,d=s-h;if(a=o*n.getFloatingFiltersHeight(),a+=d*u,a+=c,this.headerHeight!==a){this.headerHeight=a;var p=a+1+"px";this.comp.setHeightAndMinHeight(p),this.eventService.dispatchEvent({type:O.EVENT_HEADER_HEIGHT_CHANGED})}},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)},t.prototype.onTabKeyDown=function(e){var i=this.gridOptionsWrapper.isEnableRtl(),n=e.shiftKey!==i?oo.LEFT:oo.RIGHT;(this.headerNavigationService.navigateHorizontally(n,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},t.prototype.handleKeyDown=function(e){var i=null;switch(e.key){case lt.LEFT:i=oo.LEFT;case lt.RIGHT:dt(i)||(i=oo.RIGHT),this.headerNavigationService.navigateHorizontally(i,!1,e);break;case lt.UP:i=oo.UP;case lt.DOWN:dt(i)||(i=oo.DOWN),this.headerNavigationService.navigateVertically(i,null,e)&&e.preventDefault();break;default:return}},t.prototype.onFocusOut=function(e){var i=this.gridOptionsWrapper.getDocument(),n=e.relatedTarget;!n&&this.eGui.contains(i.activeElement)||this.eGui.contains(n)||this.focusService.clearFocusedHeader()},Cp([b("headerNavigationService")],t.prototype,"headerNavigationService",void 0),Cp([b("focusService")],t.prototype,"focusService",void 0),Cp([b("columnModel")],t.prototype,"columnModel",void 0),Cp([b("ctrlsService")],t.prototype,"ctrlsService",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var NX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),GX=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},HX=function(r){NX(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.postConstruct=function(){var e=this,i={addOrRemoveCssClass:function(s,a){return e.addOrRemoveCssClass(s,a)},setHeightAndMinHeight:function(s){e.getGui().style.height=s,e.getGui().style.minHeight=s}},n=this.createManagedBean(new FX);n.setComp(i,this.getGui(),this.getFocusableElement());var o=function(s){e.createManagedBean(s),e.appendChild(s)};o(new Iv(H.PINNED_LEFT)),o(new Iv(null)),o(new Iv(H.PINNED_RIGHT))},t.TEMPLATE='<div class="ag-header" role="presentation"/>',GX([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var WX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},VX=function(r){WX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.addResizeBar=function(e){var i=this,n={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e)};this.dragService.addDragSource(n,!0);var o=function(){return i.dragService.removeDragSource(n)};return o},t.prototype.onDragStart=function(e,i){this.dragStartX=i.clientX,this.setResizeIcons();var n=i instanceof MouseEvent&&i.shiftKey===!0;e.onResizeStart(n)},t.prototype.setResizeIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)},t.prototype.onDragStop=function(e,i){e.onResizeEnd(this.resizeAmount),this.resetIcons()},t.prototype.resetIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)},t.prototype.onDragging=function(e,i){this.resizeAmount=i.clientX-this.dragStartX,e.onResizing(this.resizeAmount)},Fv([b("dragService")],t.prototype,"dragService",void 0),Fv([b("ctrlsService")],t.prototype,"ctrlsService",void 0),t=Fv([Dt("horizontalResizeService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var kX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},BX=function(r){kX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},t.prototype.showMenuAfterMouseEvent=function(e,i){var n=this;this.showPopup(e,function(o){n.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:i,ePopup:o})},i.target)},t.prototype.showMenuAfterButtonClick=function(e,i,n){var o=this;this.showPopup(e,function(s){o.popupService.positionPopupUnderComponent({type:n,eventSource:i,ePopup:s,keepWithinBounds:!0,column:e})},i)},t.prototype.showPopup=function(e,i,n){var o=this,s=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(!s)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var a=document.createElement("div");an(a,"presentation"),a.classList.add("ag-menu"),this.tabListener=this.addManagedListener(a,"keydown",function(p){return o.trapFocusWithin(p,a)}),s.guiPromise.then(function(p){return a.appendChild(p)});var l,u=n||this.ctrlsService.getGridBodyCtrl().getGui(),c=function(p){e.setMenuVisible(!1,"contextMenu");var f=p instanceof KeyboardEvent;if(o.tabListener&&(o.tabListener=o.tabListener()),f&&n&&Ju(n)){var m=o.focusService.findTabbableParent(n);m&&m.focus()}},h=this.gridOptionsWrapper.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:c,positionCallback:function(){return i(a)},anchorToElement:u,ariaLabel:h("ariaLabelColumnMenu","Column Menu")});d&&(this.hidePopup=l=d.hideFunc),s.filterPromise.then(function(p){i(a),p.afterGuiAttached&&p.afterGuiAttached({container:"columnMenu",hidePopup:l})}),e.setMenuVisible(!0,"contextMenu")},t.prototype.trapFocusWithin=function(e,i){e.key!==lt.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(i,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(i,e.shiftKey))},t.prototype.isMenuEnabled=function(e){return e.isFilterAllowed()},Mc([b("filterManager")],t.prototype,"filterManager",void 0),Mc([b("popupService")],t.prototype,"popupService",void 0),Mc([b("focusService")],t.prototype,"focusService",void 0),Mc([b("ctrlsService")],t.prototype,"ctrlsService",void 0),t=Mc([Dt("menuFactory")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var UX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),wp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};(function(r){UX(t,r);function t(e){var i=r.call(this,t.getTemplate(e.cssClass))||this;return i.items=[],i.tabbedItemScrollMap=new Map,i.params=e,e.items&&e.items.forEach(function(n){return i.addItem(n)}),i}return t.prototype.postConstruct=function(){this.createManagedBean(new aa(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},t.getTemplate=function(e){return'<div class="ag-tabs '+e+`">
            <div ref="eHeader" role="tablist" class="ag-tabs-header `+(e?e+"-header":"")+`"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body `+(e?e+"-body":"")+`"></div>
        </div>`},t.prototype.handleKeyDown=function(e){var i=this.gridOptionsWrapper.getDocument();switch(e.key){case lt.RIGHT:case lt.LEFT:if(!this.eHeader.contains(i.activeElement))return;var n=e.key===lt.RIGHT,o=this.gridOptionsWrapper.isEnableRtl(),s=this.items.indexOf(this.activeItem),a=n!==o?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===a)return;e.preventDefault();var l=this.items[a];this.showItemWrapper(l),l.eHeaderButton.focus();break;case lt.UP:case lt.DOWN:e.stopPropagation();break}},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var i=this,n=i.focusService,o=i.eHeader,s=i.eBody,a=i.activeItem,l=this.gridOptionsWrapper.getDocument(),u=l.activeElement;if(e.preventDefault(),o.contains(u))n.focusInto(s,e.shiftKey);else if(n.isFocusUnderManagedComponent(s))a.eHeaderButton.focus();else{var c=n.findNextFocusableElement(s,!1,e.shiftKey);c?c.focus():a.eHeaderButton.focus()}}},t.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e},t.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},t.prototype.addItem=function(e){var i=document.createElement("span");an(i,"tab"),i.setAttribute("tabIndex","-1"),i.appendChild(e.title),i.classList.add("ag-tab"),this.eHeader.appendChild(i),cl(i,e.titleLabel);var n={tabbedItem:e,eHeaderButton:i};this.items.push(n),i.addEventListener("click",this.showItemWrapper.bind(this,n))},t.prototype.showItem=function(e){var i=this.items.find(function(n){return n.tabbedItem===e});i&&this.showItemWrapper(i)},t.prototype.showItemWrapper=function(e){var i=this,n=e.tabbedItem,o=e.eHeaderButton;if(this.params.onItemClicked&&this.params.onItemClicked({item:n}),this.activeItem===e){pT(this.params.onActiveItemClicked);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),qn(this.eBody),n.bodyPromise.then(function(s){i.eBody.appendChild(s);var a=!i.focusService.isKeyboardMode();if(i.focusService.focusInto(i.eBody,!1,a),n.afterAttachedCallback&&n.afterAttachedCallback(i.afterAttachedParams),i.params.keepScrollPosition){var l=n.getScrollableContainer&&n.getScrollableContainer()||s;i.lastScrollListener=i.addManagedListener(l,"scroll",function(){i.tabbedItemScrollMap.set(n.name,l.scrollTop)});var u=i.tabbedItemScrollMap.get(n.name);u!==void 0&&setTimeout(function(){l.scrollTop=u},0)}}),this.activeItem&&this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),o.classList.add("ag-tab-selected"),this.activeItem=e},wp([b("focusService")],t.prototype,"focusService",void 0),wp([ut("eHeader")],t.prototype,"eHeader",void 0),wp([ut("eBody")],t.prototype,"eBody",void 0),wp([Ct],t.prototype,"postConstruct",null),t})(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var zX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),jX=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ix=50,$X=function(r){zX(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return t.prototype.observeResize=function(e,i){var n=this,o=this.gridOptionsWrapper.getDocument(),s=o.defaultView||window,a=ea(i,Ix),l=function(){var d=new s.ResizeObserver(a);return d.observe(e),function(){return d.disconnect()}},u=function(){var d=o_(e),p=r_(e),f=!0,m=function(){if(f){var g=o_(e),y=r_(e),C=g!==d||y!==p;C&&(d=g,p=y,i()),n.doNextPolyfillTurn(m)}};return m(),function(){return f=!1}},c=this.gridOptionsWrapper.isSuppressBrowserResizeObserver(),h=!!s.ResizeObserver;return h&&!c?l():u()},t.prototype.doNextPolyfillTurn=function(e){this.polyfillFunctions.push(e),this.schedulePolyfill()},t.prototype.schedulePolyfill=function(){var e=this;if(!this.polyfillScheduled){var i=function(){var n=e.polyfillFunctions;e.polyfillScheduled=!1,e.polyfillFunctions=[],n.forEach(function(o){return o()})};this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(i,Ix)}},t=jX([Dt("resizeObserverService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var YX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Nv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},KX=function(r){YX(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return t.prototype.setScrollTop=function(e){this.scrollGoingDown=e>this.lastScrollTop,this.lastScrollTop=e},t.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame()},t.prototype.isOn=function(){return this.useAnimationFrame},t.prototype.verifyAnimationFrameOn=function(e){this.useAnimationFrame===!1&&console.warn("AG Grid: AnimationFrameService."+e+" called but animation frames are off")},t.prototype.createTask=function(e,i,n){this.verifyAnimationFrameOn(n);var o={task:e,index:i,createOrder:++this.taskCount};this.addTaskToList(this[n],o),this.schedule()},t.prototype.cancelTask=function(e){this.cancelledTasks.add(e)},t.prototype.addTaskToList=function(e,i){e.list.push(i),e.sorted=!1},t.prototype.sortTaskList=function(e){if(!e.sorted){var i=this.scrollGoingDown?1:-1;e.list.sort(function(n,o){return n.index!==o.index?i*(o.index-n.index):o.createOrder-n.createOrder}),e.sorted=!0}},t.prototype.addDestroyTask=function(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()},t.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");for(var i=this.createTasksP1,n=i.list,o=this.createTasksP2,s=o.list,a=this.destroyTasks,l=new Date().getTime(),u=new Date().getTime()-l,c=e<=0,h=this.ctrlsService.getGridBodyCtrl();c||u<e;){var d=h.getScrollFeature().executeAnimationFrameScroll();if(!d){var p=void 0;if(n.length)this.sortTaskList(i),p=n.pop().task;else if(s.length)this.sortTaskList(o),p=s.pop().task;else if(a.length)p=a.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(p)||p()}u=new Date().getTime()-l}n.length||s.length||a.length?this.requestFrame():this.stopTicking()},t.prototype.stopTicking=function(){this.ticking=!1},t.prototype.flushAllFrames=function(){!this.useAnimationFrame||this.executeFrame(-1)},t.prototype.schedule=function(){!this.useAnimationFrame||this.ticking||(this.ticking=!0,this.requestFrame())},t.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60),i=this.gridOptionsWrapper.getDocument(),n=i.defaultView||window;n.requestAnimationFrame?n.requestAnimationFrame(e):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(e):n.setTimeout(e,0)},t.prototype.isQueueEmpty=function(){return!this.ticking},t.prototype.debounce=function(e){var i=this,n=!1;return function(){if(!i.isOn()){i.getFrameworkOverrides().setTimeout(e,0);return}n||(n=!0,i.addDestroyTask(function(){n=!1,e()}))}},Nv([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Nv([Ct],t.prototype,"init",null),t=Nv([Dt("animationFrameService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var XX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},RP="ag-resizer-wrapper",qX='<div class="'+RP+`">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,ZX=function(r){XX(t,r);function t(e,i){var n=r.call(this)||this;return n.element=e,n.dragStartPosition={x:0,y:0},n.position={x:0,y:0},n.lastSize={width:-1,height:-1},n.positioned=!1,n.resizersAdded=!1,n.resizeListeners=[],n.boundaryEl=null,n.isResizing=!1,n.isMoving=!1,n.resizable={},n.movable=!1,n.currentResizer=null,n.config=Object.assign({},{popup:!1},i),n}return t.prototype.center=function(){var e=this.offsetParent,i=e.clientHeight,n=e.clientWidth,o=n/2-this.getWidth()/2,s=i/2-this.getHeight()/2;this.offsetElement(o,s)},t.prototype.initialisePosition=function(){var e=this.config,i=e.centered,n=e.forcePopupParentAsOffsetParent,o=e.minWidth,s=e.width,a=e.minHeight,l=e.height,u=e.x,c=e.y;this.offsetParent||this.setOffsetParent();var h=0,d=0,p=!!this.element.offsetParent;if(p){var f=this.findBoundaryElement(),m=window.getComputedStyle(f);if(m.minWidth!=null){var g=f.offsetWidth-this.element.offsetWidth;d=parseInt(m.minWidth,10)-g}if(m.minHeight!=null){var y=f.offsetHeight-this.element.offsetHeight;h=parseInt(m.minHeight,10)-y}}if(this.minHeight=a||h,this.minWidth=o||d,s&&this.setWidth(s),l&&this.setHeight(l),(!s||!l)&&this.refreshSize(),i)this.center();else if(u||c)this.offsetElement(u,c);else if(p&&n&&this.boundaryEl){var C=parseFloat(this.boundaryEl.style.top),w=parseFloat(this.boundaryEl.style.left);this.offsetElement(isNaN(w)?0:w,isNaN(C)?0:C)}this.positioned=!!this.offsetParent},t.prototype.isPositioned=function(){return this.positioned},t.prototype.getPosition=function(){return this.position},t.prototype.setMovable=function(e,i){if(!(!this.config.popup||e===this.movable)){this.movable=e;var n=this.moveElementDragListener||{eElement:i,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}},t.prototype.setResizable=function(e){var i=this;if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(function(n){var o=e,s=!!o[n],a=i.getResizerElement(n),l={dragStartPixels:0,eElement:a,onDragStart:function(u){return i.onResizeStart(u,n)},onDragging:i.onResize.bind(i),onDragStop:function(u){return i.onResizeEnd(u,n)}};(!!i.resizable[n]!==s||!i.isAlive()&&!s)&&(s?(i.dragService.addDragSource(l),i.resizeListeners.push(l),a.style.pointerEvents="all"):a.style.pointerEvents="none",i.resizable[n]=s)})},t.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},t.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var e=this.lastSize,i=e.height,n=e.width;n!==-1&&(this.element.style.width=n+"px"),i!==-1&&(this.element.style.height=i+"px")},t.prototype.getHeight=function(){return this.element.offsetHeight},t.prototype.setHeight=function(e){var i=this.config.popup,n=this.element,o=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ua(n,e),e=YC(n),o=!0;else if(this.positioned){var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect();e=Math.max(this.minHeight,e);var l=this.offsetParent.clientHeight,u=i?this.position.y:s.top,c=i?0:a.top;l&&e+u>l+c&&(e=l-u)}this.getHeight()!==e&&(o?(n.style.maxHeight="unset",n.style.minHeight="unset"):i?Ua(n,e):(n.style.height=e+"px",n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))},t.prototype.getWidth=function(){return this.element.offsetWidth},t.prototype.setWidth=function(e){var i=this.element,n=this.config.popup,o=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)So(i,e),e=Wg(i),o=!0;else if(this.positioned){e=Math.max(this.minWidth,e);var s=this.offsetParent.clientWidth,a=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+a>s&&(e=s-a)}this.getWidth()!==e&&(o?(i.style.maxWidth="unset",i.style.minWidth="unset"):this.config.popup?So(i,e):(i.style.width=e+"px",i.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))},t.prototype.offsetElement=function(e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;this.popupService.positionPopup({ePopup:n,x:e,y:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable()}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top))},t.prototype.setPosition=function(e,i){this.position.x=e,this.position.y=i},t.prototype.updateDragStartPosition=function(e,i){this.dragStartPosition={x:e,y:i}},t.prototype.calculateMouseMovement=function(e){var i=e.e,n=e.isLeft,o=e.isTop,s=e.anywhereWithin,a=e.topBuffer,l=i.clientX-this.dragStartPosition.x,u=i.clientY-this.dragStartPosition.y,c=this.shouldSkipX(i,!!n,!!s,l)?0:l,h=this.shouldSkipY(i,!!o,a,u)?0:u;return{movementX:c,movementY:h}},t.prototype.shouldSkipX=function(e,i,n,o){var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),u=this.config.popup?this.position.x:s.left,c=u<=0&&a.left>=e.clientX||a.right<=e.clientX&&a.right<=l.right;return c?!0:(i?c=o<0&&e.clientX>u+a.left||o>0&&e.clientX<u+a.left:n?c=o<0&&e.clientX>l.right||o>0&&e.clientX<u+a.left:c=o<0&&e.clientX>l.right||o>0&&e.clientX<l.right,c)},t.prototype.shouldSkipY=function(e,i,n,o){n===void 0&&(n=0);var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),u=this.config.popup?this.position.y:s.top,c=u<=0&&a.top>=e.clientY||a.bottom<=e.clientY&&a.bottom<=l.bottom;return c?!0:(i?c=o<0&&e.clientY>u+a.top+n||o>0&&e.clientY<u+a.top:c=o<0&&e.clientY>l.bottom||o>0&&e.clientY<l.bottom,c)},t.prototype.createResizeMap=function(){var e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}},t.prototype.addResizers=function(){if(!this.resizersAdded){var e=this.element;if(!!e){var i=new DOMParser,n=i.parseFromString(qX,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},t.prototype.removeResizers=function(){this.resizerMap=void 0;var e=this.element.querySelector("."+RP);e&&this.element.removeChild(e),this.resizersAdded=!1},t.prototype.getResizerElement=function(e){return this.resizerMap[e].element},t.prototype.onResizeStart=function(e,i){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!i.match(/top/i),isRight:!!i.match(/right/i),isBottom:!!i.match(/bottom/i),isLeft:!!i.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[i].element.classList.add("ag-active");var n=this.config,o=n.popup,s=n.forcePopupParentAsOffsetParent;!o&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},t.prototype.getSiblings=function(){var e=this.element,i=e.parentElement;return i?Array.prototype.slice.call(i.children).filter(function(n){return!n.classList.contains("ag-hidden")}):null},t.prototype.getMinSizeOfSiblings=function(){for(var e=this.getSiblings()||[],i=0,n=0,o=0;o<e.length;o++){var s=e[o],a=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s!==this.element){var l=this.minHeight||0,u=this.minWidth||0;if(a){var c=window.getComputedStyle(s);c.minHeight&&(l=parseInt(c.minHeight,10)),c.minWidth&&(u=parseInt(c.minWidth,10))}else l=s.offsetHeight,u=s.offsetWidth;i+=l,n+=u}}return{height:i,width:n}},t.prototype.applySizeToSiblings=function(e){var i=null,n=this.getSiblings();if(!!n){for(var o=0;o<n.length;o++){var s=n[o];s!==i&&(e?s.style.height=s.offsetHeight+"px":s.style.width=s.offsetWidth+"px",s.style.flex="0 0 auto",s===this.element&&(i=n[o+1]))}i&&(i.style.removeProperty("height"),i.style.removeProperty("min-height"),i.style.removeProperty("max-height"),i.style.flex="1 1 auto")}},t.prototype.isResizable=function(){return Object.values(this.resizable).some(function(e){return e})},t.prototype.onResize=function(e){if(!(!this.isResizing||!this.currentResizer)){var i=this.config,n=i.popup,o=i.forcePopupParentAsOffsetParent,s=this.currentResizer,a=s.isTop,l=s.isRight,u=s.isBottom,c=s.isLeft,h=l||c,d=u||a,p=this.calculateMouseMovement({e,isLeft:c,isTop:a}),f=p.movementX,m=p.movementY,g=this.position.x,y=this.position.y,C=0,w=0;if(h&&f){var S=c?-1:1,E=this.getWidth(),M=E+f*S,L=!1;c&&(C=E-M,(g+C<=0||M<=this.minWidth)&&(L=!0,C=0)),L||this.setWidth(M)}if(d&&m){var S=a?-1:1,x=this.getHeight(),T=x+m*S,N=!1;a?(w=x-T,(y+w<=0||T<=this.minHeight)&&(N=!0,w=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&x<T&&this.getMinSizeOfSiblings().height+T>this.element.parentElement.offsetHeight&&(N=!0),N||this.setHeight(T)}this.updateDragStartPosition(e.clientX,e.clientY),((n||o)&&C||w)&&this.offsetElement(g+C,y+w)}},t.prototype.onResizeEnd=function(e,i){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var n={type:"resize",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.element.classList.remove("ag-resizing"),this.resizerMap[i].element.classList.remove("ag-active"),this.dispatchEvent(n)},t.prototype.refreshSize=function(){var e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))},t.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},t.prototype.onMove=function(e){if(!!this.isMoving){var i=this.position,n=i.x,o=i.y,s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());var a=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s}),l=a.movementX,u=a.movementY;this.offsetElement(n+l,o+u),this.updateDragStartPosition(e.clientX,e.clientY)}},t.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},t.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},t.prototype.findBoundaryElement=function(){for(var e=this.element;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element},t.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.clearResizeListeners(),this.removeResizers()},Fx([b("popupService")],t.prototype,"popupService",void 0),Fx([b("dragService")],t.prototype,"dragService",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var JX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},QX=function(r){JX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.centerRowContainerCtrl=i.centerRowContainerCtrl})},t.prototype.getPreferredWidthForColumn=function(e,i){var n=this.getHeaderCellForColumn(e);if(!n)return-1;var o=this.rowRenderer.getAllCellsForColumn(e);return i||o.push(n),this.addElementsToContainerAndGetWidth(o)},t.prototype.getPreferredWidthForColumnGroup=function(e){var i=this.getHeaderCellForColumn(e);return i?this.addElementsToContainerAndGetWidth([i]):-1},t.prototype.addElementsToContainerAndGetWidth=function(e){var i=this,n=document.createElement("form");n.style.position="fixed";var o=this.centerRowContainerCtrl.getContainerElement();o.appendChild(n),e.forEach(function(l){return i.cloneItemIntoDummy(l,n)});var s=n.offsetWidth;o.removeChild(n);var a=this.gridOptionsWrapper.getAutoSizePadding();return s+a},t.prototype.getHeaderCellForColumn=function(e){var i=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(n){var o=n.getHtmlElementForColumnHeader(e);o!=null&&(i=o)}),i},t.prototype.cloneItemIntoDummy=function(e,i){var n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";var o=document.createElement("div"),s=o.classList,a=["ag-header-cell","ag-header-group-cell"].some(function(d){return n.classList.contains(d)});a?(s.add("ag-header","ag-header-row"),o.style.position="static"):s.add("ag-row");for(var l=e.parentElement;l;){var u=["ag-header-row","ag-row"].some(function(d){return l.classList.contains(d)});if(u){for(var c=0;c<l.classList.length;c++){var h=l.classList[c];h!="ag-row-position-absolute"&&s.add(h)}break}l=l.parentElement}o.appendChild(n),i.appendChild(o)},Tc([b("rowRenderer")],t.prototype,"rowRenderer",void 0),Tc([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Tc([b("rowCssClassCalculator")],t.prototype,"rowCssClassCalculator",void 0),Tc([Ct],t.prototype,"postConstruct",null),t=Tc([Dt("autoWidthCalculator")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var tq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},eq=function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},iq=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},nq=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(iq(arguments[t]));return r},rq=function(r){tq(t,r);function t(e,i){var n=r.call(this)||this;return n.createRowCon=e,n.destroyRowCtrls=i,n.stickyRowCtrls=[],n.containerHeight=0,n}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.gridBodyCtrl=i.gridBodyCtrl})},t.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},t.prototype.checkStickyRows=function(){var e=0;if(!this.gridOptionsWrapper.isGroupRowsSticky()){this.refreshNodesAndContainerHeight([],e);return}for(var i=[],n=this.rowRenderer.getFirstVisibleVerticalPixel(),o=function(d){i.push(d);for(var p=d;p.expanded;)p=Ue(p.childrenAfterSort);var f=p.rowTop+p.rowHeight,m=n+e+d.rowHeight;f<m?d.stickyRowTop=e+(f-m):d.stickyRowTop=e,e=0,i.forEach(function(g){var y=g.stickyRowTop+g.rowHeight;e<y&&(e=y)})};;){var s=n+e,a=this.rowModel.getRowIndexAtPixel(s),l=this.rowModel.getRow(a);if(l==null||l.level<0)break;for(var u=[],c=l.parent;c.level>=0;)u.push(c),c=c.parent;var h=u.reverse().find(function(d){return i.indexOf(d)<0&&d.displayed});if(h){o(h);continue}if(l.group&&l.expanded&&!l.footer&&l.rowTop<s){o(l);continue}break}this.refreshNodesAndContainerHeight(i,e)},t.prototype.refreshNodesAndContainerHeight=function(e,i){var n,o,s,a=this,l=this.stickyRowCtrls.filter(function(m){return e.indexOf(m.getRowNode())===-1}),u=e.filter(function(m){return a.stickyRowCtrls.findIndex(function(g){return g.getRowNode()===m})===-1}),c={};l.forEach(function(m){c[m.getRowNode().id]=m,a.stickyRowCtrls=a.stickyRowCtrls.filter(function(g){return g!==m})});try{for(var h=eq(Object.values(c)),d=h.next();!d.done;d=h.next()){var p=d.value;p.getRowNode().sticky=!1}}catch(m){n={error:m}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}this.destroyRowCtrls(c,!1);var f=u.map(function(m){return m.sticky=!0,a.createRowCon(m,!1,!1)});(s=this.stickyRowCtrls).push.apply(s,nq(f)),this.stickyRowCtrls.forEach(function(m){return m.setRowTop(m.getRowNode().stickyRowTop)}),this.stickyRowCtrls.sort(function(m,g){return g.getRowNode().rowIndex-m.getRowNode().rowIndex}),this.containerHeight!==i&&(this.containerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i))},Sp([b("rowModel")],t.prototype,"rowModel",void 0),Sp([b("rowRenderer")],t.prototype,"rowRenderer",void 0),Sp([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Sp([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var oq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mr=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},sq=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Nx=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(sq(arguments[t]));return r},aq=function(r){oq(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e.dataFirstRenderedFired=!1,e}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.initialise()})},t.prototype.initialise=function(){this.addManagedListener(this.eventService,O.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,O.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_BODY_SCROLL,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.eventService,O.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_DOM_LAYOUT,this.onDomLayoutChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_ROW_CLASS,this.redrawRows.bind(this)),this.gridOptionsWrapper.isGroupRowsSticky()&&(this.rowModel.getType()!=H.ROW_MODEL_TYPE_CLIENT_SIDE?ce(function(){return console.warn("AG Grid: The feature Sticky Row Groups only works with the Client Side Row Model")},"rowRenderer.stickyWorksWithCsrmOnly"):this.gridOptionsWrapper.isTreeData()?ce(function(){return console.warn("AG Grid: The feature Sticky Row Groups does not work with Tree Data.")},"rowRenderer.stickyDoesNotWorkWithTreeData"):this.stickyRowFeature=this.createManagedBean(new rq(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_PRINT,this.embedFullWidthRows=this.printLayout||this.gridOptionsWrapper.isEmbedFullWidthRows(),this.redrawAfterModelUpdate()},t.prototype.initialiseCache=function(){if(this.gridOptionsWrapper.isKeepDetailRows()){var e=this.gridOptionsWrapper.getKeepDetailRowsCount(),i=e!=null?e:3;this.cachedRowCtrls=new lq(i)}},t.prototype.getRowCtrls=function(){return this.allRowCtrls},t.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},t.prototype.updateAllRowCtrls=function(){var e=Br(this.rowCtrlsByRowIndex);this.gridOptionsWrapper.isEnsureDomOrder()&&e.sort(function(o,s){return o.getRowNode().rowIndex-s.getRowNode.rowIndex});var i=Br(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=Nx(e,i,n)},t.prototype.registerCellEventListeners=function(){var e=this;this.addManagedListener(this.eventService,O.EVENT_CELL_FOCUSED,function(n){e.getAllCellCtrls().forEach(function(o){return o.onCellFocused(n)}),e.getFullWidthRowCtrls().forEach(function(o){o.onFullWidthRowFocused(n)})}),this.addManagedListener(this.eventService,O.EVENT_FLASH_CELLS,function(n){e.getAllCellCtrls().forEach(function(o){return o.onFlashCells(n)})}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_HOVER_CHANGED,function(){e.getAllCellCtrls().forEach(function(n){return n.onColumnHover()})}),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){e.getAllCellCtrls().forEach(function(n){return n.onDisplayedColumnsChanged()})}),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){e.printLayout&&e.getAllCellCtrls().forEach(function(n){return n.onLeftChanged()})});var i=this.gridOptionsWrapper.isEnableRangeSelection();i&&(this.addManagedListener(this.eventService,O.EVENT_RANGE_SELECTION_CHANGED,function(){e.getAllCellCtrls().forEach(function(n){return n.onRangeSelectionChanged()})}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_MOVED,function(){e.getAllCellCtrls().forEach(function(n){return n.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PINNED,function(){e.getAllCellCtrls().forEach(function(n){return n.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_VISIBLE,function(){e.getAllCellCtrls().forEach(function(n){return n.updateRangeBordersIfRangeCount()})})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,O.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},t.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(e){return e()}),this.destroyFuncsForColumnListeners.length=0},t.prototype.refreshListenersToColumnsForCellComps=function(){var e=this;this.removeGridColumnListeners();var i=this.columnModel.getAllGridColumns();!i||i.forEach(function(n){var o=function(h){e.getAllCellCtrls().forEach(function(d){d.getColumn()===n&&h(d)})},s=function(){o(function(h){return h.onLeftChanged()})},a=function(){o(function(h){return h.onWidthChanged()})},l=function(){o(function(h){return h.onFirstRightPinnedChanged()})},u=function(){o(function(h){return h.onLastLeftPinnedChanged()})},c=function(){o(function(h){return h.onColDefChanged()})};n.addEventListener(me.EVENT_LEFT_CHANGED,s),n.addEventListener(me.EVENT_WIDTH_CHANGED,a),n.addEventListener(me.EVENT_FIRST_RIGHT_PINNED_CHANGED,l),n.addEventListener(me.EVENT_LAST_LEFT_PINNED_CHANGED,u),n.addEventListener(me.EVENT_COL_DEF_CHANGED,c),e.destroyFuncsForColumnListeners.push(function(){n.removeEventListener(me.EVENT_LEFT_CHANGED,s),n.removeEventListener(me.EVENT_WIDTH_CHANGED,a),n.removeEventListener(me.EVENT_FIRST_RIGHT_PINNED_CHANGED,l),n.removeEventListener(me.EVENT_LAST_LEFT_PINNED_CHANGED,u),n.removeEventListener(me.EVENT_COL_DEF_CHANGED,c)})})},t.prototype.onDomLayoutChanged=function(){var e=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_PRINT,i=e||this.gridOptionsWrapper.isEmbedFullWidthRows(),n=i!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=i,n&&this.redrawAfterModelUpdate()},t.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},t.prototype.onPageLoaded=function(e){var i={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(i)},t.prototype.getAllCellsForColumn=function(e){var i=[];return this.getAllRowCtrls().forEach(function(n){var o=n.getCellElement(e);o&&i.push(o)}),i},t.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},t.prototype.getTopRowCtrls=function(){return this.topRowCtrls},t.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},t.prototype.refreshFloatingRows=function(e,i){var n=this;e.forEach(function(o){o.destroyFirstPass(),o.destroySecondPass()}),e.length=0,i&&i.forEach(function(o){var s=new ja(o,n.beans,!1,!1,n.printLayout);e.push(s)})},t.prototype.onPinnedRowDataChanged=function(){var e={recycleRows:!0};this.redrawAfterModelUpdate(e)},t.prototype.getRenderedIndexesForRowNodes=function(e){var i=[];return kt(e)||We(this.rowCtrlsByRowIndex,function(n,o){var s=o.getRowNode();e.indexOf(s)>=0&&i.push(n)}),i},t.prototype.redrawRows=function(e){var i=e!=null&&e.length>0;if(i){var n=this.getRenderedIndexesForRowNodes(e);this.removeRowCtrls(n)}this.redrawAfterModelUpdate({recycleRows:i})},t.prototype.getCellToRestoreFocusToAfterRefresh=function(e){var i,n=!((i=e)===null||i===void 0)&&i.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(n==null)return null;var o=this.gridOptionsWrapper.getDocument(),s=o.activeElement,a=this.gridOptionsWrapper.getDomData(s,za.DOM_DATA_KEY_CELL_CTRL),l=this.gridOptionsWrapper.getDomData(s,ja.DOM_DATA_KEY_ROW_CTRL),u=a||l;return u?n:null},t.prototype.redrawAfterModelUpdate=function(e){e===void 0&&(e={}),this.getLockOnRefresh();var i=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);var n=!this.printLayout&&!!e.recycleRows,o=e.animate&&this.gridOptionsWrapper.isAnimateRows(),s=n?this.recycleRows():null;n||this.removeAllRowComps();var a=function(){if(i==null||s==null)return!1;var u=!1;return We(s,function(c,h){var d=h.getRowNode(),p=d.rowIndex==i.rowIndex,f=d.rowPinned==i.rowPinned;p&&f&&(u=!0)}),u},l=a();this.redraw(s,o),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),l||this.restoreFocusedCell(i),this.releaseLockOnRefresh()},t.prototype.scrollToTopIfNewData=function(e){var i=e.newData||e.newPage,n=this.gridOptionsWrapper.isSuppressScrollOnNewData();i&&!n&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},t.prototype.updateContainerHeights=function(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}var e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)},t.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},t.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},t.prototype.isRefreshInProgress=function(){return this.refreshInProgress},t.prototype.restoreFocusedCell=function(e){e&&this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})},t.prototype.stopEditing=function(e){e===void 0&&(e=!1),this.getAllRowCtrls().forEach(function(i){i.stopEditing(e)})},t.prototype.getAllCellCtrls=function(){var e=[];return this.getAllRowCtrls().forEach(function(i){return e=e.concat(i.getAllCellCtrls())}),e},t.prototype.getAllRowCtrls=function(){var e=this,i=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],n=Nx(this.topRowCtrls,this.bottomRowCtrls,i);return Object.keys(this.rowCtrlsByRowIndex).forEach(function(o){return n.push(e.rowCtrlsByRowIndex[o])}),n},t.prototype.addRenderedRowListener=function(e,i,n){var o=this.rowCtrlsByRowIndex[i];o&&o.addEventListener(e,n)},t.prototype.flashCells=function(e){e===void 0&&(e={});var i=e.flashDelay,n=e.fadeDelay;this.getCellCtrls(e.rowNodes,e.columns).forEach(function(o){return o.flashCell({flashDelay:i,fadeDelay:n})})},t.prototype.refreshCells=function(e){e===void 0&&(e={});var i={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(function(n){if(n.refreshShouldDestroy()){var o=n.getRowCtrl();o&&o.refreshCell(n)}else n.refreshCell(i)}),this.getFullWidthRowCtrls(e.rowNodes).forEach(function(n){n.refreshFullWidth()})},t.prototype.getCellRendererInstances=function(e){var i=this.getCellCtrls(e.rowNodes,e.columns).map(function(n){return n.getCellRenderer()}).filter(function(n){return n!=null});return i},t.prototype.getCellEditorInstances=function(e){var i=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(function(n){var o=n.getCellEditor();o&&i.push(o)}),i},t.prototype.getEditingCells=function(){var e=[];return this.getAllCellCtrls().forEach(function(i){if(i.isEditing()){var n=i.getCellPosition();e.push(n)}}),e},t.prototype.mapRowNodes=function(e){if(!!e){var i={top:{},bottom:{},normal:{}};return e.forEach(function(n){var o=n.id;n.rowPinned===H.PINNED_TOP?i.top[o]=n:n.rowPinned===H.PINNED_BOTTOM?i.bottom[o]=n:i.normal[o]=n}),i}},t.prototype.isRowInMap=function(e,i){var n=e.id,o=e.rowPinned;return o===H.PINNED_BOTTOM?i.bottom[n]!=null:o===H.PINNED_TOP?i.top[n]!=null:i.normal[n]!=null},t.prototype.getCellCtrls=function(e,i){var n=this,o=this.mapRowNodes(e),s=[],a;dt(i)&&(a={},i.forEach(function(u){var c=n.columnModel.getGridColumn(u);dt(c)&&(a[c.getId()]=!0)}));var l=function(u){var c=u.getRowNode();o!=null&&!n.isRowInMap(c,o)||u.getAllCellCtrls().forEach(function(h){var d=h.getColumn().getId(),p=a&&!a[d];p||s.push(h)})};return We(this.rowCtrlsByRowIndex,function(u,c){l(c)}),this.topRowCtrls&&this.topRowCtrls.forEach(l),this.bottomRowCtrls&&this.bottomRowCtrls.forEach(l),s},t.prototype.destroy=function(){this.removeAllRowComps(),r.prototype.destroy.call(this)},t.prototype.removeAllRowComps=function(){var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},t.prototype.recycleRows=function(){var e=[];We(this.rowCtrlsByRowIndex,function(n,o){var s=o.getRowNode().id==null;s&&e.push(n)}),this.removeRowCtrls(e);var i={};return We(this.rowCtrlsByRowIndex,function(n,o){var s=o.getRowNode();i[s.id]=o}),this.rowCtrlsByRowIndex={},i},t.prototype.removeRowCtrls=function(e){var i=this;e.forEach(function(n){var o=i.rowCtrlsByRowIndex[n];o&&(o.destroyFirstPass(),o.destroySecondPass()),delete i.rowCtrlsByRowIndex[n]})},t.prototype.redrawAfterScroll=function(){var e;if(this.stickyRowFeature&&Gg()&&(e=this.getCellToRestoreFocusToAfterRefresh()||void 0),this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(),e!=null){var i=this.getCellToRestoreFocusToAfterRefresh();e!=null&&i==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(e))}},t.prototype.removeRowCompsNotToDraw=function(e){var i={};e.forEach(function(s){return i[s]=!0});var n=Object.keys(this.rowCtrlsByRowIndex),o=n.filter(function(s){return!i[s]});this.removeRowCtrls(o)},t.prototype.calculateIndexesToDraw=function(e){var i=this,n=NT(this.firstRenderedRow,this.lastRenderedRow),o=function(s,a){var l=a.getRowNode().rowIndex;l!=null&&(l<i.firstRenderedRow||l>i.lastRenderedRow)&&i.doNotUnVirtualiseRow(a)&&n.push(l)};return We(this.rowCtrlsByRowIndex,o),We(e,o),n.sort(function(s,a){return s-a}),n=n.filter(function(s){var a=i.paginationProxy.getRow(s);return a&&!a.sticky}),n},t.prototype.redraw=function(e,i,n){var o=this;i===void 0&&(i=!1),n===void 0&&(n=!1),this.rowContainerHeightService.updateOffset(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows();var s=this.calculateIndexesToDraw(e);if(this.removeRowCompsNotToDraw(s),this.printLayout&&(i=!1),s.forEach(function(l){var u=o.createOrUpdateRowCtrl(l,e,i,n);dt(u)}),e){var a=n&&!this.gridOptionsWrapper.isSuppressAnimationFrame()&&!this.printLayout;a?this.beans.animationFrameService.addDestroyTask(function(){o.destroyRowCtrls(e,i),o.updateAllRowCtrls(),o.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,i)}this.updateAllRowCtrls()},t.prototype.dispatchDisplayedRowsChanged=function(){var e={type:O.EVENT_DISPLAYED_ROWS_CHANGED};this.eventService.dispatchEvent(e)},t.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.isPinningLeft(),i=this.columnModel.isPinningRight(),n=this.pinningLeft!==e||i!==this.pinningRight;n&&(this.pinningLeft=e,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},t.prototype.redrawFullWidthEmbeddedRows=function(){var e=[];this.getFullWidthRowCtrls().forEach(function(i){var n=i.getRowNode().rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redrawAfterScroll()},t.prototype.getFullWidthRowCtrls=function(e){var i=this,n=this.mapRowNodes(e);return Br(this.rowCtrlsByRowIndex).filter(function(o){if(!o.isFullWidth())return!1;var s=o.getRowNode();return!(n!=null&&!i.isRowInMap(s,n))})},t.prototype.refreshFullWidthRows=function(e){var i=[],n=!!e,o=n?{}:void 0;n&&o&&e.forEach(function(s){return o[s.id]=!0}),this.getFullWidthRowCtrls().forEach(function(s){var a=s.getRowNode();if(n&&o){var l=a.level>0&&a.parent?a.parent.id:void 0,u=!o[a.id]&&!o[l];if(u)return}var c=s.refreshFullWidth();if(!c){var h=s.getRowNode().rowIndex;i.push(h.toString())}}),this.removeRowCtrls(i),this.redrawAfterScroll()},t.prototype.createOrUpdateRowCtrl=function(e,i,n,o){var s,a=this.rowCtrlsByRowIndex[e];a||(s=this.paginationProxy.getRow(e),dt(s)&&dt(i)&&i[s.id]&&s.alreadyRendered&&(a=i[s.id],i[s.id]=null));var l=!a;if(l)if(s||(s=this.paginationProxy.getRow(e)),dt(s))a=this.createRowCon(s,n,o);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=a,a},t.prototype.destroyRowCtrls=function(e,i){var n=this,o=[];We(e,function(s,a){if(!!a){if(n.cachedRowCtrls&&a.isCacheable()){n.cachedRowCtrls.addRow(a);return}a.destroyFirstPass(),i?(n.zombieRowCtrls[a.getInstanceId()]=a,o.push(function(){a.destroySecondPass(),delete n.zombieRowCtrls[a.getInstanceId()]})):a.destroySecondPass()}}),i&&(o.push(function(){n.updateAllRowCtrls(),n.dispatchDisplayedRowsChanged()}),cT(o))},t.prototype.workOutFirstAndLastRowsToRender=function(){var e,i;if(!this.paginationProxy.isRowsToRender())e=0,i=-1;else if(this.printLayout)e=this.paginationProxy.getPageFirstRow(),i=this.paginationProxy.getPageLastRow();else{var n=this.gridOptionsWrapper.getRowBufferInPixels(),o=this.ctrlsService.getGridBodyCtrl(),s=this.gridOptionsWrapper.isSuppressRowVirtualisation(),a=!1,l=void 0,u=void 0;do{var c=this.paginationProxy.getPixelOffset(),h=this.paginationProxy.getCurrentPagePixelRange(),d=h.pageFirstPixel,p=h.pageLastPixel,f=this.rowContainerHeightService.getDivStretchOffset(),m=o.getScrollFeature().getVScrollPosition(),g=m.top,y=m.bottom;s?(l=d+f,u=p+f):(l=Math.max(g+c-n,d)+f,u=Math.min(y+c+n,p)+f),this.firstVisibleVPixel=Math.max(g+c,d)+f,a=this.ensureAllRowsInRangeHaveHeightsCalculated(l,u)}while(a);var C=this.paginationProxy.getRowIndexAtPixel(l),w=this.paginationProxy.getRowIndexAtPixel(u),S=this.paginationProxy.getPageFirstRow(),E=this.paginationProxy.getPageLastRow();C<S&&(C=S),w>E&&(w=E),e=C,i=w}var M=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_NORMAL,L=this.gridOptionsWrapper.isSuppressMaxRenderedRowRestriction(),x=Math.max(this.gridOptionsWrapper.getRowBuffer(),500);M&&!L&&i-e>x&&(i=e+x);var T=e!==this.firstRenderedRow,N=i!==this.lastRenderedRow;if(T||N){this.firstRenderedRow=e,this.lastRenderedRow=i;var K={type:O.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:i};this.eventService.dispatchEvent(K)}},t.prototype.dispatchFirstDataRenderedEvent=function(){var e=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var i={type:O.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(function(){e.beans.eventService.dispatchEvent(i)})}},t.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(e,i){var n=this.paginationProxy.ensureRowHeightsValid(e,i,-1,-1);return n&&this.updateContainerHeights(),n},t.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},t.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},t.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},t.prototype.doNotUnVirtualiseRow=function(e){var i=!1,n=!0,o=e.getRowNode(),s=this.focusService.isRowNodeFocused(o),a=e.isEditing(),l=o.detail,u=s||a||l;if(!u)return i;var c=this.paginationProxy.isRowPresent(o);return c?n:i},t.prototype.createRowCon=function(e,i,n){var o=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(o)return o;var s=this.gridOptionsWrapper.isSuppressAnimationFrame(),a=n&&!s&&!this.printLayout,l=new ja(e,this.beans,i,a,this.printLayout);return l},t.prototype.getRenderedNodes=function(){var e=this.rowCtrlsByRowIndex;return Object.keys(e).map(function(i){return e[i].getRowNode()})},t.prototype.getRowByPosition=function(e){var i,n=e.rowIndex;switch(e.rowPinned){case H.PINNED_TOP:i=this.topRowCtrls[n];break;case H.PINNED_BOTTOM:i=this.bottomRowCtrls[n];break;default:i=this.rowCtrlsByRowIndex[n],i||(i=this.getStickyTopRowCtrls().find(function(o){return o.getRowNode().rowIndex===n})||null);break}return i},t.prototype.getRowNode=function(e){switch(e.rowPinned){case H.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case H.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},t.prototype.isRangeInRenderedViewport=function(e,i){var n=e==null||i==null;if(n)return!1;var o=e>this.lastRenderedRow,s=i<this.firstRenderedRow,a=!s&&!o;return a},Mr([b("animationFrameService")],t.prototype,"animationFrameService",void 0),Mr([b("paginationProxy")],t.prototype,"paginationProxy",void 0),Mr([b("columnModel")],t.prototype,"columnModel",void 0),Mr([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Mr([b("rowModel")],t.prototype,"rowModel",void 0),Mr([b("focusService")],t.prototype,"focusService",void 0),Mr([b("beans")],t.prototype,"beans",void 0),Mr([b("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),Mr([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Mr([Ct],t.prototype,"postConstruct",null),t=Mr([Dt("rowRenderer")],t),t}(ft),lq=function(){function r(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}return r.prototype.addRow=function(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},r.prototype.getRow=function(t){if(t==null||t.id==null)return null;var e=this.entriesMap[t.id];if(!e)return null;this.removeFromCache(e),e.setCached(!1);var i=e.getRowNode()!=t;return i?null:e},r.prototype.removeFromCache=function(t){var e=t.getRowNode().id;delete this.entriesMap[e],en(this.entriesList,t)},r.prototype.getEntries=function(){return this.entriesList},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var uq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},cq=function(r){uq(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.formatValue=function(e,i,n,o,s){s===void 0&&(s=!0);var a=null,l,u=e.getColDef();if(o?l=o:s&&(l=i&&i.rowPinned&&u.pinnedRowValueFormatter?u.pinnedRowValueFormatter:u.valueFormatter),l){var c={value:n,node:i,data:i?i.data:null,colDef:u,column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};a=this.expressionService.evaluate(l,c)}else if(u.refData)return u.refData[n]||"";return a==null&&Array.isArray(n)&&(a=n.join(", ")),a},Gx([b("expressionService")],t.prototype,"expressionService",void 0),t=Gx([Dt("valueFormatterService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dq=function(r){hq(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData()),this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())},t.prototype.isEmpty=function(e){var i=e===H.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;return Un(i)},t.prototype.isRowsToRender=function(e){return!this.isEmpty(e)},t.prototype.getRowAtPixel=function(e,i){var n=i===H.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(Un(n))return 0;for(var o=0;o<n.length;o++){var s=n[o],a=s.rowTop+s.rowHeight-1;if(a>=e)return o}return n.length-1},t.prototype.setPinnedTopRowData=function(e){this.pinnedTopRows=this.createNodesFromData(e,!0);var i={type:O.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(i)},t.prototype.setPinnedBottomRowData=function(e){this.pinnedBottomRows=this.createNodesFromData(e,!1);var i={type:O.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(i)},t.prototype.createNodesFromData=function(e,i){var n=this,o=[];if(e){var s=0;e.forEach(function(a,l){var u=new ue(n.beans);u.data=a;var c=i?ue.ID_PREFIX_TOP_PINNED:ue.ID_PREFIX_BOTTOM_PINNED;u.id=c+l,u.rowPinned=i?H.PINNED_TOP:H.PINNED_BOTTOM,u.setRowTop(s),u.setRowHeight(n.gridOptionsWrapper.getRowHeightForNode(u).height),u.setRowIndex(l),s+=u.rowHeight,o.push(u)})}return o},t.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},t.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},t.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},t.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},t.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},t.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]},t.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]},t.prototype.forEachPinnedTopRow=function(e){Un(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)},t.prototype.forEachPinnedBottomRow=function(e){Un(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)},t.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},t.prototype.getTotalHeight=function(e){if(!e||e.length===0)return 0;var i=Ue(e);return i.rowTop+i.rowHeight},Gv([b("beans")],t.prototype,"beans",void 0),Gv([Ct],t.prototype,"init",null),t=Gv([Dt("pinnedRowModel")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Hx;(function(r){r.Applied="Applied",r.StoreNotFound="StoreNotFound",r.StoreLoading="StoreLoading",r.StoreWaitingToLoad="StoreWaitingToLoad",r.StoreLoadingFailed="StoreLoadingFailed",r.StoreWrongType="StoreWrongType",r.Cancelled="Cancelled"})(Hx||(Hx={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _w=function(){function r(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return r.prototype.setInactive=function(){this.active=!1},r.prototype.isActive=function(){return this.active},r.prototype.depthFirstSearchChangedPath=function(t,e){if(t.children)for(var i=0;i<t.children.length;i++)this.depthFirstSearchChangedPath(t.children[i],e);e(t.rowNode)},r.prototype.depthFirstSearchEverything=function(t,e,i){if(t.childrenAfterGroup)for(var n=0;n<t.childrenAfterGroup.length;n++){var o=t.childrenAfterGroup[n];o.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[n],e,i):i&&e(o)}e(t)},r.prototype.forEachChangedNodeDepthFirst=function(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1),this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)},r.prototype.executeFromRootNode=function(t){t(this.pathRoot.rowNode)},r.prototype.createPathItems=function(t){for(var e=t,i=0;!this.mapToItems[e.id];){var n={rowNode:e,children:null};this.mapToItems[e.id]=n,i++,e=e.parent}return i},r.prototype.populateColumnsMap=function(t,e){var i=this;if(!(!this.keepingColumns||!e))for(var n=t;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),e.forEach(function(o){return i.nodeIdsToColumns[n.id][o.getId()]=!0}),n=n.parent},r.prototype.linkPathItems=function(t,e){for(var i=t,n=0;n<e;n++){var o=this.mapToItems[i.id],s=this.mapToItems[i.parent.id];s.children||(s.children=[]),s.children.push(o),i=i.parent}},r.prototype.addParentNode=function(t,e){if(!(!t||t.isRowPinned())){var i=this.createPathItems(t);this.linkPathItems(t,i),this.populateColumnsMap(t,e)}},r.prototype.canSkip=function(t){return this.active&&!this.mapToItems[t.id]},r.prototype.getValueColumnsForNode=function(t,e){if(!this.keepingColumns)return e;var i=this.nodeIdsToColumns[t.id],n=e.filter(function(o){return i[o.getId()]});return n},r.prototype.getNotValueColumnsForNode=function(t,e){if(!this.keepingColumns)return null;var i=this.nodeIdsToColumns[t.id],n=e.filter(function(o){return!i[o.getId()]});return n},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),m_=function(r){pq(t,r);function t(e){var i=r.call(this)||this;return i.state=t.STATE_WAITING_TO_LOAD,i.version=0,i.id=e,i}return t.prototype.getId=function(){return this.id},t.prototype.load=function(){this.state=t.STATE_LOADING,this.loadFromDatasource()},t.prototype.getVersion=function(){return this.version},t.prototype.setStateWaitingToLoad=function(){this.version++,this.state=t.STATE_WAITING_TO_LOAD},t.prototype.getState=function(){return this.state},t.prototype.pageLoadFailed=function(e){var i=this.isRequestMostRecentAndLive(e);i&&(this.state=t.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},t.prototype.success=function(e,i){this.successCommon(e,i)},t.prototype.pageLoaded=function(e,i,n){this.successCommon(e,{rowData:i,rowCount:n})},t.prototype.isRequestMostRecentAndLive=function(e){var i=e===this.version,n=this.isAlive();return i&&n},t.prototype.successCommon=function(e,i){this.dispatchLoadCompleted();var n=this.isRequestMostRecentAndLive(e);n&&(this.state=t.STATE_LOADED,this.processServerResult(i))},t.prototype.dispatchLoadCompleted=function(e){e===void 0&&(e=!0);var i={type:t.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(i)},t.EVENT_LOAD_COMPLETE="loadComplete",t.STATE_WAITING_TO_LOAD="needsLoading",t.STATE_LOADING="loading",t.STATE_LOADED="loaded",t.STATE_FAILED="failed",t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var fq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Hv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gq=function(r,t){return function(e,i){t(e,i,r)}},mq=function(r){fq(t,r);function t(){var i=r!==null&&r.apply(this,arguments)||this;return i.activeBlockLoadsCount=0,i.blocks=[],i.active=!0,i}e=t,t.prototype.postConstruct=function(){this.maxConcurrentRequests=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();var i=this.gridOptionsWrapper.getBlockLoadDebounceMillis();i&&i>0&&(this.checkBlockToLoadDebounce=Jt.debounce(this.performCheckBlocksToLoad.bind(this),i))},t.prototype.setBeans=function(i){this.logger=i.create("RowNodeBlockLoader")},t.prototype.addBlock=function(i){this.blocks.push(i),i.addEventListener(m_.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},t.prototype.removeBlock=function(i){Jt.removeFromArray(this.blocks,i)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.active=!1},t.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:e.BLOCK_LOADER_FINISHED_EVENT})},t.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},t.prototype.performCheckBlocksToLoad=function(){if(!!this.active){if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}var i=this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0,n=this.blocks.filter(function(o){return o.getState()===m_.STATE_WAITING_TO_LOAD}).slice(0,i);this.activeBlockLoadsCount+=n.length,n.forEach(function(o){return o.load()}),this.printCacheStatus()}},t.prototype.getBlockState=function(){var i={};return this.blocks.forEach(function(n){var o=n.getBlockStateJson(),s=o.id,a=o.state;i[s]=a}),i},t.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+","+(" blocks = "+JSON.stringify(this.getBlockState())))},t.prototype.isLoading=function(){return this.activeBlockLoadsCount>0};var e;return t.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",Hv([Ct],t.prototype,"postConstruct",null),Hv([gq(0,Cn("loggerFactory"))],t.prototype,"setBeans",null),t=e=Hv([Dt("rowNodeBlockLoader")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var vq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},yq=function(r){vq(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return t.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination(),this.paginateChildRows=this.gridOptionsWrapper.isPaginateChildRows(),this.addManagedListener(this.eventService,O.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},t.prototype.ensureRowHeightsValid=function(e,i,n,o){var s=this.rowModel.ensureRowHeightsValid(e,i,this.getPageFirstRow(),this.getPageLastRow());return s&&this.calculatePages(),s},t.prototype.onModelUpdated=function(e){this.calculatePages();var i={type:O.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(i)},t.prototype.onPaginationPageSizeChanged=function(){this.calculatePages();var e={type:O.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)},t.prototype.goToPage=function(e){if(!(!this.active||this.currentPage===e)){this.currentPage=e;var i={type:O.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(i)}},t.prototype.getPixelOffset=function(){return this.pixelOffset},t.prototype.getRow=function(e){return this.rowModel.getRow(e)},t.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},t.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)},t.prototype.getCurrentPageHeight=function(){return kt(this.topRowBounds)||kt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},t.prototype.getCurrentPagePixelRange=function(){var e=this.topRowBounds?this.topRowBounds.rowTop:0,i=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:i}},t.prototype.isRowPresent=function(e){if(!this.rowModel.isRowPresent(e))return!1;var i=e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex;return i},t.prototype.isEmpty=function(){return this.rowModel.isEmpty()},t.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},t.prototype.getNodesInRangeForSelection=function(e,i){return this.rowModel.getNodesInRangeForSelection(e,i)},t.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)},t.prototype.getType=function(){return this.rowModel.getType()},t.prototype.getRowBounds=function(e){var i=this.rowModel.getRowBounds(e);return i.rowIndex=e,i},t.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},t.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},t.prototype.getRowCount=function(){return this.rowModel.getRowCount()},t.prototype.getPageForIndex=function(e){return Math.floor(e/this.pageSize)},t.prototype.goToPageWithIndex=function(e){if(!!this.active){var i=this.getPageForIndex(e);this.goToPage(i)}},t.prototype.isRowInPage=function(e){if(!this.active)return!0;var i=this.getPageForIndex(e.rowIndex);return i===this.currentPage},t.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},t.prototype.getCurrentPage=function(){return this.currentPage},t.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},t.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},t.prototype.goToFirstPage=function(){this.goToPage(0)},t.prototype.goToLastPage=function(){var e=this.rowModel.getRowCount(),i=Math.floor(e/this.pageSize);this.goToPage(i)},t.prototype.getPageSize=function(){return this.pageSize},t.prototype.getTotalPages=function(){return this.totalPages},t.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize(),(this.pageSize==null||this.pageSize<1)&&(this.pageSize=100)},t.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(dt(this.topRowBounds)?this.topRowBounds.rowTop:0)},t.prototype.setPixelOffset=function(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:O.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},t.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},t.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!Vf(this.currentPage)||this.currentPage<0)&&(this.currentPage=0);var i=this.pageSize*this.currentPage,n=this.pageSize*(this.currentPage+1)-1;if(n>e&&(n=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(i),n===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var o=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=o-1}},t.prototype.getMasterRowCount=function(){return this.masterRowCount},t.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!Vf(this.currentPage)||this.currentPage<0)&&(this.currentPage=0),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)},t.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},Wv([b("rowModel")],t.prototype,"rowModel",void 0),Wv([Ct],t.prototype,"postConstruct",null),t=Wv([Dt("paginationProxy")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _q=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Cq=function(r){_q(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.processAllCellClasses=function(e,i,n,o){this.processClassRules(e.cellClassRules,i,n,o),this.processStaticCellClasses(e,i,n)},t.prototype.processClassRules=function(e,i,n,o){if(e!=null){for(var s=Object.keys(e),a={},l={},u=function(d){var p=s[d],f=e[p],m;typeof f=="string"?m=c.expressionService.evaluate(f,i):typeof f=="function"&&(m=f(i)),p.split(" ").forEach(function(g){g==null||g.trim()==""||(m?a[g]=!0:l[g]=!0)})},c=this,h=0;h<s.length;h++)u(h);o&&Object.keys(l).forEach(o),Object.keys(a).forEach(n)}},t.prototype.getStaticCellClasses=function(e,i){var n=e.cellClass;if(!n)return[];var o;if(typeof n=="function"){var s=n;o=s(i)}else o=n;return typeof o=="string"&&(o=[o]),o||[]},t.prototype.processStaticCellClasses=function(e,i,n){var o=this.getStaticCellClasses(e,i);o.forEach(function(s){n(s)})},Wx([b("expressionService")],t.prototype,"expressionService",void 0),t=Wx([Dt("stylingService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var wq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sq=function(r){wq(t,r);function t(e){return r.call(this,e,"ag-radio-button","radio")||this}return t.prototype.isSelected=function(){return this.eInput.checked},t.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},t.prototype.addInputListeners=function(){r.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,O.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},t.prototype.onChange=function(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)},t}(Ih);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Eq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),xq=function(r){Eq(t,r);function t(e){return r.call(this,e,"ag-toggle-button")||this}return t.prototype.setValue=function(e,i){return r.prototype.setValue.call(this,e,i),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},t}(Ih);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Rq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),bP=function(r){Rq(t,r);function t(e,i,n){return i===void 0&&(i="ag-text-field"),n===void 0&&(n="text"),r.call(this,e,i,n)||this}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},t.prototype.setValue=function(e,i){var n=r.prototype.setValue.call(this,e,i);return this.eInput.value!==e&&(this.eInput.value=dt(e)?e:""),n},t.prototype.preventDisallowedCharacters=function(){var e=new RegExp("["+this.config.allowedCharPattern+"]"),i=function(n){n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListener(this.eInput,"keypress",i),this.addManagedListener(this.eInput,"paste",function(n){var o,s=(o=n.clipboardData)===null||o===void 0?void 0:o.getData("text");s&&s.split("").some(function(a){return!e.test(a)})&&n.preventDefault()})},t}($o);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var bq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mq=function(r){bq(t,r);function t(e){return r.call(this,e,"ag-text-area",null,"textarea")||this}return t.prototype.setValue=function(e,i){var n=r.prototype.setValue.call(this,e,i);return this.eInput.value=e,n},t.prototype.setCols=function(e){return this.eInput.cols=e,this},t.prototype.setRows=function(e){return this.eInput.rows=e,this},t}($o);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Tq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Pq=function(r){Tq(t,r);function t(e){return r.call(this,e,"ag-number-field","number")||this}return t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var i=parseFloat(e.eInput.value),n=isNaN(i)?"":e.normalizeValue(i.toString());e.value!==n&&e.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},t.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},t.prototype.normalizeValue=function(e){if(e==="")return"";this.precision&&(e=this.adjustPrecision(e));var i=parseFloat(e);return this.min!=null&&i<this.min?e=this.min.toString():this.max!=null&&i>this.max&&(e=this.max.toString()),e},t.prototype.adjustPrecision=function(e){if(this.precision){var i=parseFloat(e).toFixed(this.precision);e=parseFloat(i).toString()}return e},t.prototype.setMin=function(e){return this.min===e?this:(this.min=e,nh(this.eInput,"min",e),this)},t.prototype.setMax=function(e){return this.max===e?this:(this.max=e,nh(this.eInput,"max",e),this)},t.prototype.setPrecision=function(e){return this.precision=e,this},t.prototype.setStep=function(e){return this.step===e?this:(this.step=e,nh(this.eInput,"step",e),this)},t.prototype.setValue=function(e,i){e=this.adjustPrecision(e);var n=this.normalizeValue(e);return e!=n?this:r.prototype.setValue.call(this,e,i)},t}(bP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Oq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Aq=function(r){Oq(t,r);function t(e){return r.call(this,e,"ag-range-field","range")||this}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this);var e=this.config,i=e.min,n=e.max,o=e.step;i!=null&&this.setMinValue(i),n!=null&&this.setMaxValue(n),this.setStep(o||1)},t.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(i){var n=i.target.value;e.setValue(n)})},t.prototype.setMinValue=function(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this},t.prototype.setMaxValue=function(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this},t.prototype.setStep=function(e){return this.eInput.setAttribute("step",e.toString()),this},t.prototype.setValue=function(e,i){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());var n=r.prototype.setValue.call(this,e,i);return this.eInput.value=e,n},t}($o);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Dq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ep=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Lq=function(r){Dq(t,r);function t(e){var i=r.call(this,e,t.TEMPLATE)||this;return i.labelAlignment="top",i}return t.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},t.prototype.onValueChange=function(e){var i=this,n=Zo.EVENT_CHANGED;return this.addManagedListener(this.eText,n,function(){var o=parseFloat(i.eText.getValue());i.eSlider.setValue(o.toString(),!0),e(o||0)}),this.addManagedListener(this.eSlider,n,function(){var o=i.eSlider.getValue();i.eText.setValue(o,!0),e(parseFloat(o))}),this},t.prototype.setSliderWidth=function(e){return this.eSlider.setWidth(e),this},t.prototype.setTextFieldWidth=function(e){return this.eText.setWidth(e),this},t.prototype.setMinValue=function(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this},t.prototype.setMaxValue=function(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this},t.prototype.getValue=function(){return this.eText.getValue()},t.prototype.setValue=function(e){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:Zo.EVENT_CHANGED}),this)},t.prototype.setStep=function(e){return this.eSlider.setStep(e),this.eText.setStep(e),this},t.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`,Ep([ut("eLabel")],t.prototype,"eLabel",void 0),Ep([ut("eSlider")],t.prototype,"eSlider",void 0),Ep([ut("eText")],t.prototype,"eText",void 0),Ep([Ct],t.prototype,"init",null),t}(cw);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Iq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Pc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Fq=function(r){Iq(t,r);function t(e){var i=r.call(this,e,t.TEMPLATE)||this;return i.radius=0,i.offsetX=0,i.offsetY=0,i}return t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(i){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(i){return e.calculateAngleDrag(i)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange(function(i){(i==null||i==="")&&(i="0"),i=e.eAngleValue.normalizeValue(i);var n=parseFloat(i);n>180&&(n=n-360),e.setValue(n)}),this.updateNumberInput(),dt(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,Zo.EVENT_CHANGED,function(){var i=e.gridOptionsWrapper.getDocument();e.eAngleValue.getInputElement().contains(i.activeElement)||e.updateNumberInput()})},t.prototype.updateNumberInput=function(){var e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())},t.prototype.positionChildCircle=function(e){var i=this.parentCircleRect||{width:24,height:24},n=this.eChildCircle,o=i.width/2,s=i.height/2;n.style.left=o+Math.cos(e)*8+"px",n.style.top=s+Math.sin(e)*8+"px"},t.prototype.calculatePolar=function(){var e=this.offsetX,i=this.offsetY,n=Math.atan2(i,e);this.degrees=this.toDegrees(n),this.radius=Math.sqrt(e*e+i*i),this.positionChildCircle(n)},t.prototype.calculateCartesian=function(){var e=this.toRadians(this.getValue()),i=this.getRadius();this.setOffsetX(Math.cos(e)*i).setOffsetY(Math.sin(e)*i)},t.prototype.setOffsetX=function(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this},t.prototype.setOffsetY=function(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this},t.prototype.calculateAngleDrag=function(e){var i=this.parentCircleRect,n=i.width/2,o=i.height/2,s=e.clientX-i.left,a=e.clientY-i.top,l=s-n,u=a-o,c=Math.atan2(u,l);this.setValue(c,!0)},t.prototype.toDegrees=function(e){return e/Math.PI*180},t.prototype.toRadians=function(e){return e/180*Math.PI},t.prototype.normalizeNegativeValue=function(e){return e<0?360+e:e},t.prototype.normalizeAngle180=function(e){return e%=Math.PI*2,e<-Math.PI?e+=Math.PI*2:e>=Math.PI&&(e-=Math.PI*2),e},t.prototype.getRadius=function(){return this.radius},t.prototype.setRadius=function(e){return this.radius===e?this:(this.radius=e,this.calculateCartesian(),this)},t.prototype.onValueChange=function(e){var i=this;return this.addManagedListener(this,Zo.EVENT_CHANGED,function(){e(i.degrees)}),this},t.prototype.getValue=function(e){return e?this.toRadians(this.degrees):this.degrees},t.prototype.setValue=function(e,i){var n;return i?n=e:n=this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(n),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(n),this.dispatchEvent({type:Zo.EVENT_CHANGED})),this},t.prototype.setWidth=function(e){return So(this.getGui(),e),this},t.prototype.setDisabled=function(e){return r.prototype.setDisabled.call(this,e),this.eAngleValue.setDisabled(e),this},t.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),r.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-angle-select">
            <div ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div ref="eAngleSelectField" class="ag-angle-select-field">
                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`,Pc([ut("eLabel")],t.prototype,"eLabel",void 0),Pc([ut("eParentCircle")],t.prototype,"eParentCircle",void 0),Pc([ut("eChildCircle")],t.prototype,"eChildCircle",void 0),Pc([ut("eAngleValue")],t.prototype,"eAngleValue",void 0),Pc([b("dragService")],t.prototype,"dragService",void 0),t}(cw);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Nq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fo=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Gq=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Hq=function(r){Nq(t,r);function t(e){var i=r.call(this,t.TEMPLATE)||this;return i.H=1,i.S=1,i.B=1,i.A=1,i.isSpectrumDragging=!1,i.isSpectrumHueDragging=!1,i.isSpectrumAlphaDragging=!1,i.colorChanged=!1,i.picker=e.picker,i}return t.prototype.postConstruct=function(){var e=this.getGui();this.initRecentColors(),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumDraggerMove.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumHueMove.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumAlphaMove.bind(this)),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))},t.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},t.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},t.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},t.prototype.onSpectrumDraggerDown=function(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)},t.prototype.onSpectrumDraggerMove=function(e){this.isSpectrumDragging&&this.moveDragger(e)},t.prototype.onSpectrumHueDown=function(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)},t.prototype.onSpectrumHueMove=function(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)},t.prototype.onSpectrumAlphaDown=function(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)},t.prototype.onSpectrumAlphaMove=function(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)},t.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},t.prototype.moveDragger=function(e){var i=this.spectrumValRect;if(i){var n=e.clientX-i.left,o=e.clientY-i.top;n=Math.max(n,0),n=Math.min(n,i.width),o=Math.max(o,0),o=Math.min(o,i.height),this.setSpectrumValue(n/i.width,1-o/i.height)}},t.prototype.moveHueSlider=function(e){var i=this.spectrumHueRect;if(i){var n=this.spectrumHueSlider,o=n.getBoundingClientRect(),s=e.clientX-i.left;s=Math.max(s,0),s=Math.min(s,i.width),this.H=1-s/i.width,n.style.left=s+o.width/2+"px",this.update()}},t.prototype.moveAlphaSlider=function(e){var i=this.spectrumAlphaRect;if(i){var n=this.spectrumAlphaSlider,o=n.getBoundingClientRect(),s=e.clientX-i.left;s=Math.max(s,0),s=Math.min(s,i.width),this.A=s/i.width,n.style.left=s+o.width/2+"px",this.update()}},t.prototype.update=function(){var e=yc.fromHSB(this.H*360,this.S,this.B,this.A),i=yc.fromHSB(this.H*360,1,1),n=e.toRgbaString(),o=this.picker,s=yc.fromString(o.getValue());s.toRgbaString()!==n&&(this.colorChanged=!0),o.setValue(n),this.spectrumColor.style.backgroundColor=i.toRgbaString(),this.spectrumDragger.style.backgroundColor=n},t.prototype.setSpectrumValue=function(e,i){var n=this.spectrumValRect||this.refreshSpectrumRect();if(n){var o=this.spectrumDragger,s=o.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),i=Math.max(0,i),i=Math.min(1,i),this.S=e,this.B=i,o.style.left=e*n.width-s.width/2+"px",o.style.top=(1-i)*n.height-s.height/2+"px",this.update()}},t.prototype.initRecentColors=function(){var e=t.recentColors,i=e.map(function(n,o){return'<div class="ag-recent-color" id='+o+' style="background-color: '+n+'; width: 15px; height: 15px;" recent-color="'+n+'"></div>'});this.recentColors.innerHTML=i.join("")},t.prototype.setValue=function(e){var i=yc.fromString(e),n=Gq(i.toHSB(),3),o=n[0],s=n[1],a=n[2];this.H=(isNaN(o)?0:o)/360,this.A=i.a;var l=this.spectrumHueRect||this.refreshHueRect(),u=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-l.width+"px",this.spectrumAlphaSlider.style.left=this.A*u.width+"px",this.setSpectrumValue(s,a)},t.prototype.onRecentColorClick=function(e){var i=e.target;if(!!dt(i.id)){var n=parseInt(i.id,10);this.setValue(t.recentColors[n]),this.destroy()}},t.prototype.addRecentColor=function(){var e=yc.fromHSB(this.H*360,this.S,this.B,this.A),i=e.toRgbaString(),n=t.recentColors;!this.colorChanged||n[0]===i||(n=n.filter(function(o){return o!=i}),n=[i].concat(n),n.length>t.maxRecentColors&&(n=n.slice(0,t.maxRecentColors)),t.recentColors=n)},t.prototype.destroy=function(){this.addRecentColor(),r.prototype.destroy.call(this)},t.maxRecentColors=8,t.recentColors=[],t.TEMPLATE=`<div class="ag-color-panel">
            <div ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`,Fo([ut("spectrumColor")],t.prototype,"spectrumColor",void 0),Fo([ut("spectrumVal")],t.prototype,"spectrumVal",void 0),Fo([ut("spectrumDragger")],t.prototype,"spectrumDragger",void 0),Fo([ut("spectrumHue")],t.prototype,"spectrumHue",void 0),Fo([ut("spectrumHueSlider")],t.prototype,"spectrumHueSlider",void 0),Fo([ut("spectrumAlpha")],t.prototype,"spectrumAlpha",void 0),Fo([ut("spectrumAlphaSlider")],t.prototype,"spectrumAlphaSlider",void 0),Fo([ut("recentColors")],t.prototype,"recentColors",void 0),Fo([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Wq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Oc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MP=function(r){Wq(t,r);function t(e){var i=r.call(this,t.getTemplate(e))||this;return i.closable=!0,i.config=e,i}return t.getTemplate=function(e){var i=e&&e.cssIdentifier||"default";return'<div class="ag-panel ag-'+i+`-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-`+i+`-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-`+i+`-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-`+i+`-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-`+i+`-panel-content-wrapper"></div>
        </div>`},t.prototype.postConstruct=function(){var e=this,i=this.config,n=i.component,o=i.closable,s=i.hideTitleBar,a=i.title,l=i.minWidth,u=l===void 0?250:l,c=i.width,h=i.minHeight,d=h===void 0?250:h,p=i.height,f=i.centered,m=i.popup,g=i.x,y=i.y;this.positionableFeature=new ZX(this.getGui(),{minWidth:u,width:c,minHeight:d,height:p,centered:f,x:g,y,popup:m,calculateTopBuffer:function(){return e.positionableFeature.getHeight()-e.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var C=this.getGui();n&&this.setBodyComponent(n),s?this.eTitleBar.classList.add("ag-hidden"):(a&&this.setTitle(a),this.setClosable(o!=null?o:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(w){var S=e.gridOptionsWrapper.getDocument();if(C.contains(w.relatedTarget)||C.contains(S.activeElement)||e.eTitleBarButtons.contains(w.target)){w.preventDefault();return}var E=e.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");E&&E.focus()}),!(m&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},t.prototype.renderComponent=function(){var e=this,i=this.getGui();i.focus(),this.close=function(){i.parentElement.removeChild(i),e.destroy()}},t.prototype.getHeight=function(){return this.positionableFeature.getHeight()},t.prototype.setHeight=function(e){this.positionableFeature.setHeight(e)},t.prototype.getWidth=function(){return this.positionableFeature.getWidth()},t.prototype.setWidth=function(e){this.positionableFeature.setWidth(e)},t.prototype.setClosable=function(e){if(e!==this.closable&&(this.closable=e),e){var i=this.closeButtonComp=new le(t.CLOSE_BTN_TEMPLATE);this.getContext().createBean(i);var n=i.getGui(),o=_i("close",this.gridOptionsWrapper);o.classList.add("ag-panel-title-bar-button-icon"),n.appendChild(o),this.addTitleBarButton(i),i.addManagedListener(n,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){var n=this.closeButtonComp.getGui();n.parentElement.removeChild(n),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},t.prototype.setBodyComponent=function(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())},t.prototype.addTitleBarButton=function(e,i){var n=this.eTitleBarButtons,o=n.children,s=o.length;i==null&&(i=s),i=Math.max(0,Math.min(i,s)),e.addCssClass("ag-panel-title-bar-button");var a=e.getGui();i===0?n.insertAdjacentElement("afterbegin",a):i===s?n.insertAdjacentElement("beforeend",a):o[i-1].insertAdjacentElement("afterend",a),e.setParentComponent(this)},t.prototype.getBodyHeight=function(){return rd(this.eContentWrapper)},t.prototype.getBodyWidth=function(){return Hg(this.eContentWrapper)},t.prototype.setTitle=function(e){this.eTitle.innerText=e},t.prototype.onBtClose=function(){this.close()},t.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&e.offsetParent&&this.close(),r.prototype.destroy.call(this)},t.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',Oc([ut("eContentWrapper")],t.prototype,"eContentWrapper",void 0),Oc([ut("eTitleBar")],t.prototype,"eTitleBar",void 0),Oc([ut("eTitleBarButtons")],t.prototype,"eTitleBarButtons",void 0),Oc([ut("eTitle")],t.prototype,"eTitle",void 0),Oc([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Vq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Qf=function(){return Qf=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Qf.apply(this,arguments)},kq=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TP=function(r){Vq(t,r);function t(e){var i=r.call(this,Qf(Qf({},e),{popup:!0}))||this;return i.isMaximizable=!1,i.isMaximized=!1,i.maximizeListeners=[],i.resizeListenerDestroy=null,i.lastPosition={x:0,y:0,width:0,height:0},i}return t.prototype.postConstruct=function(){var e=this,i=this.getGui(),n=this.config,o=n.movable,s=n.resizable,a=n.maximizable;this.addCssClass("ag-dialog"),r.prototype.postConstruct.call(this),this.addManagedListener(i,"focusin",function(l){i.contains(l.relatedTarget)||e.popupService.bringPopupToFront(i)}),o&&this.setMovable(o),a&&this.setMaximizable(a),s&&this.setResizable(s)},t.prototype.renderComponent=function(){var e=this.getGui(),i=this.config,n=i.alwaysOnTop,o=i.modal,s=i.title,a=this.gridOptionsWrapper.getLocaleTextFunc(),l=this.popupService.addPopup({modal:o,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:n,ariaLabel:s||a("ariaLabelDialog","Dialog")});l&&(this.close=l.hideFunc)},t.prototype.toggleMaximize=function(){var e=this.positionableFeature.getPosition();if(this.isMaximized){var i=this.lastPosition,n=i.x,o=i.y,s=i.width,a=i.height;this.setWidth(s),this.setHeight(a),this.positionableFeature.offsetElement(n,o)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},t.prototype.refreshMaximizeIcon=function(){Ke(this.maximizeIcon,!this.isMaximized),Ke(this.minimizeIcon,this.isMaximized)},t.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(e){return e()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},t.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),r.prototype.destroy.call(this)},t.prototype.setResizable=function(e){this.positionableFeature.setResizable(e)},t.prototype.setMovable=function(e){this.positionableFeature.setMovable(e,this.eTitleBar)},t.prototype.setMaximizable=function(e){var i=this;if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}var n=this.eTitleBar;if(!(!n||e===this.isMaximizable)){var o=this.maximizeButtonComp=this.createBean(new le('<div class="ag-dialog-button"></span>')),s=o.getGui();s.appendChild(this.maximizeIcon=_i("maximize",this.gridOptionsWrapper)),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),s.appendChild(this.minimizeIcon=_i("minimize",this.gridOptionsWrapper)),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon","ag-hidden"),o.addManagedListener(s,"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(o,0),this.maximizeListeners.push(this.addManagedListener(n,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){i.isMaximized=!1,i.refreshMaximizeIcon()})}},kq([b("popupService")],t.prototype,"popupService",void 0),t}(MP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Bq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Uq=function(r){Bq(t,r);function t(e){var i=r.call(this,e,"ag-color-picker","colorPicker")||this;return e&&e.color&&(i.value=e.color),i}return t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},t.prototype.showPicker=function(){var e=this,i=this.getGui().getBoundingClientRect(),n=this.createBean(new TP({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:i.right-190,y:i.top-250}));this.isPickerDisplayed=!0,n.addCssClass("ag-color-dialog"),$n(this.eWrapper,!0);var o=this.createBean(new Hq({picker:this}));return o.addDestroyFunc(function(){n.isAlive()&&e.destroyBean(n)}),n.setParentComponent(this),n.setBodyComponent(o),o.setValue(this.getValue()),n.addDestroyFunc(function(){e.isDestroyingPicker?e.isDestroyingPicker=!1:(e.isDestroyingPicker=!0,o.isAlive()&&e.destroyBean(o)),e.isAlive()&&($n(e.eWrapper,!1),e.getFocusableElement().focus()),e.isPickerDisplayed=!1}),n},t.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,r.prototype.setValue.call(this,e))},t.prototype.getValue=function(){return this.value},t}(hP);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var zq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ss=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},jq=function(r){zq(t,r);function t(e){e===void 0&&(e={});var i=r.call(this,t.getTemplate(e))||this;i.suppressEnabledCheckbox=!0,i.suppressOpenCloseIcons=!1;var n=e.title,o=e.enabled,s=e.items,a=e.suppressEnabledCheckbox,l=e.suppressOpenCloseIcons;return i.title=n,i.cssIdentifier=e.cssIdentifier||"default",i.enabled=o!=null?o:!0,i.items=s||[],i.alignItems=e.alignItems||"center",a!=null&&(i.suppressEnabledCheckbox=a),l!=null&&(i.suppressOpenCloseIcons=l),i}return t.getTemplate=function(e){var i=e.cssIdentifier||"default",n=e.direction||"vertical";return'<div class="ag-group ag-'+i+`-group" role="presentation">
            <div class="ag-group-title-bar ag-`+i+`-group-title-bar ag-unselectable" ref="eTitleBar" role="button">
                <span class="ag-group-title-bar-icon ag-`+i+`-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-`+i+`-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-`+i+`-group-title"></span>
            </div>
            <div ref="eToolbar" class="ag-group-toolbar ag-`+i+`-group-toolbar">
                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
            </div>
            <div ref="eContainer" class="ag-group-container ag-group-container-`+n+" ag-"+i+`-group-container"></div>
        </div>`},t.prototype.postConstruct=function(){if(this.items.length){var e=this.items;this.items=[],this.addItems(e)}var i=this.gridOptionsWrapper.getLocaleTextFunc();this.cbGroupEnabled.setLabel(i("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},t.prototype.setupExpandContract=function(){var e=this;this.eGroupClosedIcon.appendChild(ar("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(ar("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eTitleBar,"click",function(){return e.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(i){switch(i.key){case lt.ENTER:case lt.SPACE:i.preventDefault(),e.toggleGroupExpand();break;case lt.RIGHT:case lt.LEFT:i.preventDefault(),e.toggleGroupExpand(i.key===lt.RIGHT);break}})},t.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||$n(this.eTitleBar,this.expanded)},t.prototype.refreshChildDisplay=function(){var e=!this.suppressOpenCloseIcons;Ke(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),Ke(this.eGroupOpenedIcon,e&&this.expanded),Ke(this.eGroupClosedIcon,e&&!this.expanded)},t.prototype.isExpanded=function(){return this.expanded},t.prototype.setAlignItems=function(e){this.alignItems!==e&&this.removeCssClass("ag-group-item-alignment-"+this.alignItems),this.alignItems=e;var i="ag-group-item-alignment-"+this.alignItems;return this.addCssClass(i),this},t.prototype.toggleGroupExpand=function(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),Ke(this.eContainer,!0),this):(e=e!=null?e:!this.expanded,this.expanded===e?this:(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),Ke(this.eContainer,e),this.dispatchEvent({type:this.expanded?t.EVENT_EXPANDED:t.EVENT_COLLAPSED}),this))},t.prototype.addItems=function(e){var i=this;e.forEach(function(n){return i.addItem(n)})},t.prototype.addItem=function(e){var i=this.eContainer,n=e instanceof le?e.getGui():e;n.classList.add("ag-group-item","ag-"+this.cssIdentifier+"-group-item"),i.appendChild(n),this.items.push(n)},t.prototype.hideItem=function(e,i){var n=this.items[i];n.classList.toggle("ag-hidden",e)},t.prototype.setTitle=function(e){return this.eTitle.innerText=e,this},t.prototype.addCssClassToTitleBar=function(e){this.eTitleBar.classList.add(e)},t.prototype.setEnabled=function(e,i){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),i||this.cbGroupEnabled.setValue(e),this},t.prototype.isEnabled=function(){return this.enabled},t.prototype.onEnableChange=function(e){var i=this;return this.cbGroupEnabled.onValueChange(function(n){i.setEnabled(n,!0),e(n)}),this},t.prototype.hideEnabledCheckbox=function(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},t.prototype.hideOpenCloseIcons=function(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this},t.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},t.EVENT_EXPANDED="expanded",t.EVENT_COLLAPSED="collapsed",Ss([ut("eTitleBar")],t.prototype,"eTitleBar",void 0),Ss([ut("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),Ss([ut("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),Ss([ut("eToolbar")],t.prototype,"eToolbar",void 0),Ss([ut("cbGroupEnabled")],t.prototype,"cbGroupEnabled",void 0),Ss([ut("eTitle")],t.prototype,"eTitle",void 0),Ss([ut("eContainer")],t.prototype,"eContainer",void 0),Ss([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var $q=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Yq=function(r){$q(t,r);function t(e){var i=r.call(this)||this;i.skipTabGuardFocus=!1;var n=e.comp,o=e.eTopGuard,s=e.eBottomGuard,a=e.focusInnerElement,l=e.onFocusIn,u=e.onFocusOut,c=e.shouldStopEventPropagation,h=e.onTabKeyDown,d=e.handleKeyDown,p=e.eFocusableElement;return i.comp=n,i.eTopGuard=o,i.eBottomGuard=s,i.providedFocusInnerElement=a,i.eFocusableElement=p,i.providedFocusIn=l,i.providedFocusOut=u,i.providedShouldStopEventPropagation=c,i.providedOnTabKeyDown=h,i.providedHandleKeyDown=d,i}return t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new aa(this.eFocusableElement,{shouldStopEventPropagation:function(){return e.shouldStopEventPropagation()},onTabKeyDown:function(i){return e.onTabKeyDown(i)},handleKeyDown:function(i){return e.handleKeyDown(i)},onFocusIn:function(i){return e.onFocusIn(i)},onFocusOut:function(i){return e.onFocusOut(i)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(i){return e.addManagedListener(i,"focus",e.onFocus.bind(e))})},t.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},t.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},t.prototype.shouldStopEventPropagation=function(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1},t.prototype.activateTabGuards=function(){this.comp.setTabIndex(this.getGridTabIndex())},t.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},t.prototype.onFocus=function(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}var i=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(i):this.focusInnerElement(i)},t.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},t.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},t.prototype.onTabKeyDown=function(e){var i=this;if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(!e.defaultPrevented){var n=this.tabGuardsAreActive();n&&this.deactivateTabGuards();var o=this.getNextFocusableElement(e.shiftKey);n&&setTimeout(function(){return i.activateTabGuards()},0),o&&(o.focus(),e.preventDefault())}},t.prototype.getGridTabIndex=function(){return this.gridOptionsWrapper.getGridTabIndex()},t.prototype.focusInnerElement=function(e){e===void 0&&(e=!1);var i=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(i.splice(0,1),i.splice(i.length-1,1)),i.length&&i[e?i.length-1:0].focus()},t.prototype.getNextFocusableElement=function(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)},t.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1);var i=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,i.focus()},Vx([b("focusService")],t.prototype,"focusService",void 0),Vx([Ct],t.prototype,"postConstruct",null),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Kq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xq=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},qq=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Xq(arguments[t]));return r},Bg=function(r){Kq(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initialiseTabGuard=function(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var i=[this.eTopGuard,this.eBottomGuard],n={setTabIndex:function(o){i.forEach(function(s){return o!=null?s.setAttribute("tabIndex",o):s.removeAttribute("tabIndex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new Yq({comp:n,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))},t.prototype.createTabGuard=function(e){var i=document.createElement("div");return i.classList.add("ag-tab-guard","ag-tab-guard-"+e),an(i,"presentation"),i},t.prototype.addTabGuards=function(e,i){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",i)},t.prototype.removeAllChildrenExceptTabGuards=function(){var e=[this.eTopGuard,this.eBottomGuard];qn(this.getFocusableElement()),this.addTabGuards.apply(this,qq(e))},t.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1),this.tabGuardCtrl.forceFocusOutOfContainer(e)},t.prototype.appendChild=function(e,i){sd(e)||(e=e.getGui());var n=this.eBottomGuard;n?n.insertAdjacentElement("beforebegin",e):r.prototype.appendChild.call(this,e,i)},t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Zq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),tg=function(){return tg=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tg.apply(this,arguments)},kx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Jq=function(r){Zq(t,r);function t(e){e===void 0&&(e=1);var i=r.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return i.level=e,i.menuItems=[],i}return t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(i){return e.onTabKeyDown(i)},handleKeyDown:function(i){return e.handleKeyDown(i)}})},t.prototype.onTabKeyDown=function(e){var i=this.getParentComponent(),n=i&&i.getGui(),o=n&&n.classList.contains("ag-focus-managed");o||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},t.prototype.handleKeyDown=function(e){switch(e.key){case lt.UP:case lt.RIGHT:case lt.DOWN:case lt.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case lt.ESCAPE:var i=this.findTopMenu();i&&this.focusService.focusInto(i.getGui());break}},t.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},t.prototype.addMenuItems=function(e){var i=this;e!=null&&e.forEach(function(n){n==="separator"?i.addSeparator():typeof n=="string"?console.warn("AG Grid: unrecognised menu item "+n):i.addItem(n)})},t.prototype.addItem=function(e){var i=this,n=this.createManagedBean(new Ac(tg(tg({},e),{isAnotherSubMenuOpen:function(){return i.menuItems.some(function(o){return o.isSubMenuOpen()})}})));n.setParentComponent(this),XT(n.getGui(),this.level),this.menuItems.push(n),this.appendChild(n.getGui()),this.addManagedListener(n,Ac.EVENT_MENU_ITEM_SELECTED,function(o){i.dispatchEvent(o)}),this.addManagedListener(n,Ac.EVENT_MENU_ITEM_ACTIVATED,function(o){i.activeMenuItem&&i.activeMenuItem!==o.menuItem&&i.activeMenuItem.deactivate(),i.activeMenuItem=o.menuItem})},t.prototype.activateFirstItem=function(){var e=this.menuItems.filter(function(i){return!i.isDisabled()})[0];!e||e.activate()},t.prototype.addSeparator=function(){var e=`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`;this.appendChild(Hi(e))},t.prototype.findTopMenu=function(){var e=this.getParentComponent();if(!e&&this instanceof t)return this;for(;;){var i=e&&e.getParentComponent&&e.getParentComponent();if(!i||!(i instanceof t||i instanceof Ac))break;e=i}return e instanceof t?e:void 0},t.prototype.handleNavKey=function(e){switch(e){case lt.UP:case lt.DOWN:var i=this.findNextItem(e===lt.UP);i&&i!==this.activeMenuItem&&i.activate();return}var n=this.gridOptionsWrapper.isEnableRtl()?lt.RIGHT:lt.LEFT;e===n?this.closeIfIsChild():this.openChild()},t.prototype.closeIfIsChild=function(e){var i=this.getParentComponent();i&&i instanceof Ac&&(e&&e.preventDefault(),i.closeSubMenu(),i.getGui().focus())},t.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},t.prototype.findNextItem=function(e){var i=this.menuItems.filter(function(l){return!l.isDisabled()});if(!!i.length){if(!this.activeMenuItem)return e?Ue(i):i[0];e&&i.reverse();for(var n,o=!1,s=0;s<i.length;s++){var a=i[s];if(!o){a===this.activeMenuItem&&(o=!0);continue}n=a;break}return n||this.activeMenuItem}},t.prototype.destroy=function(){this.clearActiveItem(),r.prototype.destroy.call(this)},kx([b("focusService")],t.prototype,"focusService",void 0),kx([Ct],t.prototype,"postConstruct",null),t}(Bg);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Qq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),tZ=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},eZ=function(r){Qq(t,r);function t(e){var i=r.call(this)||this;return i.wrappedComponent=e,i.setTemplateFromElement(e.getGui()),i}return t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(i){return e.onTabKeyDown(i)},handleKeyDown:function(i){return e.handleKeyDown(i)}})},t.prototype.handleKeyDown=function(e){e.key===lt.ESCAPE&&this.closePanel()},t.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},t.prototype.closePanel=function(){var e=this.parentComponent;e.closeSubMenu(),setTimeout(function(){return e.getGui().focus()},0)},tZ([Ct],t.prototype,"postConstruct",null),t}(Bg);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var iZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ac=function(r){iZ(t,r);function t(e){var i=r.call(this)||this;return i.params=e,i.isActive=!1,i.subMenuIsOpen=!1,i.setTemplate('<div class="'+i.getClassName()+'" tabindex="-1" role="treeitem"></div>'),i}return t.prototype.init=function(){var e=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var i=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),ew(i,!0)):(this.addGuiEventListener("click",function(n){return e.onItemSelected(n)}),this.addGuiEventListener("keydown",function(n){(n.key===lt.ENTER||n.key===lt.SPACE)&&(n.preventDefault(),e.onItemSelected(n))}),this.addGuiEventListener("mousedown",function(n){n.stopPropagation(),n.preventDefault()}),this.addGuiEventListener("mouseenter",function(){return e.onMouseEnter()}),this.addGuiEventListener("mouseleave",function(){return e.onMouseLeave()})),this.params.cssClasses&&this.params.cssClasses.forEach(function(n){return e.addCssClass(n)})},t.prototype.isDisabled=function(){return!!this.params.disabled},t.prototype.openSubMenu=function(e){var i=this;if(e===void 0&&(e=!1),this.closeSubMenu(),!!this.params.subMenu){var n=Hi('<div class="ag-menu" role="presentation"></div>'),o;if(this.params.subMenu instanceof Array){var s=$T(this.getGui()),a=isNaN(s)?1:s+1,l=this.createBean(new Jq(a));l.setParentComponent(this),l.addMenuItems(this.params.subMenu),n.appendChild(l.getGui()),this.addManagedListener(l,t.EVENT_MENU_ITEM_SELECTED,function(C){return i.dispatchEvent(C)}),l.addGuiEventListener("mouseenter",function(){return i.cancelDeactivate()}),o=function(){return i.destroyBean(l)},e&&setTimeout(function(){return l.activateFirstItem()},0)}else{var u=this.params.subMenu,c=this.createBean(new eZ(u));c.setParentComponent(this);var h=c.getGui(),d="mouseenter",p=function(){return i.cancelDeactivate()};h.addEventListener(d,p),o=function(){return h.removeEventListener(d,p)},n.appendChild(h),u.afterGuiAttached&&setTimeout(function(){return u.afterGuiAttached()},0)}var f=this.getGui(),m=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:f,ePopup:n}),g=this.gridOptionsWrapper.getLocaleTextFunc(),y=this.popupService.addPopup({modal:!0,eChild:n,positionCallback:m,anchorToElement:f,ariaLabel:g("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,$n(f,!0),this.hideSubMenu=function(){y&&y.hideFunc(),i.subMenuIsOpen=!1,$n(f,!1),o()}}},t.prototype.closeSubMenu=function(){!this.hideSubMenu||(this.hideSubMenu(),this.hideSubMenu=null,$n(this.getGui(),!1))},t.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},t.prototype.activate=function(e){var i=this;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout(function(){i.isAlive()&&i.isActive&&i.openSubMenu()},300),this.onItemActivated())},t.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},t.prototype.addIcon=function(){if(!(!this.params.checked&&!this.params.icon&&this.params.isCompact)){var e=Hi('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?e.appendChild(_i("check",this.gridOptionsWrapper)):this.params.icon&&(sd(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}},t.prototype.addName=function(){if(!(!this.params.name&&this.params.isCompact)){var e=Hi('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(e)}},t.prototype.addTooltip=function(){!this.params.tooltip||(this.tooltip=this.params.tooltip,this.gridOptionsWrapper.isEnableBrowserTooltips()?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new uw(this)))},t.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},t.prototype.addShortcut=function(){if(!(!this.params.shortcut&&this.params.isCompact)){var e=Hi('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(e)}},t.prototype.addSubMenu=function(){if(!(!this.params.subMenu&&this.params.isCompact)){var e=Hi('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),i=this.getGui();if(this.params.subMenu){var n=this.gridOptionsWrapper.isEnableRtl()?"smallLeft":"smallRight";$n(i,!1),e.appendChild(_i(n,this.gridOptionsWrapper))}i.appendChild(e)}},t.prototype.onItemSelected=function(e){if(this.params.action?this.params.action():this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action)){var i={type:t.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e};this.dispatchEvent(i)}},t.prototype.onItemActivated=function(){var e={type:t.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)},t.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},t.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},t.prototype.onMouseEnter=function(){var e=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(function(){return e.activate(!0)},t.ACTIVATION_DELAY):this.activate(!0)},t.prototype.onMouseLeave=function(){var e=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(function(){return e.deactivate()},t.ACTIVATION_DELAY):this.deactivate()},t.prototype.getClassName=function(e){var i=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?i+"-"+e:i},t.EVENT_MENU_ITEM_SELECTED="menuItemSelected",t.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",t.ACTIVATION_DELAY=80,Bx([b("popupService")],t.prototype,"popupService",void 0),Bx([Ct],t.prototype,"init",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var nZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zr=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},rZ=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},oZ=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(rZ(arguments[t]));return r},sh=function(r){nZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}e=t,t.addKeyboardModeEvents=function(i,n){var o=e.instancesMonitored.get(i);o&&o.length>0?o.indexOf(n)===-1&&o.push(n):(e.instancesMonitored.set(i,[n]),i.addEventListener("keydown",e.toggleKeyboardMode),i.addEventListener("mousedown",e.toggleKeyboardMode))},t.removeKeyboardModeEvents=function(i,n){var o=e.instancesMonitored.get(i),s=[];o&&o.length&&(s=oZ(o).filter(function(a){return a!==n}),e.instancesMonitored.set(i,s)),s.length===0&&(i.removeEventListener("keydown",e.toggleKeyboardMode),i.removeEventListener("mousedown",e.toggleKeyboardMode))},t.toggleKeyboardMode=function(i){var n=e.keyboardModeActive,o=i.type==="keydown";if(!(o&&(i.ctrlKey||i.metaKey||i.altKey))&&!(n&&o||!n&&!o)){e.keyboardModeActive=o;var s=i.target.ownerDocument;if(!!s){var a=e.instancesMonitored.get(s);a&&a.forEach(function(l){l.dispatchEvent({type:o?O.EVENT_KEYBOARD_FOCUS:O.EVENT_MOUSE_FOCUS})})}}},t.prototype.init=function(){var i=this,n=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,O.EVENT_COLUMN_PIVOT_MODE_CHANGED,n),this.addManagedListener(this.eventService,O.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_GROUP_OPENED,n),this.addManagedListener(this.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,n),this.ctrlsService.whenReady(function(o){i.gridCtrl=o.gridCtrl;var s=i.gridOptionsWrapper.getDocument();e.addKeyboardModeEvents(s,i.gridCtrl),i.addDestroyFunc(function(){return i.unregisterGridCompController(i.gridCtrl)})})},t.prototype.unregisterGridCompController=function(i){var n=this.gridOptionsWrapper.getDocument();e.removeKeyboardModeEvents(n,i)},t.prototype.onColumnEverythingChanged=function(){if(!!this.focusedCellPosition){var i=this.focusedCellPosition.column,n=this.columnModel.getGridColumn(i.getId());i!==n&&this.clearFocusedCell()}},t.prototype.isKeyboardMode=function(){return e.keyboardModeActive},t.prototype.getFocusCellToUseAfterRefresh=function(){var i=this.gridOptionsWrapper.getDocument();return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(i.activeElement,ja.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},t.prototype.getFocusHeaderToUseAfterRefresh=function(){var i=this.gridOptionsWrapper.getDocument();return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(i.activeElement,kg.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},t.prototype.isDomDataMissingInHierarchy=function(i,n){for(var o=i;o;){var s=this.gridOptionsWrapper.getDomData(o,n);if(s)return!1;o=o.parentNode}return!0},t.prototype.clearFocusedCell=function(){this.focusedCellPosition=null,this.onCellFocused(!1,!1)},t.prototype.getFocusedCell=function(){return this.focusedCellPosition},t.prototype.setFocusedCell=function(i){var n=i.column,o=i.rowIndex,s=i.rowPinned,a=i.forceBrowserFocus,l=a===void 0?!1:a,u=i.preventScrollOnBrowserFocus,c=u===void 0?!1:u,h=this.columnModel.getGridColumn(n);if(!h){this.focusedCellPosition=null;return}this.focusedCellPosition=h?{rowIndex:o,rowPinned:Ys(s),column:h}:null,this.onCellFocused(l,c)},t.prototype.isCellFocused=function(i){return this.focusedCellPosition==null?!1:this.focusedCellPosition.column===i.column&&this.isRowFocused(i.rowIndex,i.rowPinned)},t.prototype.isRowNodeFocused=function(i){return this.isRowFocused(i.rowIndex,i.rowPinned)},t.prototype.isHeaderWrapperFocused=function(i){if(this.focusedHeaderPosition==null)return!1;var n=i.getColumnGroupChild(),o=i.getRowIndex(),s=i.getPinned(),a=this.focusedHeaderPosition,l=a.column,u=a.headerRowIndex;return n===l&&o===u&&s==l.getPinned()},t.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},t.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},t.prototype.setFocusedHeader=function(i,n){this.focusedHeaderPosition={headerRowIndex:i,column:n}},t.prototype.focusHeaderPosition=function(i){var n=i.direction,o=i.fromTab,s=i.allowUserOverride,a=i.event,l=i.headerPosition;if(s){var u=this.gridOptionsWrapper,c=this.getFocusedHeader(),h=this.headerNavigationService.getHeaderRowCount();if(o){var d=u.getTabToNextHeaderFunc();if(d){var p={backwards:n==="Before",previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:h};l=d(p)}}else{var d=u.getNavigateToNextHeaderFunc();if(d&&a){var f={key:a.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:h,event:a};l=d(f)}}}if(!l)return!1;if(l.headerRowIndex===-1)return this.focusGridView(l.column);this.headerNavigationService.scrollToColumn(l.column,n);var m=this.ctrlsService.getHeaderRowContainerCtrl(l.column.getPinned()),g=m.focusHeader(l.headerRowIndex,l.column,a);return g},t.prototype.focusFirstHeader=function(){var i=this.columnModel.getAllDisplayedColumns()[0];return i?(i.getParent()&&(i=this.columnModel.getColumnGroupAtLevel(i,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:i}})):!1},t.prototype.focusLastHeader=function(i){var n=this.headerNavigationService.getHeaderRowCount()-1,o=Ue(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:o},event:i})},t.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},t.prototype.isRowFocused=function(i,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===i&&this.focusedCellPosition.rowPinned===Ys(n)},t.prototype.findFocusableElements=function(i,n,o){o===void 0&&(o=!1);var s=H.FOCUSABLE_SELECTOR,a=H.FOCUSABLE_EXCLUDE;n&&(a+=", "+n),o&&(a+=', [tabindex="-1"]');var l=Array.prototype.slice.apply(i.querySelectorAll(s)),u=Array.prototype.slice.apply(i.querySelectorAll(a));if(!u.length)return l;var c=function(h,d){return h.filter(function(p){return d.indexOf(p)===-1})};return c(l,u)},t.prototype.focusInto=function(i,n,o){n===void 0&&(n=!1),o===void 0&&(o=!1);var s=this.findFocusableElements(i,null,o),a=n?Ue(s):s[0];return a?(a.focus(),!0):!1},t.prototype.findNextFocusableElement=function(i,n,o){i===void 0&&(i=this.eGridDiv);var s=this.findFocusableElements(i,n?':not([tabindex="-1"])':null),a=this.gridOptionsWrapper.getDocument(),l=a.activeElement,u;n?u=s.findIndex(function(h){return h.contains(l)}):u=s.indexOf(l);var c=u+(o?-1:1);return c<0||c>=s.length?null:s[c]},t.prototype.isFocusUnderManagedComponent=function(i){var n=this.gridOptionsWrapper.getDocument(),o=i.querySelectorAll("."+aa.FOCUS_MANAGED_CLASS);if(!o.length)return!1;for(var s=0;s<o.length;s++)if(o[s].contains(n.activeElement))return!0;return!1},t.prototype.findTabbableParent=function(i,n){n===void 0&&(n=5);for(var o=0;i&&Wf(i)===null&&++o<=n;)i=i.parentElement;return Wf(i)===null?null:i},t.prototype.onCellFocused=function(i,n){var o={type:O.EVENT_CELL_FOCUSED,forceBrowserFocus:i,preventScrollOnBrowserFocus:n,rowIndex:null,column:null,floating:null,rowPinned:null,isFullWidthCell:!1};if(this.focusedCellPosition){var s=o.rowIndex=this.focusedCellPosition.rowIndex,a=o.rowPinned=this.focusedCellPosition.rowPinned;o.column=this.focusedCellPosition.column;var l=this.rowRenderer.getRowByPosition({rowIndex:s,rowPinned:a});l&&(o.isFullWidthCell=l.isFullWidth())}this.eventService.dispatchEvent(o)},t.prototype.focusGridView=function(i,n){if(this.gridOptionsWrapper.isSuppressCellFocus())return n?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var o=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!o)return!1;var s=o.rowIndex,a=o.rowPinned,l=this.getFocusedHeader();if(!i&&l&&(i=l.column),s==null||!i)return!1;if(this.navigationService.ensureCellVisible({rowIndex:s,column:i,rowPinned:a}),this.setFocusedCell({rowIndex:s,column:i,rowPinned:Ys(a),forceBrowserFocus:!0}),this.rangeService){var u={rowIndex:s,rowPinned:a,column:i};this.rangeService.setRangeToCell(u)}return!0},t.prototype.focusNextGridCoreContainer=function(i){return this.gridCtrl.focusNextInnerContainer(i)?!0:(!i&&!this.gridCtrl.isDetailGrid()&&this.gridCtrl.forceFocusOutOfContainer(),!1)};var e;return t.AG_KEYBOARD_FOCUS="ag-keyboard-focus",t.keyboardModeActive=!1,t.instancesMonitored=new Map,Zr([b("eGridDiv")],t.prototype,"eGridDiv",void 0),Zr([b("columnModel")],t.prototype,"columnModel",void 0),Zr([b("headerNavigationService")],t.prototype,"headerNavigationService",void 0),Zr([b("rowRenderer")],t.prototype,"rowRenderer",void 0),Zr([b("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Zr([Ae("rangeService")],t.prototype,"rangeService",void 0),Zr([b("navigationService")],t.prototype,"navigationService",void 0),Zr([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Zr([Ct],t.prototype,"init",null),t=e=Zr([Dt("focusService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var sZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ya=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},aZ=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},lZ=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(aZ(arguments[t]));return r},Ms;(function(r){r[r.vertical=0]="vertical",r[r.horizontal=1]="horizontal"})(Ms||(Ms={}));var uZ=0,cZ=function(r){sZ(t,r);function t(){var i=r!==null&&r.apply(this,arguments)||this;return i.popupList=[],i}e=t,t.prototype.postConstruct=function(){var i=this;this.ctrlsService.whenReady(function(n){i.gridCtrl=n.gridCtrl,i.addManagedListener(i.gridCtrl,O.EVENT_KEYBOARD_FOCUS,function(){i.popupList.forEach(function(o){return o.element.classList.add(sh.AG_KEYBOARD_FOCUS)})}),i.addManagedListener(i.gridCtrl,O.EVENT_MOUSE_FOCUS,function(){i.popupList.forEach(function(o){return o.element.classList.remove(sh.AG_KEYBOARD_FOCUS)})})})},t.prototype.getPopupParent=function(){var i=this.gridOptionsWrapper.getPopupParent();return i||this.gridCtrl.getGui()},t.prototype.positionPopupForMenu=function(i){var n=i.eventSource.getBoundingClientRect(),o=this.getParentRect(),s=this.keepXYWithinBounds(i.ePopup,n.top-o.top,Ms.vertical),a=i.ePopup.clientWidth>0?i.ePopup.clientWidth:200;i.ePopup.style.minWidth=a+"px";var l=o.right-o.left,u=l-a,c;this.gridOptionsWrapper.isEnableRtl()?(c=d(),c<0&&(c=h()),c>u&&(c=0)):(c=h(),c>u&&(c=d()),c<0&&(c=0)),i.ePopup.style.left=c+"px",i.ePopup.style.top=s+"px";function h(){return n.right-o.left-2}function d(){return n.left-o.left-a}},t.prototype.positionPopupUnderMouseEvent=function(i){var n=i.ePopup,o=i.nudgeX,s=i.nudgeY,a=i.skipObserver,l=this.calculatePointerAlign(i.mouseEvent),u=l.x,c=l.y;this.positionPopup({ePopup:n,x:u,y:c,nudgeX:o,nudgeY:s,keepWithinBounds:!0,skipObserver:a}),this.callPostProcessPopup(i.type,i.ePopup,null,i.mouseEvent,i.column,i.rowNode)},t.prototype.calculatePointerAlign=function(i){var n=this.getParentRect();return{x:i.clientX-n.left,y:i.clientY-n.top}},t.prototype.positionPopupUnderComponent=function(i){var n=i.eventSource.getBoundingClientRect(),o=i.alignSide||"left",s=this.getParentRect(),a=n.left-s.left;o==="right"&&(a-=i.ePopup.offsetWidth-n.width),this.positionPopup({ePopup:i.ePopup,nudgeX:i.nudgeX,nudgeY:i.nudgeY,x:a,y:n.top-s.top+n.height,keepWithinBounds:i.keepWithinBounds}),this.callPostProcessPopup(i.type,i.ePopup,i.eventSource,null,i.column,i.rowNode)},t.prototype.positionPopupOverComponent=function(i){var n=i.eventSource.getBoundingClientRect(),o=this.getParentRect();this.positionPopup({ePopup:i.ePopup,nudgeX:i.nudgeX,nudgeY:i.nudgeY,x:n.left-o.left,y:n.top-o.top,keepWithinBounds:i.keepWithinBounds}),this.callPostProcessPopup(i.type,i.ePopup,i.eventSource,null,i.column,i.rowNode)},t.prototype.callPostProcessPopup=function(i,n,o,s,a,l){var u=this.gridOptionsWrapper.getPostProcessPopupFunc();if(u){var c={column:a,rowNode:l,ePopup:n,type:i,eventSource:o,mouseEvent:s};u(c)}},t.prototype.positionPopup=function(i){var n=this,o=i.x,s=i.y,a=i.ePopup,l=i.keepWithinBounds,u=i.nudgeX,c=i.nudgeY,h=i.skipObserver,d=o,p=s;u&&(d+=u),c&&(p+=c);var f=function(){l&&(d=n.keepXYWithinBounds(a,d,Ms.horizontal),p=n.keepXYWithinBounds(a,p,Ms.vertical)),a.style.left=d+"px",a.style.top=p+"px"};if(f(),!h){var m=this.resizeObserverService.observeResize(a,f);setTimeout(function(){return m()},e.WAIT_FOR_POPUP_CONTENT_RESIZE)}},t.prototype.getActivePopups=function(){return this.popupList.map(function(i){return i.element})},t.prototype.getPopupList=function(){return this.popupList},t.prototype.getParentRect=function(){var i=this.gridOptionsWrapper.getDocument(),n=this.getPopupParent();n===i.body?n=i.documentElement:getComputedStyle(n).position==="static"&&(n=n.offsetParent);var o=getComputedStyle(n),s=n.getBoundingClientRect();return{top:s.top+parseFloat(o.borderTopWidth)||0,left:s.left+parseFloat(o.borderLeftWidth)||0,right:s.right+parseFloat(o.borderRightWidth)||0,bottom:s.bottom+parseFloat(o.borderBottomWidth)||0}},t.prototype.keepXYWithinBounds=function(i,n,o){var s=o===Ms.vertical,a=s?"clientHeight":"clientWidth",l=s?"top":"left",u=s?"offsetHeight":"offsetWidth",c=s?"scrollTop":"scrollLeft",h=this.gridOptionsWrapper.getDocument(),d=h.documentElement,p=this.getPopupParent(),f=p.getBoundingClientRect(),m=h.documentElement.getBoundingClientRect(),g=p===h.body,y=i[u],C=s?YC:Wg,w=g?C(d)+d[c]:p[a];g&&(w-=Math.abs(m[l]-f[l]));var S=w-y;return Math.min(Math.max(n,0),Math.abs(S))},t.prototype.keepPopupPositionedRelativeTo=function(i){var n=this,o=this.getPopupParent(),s=o.getBoundingClientRect(),a=i.element.getBoundingClientRect(),l=s.top-a.top,u=s.left-a.left,c=l,h=u,d=i.ePopup.style.top,p=parseInt(d.substring(0,d.length-1),10),f=i.ePopup.style.left,m=parseInt(f.substring(0,f.length-1),10);return new cr(function(g){n.getFrameworkOverrides().setInterval(function(){var y=o.getBoundingClientRect(),C=i.element.getBoundingClientRect(),w=C.top==0&&C.left==0&&C.height==0&&C.width==0;if(w){i.hidePopup();return}var S=y.top-C.top;if(S!=c){var E=n.keepXYWithinBounds(i.ePopup,p+l-S,Ms.vertical);i.ePopup.style.top=E+"px"}c=S;var M=y.left-C.left;if(M!=h){var L=n.keepXYWithinBounds(i.ePopup,m+u-M,Ms.horizontal);i.ePopup.style.left=L+"px"}h=M},200).then(function(y){var C=function(){y!=null&&window.clearInterval(y)};g(C)})})},t.prototype.addPopup=function(i){var n,o=this,s=i.modal,a=i.eChild,l=i.closeOnEsc,u=i.closedCallback,c=i.click,h=i.alwaysOnTop,d=i.afterGuiAttached,p=i.positionCallback,f=i.anchorToElement,m=i.ariaLabel,g=this.gridOptionsWrapper.getDocument(),y=new cr(function(Q){return Q(function(){})});if(!g)return console.warn("ag-grid: could not find the document, document is empty"),{hideFunc:function(){},stopAnchoringPromise:y};var C=this.popupList.findIndex(function(Q){return Q.element===a});if(C!==-1){var w=this.popupList[C];return{hideFunc:w.hideFunc,stopAnchoringPromise:w.stopAnchoringPromise}}var S=this.getPopupParent();a.style.top==null&&(a.style.top="0px"),a.style.left==null&&(a.style.left="0px");var E=document.createElement("div"),M=this.environment.getTheme().allThemes;M.length&&(n=E.classList).add.apply(n,lZ(M)),E.classList.add("ag-popup"),a.classList.add(this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr","ag-popup-child"),a.hasAttribute("role")||an(a,"dialog"),cl(a,m),this.focusService.isKeyboardMode()&&a.classList.add(sh.AG_KEYBOARD_FOCUS),E.appendChild(a),S.appendChild(E),h?this.setAlwaysOnTop(E,!0):this.bringPopupToFront(E);var L=!1,x=function(Q){if(!!E.contains(g.activeElement)){var z=Q.key;z===lt.ESCAPE&&K({keyboardEvent:Q})}},T=function(Q){return K({mouseEvent:Q})},N=function(Q){return K({touchEvent:Q})},K=function(Q){Q===void 0&&(Q={});var z=Q.mouseEvent,V=Q.touchEvent,W=Q.keyboardEvent;o.isEventFromCurrentPopup({mouseEvent:z,touchEvent:V},a)||o.isEventSameChainAsOriginalEvent({originalMouseEvent:c,mouseEvent:z,touchEvent:V})||L||(L=!0,S.removeChild(E),g.removeEventListener("keydown",x),g.removeEventListener("mousedown",T),g.removeEventListener("touchstart",N),g.removeEventListener("contextmenu",T),o.eventService.removeEventListener(O.EVENT_DRAG_STARTED,T),u&&u(z||V||W),o.popupList=o.popupList.filter(function(q){return q.element!==a}),y&&y.then(function(q){return q&&q()}))};return d&&d({hidePopup:K}),window.setTimeout(function(){l&&g.addEventListener("keydown",x),s&&(g.addEventListener("mousedown",T),o.eventService.addEventListener(O.EVENT_DRAG_STARTED,T),g.addEventListener("touchstart",N),g.addEventListener("contextmenu",T))},0),p&&p(),f&&(y=this.keepPopupPositionedRelativeTo({element:f,ePopup:a,hidePopup:K})),this.popupList.push({element:a,wrapper:E,hideFunc:K,stopAnchoringPromise:y,instanceId:uZ++,isAnchored:!!f}),{hideFunc:K,stopAnchoringPromise:y}},t.prototype.hasAnchoredPopup=function(){return this.popupList.some(function(i){return i.isAnchored})},t.prototype.isEventFromCurrentPopup=function(i,n){var o=i.mouseEvent,s=i.touchEvent,a=o||s;if(!a)return!1;var l=this.popupList.findIndex(function(h){return h.element===n});if(l===-1)return!1;for(var u=l;u<this.popupList.length;u++){var c=this.popupList[u];if(Hf(c.element,a))return!0}return this.isElementWithinCustomPopup(a.target)},t.prototype.isElementWithinCustomPopup=function(i){for(var n=this.gridOptionsWrapper.getDocument();i&&i!==n.body;){if(i.classList.contains("ag-custom-component-popup")||i.parentElement===null)return!0;i=i.parentElement}return!1},t.prototype.isEventSameChainAsOriginalEvent=function(i){var n=i.originalMouseEvent,o=i.mouseEvent,s=i.touchEvent,a=null;if(o?a=o:s&&(a=s.touches[0]),a&&n){var l=o?o.screenX:0,u=o?o.screenY:0,c=Math.abs(n.screenX-l)<5,h=Math.abs(n.screenY-u)<5;if(c&&h)return!0}return!1},t.prototype.getWrapper=function(i){for(;!i.classList.contains("ag-popup")&&i.parentElement;)i=i.parentElement;return i.classList.contains("ag-popup")?i:null},t.prototype.setAlwaysOnTop=function(i,n){var o=this.getWrapper(i);!o||(o.classList.toggle("ag-always-on-top",!!n),n&&this.bringPopupToFront(o))},t.prototype.bringPopupToFront=function(i){var n=this.getPopupParent(),o=Array.prototype.slice.call(n.querySelectorAll(".ag-popup")),s=o.length,a=Array.prototype.slice.call(n.querySelectorAll(".ag-popup.ag-always-on-top")),l=a.length,u=this.getWrapper(i);if(!(!u||s<=1||!n.contains(i))){var c=o.indexOf(u),h=u.querySelectorAll("div"),d=[];if(h.forEach(function(g){g.scrollTop!==0&&d.push([g,g.scrollTop])}),l){var p=u.classList.contains("ag-always-on-top");p?c!==s-1&&Ue(a).insertAdjacentElement("afterend",u):c!==s-l-1&&a[0].insertAdjacentElement("beforebegin",u)}else c!==s-1&&Ue(o).insertAdjacentElement("afterend",u);for(;d.length;){var f=d.pop();f[0].scrollTop=f[1]}var m={type:"popupToFront",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),eWrapper:u};this.eventService.dispatchEvent(m)}};var e;return t.WAIT_FOR_POPUP_CONTENT_RESIZE=200,ya([b("environment")],t.prototype,"environment",void 0),ya([b("focusService")],t.prototype,"focusService",void 0),ya([b("ctrlsService")],t.prototype,"ctrlsService",void 0),ya([b("resizeObserverService")],t.prototype,"resizeObserverService",void 0),ya([b("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),ya([Ct],t.prototype,"postConstruct",null),t=e=ya([Dt("popupService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var hZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),xp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};(function(r){hZ(t,r);function t(e,i,n){e===void 0&&(e="default"),i===void 0&&(i="listbox");var o=r.call(this,t.getTemplate(e))||this;return o.cssIdentifier=e,o.ariaRole=i,o.listName=n,o.renderedRows=new Map,o.rowHeight=20,o}return t.prototype.postConstruct=function(){var e=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(i){return e.onFocusIn(i)},onFocusOut:function(i){return e.onFocusOut(i)},focusInnerElement:function(i){return e.focusInnerElement(i)},onTabKeyDown:function(i){return e.onTabKeyDown(i)},handleKeyDown:function(i){return e.handleKeyDown(i)}}),this.setAriaProperties()},t.prototype.setAriaProperties=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),i=e("ariaDefaultListName",this.listName||"List"),n=this.eContainer;an(n,this.ariaRole),cl(n,i)},t.prototype.addResizeObserver=function(){var e=this.drawVirtualRows.bind(this),i=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(i)},t.prototype.focusInnerElement=function(e){this.focusRow(e?this.model.getRowCount()-1:0)},t.prototype.onFocusIn=function(e){var i=e.target;return i.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=YT(i)-1),!1},t.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},t.prototype.handleKeyDown=function(e){switch(e.key){case lt.UP:case lt.DOWN:this.navigate(e.key===lt.UP)&&e.preventDefault();break}},t.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():this.focusService.focusInto(this.getGui(),!e.shiftKey)},t.prototype.navigate=function(e){if(this.lastFocusedRowIndex==null)return!1;var i=this.lastFocusedRowIndex+(e?-1:1);return i<0||i>=this.model.getRowCount()?!1:(this.focusRow(i),!0)},t.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},t.prototype.focusRow=function(e){var i=this;this.ensureIndexVisible(e),window.setTimeout(function(){if(!!i.isAlive()){var n=i.renderedRows.get(e);n&&n.eDiv.focus()}},10)},t.prototype.getComponentAt=function(e){var i=this.renderedRows.get(e);return i&&i.rowComponent},t.prototype.forEachRenderedRow=function(e){this.renderedRows.forEach(function(i,n){return e(i.rowComponent,n)})},t.getTemplate=function(e){return`
            <div class="ag-virtual-list-viewport ag-`+e+`-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-`+e+`-virtual-list-container" ref="eContainer"></div>
            </div>`},t.prototype.getItemHeight=function(){return this.gridOptionsWrapper.getListItemHeight()},t.prototype.ensureIndexVisible=function(e){var i=this.model.getRowCount();if(typeof e!="number"||e<0||e>=i){console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e);return}var n=e*this.rowHeight,o=n+this.rowHeight,s=this.getGui(),a=s.scrollTop,l=s.offsetHeight,u=a+l,c=a>n,h=u<o;if(c)s.scrollTop=n;else if(h){var d=o-l;s.scrollTop=d}},t.prototype.setComponentCreator=function(e){this.componentCreator=e},t.prototype.getRowHeight=function(){return this.rowHeight},t.prototype.getScrollTop=function(){return this.getGui().scrollTop},t.prototype.setRowHeight=function(e){this.rowHeight=e,this.refresh()},t.prototype.refresh=function(){var e=this;if(!(this.model==null||!this.isAlive())){var i=this.model.getRowCount();this.eContainer.style.height=i*this.rowHeight+"px",dT(function(){return e.eContainer.clientHeight>=i*e.rowHeight},function(){!e.isAlive()||(e.clearVirtualRows(),e.drawVirtualRows())})}},t.prototype.clearVirtualRows=function(){var e=this;this.renderedRows.forEach(function(i,n){return e.removeRow(n)})},t.prototype.drawVirtualRows=function(){if(!!this.isAlive()){var e=this.getGui(),i=e.scrollTop,n=i+e.offsetHeight,o=Math.floor(i/this.rowHeight),s=Math.floor(n/this.rowHeight);this.ensureRowsRendered(o,s)}},t.prototype.ensureRowsRendered=function(e,i){var n=this;this.renderedRows.forEach(function(s,a){(a<e||a>i)&&a!==n.lastFocusedRowIndex&&n.removeRow(a)});for(var o=e;o<=i;o++)this.renderedRows.has(o)||o<this.model.getRowCount()&&this.insertRow(o)},t.prototype.insertRow=function(e){var i=this,n=this.model.getRow(e),o=document.createElement("div");if(o.classList.add("ag-virtual-list-item","ag-"+this.cssIdentifier+"-virtual-list-item"),an(o,this.ariaRole==="tree"?"treeitem":"option"),nw(o,this.model.getRowCount()),rw(o,e+1),o.setAttribute("tabindex","-1"),typeof this.model.isRowSelected=="function"){var s=this.model.isRowSelected(e);Fu(o,!!s),nP(o,s)}o.style.height=this.rowHeight+"px",o.style.top=this.rowHeight*e+"px";var a=this.componentCreator(n,o);a.addGuiEventListener("focusin",function(){return i.lastFocusedRowIndex=e}),o.appendChild(a.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",o):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",o):this.eContainer.appendChild(o),this.renderedRows.set(e,{rowComponent:a,eDiv:o})},t.prototype.removeRow=function(e){var i=this.renderedRows.get(e);this.eContainer.removeChild(i.eDiv),this.destroyBean(i.rowComponent),this.renderedRows.delete(e)},t.prototype.addScrollListener=function(){var e=this;this.addGuiEventListener("scroll",function(){return e.drawVirtualRows()})},t.prototype.setModel=function(e){this.model=e},t.prototype.destroy=function(){!this.isAlive()||(this.clearVirtualRows(),r.prototype.destroy.call(this))},xp([b("resizeObserverService")],t.prototype,"resizeObserverService",void 0),xp([b("focusService")],t.prototype,"focusService",void 0),xp([ut("eContainer")],t.prototype,"eContainer",void 0),xp([Ct],t.prototype,"postConstruct",null),t})(Bg);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var dZ=["mouseover","mouseout","mouseenter","mouseleave"],pZ=["touchstart","touchend","touchmove","touchcancel"],PP=function(){function r(){this.isOutsideAngular=function(t){return Xn(dZ,t)}}return r.prototype.setTimeout=function(t,e){window.setTimeout(t,e)},r.prototype.setInterval=function(t,e){return new cr(function(i){i(window.setInterval(t,e))})},r.prototype.addEventListener=function(t,e,i,n){var o=Xn(pZ,e);t.addEventListener(e,i,{capture:!!n,passive:o})},r.prototype.dispatchEvent=function(t,e,i){e()},r.prototype.frameworkComponent=function(t){return null},r.prototype.isFrameworkComponent=function(t){return!1},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var fZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vl=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gZ=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},mZ=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(gZ(arguments[t]));return r},vZ=function(r){fZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getNextCellToFocus=function(e,i,n){return n===void 0&&(n=!1),n?this.getNextCellToFocusWithCtrlPressed(e,i):this.getNextCellToFocusWithoutCtrlPressed(e,i)},t.prototype.getNextCellToFocusWithCtrlPressed=function(e,i){var n=e===lt.UP,o=e===lt.DOWN,s=e===lt.LEFT,a,l;if(n||o)l=n?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),a=i.column;else{var u=this.columnModel.getAllDisplayedColumns(),c=this.gridOptionsWrapper.isEnableRtl();l=i.rowIndex,a=s!==c?u[0]:Ue(u)}return{rowIndex:l,rowPinned:null,column:a}},t.prototype.getNextCellToFocusWithoutCtrlPressed=function(e,i){for(var n=i,o=!1;!o;){switch(e){case lt.UP:n=this.getCellAbove(n);break;case lt.DOWN:n=this.getCellBelow(n);break;case lt.RIGHT:this.gridOptionsWrapper.isEnableRtl()?n=this.getCellToLeft(n):n=this.getCellToRight(n);break;case lt.LEFT:this.gridOptionsWrapper.isEnableRtl()?n=this.getCellToRight(n):n=this.getCellToLeft(n);break;default:n=null,console.warn("AG Grid: unknown key for navigation "+e);break}n?o=this.isCellGoodToFocusOn(n):o=!0}return n},t.prototype.isCellGoodToFocusOn=function(e){var i=e.column,n;switch(e.rowPinned){case H.PINNED_TOP:n=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case H.PINNED_BOTTOM:n=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:n=this.rowModel.getRow(e.rowIndex);break}if(!n)return!1;var o=i.isSuppressNavigable(n);return!o},t.prototype.getCellToLeft=function(e){if(!e)return null;var i=this.columnModel.getDisplayedColBefore(e.column);return i?{rowIndex:e.rowIndex,column:i,rowPinned:e.rowPinned}:null},t.prototype.getCellToRight=function(e){if(!e)return null;var i=this.columnModel.getDisplayedColAfter(e.column);return i?{rowIndex:e.rowIndex,column:i,rowPinned:e.rowPinned}:null},t.prototype.getRowBelow=function(e){var i=e.rowIndex,n=e.rowPinned;if(this.isLastRowInContainer(e))switch(n){case H.PINNED_BOTTOM:return null;case H.PINNED_TOP:return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender(H.PINNED_BOTTOM)?{rowIndex:0,rowPinned:H.PINNED_BOTTOM}:null;default:return this.pinnedRowModel.isRowsToRender(H.PINNED_BOTTOM)?{rowIndex:0,rowPinned:H.PINNED_BOTTOM}:null}var o=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(o);return s||{rowIndex:i+1,rowPinned:n}},t.prototype.getNextStickyPosition=function(e,i){if(!(!this.gridOptionsWrapper.isGroupRowsSticky()||!e||!e.sticky)){var n=mZ(this.rowRenderer.getStickyTopRowCtrls()).sort(function(l,u){return l.getRowNode().rowIndex-u.getRowNode().rowIndex}),o=i?-1:1,s=n.findIndex(function(l){return l.getRowNode().rowIndex===e.rowIndex}),a=n[s+o];if(a)return{rowIndex:a.getRowNode().rowIndex,rowPinned:null}}},t.prototype.getCellBelow=function(e){if(!e)return null;var i=this.getRowBelow(e);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null},t.prototype.isLastRowInContainer=function(e){var i=e.rowPinned,n=e.rowIndex;if(i===H.PINNED_TOP){var o=this.pinnedRowModel.getPinnedTopRowData().length-1;return o<=n}if(i===H.PINNED_BOTTOM){var s=this.pinnedRowModel.getPinnedBottomRowData().length-1;return s<=n}var a=this.paginationProxy.getPageLastRow();return a<=n},t.prototype.getRowAbove=function(e){var i=e.rowIndex,n=e.rowPinned,o=n?i===0:i===this.paginationProxy.getPageFirstRow();if(o)return n===H.PINNED_TOP?null:n?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender(H.PINNED_TOP)?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender(H.PINNED_TOP)?this.getLastFloatingTopRow():null;var s=this.rowModel.getRow(e.rowIndex),a=this.getNextStickyPosition(s,!0);return a||{rowIndex:i-1,rowPinned:n}},t.prototype.getCellAbove=function(e){if(!e)return null;var i=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null},t.prototype.getLastBodyCell=function(){var e=this.paginationProxy.getPageLastRow();return{rowIndex:e,rowPinned:null}},t.prototype.getLastFloatingTopRow=function(){var e=this.pinnedRowModel.getPinnedTopRowData().length-1;return{rowIndex:e,rowPinned:H.PINNED_TOP}},t.prototype.getNextTabbedCell=function(e,i){return i?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)},t.prototype.getNextTabbedCellForwards=function(e){var i=this.columnModel.getAllDisplayedColumns(),n=e.rowIndex,o=e.rowPinned,s=this.columnModel.getDisplayedColAfter(e.column);if(!s){s=i[0];var a=this.getRowBelow(e);if(kt(a)||!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;n=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:n,column:s,rowPinned:o}},t.prototype.getNextTabbedCellBackwards=function(e){var i=this.columnModel.getAllDisplayedColumns(),n=e.rowIndex,o=e.rowPinned,s=this.columnModel.getDisplayedColBefore(e.column);if(!s){s=Ue(i);var a=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(kt(a)||!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;n=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:n,column:s,rowPinned:o}},Vl([b("columnModel")],t.prototype,"columnModel",void 0),Vl([b("rowModel")],t.prototype,"rowModel",void 0),Vl([b("rowRenderer")],t.prototype,"rowRenderer",void 0),Vl([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Vl([b("paginationProxy")],t.prototype,"paginationProxy",void 0),t=Vl([Dt("cellNavigationService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var yZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Dc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},_Z=function(r,t){return function(e,i){t(e,i,r)}},CZ=function(r){yZ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.consuming=!1,e}return t.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")},t.prototype.init=function(){this.addManagedListener(this.eventService,O.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,O.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},t.prototype.fireEvent=function(e){if(!this.consuming){var i=this.gridOptionsWrapper.getAlignedGrids();i&&i.forEach(function(n){if(n.api){var o=n.api.__getAlignedGridService();e(o)}})}},t.prototype.onEvent=function(e){this.consuming=!0,e(),this.consuming=!1},t.prototype.fireColumnEvent=function(e){this.fireEvent(function(i){i.onColumnEvent(e)})},t.prototype.fireScrollEvent=function(e){e.direction==="horizontal"&&this.fireEvent(function(i){i.onScrollEvent(e)})},t.prototype.onScrollEvent=function(e){var i=this;this.onEvent(function(){var n=i.ctrlsService.getGridBodyCtrl();n.getScrollFeature().setHorizontalScrollPosition(e.left)})},t.prototype.getMasterColumns=function(e){var i=[];return e.columns?e.columns.forEach(function(n){i.push(n)}):e.column&&i.push(e.column),i},t.prototype.getColumnIds=function(e){var i=[];return e.columns?e.columns.forEach(function(n){i.push(n.getColId())}):e.column&&i.push(e.column.getColId()),i},t.prototype.onColumnEvent=function(e){var i=this;this.onEvent(function(){switch(e.type){case O.EVENT_COLUMN_MOVED:case O.EVENT_COLUMN_VISIBLE:case O.EVENT_COLUMN_PINNED:case O.EVENT_COLUMN_RESIZED:var n=e;i.processColumnEvent(n);break;case O.EVENT_COLUMN_GROUP_OPENED:var o=e;i.processGroupOpenedEvent(o);break;case O.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})},t.prototype.processGroupOpenedEvent=function(e){var i=e.columnGroup,n=null;if(i){var o=i.getGroupId();n=this.columnModel.getProvidedColumnGroup(o)}i&&!n||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+i.isExpanded()),this.columnModel.setColumnGroupOpened(n,i.isExpanded(),"alignedGridChanged"))},t.prototype.processColumnEvent=function(e){var i=this,n,o=e.column,s=null;if(o&&(s=this.columnModel.getPrimaryColumn(o.getColId())),!(o&&!s)){var a=this.getMasterColumns(e);switch(e.type){case O.EVENT_COLUMN_MOVED:{var l=e,u=e.columnApi.getColumnState(),c=u.map(function(C){return{colId:C.colId}});this.columnModel.applyColumnState({state:c,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" toIndex = "+l.toIndex)}break;case O.EVENT_COLUMN_VISIBLE:{var h=e,u=e.columnApi.getColumnState(),c=u.map(function(S){return{colId:S.colId,hide:S.hide}});this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" visible = "+h.visible)}break;case O.EVENT_COLUMN_PINNED:{var d=e,u=e.columnApi.getColumnState(),c=u.map(function(S){return{colId:S.colId,pinned:S.pinned}});this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" pinned = "+d.pinned)}break;case O.EVENT_COLUMN_RESIZED:var p=e,f={};a.forEach(function(C){i.logger.log("onColumnEvent-> processing "+e.type+" actualWidth = "+C.getActualWidth()),f[C.getId()]={key:C.getColId(),newWidth:C.getActualWidth()}}),(n=p.flexColumns)===null||n===void 0||n.forEach(function(C){f[C.getId()]&&delete f[C.getId()]}),this.columnModel.setColumnWidths(Object.values(f),!1,p.finished,"alignedGridChanged");break}var m=this.ctrlsService.getGridBodyCtrl(),g=m.isVerticalScrollShowing(),y=this.gridOptionsWrapper.getAlignedGrids();y&&y.forEach(function(C){C.api&&C.api.setAlwaysShowVerticalScroll(g)})}},Dc([b("columnModel")],t.prototype,"columnModel",void 0),Dc([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Dc([_Z(0,Cn("loggerFactory"))],t.prototype,"setBeans",null),Dc([Ct],t.prototype,"init",null),t=Dc([Dt("alignedGridsService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var wZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SZ=function(r,t){return function(e,i){t(e,i,r)}},EZ=function(r){wZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setBeans=function(e){this.logger=e.create("selectionService"),this.reset()},t.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.addManagedListener(this.eventService,O.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},t.prototype.setLastSelectedNode=function(e){this.lastSelectedNode=e},t.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},t.prototype.getSelectedNodes=function(){var e=[];return We(this.selectedNodes,function(i,n){n&&e.push(n)}),e},t.prototype.getSelectedRows=function(){var e=[];return We(this.selectedNodes,function(i,n){n&&n.data&&e.push(n.data)}),e},t.prototype.removeGroupsFromSelection=function(){var e=this;We(this.selectedNodes,function(i,n){n&&n.group&&(e.selectedNodes[n.id]=void 0)})},t.prototype.updateGroupsFromChildrenSelections=function(e){if(!!this.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowModel.getType()===H.ROW_MODEL_TYPE_CLIENT_SIDE){var i=this.rowModel,n=i.getRootNode();e||(e=new _w(!0,n),e.setInactive()),e.forEachChangedNodeDepthFirst(function(o){if(o!==n){var s=o.calculateSelectedFromChildren();o.selectThisNode(s===null?!1:s)}})}},t.prototype.getNodeForIdIfSelected=function(e){return this.selectedNodes[e]},t.prototype.clearOtherNodes=function(e){var i=this,n={},o=0;return We(this.selectedNodes,function(s,a){if(a&&a.id!==e.id){var l=i.selectedNodes[a.id];o+=l.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0}),i.groupSelectsChildren&&a.parent&&(n[a.parent.id]=a.parent)}}),We(n,function(s,a){var l=a.calculateSelectedFromChildren();a.selectThisNode(l===null?!1:l)}),o},t.prototype.onRowSelected=function(e){var i=e.node;this.groupSelectsChildren&&i.group||(i.isSelected()?this.selectedNodes[i.id]=i:this.selectedNodes[i.id]=void 0)},t.prototype.syncInRowNode=function(e,i){this.syncInOldRowNode(e,i),this.syncInNewRowNode(e)},t.prototype.syncInOldRowNode=function(e,i){var n=dt(i)&&e.id!==i.id;if(n&&i){var o=i.id,s=this.selectedNodes[o]==e;s&&(this.selectedNodes[i.id]=i)}},t.prototype.syncInNewRowNode=function(e){dt(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)},t.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},t.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()!==H.ROW_MODEL_TYPE_CLIENT_SIDE){console.warn("AG Grid: `getBestCostNodeSelection` is only available when using normal row model");return}var e=this.rowModel,i=e.getTopLevelNodes();if(i===null){console.warn("AG Grid: `selectAll` not available doing `rowModel=virtual`");return}var n=[];function o(s){for(var a=0,l=s.length;a<l;a++){var u=s[a];if(u.isSelected())n.push(u);else{var c=u;c.group&&c.children&&o(c.children)}}}return o(i),n},t.prototype.setRowModel=function(e){this.rowModel=e},t.prototype.isEmpty=function(){var e=0;return We(this.selectedNodes,function(i,n){n&&e++}),e===0},t.prototype.deselectAllRowNodes=function(e){e===void 0&&(e=!1);var i=function(a){return a.selectThisNode(!1)},n=this.rowModel.getType()===H.ROW_MODEL_TYPE_CLIENT_SIDE;if(e){if(!n){console.error("AG Grid: selecting just filtered only works with In Memory Row Model");return}var o=this.rowModel;o.forEachNodeAfterFilter(i)}else We(this.selectedNodes,function(a,l){l&&i(l)}),this.reset();n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections();var s={type:O.EVENT_SELECTION_CHANGED};this.eventService.dispatchEvent(s)},t.prototype.selectAllRowNodes=function(e){if(e===void 0&&(e=!1),this.rowModel.getType()!==H.ROW_MODEL_TYPE_CLIENT_SIDE)throw new Error("selectAll only available with normal row model, ie not "+this.rowModel.getType());var i=this.rowModel,n=function(s){return s.selectThisNode(!0)};e?i.forEachNodeAfterFilter(n):i.forEachNode(n),this.rowModel.getType()===H.ROW_MODEL_TYPE_CLIENT_SIDE&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections();var o={type:O.EVENT_SELECTION_CHANGED};this.eventService.dispatchEvent(o)},t.prototype.selectNode=function(e,i){e&&e.setSelectedParams({newValue:!0,clearSelection:!i})},t.prototype.deselectIndex=function(e){var i=this.rowModel.getRow(e);this.deselectNode(i)},t.prototype.deselectNode=function(e){e&&e.setSelectedParams({newValue:!1,clearSelection:!1})},t.prototype.selectIndex=function(e,i){var n=this.rowModel.getRow(e);this.selectNode(n,i)},Rp([b("rowModel")],t.prototype,"rowModel",void 0),Rp([SZ(0,Cn("loggerFactory"))],t.prototype,"setBeans",null),Rp([Ct],t.prototype,"init",null),t=Rp([Dt("selectionService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Vv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},xZ=function(){function r(){}return r.prototype.sizeColumnsToFit=function(t){typeof t>"u"&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(t,"api")},r.prototype.setColumnGroupOpened=function(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")},r.prototype.getColumnGroup=function(t,e){return this.columnModel.getColumnGroup(t,e)},r.prototype.getProvidedColumnGroup=function(t){return this.columnModel.getProvidedColumnGroup(t)},r.prototype.getDisplayNameForColumn=function(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""},r.prototype.getDisplayNameForColumnGroup=function(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""},r.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},r.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},r.prototype.applyColumnState=function(t){return this.columnModel.applyColumnState(t,"api")},r.prototype.getColumnState=function(){return this.columnModel.getColumnState()},r.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},r.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},r.prototype.setColumnGroupState=function(t){this.columnModel.setColumnGroupState(t,"api")},r.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},r.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},r.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},r.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},r.prototype.getDisplayedColAfter=function(t){return this.columnModel.getDisplayedColAfter(t)},r.prototype.getDisplayedColBefore=function(t){return this.columnModel.getDisplayedColBefore(t)},r.prototype.setColumnVisible=function(t,e){this.columnModel.setColumnVisible(t,e,"api")},r.prototype.setColumnsVisible=function(t,e){this.columnModel.setColumnsVisible(t,e,"api")},r.prototype.setColumnPinned=function(t,e){this.columnModel.setColumnPinned(t,e,"api")},r.prototype.setColumnsPinned=function(t,e){this.columnModel.setColumnsPinned(t,e,"api")},r.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},r.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},r.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},r.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},r.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},r.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},r.prototype.moveColumn=function(t,e){typeof t=="number"?(console.warn("AG Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead"),this.columnModel.moveColumnByIndex(t,e,"api")):this.columnModel.moveColumn(t,e,"api")},r.prototype.moveColumnByIndex=function(t,e){this.columnModel.moveColumnByIndex(t,e,"api")},r.prototype.moveColumns=function(t,e){this.columnModel.moveColumns(t,e,"api")},r.prototype.moveRowGroupColumn=function(t,e){this.columnModel.moveRowGroupColumn(t,e)},r.prototype.setColumnAggFunc=function(t,e){this.columnModel.setColumnAggFunc(t,e)},r.prototype.setColumnWidth=function(t,e,i,n){i===void 0&&(i=!0),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,i,n)},r.prototype.setColumnWidths=function(t,e,i){e===void 0&&(e=!0),this.columnModel.setColumnWidths(t,!1,e,i)},r.prototype.setPivotMode=function(t){this.columnModel.setPivotMode(t)},r.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},r.prototype.getSecondaryPivotColumn=function(t,e){return console.warn("AG Grid: since version 28.0.x getSecondaryPivotColumn has been renamed, please use getPivotResultColumn instead"),this.getPivotResultColumn(t,e)},r.prototype.getPivotResultColumn=function(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)},r.prototype.setValueColumns=function(t){this.columnModel.setValueColumns(t,"api")},r.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},r.prototype.removeValueColumn=function(t){this.columnModel.removeValueColumn(t,"api")},r.prototype.removeValueColumns=function(t){this.columnModel.removeValueColumns(t,"api")},r.prototype.addValueColumn=function(t){this.columnModel.addValueColumn(t,"api")},r.prototype.addValueColumns=function(t){this.columnModel.addValueColumns(t,"api")},r.prototype.setRowGroupColumns=function(t){this.columnModel.setRowGroupColumns(t,"api")},r.prototype.removeRowGroupColumn=function(t){this.columnModel.removeRowGroupColumn(t,"api")},r.prototype.removeRowGroupColumns=function(t){this.columnModel.removeRowGroupColumns(t,"api")},r.prototype.addRowGroupColumn=function(t){this.columnModel.addRowGroupColumn(t,"api")},r.prototype.addRowGroupColumns=function(t){this.columnModel.addRowGroupColumns(t,"api")},r.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},r.prototype.setPivotColumns=function(t){this.columnModel.setPivotColumns(t,"api")},r.prototype.removePivotColumn=function(t){this.columnModel.removePivotColumn(t,"api")},r.prototype.removePivotColumns=function(t){this.columnModel.removePivotColumns(t,"api")},r.prototype.addPivotColumn=function(t){this.columnModel.addPivotColumn(t,"api")},r.prototype.addPivotColumns=function(t){this.columnModel.addPivotColumns(t,"api")},r.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},r.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},r.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},r.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},r.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},r.prototype.autoSizeColumn=function(t,e){return this.columnModel.autoSizeColumn(t,e,"api")},r.prototype.autoSizeColumns=function(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e})},r.prototype.autoSizeAllColumns=function(t){this.columnModel.autoSizeAllColumns(t,"api")},r.prototype.setSecondaryColumns=function(t){console.warn("AG Grid: since version 28.0.x setSecondaryColumns has been renamed, please use setPivotResultColumns instead"),this.setPivotResultColumns(t)},r.prototype.setPivotResultColumns=function(t){this.columnModel.setSecondaryColumns(t,"api")},r.prototype.getSecondaryColumns=function(){return console.warn("AG Grid: since version 28.0.x getSecondaryColumns has been renamed, please use getPivotResultColumns instead"),this.getPivotResultColumns()},r.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},r.prototype.getPrimaryColumns=function(){return console.warn("AG Grid: since version 28.0.x getPrimaryColumns has been renamed, please use getColumns instead"),this.getColumns()},r.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(Jt.removeAllReferences.bind(window,this,"Column API"),100)},r.prototype.getAllColumns=function(){return console.warn("AG Grid: since version 28.0.x getAllColumns has been renamed, please use getColumns instead"),this.getColumns()},r.prototype.columnGroupOpened=function(t,e){console.error("AG Grid: columnGroupOpened no longer exists, use setColumnGroupOpened"),this.setColumnGroupOpened(t,e)},r.prototype.hideColumns=function(t,e){console.error("AG Grid: hideColumns is deprecated, use setColumnsVisible"),this.columnModel.setColumnsVisible(t,!e,"api")},r.prototype.hideColumn=function(t,e){console.error("AG Grid: hideColumn is deprecated, use setColumnVisible"),this.columnModel.setColumnVisible(t,!e,"api")},r.prototype.setState=function(t){return console.error("AG Grid: setState is deprecated, use setColumnState"),this.setColumnState(t)},r.prototype.getState=function(){return console.error("AG Grid: getState is deprecated, use getColumnState"),this.getColumnState()},r.prototype.resetState=function(){console.error("AG Grid: resetState is deprecated, use resetColumnState"),this.resetColumnState()},r.prototype.getAggregationColumns=function(){return console.error("AG Grid: getAggregationColumns is deprecated, use getValueColumns"),this.columnModel.getValueColumns()},r.prototype.removeAggregationColumn=function(t){console.error("AG Grid: removeAggregationColumn is deprecated, use removeValueColumn"),this.columnModel.removeValueColumn(t,"api")},r.prototype.removeAggregationColumns=function(t){console.error("AG Grid: removeAggregationColumns is deprecated, use removeValueColumns"),this.columnModel.removeValueColumns(t,"api")},r.prototype.addAggregationColumn=function(t){console.error("AG Grid: addAggregationColumn is deprecated, use addValueColumn"),this.columnModel.addValueColumn(t,"api")},r.prototype.addAggregationColumns=function(t){console.error("AG Grid: addAggregationColumns is deprecated, use addValueColumns"),this.columnModel.addValueColumns(t,"api")},r.prototype.setColumnAggFunction=function(t,e){console.error("AG Grid: setColumnAggFunction is deprecated, use setColumnAggFunc"),this.columnModel.setColumnAggFunc(t,e,"api")},r.prototype.getDisplayNameForCol=function(t){return console.error("AG Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn"),this.getDisplayNameForColumn(t,null)},r.prototype.setColumnState=function(t){return console.error("AG Grid: setColumnState is deprecated, use applyColumnState"),this.columnModel.applyColumnState({state:t,applyOrder:!0},"api")},r.prototype.getOriginalColumnGroup=function(t){return console.error("AG Grid: getOriginalColumnGroup is deprecated, use getProvidedColumnGroup"),this.columnModel.getProvidedColumnGroup(t)},Vv([b("columnModel")],r.prototype,"columnModel",void 0),Vv([Yi],r.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),r=Vv([Dt("columnApi")],r),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var RZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Lc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},bZ=function(r){RZ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.initialised=!1,e}return t.prototype.init=function(){var e=this;this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions(),this.initialised=!0,this.eventService.addEventListener(O.EVENT_CELL_VALUE_CHANGED,function(i){return e.callColumnCellValueChangedHandler(i)},this.gridOptionsWrapper.useAsyncEvents())},t.prototype.getValue=function(e,i,n,o){if(n===void 0&&(n=!1),o===void 0&&(o=!1),this.initialised||this.init(),!!i){var s=e.getColDef(),a=s.field,l=e.getId(),u=i.data,c,h=i.groupData&&i.groupData[l]!==void 0,d=!o&&i.aggData&&i.aggData[l]!==void 0;if(n&&s.filterValueGetter?c=this.executeFilterValueGetter(s.filterValueGetter,u,e,i):this.gridOptionsWrapper.isTreeData()&&d?c=i.aggData[l]:this.gridOptionsWrapper.isTreeData()&&s.valueGetter?c=this.executeValueGetter(s.valueGetter,u,e,i):this.gridOptionsWrapper.isTreeData()&&a&&u?c=Ff(u,a,e.isFieldContainsDots()):h?c=i.groupData[l]:d?c=i.aggData[l]:s.valueGetter?c=this.executeValueGetter(s.valueGetter,u,e,i):a&&u&&(c=Ff(u,a,e.isFieldContainsDots())),this.cellExpressions&&typeof c=="string"&&c.indexOf("=")===0){var p=c.substring(1);c=this.executeValueGetter(p,u,e,i)}if(c==null){var f=this.getOpenedGroup(i,e);if(f!=null)return f}return c}},t.prototype.getOpenedGroup=function(e,i){if(!!this.gridOptionsWrapper.isShowOpenedGroup()){var n=i.getColDef();if(!!n.showRowGroup)for(var o=i.getColDef().showRowGroup,s=e.parent;s!=null;){if(s.rowGroupColumn&&(o===!0||o===s.rowGroupColumn.getId()))return s.key;s=s.parent}}},t.prototype.setValue=function(e,i,n,o){var s=this.columnModel.getPrimaryColumn(i);if(!e||!s)return!1;kt(e.data)&&(e.data={});var a=s.getColDef(),l=a.field,u=a.newValueHandler,c=a.valueSetter;if(kt(l)&&kt(u)&&kt(c))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;var h={node:e,data:e.data,oldValue:this.getValue(s,e),newValue:n,colDef:s.getColDef(),column:s,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};h.newValue=n;var d;if(u&&dt(u)?d=u(h):dt(c)?d=this.expressionService.evaluate(c,h):d=this.setValueUsingField(e.data,l,n,s.isFieldContainsDots()),d===void 0&&(d=!0),!d)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),h.newValue=this.getValue(s,e);var p={type:O.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:h.column,api:h.api,columnApi:h.columnApi,colDef:h.colDef,context:h.context,data:e.data,node:e,oldValue:h.oldValue,newValue:h.newValue,value:h.newValue,source:o};return this.eventService.dispatchEvent(p),!0},t.prototype.callColumnCellValueChangedHandler=function(e){var i=e.colDef.onCellValueChanged;typeof i=="function"&&i({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})},t.prototype.setValueUsingField=function(e,i,n,o){if(!i)return!1;var s=!1;if(!o)s=e[i]==n,s||(e[i]=n);else for(var a=i.split("."),l=e;a.length>0&&l;){var u=a.shift();a.length===0?(s=l[u]==n,s||(l[u]=n)):l=l[u]}return!s},t.prototype.executeFilterValueGetter=function(e,i,n,o){var s={data:i,node:o,column:n,colDef:n.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,o)};return this.expressionService.evaluate(e,s)},t.prototype.executeValueGetter=function(e,i,n,o){var s=n.getId(),a=this.valueCache.getValue(o,s);if(a!==void 0)return a;var l={data:i,node:o,column:n,colDef:n.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,o)},u=this.expressionService.evaluate(e,l);return this.valueCache.setValue(o,s,u),u},t.prototype.getValueCallback=function(e,i){var n=this.columnModel.getPrimaryColumn(i);return n?this.getValue(n,e):null},t.prototype.getKeyForNode=function(e,i){var n=this.getValue(e,i),o=e.getColDef().keyCreator,s=n;if(o){var a={value:n,colDef:e.getColDef(),column:e,node:i,data:i.data,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};s=o(a)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&ce(function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]")),s},Lc([b("expressionService")],t.prototype,"expressionService",void 0),Lc([b("columnModel")],t.prototype,"columnModel",void 0),Lc([b("valueCache")],t.prototype,"valueCache",void 0),Lc([Ct],t.prototype,"init",null),t=Lc([Dt("valueService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var MZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ux=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TZ=function(r,t){return function(e,i){t(e,i,r)}},PZ=function(r){MZ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return t.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},t.prototype.evaluate=function(e,i){if(typeof e=="function"){var n=e;return n(i)}else if(typeof e=="string"){var o=e;return this.evaluateExpression(o,i)}else console.error("AG Grid: value should be either a string or a function",e)},t.prototype.evaluateExpression=function(e,i){try{var n=this.createExpressionFunction(e),o=n(i.value,i.context,i.oldValue,i.newValue,i.value,i.node,i.data,i.colDef,i.rowIndex,i.api,i.columnApi,i.getValue,i.column,i.columnGroup);return o}catch(s){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",i),console.log("Exception = "+s),null}},t.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",i);return this.expressionToFunctionCache[e]=n,n},t.prototype.createFunctionBody=function(e){return e.indexOf("return")>=0?e:"return "+e+";"},Ux([TZ(0,Cn("loggerFactory"))],t.prototype,"setBeans",null),t=Ux([Dt("expressionService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var OZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),AZ=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},DZ=function(r){OZ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return t.prototype.getTemplate=function(e,i){var n=this.templateCache[e];if(n)return n;var o=this.waitingCallbacks[e],s=this;if(!o){o=[],this.waitingCallbacks[e]=o;var a=new XMLHttpRequest;a.onload=function(){s.handleHttpResult(this,e)},a.open("GET",e),a.send()}return i&&o.push(i),null},t.prototype.handleHttpResult=function(e,i){if(e.status!==200||e.response===null){console.warn("AG Grid: Unable to get template error "+e.status+" - "+i);return}this.templateCache[i]=e.response||e.responseText;for(var n=this.waitingCallbacks[i],o=0;o<n.length;o++){var s=n[o];s()}},t=AZ([Dt("templateService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var LZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),zx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},IZ=function(r,t){return function(e,i){t(e,i,r)}},FZ=function(r){LZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setBeans=function(e){this.logging=e.isDebug()},t.prototype.create=function(e){return new v_(e,this.isLogging.bind(this))},t.prototype.isLogging=function(){return this.logging},zx([IZ(0,Cn("gridOptionsWrapper"))],t.prototype,"setBeans",null),t=zx([Dt("loggerFactory")],t),t}(ft),v_=function(){function r(t,e){this.name=t,this.isLoggingFunc=e}return r.prototype.isLogging=function(){return this.isLoggingFunc()},r.prototype.log=function(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var NZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),kl=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},GZ=function(r){NZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setComp=function(e,i,n){var o=this;this.view=e,this.eGridHostDiv=i,this.eGui=n,this.dragAndDropService.addDropTarget({getContainer:function(){return o.eGui},isInterestedIn:function(a){return a===Sn.HeaderCell||a===Sn.ToolPanel},getIconName:function(){return ji.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(i),this.createManagedBean(new fw(this.view)),this.addRtlSupport(),this.addManagedListener(this,O.EVENT_KEYBOARD_FOCUS,function(){o.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,O.EVENT_MOUSE_FOCUS,function(){o.view.addOrRemoveKeyboardFocusClass(!1)});var s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return s()}),this.ctrlsService.registerGridCtrl(this)},t.prototype.isDetailGrid=function(){var e,i,n=this.focusService.findTabbableParent(this.getGui());return((i=(e=n)===null||e===void 0?void 0:e.getAttribute("row-id"))===null||i===void 0?void 0:i.startsWith("detail"))||!1},t.prototype.showDropZones=function(){return te.isRegistered(qt.RowGroupingModule)},t.prototype.showSideBar=function(){return te.isRegistered(qt.SideBarModule)},t.prototype.showStatusBar=function(){return te.isRegistered(qt.StatusBarModule)},t.prototype.showWatermark=function(){return te.isRegistered(qt.EnterpriseCoreModule)},t.prototype.onGridSizeChanged=function(){var e={type:O.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)},t.prototype.addRtlSupport=function(){var e=this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)},t.prototype.destroyGridUi=function(){this.view.destroyGridUi()},t.prototype.getGui=function(){return this.eGui},t.prototype.setResizeCursor=function(e){this.view.setCursor(e?"ew-resize":null)},t.prototype.disableUserSelect=function(e){this.view.setUserSelect(e?"none":null)},t.prototype.focusNextInnerContainer=function(e){var i=this.gridOptionsWrapper.getDocument(),n=this.view.getFocusableContainers(),o=n.findIndex(function(a){return a.contains(i.activeElement)}),s=o+(e?-1:1);return s<=0||s>=n.length?!1:this.focusService.focusInto(n[s])},t.prototype.focusInnerElement=function(e){var i=this.view.getFocusableContainers();if(e){if(i.length>1)return this.focusService.focusInto(Ue(i),!0);var n=Ue(this.columnModel.getAllDisplayedColumns());if(this.focusService.focusGridView(n,!0))return!0}return this.focusService.focusFirstHeader()},t.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1),this.view.forceFocusOutOfContainer(e)},kl([b("focusService")],t.prototype,"focusService",void 0),kl([b("resizeObserverService")],t.prototype,"resizeObserverService",void 0),kl([b("columnModel")],t.prototype,"columnModel",void 0),kl([b("ctrlsService")],t.prototype,"ctrlsService",void 0),kl([b("mouseEventService")],t.prototype,"mouseEventService",void 0),kl([b("dragAndDropService")],t.prototype,"dragAndDropService",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var HZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ic=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},WZ=function(r){HZ(t,r);function t(e){var i=r.call(this,void 0)||this;return i.eGridDiv=e,i}return t.prototype.postConstruct=function(){var e=this;this.logger=this.loggerFactory.create("GridComp");var i={destroyGridUi:function(){return e.destroyBean(e)},setRtlClass:function(o){return e.addCssClass(o)},addOrRemoveKeyboardFocusClass:function(o){return e.addOrRemoveCssClass(sh.AG_KEYBOARD_FOCUS,o)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(o){e.getGui().style.userSelect=o!=null?o:"",e.getGui().style.webkitUserSelect=o!=null?o:""},setCursor:function(o){e.getGui().style.cursor=o!=null?o:""}};this.ctrl=this.createManagedBean(new GZ);var n=this.createTemplate();this.setTemplate(n),this.ctrl.setComp(i,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(o){return e.ctrl.focusInnerElement(o)}})},t.prototype.insertGridIntoDom=function(){var e=this,i=this.getGui();this.eGridDiv.appendChild(i),this.addDestroyFunc(function(){e.eGridDiv.removeChild(i),e.logger.log("Grid removed from DOM")})},t.prototype.updateLayoutClasses=function(e,i){var n=this.eRootWrapperBody.classList;n.toggle(wi.AUTO_HEIGHT,i.autoHeight),n.toggle(wi.NORMAL,i.normal),n.toggle(wi.PRINT,i.print),this.addOrRemoveCssClass(wi.AUTO_HEIGHT,i.autoHeight),this.addOrRemoveCssClass(wi.NORMAL,i.normal),this.addOrRemoveCssClass(wi.PRINT,i.print)},t.prototype.createTemplate=function(){var e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",i=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",n=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",o=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"",s=`<div class="ag-root-wrapper" role="presentation">
                `+e+`
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    `+i+`
                </div>
                `+n+`
                <ag-pagination></ag-pagination>
                `+o+`
            </div>`;return s},t.prototype.getFocusableElement=function(){return this.eRootWrapperBody},t.prototype.getFocusableContainers=function(){var e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(function(i){return Ju(i)})},Ic([b("loggerFactory")],t.prototype,"loggerFactory",void 0),Ic([ut("gridBody")],t.prototype,"gridBodyComp",void 0),Ic([ut("sideBar")],t.prototype,"sideBarComp",void 0),Ic([ut("rootWrapperBody")],t.prototype,"eRootWrapperBody",void 0),Ic([Ct],t.prototype,"postConstruct",null),t}(Bg);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var VZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),jx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},kZ=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},kv=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(kZ(arguments[t]));return r},BZ=function(r){VZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}e=t,t.prototype.progressSort=function(i,n,o){var s=this.getNextSortDirection(i);this.setSortForColumn(i,s,n,o)},t.prototype.setSortForColumn=function(i,n,o,s){var a;n!==H.SORT_ASC&&n!==H.SORT_DESC&&(n=null);var l=this.gridOptionsWrapper.isColumnsSortingCoupledToGroup(),u=[i];if(l&&i.getColDef().showRowGroup){var c=this.columnModel.getSourceColumnsForGroupColumn(i),h=(a=c)===null||a===void 0?void 0:a.filter(function(p){return p.getColDef().sortable});h&&(u=kv([i],h))}u.forEach(function(p){return p.setSort(n,s)});var d=(o||this.gridOptionsWrapper.isAlwaysMultiSort())&&!this.gridOptionsWrapper.isSuppressMultiSort();d||this.clearSortBarTheseColumns(u,s),this.updateSortIndex(i),this.dispatchSortChangedEvents(s)},t.prototype.updateSortIndex=function(i){var n=this.gridOptionsWrapper.isColumnsSortingCoupledToGroup(),o=this.columnModel.getGroupDisplayColumnForGroup(i.getId()),s=n&&o||i,a=this.getIndexableColumnsOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(c){return c.setSortIndex(null)});var l=a.filter(function(c){return c!==s}),u=s.getSort()?kv(l,[s]):l;u.forEach(function(c,h){return c.setSortIndex(h)})},t.prototype.onSortChanged=function(i){this.dispatchSortChangedEvents(i)},t.prototype.isSortActive=function(){var i=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),n=i.filter(function(o){return!!o.getSort()});return n&&n.length>0},t.prototype.dispatchSortChangedEvents=function(i){var n={type:O.EVENT_SORT_CHANGED,source:i};this.eventService.dispatchEvent(n)},t.prototype.clearSortBarTheseColumns=function(i,n){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(o){i.includes(o)||o.setSort(void 0,n)})},t.prototype.getNextSortDirection=function(i){var n;if(i.getColDef().sortingOrder?n=i.getColDef().sortingOrder:this.gridOptionsWrapper.getSortingOrder()?n=this.gridOptionsWrapper.getSortingOrder():n=e.DEFAULT_SORTING_ORDER,!Array.isArray(n)||n.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's "+n),null;var o=n.indexOf(i.getSort()),s=o<0,a=o==n.length-1,l;return s||a?l=n[0]:l=n[o+1],e.DEFAULT_SORTING_ORDER.indexOf(l)<0?(console.warn("AG Grid: invalid sort type "+l),null):l},t.prototype.getColumnsOrderedForSort=function(){var i=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),n={};return i.forEach(function(o,s){return n[o.getId()]=s}),i.sort(function(o,s){var a=o.getSortIndex(),l=s.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){var u=n[o.getId()],c=n[s.getId()];return u>c?1:-1}else return l==null?-1:1}),i},t.prototype.getIndexableColumnsOrdered=function(){var i=this;return this.gridOptionsWrapper.isColumnsSortingCoupledToGroup()?this.getColumnsOrderedForSort().filter(function(n){var o;if(n.getColDef().showRowGroup){if(n.getColDef().field&&n.getSort())return!0;var s=i.columnModel.getSourceColumnsForGroupColumn(n);return(o=s)===null||o===void 0?void 0:o.some(function(a){return!!a.getSort()})}return!!n.getSort()}):this.getColumnsWithSortingOrdered()},t.prototype.getColumnsWithSortingOrdered=function(){var i=this.getColumnsOrderedForSort();return i.filter(function(n){return!!n.getSort()})},t.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().map(function(i){return{sort:i.getSort(),colId:i.getId()}})},t.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().map(function(i){return{sort:i.getSort(),column:i}})},t.prototype.canColumnDisplayMixedSort=function(i){var n=this.gridOptionsWrapper.isColumnsSortingCoupledToGroup(),o=!!i.getColDef().showRowGroup;return n&&o},t.prototype.getDisplaySortForColumn=function(i){var n,o=this.columnModel.getSourceColumnsForGroupColumn(i);if(!this.canColumnDisplayMixedSort(i)||!(!((n=o)===null||n===void 0)&&n.length))return i.getSort();var s=!!i.getColDef().field,a=s?kv([i],o):o,l=a[0].getSort(),u=a.every(function(c){return c.getSort()==l});return u?l:"mixed"},t.prototype.getDisplaySortIndexForColumn=function(i){var n=this,o=this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();if(!o)return this.getColumnsWithSortingOrdered().indexOf(i);var s=this.columnModel.getGroupDisplayColumnForGroup(i.getId());if(s)return i.getSort()?this.getDisplaySortIndexForColumn(s):null;var a=this.getIndexableColumnsOrdered().filter(function(l){return!n.columnModel.getGroupDisplayColumnForGroup(l.getId())});return a.indexOf(i)};var e;return t.DEFAULT_SORTING_ORDER=[H.SORT_ASC,H.SORT_DESC,null],jx([b("columnModel")],t.prototype,"columnModel",void 0),t=e=jx([Dt("sortController")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var UZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),zZ=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},jZ=function(r){UZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setMouseOver=function(e){this.selectedColumns=e;var i={type:O.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(i)},t.prototype.clearMouseOver=function(){this.selectedColumns=null;var e={type:O.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)},t.prototype.isHovered=function(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0},t=zZ([Dt("columnHoverService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var $Z=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},YZ=function(r){$Z(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.animationThreadCount=0,e}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){return e.gridBodyCtrl=i.gridBodyCtrl})},t.prototype.isActive=function(){return this.active},t.prototype.start=function(){this.active||this.gridOptionsWrapper.isSuppressColumnMoveAnimation()||this.gridOptionsWrapper.isEnableRtl()||(this.ensureAnimationCssClassPresent(),this.active=!0)},t.prototype.finish=function(){!this.active||(this.flush(),this.active=!1)},t.prototype.executeNextVMTurn=function(e){this.active?this.executeNextFuncs.push(e):e()},t.prototype.executeLaterVMTurn=function(e){this.active?this.executeLaterFuncs.push(e):e()},t.prototype.ensureAnimationCssClassPresent=function(){var e=this;this.animationThreadCount++;var i=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){e.animationThreadCount===i&&e.gridBodyCtrl.setColumnMovingCss(!1)})},t.prototype.flush=function(){var e=this.executeNextFuncs;this.executeNextFuncs=[];var i=this.executeLaterFuncs;this.executeLaterFuncs=[],!(e.length===0&&i.length===0)&&(window.setTimeout(function(){return e.forEach(function(n){return n()})},0),window.setTimeout(function(){return i.forEach(function(n){return n()})},300))},Bv([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Bv([Ct],t.prototype,"postConstruct",null),t=Bv([Dt("columnAnimationService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var KZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Uv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},XZ=function(r){KZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}e=t,t.prototype.createAutoGroupColumns=function(i,n){var o=this,s=[],a=this.gridOptionsWrapper.isTreeData(),l=this.gridOptionsWrapper.isGroupMultiAutoColumn();return a&&l&&(console.warn("AG Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data"),l=!1),l?n.forEach(function(u,c){s.push(o.createOneAutoGroupColumn(i,u,c))}):s.push(this.createOneAutoGroupColumn(i)),s},t.prototype.createOneAutoGroupColumn=function(i,n,o){var s=this.generateDefaultColDef(n),a;n?a=H.GROUP_AUTO_COLUMN_ID+"-"+n.getId():a=e.GROUP_AUTO_COLUMN_BUNDLE_ID;var l=this.gridOptionsWrapper.getAutoGroupColumnDef();if(jn(s,l),s=this.columnFactory.mergeColDefs(s),s.colId=a,!this.gridOptionsWrapper.isTreeData()){var u=kt(s.field)&&kt(s.valueGetter)&&kt(s.filterValueGetter);u&&(s.filter=!1)}o&&o>0&&(s.headerCheckboxSelection=!1);var c=i.find(function(d){return d.getId()==a});if(c)return c.setColDef(s,null),this.columnFactory.applyColumnState(c,s),c;var h=new me(s,null,a,!0);return this.context.createBean(h),h},t.prototype.generateDefaultColDef=function(i){var n=this.gridOptionsWrapper.getAutoGroupColumnDef(),o=this.gridOptionsWrapper.getLocaleTextFunc(),s={headerName:o("group","Group")},a=n&&(n.cellRenderer||n.cellRendererFramework||n.cellRendererSelector);if(a||(s.cellRenderer="agGroupCellRenderer"),i){var l=i.getColDef();Object.assign(s,{headerName:this.columnModel.getDisplayNameForColumn(i,"header"),headerValueGetter:l.headerValueGetter}),(l.cellRenderer||l.cellRendererFramework)&&Object.assign(s,{cellRendererParams:{innerRenderer:l.cellRenderer,innerRendererFramework:l.cellRendererFramework,innerRendererParams:l.cellRendererParams}}),s.showRowGroup=i.getColId()}else s.showRowGroup=!0;return s};var e;return t.GROUP_AUTO_COLUMN_BUNDLE_ID=H.GROUP_AUTO_COLUMN_ID,Uv([b("columnModel")],t.prototype,"columnModel",void 0),Uv([b("columnFactory")],t.prototype,"columnFactory",void 0),t=e=Uv([Dt("autoGroupColService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var qZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),zv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ZZ=function(r){qZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.centerRowContainerCon=i.centerRowContainerCtrl,e.addManagedListener(e.eventService,O.EVENT_BODY_HEIGHT_CHANGED,e.onBodyHeightChanged.bind(e)),e.addManagedListener(e.eventService,O.EVENT_SCROLL_VISIBILITY_CHANGED,e.onScrollVisibilityChanged.bind(e)),e.checkPageSize()})},t.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},t.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},t.prototype.onBodyHeightChanged=function(){this.checkPageSize()},t.prototype.checkPageSize=function(){if(!this.notActive()){var e=this.gridOptionsWrapper.getRowHeightAsNumber(),i=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(i>0){var n=Math.floor(i/e);this.gridOptionsWrapper.setProperty("paginationPageSize",n)}}},zv([b("ctrlsService")],t.prototype,"ctrlsService",void 0),zv([Ct],t.prototype,"postConstruct",null),t=zv([Dt("paginationAutoPageSizeService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var JZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),$x=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},QZ=function(r){JZ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.cacheVersion=0,e}return t.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache(),this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()},t.prototype.onDataChanged=function(){this.neverExpires||this.expire()},t.prototype.expire=function(){this.cacheVersion++},t.prototype.setValue=function(e,i,n){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[i]=n)},t.prototype.getValue=function(e,i){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[i]},$x([Ct],t.prototype,"init",null),t=$x([Dt("valueCache")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var tJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),bp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},eJ=function(r){tJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){this.rowModel.getType()===H.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,O.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},t.prototype.onCellValueChanged=function(e){e.source!==H.SOURCE_PASTE&&this.doChangeDetection(e.node,e.column)},t.prototype.doChangeDetection=function(e,i){if(!this.gridOptionsWrapper.isSuppressChangeDetection()){if(this.clientSideRowModel&&!e.isRowPinned()){var n=this.gridOptionsWrapper.isAggregateOnlyChangedColumns(),o=new _w(n,this.clientSideRowModel.getRootNode());o.addParentNode(e.parent,[i]),this.clientSideRowModel.doAggregate(o)}this.rowRenderer.refreshCells()}},bp([b("rowModel")],t.prototype,"rowModel",void 0),bp([b("rowRenderer")],t.prototype,"rowRenderer",void 0),bp([Ct],t.prototype,"init",null),t=bp([Dt("changeDetectionService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var iJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Yx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},nJ=function(r){iJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.adaptFunction=function(e,i){var n=this.componentMetadataProvider.retrieve(e);return n&&n.functionAdapter?n.functionAdapter(i):null},t.prototype.adaptCellRendererFunction=function(e){var i=function(){function n(){}return n.prototype.refresh=function(o){return!1},n.prototype.getGui=function(){return this.eGui},n.prototype.init=function(o){var s=e(o),a=typeof s;if(a==="string"||a==="number"||a==="boolean"){this.eGui=Hi("<span>"+s+"</span>");return}if(s==null){this.eGui=Hi("<span></span>");return}this.eGui=s},n}();return i},t.prototype.doesImplementIComponent=function(e){return e?e.prototype&&"getGui"in e.prototype:!1},Yx([b("componentMetadataProvider")],t.prototype,"componentMetadataProvider",void 0),t=Yx([Dt("agComponentUtils")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var rJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),jv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},oJ=function(r){rJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},pinnedRowCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},t.prototype.retrieve=function(e){return this.componentMetaData[e]},jv([b("agComponentUtils")],t.prototype,"agComponentUtils",void 0),jv([Ct],t.prototype,"postConstruct",null),t=jv([Dt("componentMetadataProvider")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var sJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},$v=8,aJ=4,Yv=4,Kv=6,lJ={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:aJ*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:$v*7,headerCellMinWidth:48,listItemHeight:$v*4,rowHeight:$v*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:Yv*8,headerCellMinWidth:24,listItemHeight:Yv*6,rowHeight:Yv*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:Kv*8,headerCellMinWidth:36,listItemHeight:Kv*4,rowHeight:Kv*7,chartMenuPanelWidth:240}},Xx={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Fc={},uJ=function(r){sJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getSassVariable=function(e,i){var n="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),o=lJ[n][i],s=0;Fc[e]||(Fc[e]={});var a=Fc[e][i];if(a!=null)return a;if(Xx[i]){var l=Xx[i],u=document.createElement("div");u.classList.add(e),u.style.position="absolute";var c=l.reduce(function(d,p){var f=document.createElement("div");return f.style.position="static",f.classList.add(p),d.appendChild(f),f},u);if(document.body){document.body.appendChild(u);var h=i.toLowerCase().indexOf("height")!==-1?"height":"width";s=parseInt(window.getComputedStyle(c)[h],10),document.body.removeChild(u)}}return Fc[e][i]=s||o,Fc[e][i]},t.prototype.isThemeDark=function(){var e=this.getTheme().theme;return!!e&&e.indexOf("dark")>=0},t.prototype.chartMenuPanelWidth=function(){var e=this.getTheme().themeFamily;return this.getSassVariable(e,"chartMenuPanelWidth")},t.prototype.getTheme=function(){for(var e=/\bag-(material|(?:theme-([\w\-]*)))\b/g,i=this.eGridDiv,n=null,o=[];i;)if(n=e.exec(i.className),!n)i=i.parentElement||void 0;else{var s=i.className.match(e);s&&(o=s);break}if(!n)return{allThemes:o};var a=n[0],l=n[2]===void 0;if(l){var u=a.replace("ag-","ag-theme-");ce(function(){return console.warn("AG Grid: As of v19 old theme are no longer provided. Please replace "+a+" with "+u+".")},"using-old-theme")}return{theme:a,el:i,themeFamily:a.replace(/-dark$/,""),allThemes:o}},Kx([b("eGridDiv")],t.prototype,"eGridDiv",void 0),t=Kx([Dt("environment")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var cJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},hJ=function(r,t){return function(e,i){t(e,i,r)}},dJ=function(r){cJ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return t.prototype.agWire=function(e){this.logger=e.create("RowContainerHeightService")},t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,O.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=bT(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},t.prototype.isStretching=function(){return this.stretching},t.prototype.getDivStretchOffset=function(){return this.divStretchOffset},t.prototype.updateOffset=function(){if(!!this.stretching){var e=this.ctrlsService.getGridBodyCtrl(),i=e.getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight(),o=i!==this.scrollY||n!==this.uiBodyHeight;o&&(this.scrollY=i,this.uiBodyHeight=n,this.calculateOffset())}},t.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY,i=e*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+i+" ("+this.pixelsToShave+" * "+e+")"),this.setDivStretchOffset(i)},t.prototype.setUiContainerHeight=function(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:O.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},t.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},t.prototype.setDivStretchOffset=function(e){var i=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==i&&(this.divStretchOffset=i,this.eventService.dispatchEvent({type:O.EVENT_HEIGHT_SCALE_CHANGED}))},t.prototype.setModelHeight=function(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},t.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},t.prototype.getRealPixelPosition=function(e){return e-this.divStretchOffset},t.prototype.getUiBodyHeight=function(){var e=this.ctrlsService.getGridBodyCtrl(),i=e.getScrollFeature().getVScrollPosition();return i.bottom-i.top},t.prototype.getScrollPositionForPixel=function(e){if(this.pixelsToShave<=0)return e;var i=this.modelHeight-this.getUiBodyHeight(),n=e/i,o=this.maxScrollY*n;return o},Mp([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Mp([hJ(0,Cn("loggerFactory"))],t.prototype,"agWire",null),Mp([Ct],t.prototype,"postConstruct",null),t=Mp([Dt("rowContainerHeightService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var pJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),qx=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},fJ=function(r){pJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()},t.prototype.updateSelectableAfterGrouping=function(e){if(this.isRowSelectableFunc){var i=function(n){return n.childrenAfterGroup};this.recurseDown(e.childrenAfterGroup,i)}},t.prototype.recurseDown=function(e,i){var n=this;!e||e.forEach(function(o){if(!!o.group){o.hasChildren()&&n.recurseDown(i(o),i);var s;if(n.groupSelectsChildren){var a=(i(o)||[]).find(function(l){return l.selectable===!0});s=dt(a)}else s=n.isRowSelectableFunc?n.isRowSelectableFunc(o):!1;o.setRowSelectable(s)}})},qx([Ct],t.prototype,"init",null),t=qx([Dt("selectableService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var gJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),nr=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},mJ=function(r){gJ(t,r);function t(){var e=r.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e}return t.prototype.postConstruct=function(){var e=this,i=this.gridOptionsWrapper.isEnableRtl();this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",_i(i?"last":"first",this.gridOptionsWrapper)),this.btPrevious.insertAdjacentElement("afterbegin",_i(i?"next":"previous",this.gridOptionsWrapper)),this.btNext.insertAdjacentElement("afterbegin",_i(i?"previous":"next",this.gridOptionsWrapper)),this.btLast.insertAdjacentElement("afterbegin",_i(i?"first":"last",this.gridOptionsWrapper));var n=this.gridOptionsWrapper.isPagination(),o=n&&!this.gridOptionsWrapper.isSuppressPaginationPanel();if(!o){this.setDisplayed(!1);return}this.addManagedListener(this.eventService,O.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(s){var a=s.el,l=s.fn;e.addManagedListener(a,"click",l),e.addManagedListener(a,"keydown",function(u){(u.key===lt.ENTER||u.key===lt.SPACE)&&(u.preventDefault(),l())})}),this.onPaginationChanged()},t.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},t.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},t.prototype.setCurrentPageLabel=function(){var e=this.paginationProxy.getTotalPages()>0,i=this.paginationProxy.getCurrentPage(),n=e?i+1:0;this.lbCurrent.innerHTML=this.formatNumber(n)},t.prototype.formatNumber=function(e){var i=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();if(i){var n={value:e};return i(n)}var o=this.gridOptionsWrapper.getLocaleTextFunc(),s=o("thousandSeparator",","),a=o("decimalSeparator",".");return jC(e,s,a)},t.prototype.getTemplate=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),i=e("page","Page"),n=e("to","to"),o=e("of","of"),s=e("firstPage","First Page"),a=e("previousPage","Previous Page"),l=e("nextPage","Next Page"),u=e("lastPage","Last Page"),c=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+c+`">
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-`+c+`-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-`+c+'-to">'+n+`</span>
                    <span id="ag-`+c+`-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-`+c+'-of">'+o+`</span>
                    <span id="ag-`+c+`-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="`+s+`"></div>
                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="`+a+`"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-`+c+'-start-page">'+i+`</span>
                        <span id="ag-`+c+`-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-`+c+'-of-page">'+o+`</span>
                        <span id="ag-`+c+`-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="`+l+`"></div>
                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="`+u+`"></div>
                </span>
            </div>`},t.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},t.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},t.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},t.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage(),i=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var o=this.isZeroPagesToDisplay(),s=i&&e===n-1;this.nextButtonDisabled=s||o,this.lastButtonDisabled=!i||o||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},t.prototype.toggleButtonDisabled=function(e,i){ew(e,i),e.classList.toggle("ag-disabled",i),i?e.removeAttribute("tabindex"):e.setAttribute("tabindex","0")},t.prototype.updateRowLabels=function(){var e=this.paginationProxy.getCurrentPage(),i=this.paginationProxy.getPageSize(),n=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null,s,a;this.isZeroPagesToDisplay()?s=a=0:(s=i*e+1,a=s+i-1,n&&a>o&&(a=o)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(s),this.rowNodeBlockLoader.isLoading()?this.lbLastRowOnPage.innerHTML="?":this.lbLastRowOnPage.innerHTML=this.formatNumber(a)},t.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();return e&&i===0},t.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages(),n=e?this.paginationProxy.getMasterRowCount():null;if(n===1){var o=this.paginationProxy.getRow(0),s=o&&o.group&&!(o.groupData||o.aggData);if(s){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.innerHTML=this.formatNumber(i),this.lbRecordCount.innerHTML=this.formatNumber(n);else{var a=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=a,this.lbRecordCount.innerHTML=a}},t.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},nr([b("paginationProxy")],t.prototype,"paginationProxy",void 0),nr([b("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),nr([ut("btFirst")],t.prototype,"btFirst",void 0),nr([ut("btPrevious")],t.prototype,"btPrevious",void 0),nr([ut("btNext")],t.prototype,"btNext",void 0),nr([ut("btLast")],t.prototype,"btLast",void 0),nr([ut("lbRecordCount")],t.prototype,"lbRecordCount",void 0),nr([ut("lbFirstRowOnPage")],t.prototype,"lbFirstRowOnPage",void 0),nr([ut("lbLastRowOnPage")],t.prototype,"lbLastRowOnPage",void 0),nr([ut("lbCurrent")],t.prototype,"lbCurrent",void 0),nr([ut("lbTotal")],t.prototype,"lbTotal",void 0),nr([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var vJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bl=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},su;(function(r){r[r.Loading=0]="Loading",r[r.NoRows=1]="NoRows"})(su||(su={}));var yJ=function(r){vJ(t,r);function t(){var e=r.call(this,t.TEMPLATE)||this;return e.inProgress=!1,e.destroyRequested=!1,e.manuallyDisplayed=!1,e}return t.prototype.updateLayoutClasses=function(e,i){var n=this.eOverlayWrapper.classList;n.toggle(wi.AUTO_HEIGHT,i.autoHeight),n.toggle(wi.NORMAL,i.normal),n.toggle(wi.PRINT,i.print)},t.prototype.postConstruct=function(){this.createManagedBean(new fw(this)),this.setDisplayed(!1),this.addManagedListener(this.eventService,O.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,O.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},t.prototype.setWrapperTypeClass=function(e){var i=this.eOverlayWrapper.classList;i.toggle("ag-overlay-loading-wrapper",e===su.Loading),i.toggle("ag-overlay-no-rows-wrapper",e===su.NoRows)},t.prototype.showLoadingOverlay=function(){if(!this.gridOptionsWrapper.isSuppressLoadingOverlay()){var e={},i=this.userComponentFactory.getLoadingOverlayCompDetails(e),n=i.newAgStackInstance();this.showOverlay(n,su.Loading)}},t.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsWrapper.isSuppressNoRowsOverlay()){var e={},i=this.userComponentFactory.getNoRowsOverlayCompDetails(e),n=i.newAgStackInstance();this.showOverlay(n,su.NoRows)}},t.prototype.showOverlay=function(e,i){var n=this;this.inProgress||(this.setWrapperTypeClass(i),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(function(o){n.inProgress=!1,n.eOverlayWrapper.appendChild(o.getGui()),n.activeOverlay=o,n.destroyRequested&&(n.destroyRequested=!1,n.destroyActiveOverlay())}),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0))},t.prototype.destroyActiveOverlay=function(){if(this.inProgress){this.destroyRequested=!0;return}!this.activeOverlay||(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),qn(this.eOverlayWrapper))},t.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1)},t.prototype.destroy=function(){this.destroyActiveOverlay(),r.prototype.destroy.call(this)},t.prototype.showOrHideOverlay=function(){var e=this.paginationProxy.isEmpty(),i=this.gridOptionsWrapper.isSuppressNoRowsOverlay();e&&!i?this.showNoRowsOverlay():this.hideOverlay()},t.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},t.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()},t.TEMPLATE=`
        <div class="ag-overlay" aria-hidden="true">
            <div class="ag-overlay-panel">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>
            </div>
        </div>`,Bl([b("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Bl([b("paginationProxy")],t.prototype,"paginationProxy",void 0),Bl([b("gridApi")],t.prototype,"gridApi",void 0),Bl([b("columnModel")],t.prototype,"columnModel",void 0),Bl([ut("eOverlayWrapper")],t.prototype,"eOverlayWrapper",void 0),Bl([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var _J=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},CJ=function(r){_J(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getFirstRow=function(){var e=0,i;return this.pinnedRowModel.getPinnedTopRowCount()?i=H.PINNED_TOP:this.rowModel.getRowCount()?(i=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(i=H.PINNED_BOTTOM),i===void 0?null:{rowIndex:e,rowPinned:i}},t.prototype.getLastRow=function(){var e,i=null,n=this.pinnedRowModel.getPinnedBottomRowCount(),o=this.pinnedRowModel.getPinnedTopRowCount();return n?(i=H.PINNED_BOTTOM,e=n-1):this.rowModel.getRowCount()?(i=null,e=this.paginationProxy.getPageLastRow()):o&&(i=H.PINNED_TOP,e=o-1),e===void 0?null:{rowIndex:e,rowPinned:i}},t.prototype.getRowNode=function(e){switch(e.rowPinned){case H.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case H.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},t.prototype.sameRow=function(e,i){return!e&&!i?!0:e&&!i||!e&&i?!1:e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned},t.prototype.before=function(e,i){switch(e.rowPinned){case H.PINNED_TOP:if(i.rowPinned!==H.PINNED_TOP)return!0;break;case H.PINNED_BOTTOM:if(i.rowPinned!==H.PINNED_BOTTOM)return!1;break;default:if(dt(i.rowPinned))return i.rowPinned!==H.PINNED_TOP;break}return e.rowIndex<i.rowIndex},t.prototype.rowMax=function(e){var i=this,n;return e.forEach(function(o){(n===void 0||i.before(n,o))&&(n=o)}),n},t.prototype.rowMin=function(e){var i=this,n;return e.forEach(function(o){(n===void 0||i.before(o,n))&&(n=o)}),n},Tp([b("rowModel")],t.prototype,"rowModel",void 0),Tp([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Tp([b("paginationProxy")],t.prototype,"paginationProxy",void 0),t=Tp([Dt("rowPositionUtils")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var wJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),SJ=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},EJ=function(r){wJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createId=function(e){var i=e.rowIndex,n=e.rowPinned,o=e.column;return this.createIdFromValues(i,o,n)},t.prototype.createIdFromValues=function(e,i,n){return e+"."+(n==null?"null":n)+"."+i.getId()},t.prototype.equals=function(e,i){var n=e.column===i.column,o=e.rowPinned===i.rowPinned,s=e.rowIndex===i.rowIndex;return n&&o&&s},t=SJ([Dt("cellPositionUtils")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var xJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Yc=function(){function r(t){this.cellValueChanges=t}return r}(),Pp=function(r){xJ(t,r);function t(e,i,n,o){var s=r.call(this,e)||this;return s.initialRange=i,s.finalRange=n,s.ranges=o,s}return t}(Yc),Zx=function(){function r(t){this.actionStack=[],this.maxStackSize=t||r.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return r.prototype.pop=function(){return this.actionStack.pop()},r.prototype.push=function(t){var e=t.cellValueChanges&&t.cellValueChanges.length>0;!e||(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))},r.prototype.clear=function(){this.actionStack=[]},r.prototype.getCurrentStackSize=function(){return this.actionStack.length},r.DEFAULT_STACK_SIZE=10,r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var RJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),eg=function(){return eg=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},eg.apply(this,arguments)},Jr=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},bJ=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},MJ=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(bJ(arguments[t]));return r},TJ=function(r){RJ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isRangeInAction=!1,e.onCellValueChanged=function(i){var n={column:i.column,rowIndex:i.rowIndex,rowPinned:i.rowPinned},o=e.activeCellEdit!==null&&e.cellPositionUtils.equals(e.activeCellEdit,n),s=e.activeRowEdit!==null&&e.rowPositionUtils.sameRow(e.activeRowEdit,n),a=o||s||e.isPasting||e.isRangeInAction;if(!!a){var l=i.rowPinned,u=i.rowIndex,c=i.column,h=i.oldValue,d=i.value,p={rowPinned:l,rowIndex:u,columnId:c.getColId(),newValue:d,oldValue:h};e.cellValueChanges.push(p)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return t.prototype.init=function(){var e=this;if(!!this.gridOptionsWrapper.isUndoRedoCellEditing()){var i=this.gridOptionsWrapper.getUndoRedoCellEditingLimit();i<=0||(this.undoStack=new Zx(i),this.redoStack=new Zx(i),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,O.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,O.EVENT_MODEL_UPDATED,function(n){n.keepUndoRedoStack||e.clearStacks()}),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,O.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,O.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,O.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,O.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,O.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl()}))}},t.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},t.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},t.prototype.undo=function(){if(!!this.undoStack){var e=this.undoStack.pop();!e||!e.cellValueChanges||(this.processAction(e,function(i){return i.oldValue}),e instanceof Pp?this.processRange(e.ranges||[e.initialRange]):this.processCell(e.cellValueChanges),this.redoStack.push(e))}},t.prototype.redo=function(){if(!!this.redoStack){var e=this.redoStack.pop();!e||!e.cellValueChanges||(this.processAction(e,function(i){return i.newValue}),e instanceof Pp?this.processRange(e.ranges||[e.finalRange]):this.processCell(e.cellValueChanges),this.undoStack.push(e))}},t.prototype.processAction=function(e,i){var n=this;e.cellValueChanges.forEach(function(o){var s,a=o.rowIndex,l=o.rowPinned,u=o.columnId,c={rowIndex:a,rowPinned:l},h=n.getRowNode(c);if(!!h.displayed){var d=i(o),p=typeof((s=d)===null||s===void 0?void 0:s.toString)=="function"?d.toString():d;h.setDataValue(u,p)}})},t.prototype.processRange=function(e){var i=this,n;this.rangeService.removeAllCellRanges(!0),e.forEach(function(o,s){if(!!o){var a=o.startRow,l=o.endRow;s===e.length-1&&(n={rowPinned:a.rowPinned,rowIndex:a.rowIndex,columnId:o.startColumn.getColId()},i.setLastFocusedCell(n));var u={rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:l.rowIndex,rowEndPinned:l.rowPinned,columnStart:o.startColumn,columns:o.columns};i.rangeService.addCellRange(u)}})},t.prototype.processCell=function(e){var i=e[0],n=i.rowIndex,o=i.rowPinned,s={rowIndex:n,rowPinned:o},a=this.getRowNode(s),l={rowPinned:i.rowPinned,rowIndex:a.rowIndex,columnId:i.columnId};this.setLastFocusedCell(l,!0)},t.prototype.setLastFocusedCell=function(e,i){var n=e.rowIndex,o=e.columnId,s=e.rowPinned,a=this.gridBodyCtrl.getScrollFeature(),l=this.columnModel.getGridColumn(o);if(!!l){a.ensureIndexVisible(n),a.ensureColumnVisible(l);var u={rowIndex:n,column:l,rowPinned:s};this.focusService.setFocusedCell(eg(eg({},u),{forceBrowserFocus:!0})),i&&this.rangeService.setRangeToCell(u)}},t.prototype.addRowEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,O.EVENT_ROW_EDITING_STARTED,function(i){e.activeRowEdit={rowIndex:i.rowIndex,rowPinned:i.rowPinned}}),this.addManagedListener(this.eventService,O.EVENT_ROW_EDITING_STOPPED,function(){var i=new Yc(e.cellValueChanges);e.pushActionsToUndoStack(i),e.activeRowEdit=null})},t.prototype.addCellEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,O.EVENT_CELL_EDITING_STARTED,function(i){e.activeCellEdit={column:i.column,rowIndex:i.rowIndex,rowPinned:i.rowPinned}}),this.addManagedListener(this.eventService,O.EVENT_CELL_EDITING_STOPPED,function(i){e.activeCellEdit=null;var n=i.valueChanged&&!e.activeRowEdit&&!e.isPasting&&!e.isRangeInAction;if(n){var o=new Yc(e.cellValueChanges);e.pushActionsToUndoStack(o)}})},t.prototype.addPasteListeners=function(){var e=this;this.addManagedListener(this.eventService,O.EVENT_PASTE_START,function(){e.isPasting=!0}),this.addManagedListener(this.eventService,O.EVENT_PASTE_END,function(){var i=new Yc(e.cellValueChanges);e.pushActionsToUndoStack(i),e.isPasting=!1})},t.prototype.addFillListeners=function(){var e=this;this.addManagedListener(this.eventService,O.EVENT_FILL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,O.EVENT_FILL_END,function(i){var n=new Pp(e.cellValueChanges,i.initialRange,i.finalRange);e.pushActionsToUndoStack(n),e.isRangeInAction=!1})},t.prototype.addCellKeyListeners=function(){var e=this;this.addManagedListener(this.eventService,O.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,O.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,function(){var i;e.rangeService&&e.gridOptionsWrapper.isEnableRangeSelection()?i=new Pp(e.cellValueChanges,void 0,void 0,MJ(e.rangeService.getCellRanges())):i=new Yc(e.cellValueChanges),e.pushActionsToUndoStack(i),e.isRangeInAction=!1})},t.prototype.pushActionsToUndoStack=function(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()},t.prototype.getRowNode=function(e){switch(e.rowPinned){case H.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case H.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},Jr([b("focusService")],t.prototype,"focusService",void 0),Jr([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Jr([b("rowModel")],t.prototype,"rowModel",void 0),Jr([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Jr([b("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),Jr([b("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Jr([b("columnModel")],t.prototype,"columnModel",void 0),Jr([Ae("rangeService")],t.prototype,"rangeService",void 0),Jr([Ct],t.prototype,"init",null),t=Jr([Dt("undoRedoService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var PJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},OJ=function(r){PJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.findHeader=function(e,i){var n,o,s;if(e.column instanceof on?(o="getDisplayedGroup"+i,n=this.columnModel[o](e.column)):(s="getDisplayedCol"+i,n=this.columnModel[s](e.column)),n)return{column:n,headerRowIndex:e.headerRowIndex}},t.prototype.findColAtEdgeForHeaderRow=function(e,i){var n=this.columnModel.getAllDisplayedColumns(),o=n[i==="start"?0:n.length-1];if(!!o){var s=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()),a=s.getRowType(e);if(a==wn.COLUMN_GROUP){var l=this.columnModel.getColumnGroupAtLevel(o,e);return{headerRowIndex:e,column:l}}return{headerRowIndex:a==null?-1:e,column:o}}},Xv([b("columnModel")],t.prototype,"columnModel",void 0),Xv([b("ctrlsService")],t.prototype,"ctrlsService",void 0),t=Xv([Dt("headerPositionUtils")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var AJ=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},DJ=function(){function r(){}return r.prototype.buildColumnDefs=function(t,e,i){var n=this,o=[],s={};return t.forEach(function(a){for(var l=n.createDefFromColumn(a,e,i),u=!0,c=l,h=a.getOriginalParent();h;){var d=null;if(h.isPadding()){h=h.getOriginalParent();continue}var p=s[h.getGroupId()];if(p){p.children.push(c),u=!1;break}d=n.createDefFromGroup(h),d&&(d.children=[c],s[d.groupId]=d,c=d,h=h.getOriginalParent())}u&&o.push(c)}),o},r.prototype.createDefFromGroup=function(t){var e=If(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e},r.prototype.createDefFromColumn=function(t,e,i){var n=If(t.getColDef());return n.colId=t.getColId(),n.width=t.getActualWidth(),n.rowGroup=t.isRowGroupActive(),n.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,n.pivot=t.isPivotActive(),n.pivotIndex=t.isPivotActive()?i.indexOf(t):null,n.aggFunc=t.isValueActive()?t.getAggFunc():null,n.hide=t.isVisible()?void 0:!0,n.pinned=t.isPinned()?t.getPinned():null,n.sort=t.getSort()?t.getSort():null,n.sortIndex=t.getSortIndex()!=null?t.getSortIndex():null,n},r=AJ([Dt("columnDefFactory")],r),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var qv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},LJ=function(){function r(){}return r.prototype.getInitialRowClasses=function(t){var e=[];return dt(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),Zy(e,this.processClassesFromGridOptions(t.rowNode)),Zy(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&(t.pinned===H.PINNED_LEFT&&e.push("ag-cell-last-left-pinned"),t.pinned===H.PINNED_RIGHT&&e.push("ag-cell-first-right-pinned")),e},r.prototype.processClassesFromGridOptions=function(t){var e=[],i=function(l){typeof l=="string"?e.push(l):Array.isArray(l)&&l.forEach(function(u){return e.push(u)})},n=this.gridOptionsWrapper.getRowClass();if(n){if(typeof n=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(n)}var o=this.gridOptionsWrapper.getRowClassFunc();if(o){var s={data:t.data,node:t,rowIndex:t.rowIndex},a=o(s);i(a)}return e},r.prototype.preProcessRowClassRules=function(t){var e=[];return this.processRowClassRules(t,function(i){e.push(i)},function(i){}),e},r.prototype.processRowClassRules=function(t,e,i){var n={data:t.data,node:t,rowIndex:t.rowIndex,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};this.stylingService.processClassRules(this.gridOptionsWrapper.rowClassRules(),n,e,i)},r.prototype.calculateRowLevel=function(t){return t.group?t.level:t.parent?t.parent.level+1:0},qv([b("stylingService")],r.prototype,"stylingService",void 0),qv([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),r=qv([Dt("rowCssClassCalculator")],r),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Op=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},IJ=function(){function r(){}return r.prototype.doFullSort=function(t,e){var i=function(o,s){return{currentPos:s,rowNode:o}},n=t.map(i);return n.sort(this.compareRowNodes.bind(this,e)),n.map(function(o){return o.rowNode})},r.prototype.compareRowNodes=function(t,e,i){for(var n=e.rowNode,o=i.rowNode,s=0,a=t.length;s<a;s++){var l=t[s],u=l.sort===H.SORT_DESC,c=this.getValue(n,l.column),h=this.getValue(o,l.column),d=void 0,p=this.getComparator(l,n);p?d=p(c,h,n,o,u):d=Jt.defaultComparator(c,h,this.gridOptionsWrapper.isAccentedSort());var f=!isNaN(d);if(f&&d!==0)return l.sort===H.SORT_ASC?d:d*-1}return e.currentPos-i.currentPos},r.prototype.getComparator=function(t,e){var i=t.column,n=i.getColDef().comparator;if(n!=null)return n;if(!!i.getColDef().showRowGroup){var o=!e.group&&i.getColDef().field;if(!!o){var s=this.columnModel.getPrimaryColumn(o);if(!!s)return s.getColDef().comparator}}},r.prototype.getValue=function(t,e){var i,n,o=this.gridOptionsWrapper.isColumnsSortingCoupledToGroup();if(!o)return this.valueService.getValue(e,t,!1,!1);var s=t.rowGroupColumn===e;if(s){var a=this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotActive());if(a){var l=e.getColDef().keyCreator;if(l)return t.key;var u=(i=t.allLeafChildren)===null||i===void 0?void 0:i[0];return u?this.valueService.getValue(e,u,!1,!1):void 0}var c=this.columnModel.getGroupDisplayColumnForGroup(e.getId());return c?(n=t.groupData)===null||n===void 0?void 0:n[c.getId()]:void 0}if(!(t.group&&e.getColDef().showRowGroup))return this.valueService.getValue(e,t,!1,!1)},Op([b("gridOptionsWrapper")],r.prototype,"gridOptionsWrapper",void 0),Op([b("valueService")],r.prototype,"valueService",void 0),Op([b("columnModel")],r.prototype,"columnModel",void 0),r=Op([Dt("rowNodeSorter")],r),r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var FJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),NJ=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},GJ=function(r){FJ(t,r);function t(){var i=r!==null&&r.apply(this,arguments)||this;return i.ready=!1,i.readyCallbacks=[],i}e=t,t.prototype.checkReady=function(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollCtrl!=null&&this.gridHeaderCtrl!=null,this.ready){var i=this.createReadyParams();this.readyCallbacks.forEach(function(n){return n(i)}),this.readyCallbacks.length=0}},t.prototype.whenReady=function(i){this.ready?i(this.createReadyParams()):this.readyCallbacks.push(i)},t.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollCtrl:this.fakeHScrollCtrl,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},t.prototype.registerFakeHScrollCtrl=function(i){this.fakeHScrollCtrl=i,this.checkReady()},t.prototype.registerGridHeaderCtrl=function(i){this.gridHeaderCtrl=i,this.checkReady()},t.prototype.registerCenterRowContainerCtrl=function(i){this.centerRowContainerCtrl=i,this.checkReady()},t.prototype.registerLeftRowContainerCtrl=function(i){this.leftRowContainerCtrl=i,this.checkReady()},t.prototype.registerRightRowContainerCtrl=function(i){this.rightRowContainerCtrl=i,this.checkReady()},t.prototype.registerTopCenterRowContainerCtrl=function(i){this.topCenterRowContainerCtrl=i,this.checkReady()},t.prototype.registerTopLeftRowContainerCon=function(i){this.topLeftRowContainerCtrl=i,this.checkReady()},t.prototype.registerTopRightRowContainerCtrl=function(i){this.topRightRowContainerCtrl=i,this.checkReady()},t.prototype.registerStickyTopCenterRowContainerCtrl=function(i){this.stickyTopCenterRowContainerCtrl=i,this.checkReady()},t.prototype.registerStickyTopLeftRowContainerCon=function(i){this.stickyTopLeftRowContainerCtrl=i,this.checkReady()},t.prototype.registerStickyTopRightRowContainerCtrl=function(i){this.stickyTopRightRowContainerCtrl=i,this.checkReady()},t.prototype.registerBottomCenterRowContainerCtrl=function(i){this.bottomCenterRowContainerCtrl=i,this.checkReady()},t.prototype.registerBottomLeftRowContainerCtrl=function(i){this.bottomLeftRowContainerCtrl=i,this.checkReady()},t.prototype.registerBottomRightRowContainerCtrl=function(i){this.bottomRightRowContainerCtrl=i,this.checkReady()},t.prototype.registerHeaderContainer=function(i,n){switch(n){case H.PINNED_LEFT:this.leftHeaderRowContainerCtrl=i;break;case H.PINNED_RIGHT:this.rightHeaderRowContainerCtrl=i;break;default:this.centerHeaderRowContainerCtrl=i;break}this.checkReady()},t.prototype.registerGridBodyCtrl=function(i){this.gridBodyCtrl=i,this.checkReady()},t.prototype.registerGridCtrl=function(i){this.gridCtrl=i,this.checkReady()},t.prototype.getFakeHScrollCtrl=function(){return this.fakeHScrollCtrl},t.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},t.prototype.getGridCtrl=function(){return this.gridCtrl},t.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},t.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},t.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},t.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},t.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},t.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},t.prototype.getHeaderRowContainerCtrl=function(i){switch(i){case H.PINNED_LEFT:return this.leftHeaderRowContainerCtrl;case H.PINNED_RIGHT:return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}};var e;return t.NAME="ctrlsService",t=e=NJ([Dt(e.NAME)],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var HJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),WJ=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},VJ=function(r){HJ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.registry={},e}return t.prototype.register=function(e){this.registry[e.controllerName]=e.controllerClass},t.prototype.getInstance=function(e){var i=this.registry[e];if(i!=null)return new i},t=WJ([Dt("ctrlsFactory")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var kJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ap=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},BJ=function(r){kJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setComp=function(e,i,n,o){this.view=e,this.eViewport=n,this.eContainer=o,this.eGui=i,this.addManagedListener(this.eventService,O.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this));var s=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,s),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_DOM_LAYOUT,s),this.addManagedListener(this.eventService,O.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.onScrollVisibilityChanged(),this.ctrlsService.registerFakeHScrollCtrl(this),this.view.addOrRemoveCssClass("ag-apple-scrollbar",zC()||oa())},t.prototype.addActiveListenerToggles=function(){var e=this,i=["mouseenter","mousedown","touchstart"],n=["mouseleave","touchend"];i.forEach(function(o){return e.addManagedListener(e.eGui,o,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),n.forEach(function(o){return e.addManagedListener(e.eGui,o,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},t.prototype.initialiseInvisibleScrollbar=function(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.invisibleScrollbar=PT(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles(),this.refreshCompBottom()))},t.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},t.prototype.refreshCompBottom=function(){if(!!this.invisibleScrollbar){var e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.view.setBottom(e)}},t.prototype.onScrollVisibilityChanged=function(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.setScrollVisible(),this.setFakeHScrollSpacerWidths()},t.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var e=this;this.addManagedListener(this.eventService,O.EVENT_BODY_SCROLL,function(i){i.direction==="horizontal"&&e.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!0)}),this.addManagedListener(this.eventService,O.EVENT_BODY_SCROLL_END,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!1)})},t.prototype.setFakeHScrollSpacerWidths=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.columnModel.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,o=this.gridOptionsWrapper.getScrollbarWidth();n&&(i+=o),this.view.setRightSpacerFixedWidth(i),this.view.includeRightSpacerScrollerCss("ag-scroller-corner",i<=o);var s=this.columnModel.getDisplayedColumnsLeftWidth(),a=this.enableRtl&&e;a&&(s+=o),this.view.setLeftSpacerFixedWidth(s),this.view.includeLeftSpacerScrollerCss("ag-scroller-corner",s<=o)},t.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isHorizontalScrollShowing(),i=this.invisibleScrollbar,n=this.gridOptionsWrapper.isSuppressHorizontalScroll(),o=e&&this.gridOptionsWrapper.getScrollbarWidth()||0,s=o===0&&i?15:o,a=n?0:s;this.view.addOrRemoveCssClass("ag-scrollbar-invisible",i),this.view.setHeight(a),this.view.setViewportHeight(a),this.view.setContainerHeight(a),this.view.addOrRemoveCssClass("ag-hidden",!e)},t.prototype.getViewport=function(){return this.eViewport},t.prototype.getContainer=function(){return this.eContainer},Ap([b("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),Ap([b("columnModel")],t.prototype,"columnModel",void 0),Ap([b("ctrlsService")],t.prototype,"ctrlsService",void 0),Ap([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var UJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Nc=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},zJ=function(r){UJ(t,r);function t(){return r.call(this,t.TEMPLATE)||this}return t.prototype.postConstruct=function(){var e=this,i={addOrRemoveCssClass:function(o,s){return e.addOrRemoveCssClass(o,s)},setHeight:function(o){return Ua(e.getGui(),o)},setBottom:function(o){return e.getGui().style.bottom=o+"px"},setContainerHeight:function(o){return Ua(e.eContainer,o)},setViewportHeight:function(o){return Ua(e.eViewport,o)},setRightSpacerFixedWidth:function(o){return So(e.eRightSpacer,o)},setLeftSpacerFixedWidth:function(o){return So(e.eLeftSpacer,o)},includeLeftSpacerScrollerCss:function(o,s){return e.eLeftSpacer.classList.toggle(o,s)},includeRightSpacerScrollerCss:function(o,s){return e.eRightSpacer.classList.toggle(o,s)}},n=this.createManagedBean(new BJ);n.setComp(i,this.getGui(),this.eViewport,this.eContainer),this.createManagedBean(new mw(function(o){return e.eContainer.style.width=o+"px"}))},t.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`,Nc([ut("eLeftSpacer")],t.prototype,"eLeftSpacer",void 0),Nc([ut("eRightSpacer")],t.prototype,"eRightSpacer",void 0),Nc([ut("eViewport")],t.prototype,"eViewport",void 0),Nc([ut("eContainer")],t.prototype,"eContainer",void 0),Nc([Ct],t.prototype,"postConstruct",null),t}(le);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var jJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},$J=function(r){jJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){var e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,O.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_DOM_LAYOUT,e)},t.prototype.checkContainerWidths=function(){var e=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_PRINT,i=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),n=e?0:this.columnModel.getDisplayedColumnsRightWidth();i!=this.leftWidth&&(this.leftWidth=i,this.eventService.dispatchEvent({type:O.EVENT_LEFT_PINNED_WIDTH_CHANGED})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:O.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},t.prototype.getPinnedRightWidth=function(){return this.rightWidth},t.prototype.getPinnedLeftWidth=function(){return this.leftWidth},Zv([b("columnModel")],t.prototype,"columnModel",void 0),Zv([Ct],t.prototype,"postConstruct",null),t=Zv([Dt("pinnedWidthService")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var YJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Dp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},KJ=function(r){YJ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.events=[],e}return t.prototype.postConstruct=function(){this.rowModel.getType()==H.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},t.prototype.dispatchExpanded=function(e){var i=this;if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);var n=function(){i.clientSideRowModel&&i.clientSideRowModel.onRowGroupOpened(),i.events.forEach(function(o){return i.eventService.dispatchEvent(o)}),i.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced()},Dp([b("animationFrameService")],t.prototype,"animationFrameService",void 0),Dp([b("rowModel")],t.prototype,"rowModel",void 0),Dp([Ct],t.prototype,"postConstruct",null),t=Dp([Dt("rowNodeEventThrottle")],t),t}(ft);/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var XJ=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Jx=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(XJ(arguments[t]));return r},qJ=function(){function r(t,e,i){if(!e){console.error("AG Grid: no gridOptions provided to the grid");return}this.gridOptions=e,new ZJ().create(t,e,function(n){var o=new WZ(t);n.createBean(o)},void 0,i)}return r.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},r}(),ZJ=function(){function r(){}return r.prototype.create=function(t,e,i,n,o){var s=this,a=!!e.debug,l=this.getRegisteredModules(o),u=this.createBeansList(e.rowModelType,l),c=this.createProvidedBeans(t,e,o);if(!!u){var h={providedBeanInstances:c,beanClasses:u,debug:a},d=new v_("AG Grid",function(){return e.debug}),p=new v_("Context",function(){return h.debug}),f=new M8(h,p),m=f.getBean("beans");this.registerModuleUserComponents(m,l),this.registerStackComponents(m,l),this.registerControllers(m,l),i(f),m.ctrlsService.whenReady(function(){s.setColumnsAndData(m),s.dispatchGridReadyEvent(m);var g=te.isRegistered(qt.EnterpriseCoreModule);d.log("initialised successfully, enterprise = "+g)}),n&&n(f)}},r.prototype.registerControllers=function(t,e){e.forEach(function(i){i.controllers&&i.controllers.forEach(function(n){return t.ctrlsFactory.register(n)})})},r.prototype.registerStackComponents=function(t,e){var i=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(i)},r.prototype.getRegisteredModules=function(t){var e=t?t.modules:null,i=te.getRegisteredModules(),n=[],o={};function s(a,l){function u(c){o[c.moduleName]||(o[c.moduleName]=!0,n.push(c),te.register(c,a))}u(l),l.dependantModules&&l.dependantModules.forEach(s.bind(null,a))}return e&&e.forEach(s.bind(null,!0)),i&&i.forEach(s.bind(null,!te.isPackageBased())),n},r.prototype.registerModuleUserComponents=function(t,e){var i=this.extractModuleEntity(e,function(n){return n.userComponents?n.userComponents:[]});i.forEach(function(n){t.userComponentRegistry.registerDefaultComponent(n.componentName,n.componentClass)})},r.prototype.createProvidedBeans=function(t,e,i){var n=i?i.frameworkOverrides:null;kt(n)&&(n=new PP);var o={gridOptions:e,eGridDiv:t,globalEventListener:i?i.globalEventListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(o,i.providedBeanInstances),o},r.prototype.createAgStackComponentsList=function(t){var e=[{componentName:"AgCheckbox",componentClass:Ih},{componentName:"AgRadioButton",componentClass:Sq},{componentName:"AgToggleButton",componentClass:xq},{componentName:"AgInputTextField",componentClass:bP},{componentName:"AgInputTextArea",componentClass:Mq},{componentName:"AgInputNumberField",componentClass:Pq},{componentName:"AgInputRange",componentClass:Aq},{componentName:"AgSelect",componentClass:dP},{componentName:"AgSlider",componentClass:Lq},{componentName:"AgAngleSelect",componentClass:Fq},{componentName:"AgColorPicker",componentClass:Uq},{componentName:"AgGridBody",componentClass:MK},{componentName:"AgHeaderRoot",componentClass:HX},{componentName:"AgSortIndicator",componentClass:dw},{componentName:"AgPagination",componentClass:mJ},{componentName:"AgOverlayWrapper",componentClass:yJ},{componentName:"AgGroupComponent",componentClass:jq},{componentName:"AgPanel",componentClass:MP},{componentName:"AgDialog",componentClass:TP},{componentName:"AgRowContainer",componentClass:UK},{componentName:"AgFakeHorizontalScroll",componentClass:zJ}],i=this.extractModuleEntity(t,function(n){return n.agStackComponents?n.agStackComponents:[]});return e=e.concat(i),e},r.prototype.createBeansList=function(t,e){var i=this.getRowModelClass(t,e);if(!!i){var n=[i,EP,CJ,EJ,OJ,ZZ,oX,W9,nJ,oJ,$X,iY,dJ,VX,dq,rY,A$,ra,Et,cZ,EZ,sY,R$,LX,yq,aq,PZ,$8,DZ,CZ,LK,QZ,bZ,FZ,T$,QX,BX,ji,xZ,sh,AK,uJ,vZ,cq,Cq,PK,BZ,jZ,YZ,fJ,XZ,eJ,KX,TJ,I$,DJ,LJ,mq,IJ,GJ,$J,KJ,VJ],o=this.extractModuleEntity(e,function(a){return a.beans?a.beans:[]});n.push.apply(n,Jx(o));var s=[];return n.forEach(function(a){s.indexOf(a)<0&&s.push(a)}),s}},r.prototype.extractModuleEntity=function(t,e){return[].concat.apply([],Jx(t.map(e)))},r.prototype.setColumnsAndData=function(t){var e=t.gridOptionsWrapper.getColumnDefs();t.columnModel.setColumnDefs(e||[],"gridInitializing"),t.rowModel.start()},r.prototype.dispatchGridReadyEvent=function(t){var e={type:O.EVENT_GRID_READY};t.eventService.dispatchEvent(e)},r.prototype.getRowModelClass=function(t,e){t||(t=H.ROW_MODEL_TYPE_CLIENT_SIDE);var i={};e.forEach(function(o){We(o.rowModels,function(s,a){i[s]=a})});var n=i[t];if(dt(n))return n;te.isPackageBased()?[H.ROW_MODEL_TYPE_VIEWPORT,H.ROW_MODEL_TYPE_SERVER_SIDE].includes(t)?console.error('AG Grid: Row Model "'+t+`" not found. Please ensure the package 'ag-grid-enterprise' is imported. Please see: https://www.ag-grid.com/javascript-grid/packages/`):console.error("AG Grid: could not find row model for rowModelType "+t):t===H.ROW_MODEL_TYPE_INFINITE?console.error('AG Grid: Row Model "Infinite" not found. Please ensure the '+qt.InfiniteRowModelModule+" module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/"):t===H.ROW_MODEL_TYPE_VIEWPORT?console.error('AG Grid: Row Model "Viewport" not found. Please ensure the AG Grid Enterprise Module '+qt.ViewportRowModelModule+" module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/"):t===H.ROW_MODEL_TYPE_SERVER_SIDE?console.error('AG Grid: Row Model "Server Side" not found. Please ensure the AG Grid Enterprise Module '+qt.ServerSideRowModelModule+" module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/"):t===H.ROW_MODEL_TYPE_CLIENT_SIDE?console.error('AG Grid: Row Model "Client Side" not found. Please ensure the '+qt.ClientSideRowModelModule+" module is registered. Please see: https://www.ag-grid.com/javascript-grid/modules/"):console.error("AG Grid: could not find row model for rowModelType "+t)},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var JJ=function(){function r(){}return r.prototype.wrap=function(t,e,i,n){var o=this;i===void 0&&(i=[]);var s=this.createWrapper(t,n);return e.forEach(function(a){o.createMethod(s,a,!0)}),i.forEach(function(a){o.createMethod(s,a,!1)}),s},r.prototype.unwrap=function(t){return t},r.prototype.createMethod=function(t,e,i){t.addMethod(e,this.createMethodProxy(t,e,i))},r.prototype.createMethodProxy=function(t,e,i){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},r}();/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Qx;(function(r){r.InsideBase="insideBase",r.InsideEnd="insideEnd",r.Center="center",r.OutsideEnd="outsideEnd"})(Qx||(Qx={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v28.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var Qu=typeof global>"u"?{}:global;Qu.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Qu.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Qu.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Qu.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Qu.Node=typeof Node>"u"?{}:Node;Qu.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var QJ=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},tQ=function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(QJ(arguments[t]));return r},eQ=function(){function r(t,e,i,n,o,s){this.nextId=0,this.allNodesMap={},this.rootNode=t,this.gridOptionsWrapper=e,this.eventService=i,this.columnModel=n,this.beans=s,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=r.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return r.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc(),this.doingTreeData=this.gridOptionsWrapper.isTreeData(),this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},r.prototype.getCopyOfNodesMap=function(){return Jt.cloneObject(this.allNodesMap)},r.prototype.getRowNode=function(t){return this.allNodesMap[t]},r.prototype.setRowData=function(t){var e=this;if(typeof t=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}var i=this.rootNode,n=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?i.allLeafChildren=t.map(function(o){return e.createNode(o,e.rootNode,r.TOP_LEVEL)}):(i.allLeafChildren=[],i.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=i.childrenAfterFilter,n.childrenAfterGroup=i.childrenAfterGroup,n.childrenAfterAggFilter=i.childrenAfterAggFilter,n.childrenAfterSort=i.childrenAfterSort,n.childrenMapped=i.childrenMapped,n.allLeafChildren=i.allLeafChildren)},r.prototype.updateRowData=function(t,e){var i={remove:[],update:[],add:[]},n=[];return this.executeRemove(t,i,n),this.executeUpdate(t,i,n),this.executeAdd(t,i),this.updateSelection(n),e&&Jt.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),i},r.prototype.updateSelection=function(t){var e=t.length>0;if(e&&t.forEach(function(n){n.setSelected(!1,!1,!0)}),this.selectionService.updateGroupsFromChildrenSelections(),e){var i={type:O.EVENT_SELECTION_CHANGED};this.eventService.dispatchEvent(i)}},r.prototype.executeAdd=function(t,e){var i=this,n=t.add,o=t.addIndex;if(!Jt.missingOrEmpty(n)){var s=n.map(function(d){return i.createNode(d,i.rootNode,r.TOP_LEVEL)}),a=typeof o=="number"&&o>=0,l,u;if(a){var c=this.rootNode.allLeafChildren,h=o===0?0:c.reduce(function(d,p,f){var m,g=p.rowIndex,y=(m=c[d])===null||m===void 0?void 0:m.rowIndex,C=g!=null&&y!=null&&g<o&&g>y;return C?f:d},0)+1;l=c.slice(0,h),u=c.slice(h,c.length)}else l=this.rootNode.allLeafChildren,u=[];this.rootNode.allLeafChildren=tQ(l,s,u),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),e.add=s}},r.prototype.executeRemove=function(t,e,i){var n=this,o=t.remove;if(!Jt.missingOrEmpty(o)){var s={};o.forEach(function(a){var l=n.lookupRowNode(a);!l||(l.isSelected()&&i.push(l),l.clearRowTopAndRowIndex(),s[l.id]=!0,delete n.allNodesMap[l.id],e.remove.push(l))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(a){return!s[a.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},r.prototype.executeUpdate=function(t,e,i){var n=this,o=t.update;Jt.missingOrEmpty(o)||o.forEach(function(s){var a=n.lookupRowNode(s);!a||(a.updateData(s),!a.selectable&&a.isSelected()&&i.push(a),n.setMasterForRow(a,s,r.TOP_LEVEL,!1),e.update.push(a))})},r.prototype.lookupRowNode=function(t){var e=this.gridOptionsWrapper.getRowIdFunc(),i;if(e){var n=e({data:t,level:0});if(i=this.allNodesMap[n],!i)return console.error("AG Grid: could not find row id="+n+", data item was not found for this id"),null}else if(i=this.rootNode.allLeafChildren.find(function(o){return o.data===t}),!i)return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return i||null},r.prototype.createNode=function(t,e,i){var n=new ue(this.beans);return n.group=!1,this.setMasterForRow(n,t,i,!0),e&&!this.suppressParentsInRowNodes&&(n.parent=e),n.level=i,n.setDataAndId(t,this.nextId.toString()),this.allNodesMap[n.id]&&console.warn("AG Grid: duplicate node id '"+n.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[n.id]=n,this.nextId++,n},r.prototype.setMasterForRow=function(t,e,i,n){if(this.doingTreeData)t.setMaster(!1),n&&(t.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?t.setMaster(this.isRowMasterFunc(e)):t.setMaster(!0):t.setMaster(!1),n){var o=this.columnModel.getRowGroupColumns(),s=o?o.length:0,a=i+s;t.expanded=t.master?this.isExpanded(a):!1}},r.prototype.isExpanded=function(t){var e=this.gridOptionsWrapper.getGroupDefaultExpanded();return e===-1?!0:t<e},r.TOP_LEVEL=0,r.ROOT_NODE_ID="ROOT_NODE_ID",r}(),iQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rn=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},eo;(function(r){r[r.Normal=0]="Normal",r[r.AfterFilter=1]="AfterFilter",r[r.AfterFilterAndSort=2]="AfterFilterAndSort",r[r.PivotNodes=3]="PivotNodes"})(eo||(eo={}));var nQ=function(r){iQ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=Jt.debounce(e.onRowHeightChanged.bind(e),100),e.rowsToDisplay=[],e}return t.prototype.init=function(){var e=this.refreshModel.bind(this,{step:Oe.EVERYTHING}),i=!this.gridOptionsWrapper.isSuppressAnimationFrame(),n=this.refreshModel.bind(this,{step:Oe.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:i});this.addManagedListener(this.eventService,O.EVENT_NEW_COLUMNS_LOADED,n),this.addManagedListener(this.eventService,O.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,O.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:Oe.PIVOT})),this.addManagedListener(this.eventService,O.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_COLUMN_PIVOT_MODE_CHANGED,e);var o=this.refreshModel.bind(this,{step:Oe.MAP,keepRenderedRows:!0,animate:i});this.addManagedListener(this.gridOptionsWrapper,Et.PROP_GROUP_REMOVE_SINGLE_CHILDREN,o),this.addManagedListener(this.gridOptionsWrapper,Et.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,o),this.rootNode=new ue(this.beans),this.nodeManager=new eQ(this.rootNode,this.gridOptionsWrapper,this.eventService,this.columnModel,this.selectionService,this.beans)},t.prototype.start=function(){var e=this.gridOptionsWrapper.getRowData();e&&this.setRowData(e)},t.prototype.ensureRowHeightsValid=function(e,i,n,o){var s,a=!1;do{s=!1;for(var l=this.getRowIndexAtPixel(e),u=this.getRowIndexAtPixel(i),c=Math.max(l,n),h=Math.min(u,o),d=c;d<=h;d++){var p=this.getRow(d);if(p.rowHeightEstimated){var f=this.gridOptionsWrapper.getRowHeightForNode(p);p.setRowHeight(f.height),s=!0,a=!0}}s&&this.setRowTopAndRowIndex()}while(s);return a},t.prototype.setRowTopAndRowIndex=function(){for(var e=this.gridOptionsWrapper.getDefaultRowHeight(),i=0,n=new Set,o=this.gridOptionsWrapper.getDomLayout()===H.DOM_LAYOUT_NORMAL,s=0;s<this.rowsToDisplay.length;s++){var a=this.rowsToDisplay[s];if(a.id!=null&&n.add(a.id),a.rowHeight==null){var l=this.gridOptionsWrapper.getRowHeightForNode(a,o,e);a.setRowHeight(l.height,l.estimated)}a.setRowTop(i),a.setRowIndex(s),i+=a.rowHeight}return n},t.prototype.clearRowTopAndRowIndex=function(e,i){var n=e.isActive(),o=function(a){a&&a.id!=null&&!i.has(a.id)&&a.clearRowTopAndRowIndex()},s=function(a){if(o(a),o(a.detailNode),o(a.sibling),a.hasChildren()&&a.childrenAfterGroup){var l=a.level==-1,u=n&&!l&&!a.expanded;u||a.childrenAfterGroup.forEach(s)}};s(this.rootNode)},t.prototype.ensureRowsAtPixel=function(e,i,n){var o=this;n===void 0&&(n=0);var s=this.getRowIndexAtPixel(i),a=this.getRow(s),l=!this.gridOptionsWrapper.isSuppressAnimationFrame();return a===e[0]?!1:(e.forEach(function(u){Jt.removeFromArray(o.rootNode.allLeafChildren,u)}),e.forEach(function(u,c){Jt.insertIntoArray(o.rootNode.allLeafChildren,u,Math.max(s+n,0)+c)}),this.refreshModel({step:Oe.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:l}),!0)},t.prototype.highlightRowAtPixel=function(e,i){var n=i!=null?this.getRowIndexAtPixel(i):null,o=n!=null?this.getRow(n):null;if(!o||!e||o===e||i==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}var s=this.getHighlightPosition(i,o);this.lastHighlightedRow&&this.lastHighlightedRow!==o&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),o.setHighlighted(s),this.lastHighlightedRow=o},t.prototype.getHighlightPosition=function(e,i){if(!i){var n=this.getRowIndexAtPixel(e);if(i=this.getRow(n||0),!i)return Jo.Below}var o=i.rowTop,s=i.rowHeight;return e-o<s/2?Jo.Above:Jo.Below},t.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},t.prototype.getTopLevelRowCount=function(){var e=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(e)return 1;var i=this.rootNode.childrenAfterAggFilter;return i?i.length:0},t.prototype.getTopLevelRowDisplayedIndex=function(e){var i=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(i)return e;var n=this.rootNode.childrenAfterSort[e];if(this.gridOptionsWrapper.isGroupHideOpenParents())for(;n.expanded&&n.childrenAfterSort&&n.childrenAfterSort.length>0;)n=n.childrenAfterSort[0];return n.rowIndex},t.prototype.getRowBounds=function(e){if(Jt.missing(this.rowsToDisplay))return null;var i=this.rowsToDisplay[e];return i?{rowTop:i.rowTop,rowHeight:i.rowHeight}:null},t.prototype.onRowGroupOpened=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:Oe.MAP,keepRenderedRows:!0,animate:e})},t.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var i=this.gridOptionsWrapper.isAnimateRows(),n=e.columns.length===0||e.columns.some(function(s){return s.isPrimary()}),o=n?Oe.FILTER:Oe.FILTER_AGGREGATES;this.refreshModel({step:o,keepRenderedRows:!0,animate:i})}},t.prototype.onSortChanged=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:Oe.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},t.prototype.getType=function(){return H.ROW_MODEL_TYPE_CLIENT_SIDE},t.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:Oe.PIVOT}):this.refreshModel({step:Oe.AGGREGATE})},t.prototype.createChangePath=function(e){var i=Jt.missingOrEmpty(e),n=new _w(!1,this.rootNode);return(i||this.gridOptionsWrapper.isTreeData())&&n.setInactive(),n},t.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsWrapper.isSuppressModelUpdateAfterUpdateTransaction()||e.rowNodeTransactions==null)return!1;var i=e.rowNodeTransactions.filter(function(o){return o.add!=null&&o.add.length>0||o.remove!=null&&o.remove.length>0}),n=i==null||i.length==0;return n},t.prototype.refreshModel=function(e){if(!this.isSuppressModelUpdateAfterUpdateTransaction(e)){var i=this.createChangePath(e.rowNodeTransactions);switch(e.step){case Oe.EVERYTHING:this.doRowGrouping(e.groupState,e.rowNodeTransactions,e.rowNodeOrder,i,!!e.afterColumnsChanged);case Oe.FILTER:this.doFilter(i);case Oe.PIVOT:this.doPivot(i);case Oe.AGGREGATE:this.doAggregate(i);case Oe.FILTER_AGGREGATES:this.doFilterAggregates(i);case Oe.SORT:this.doSort(e.rowNodeTransactions,i);case Oe.MAP:this.doRowsToDisplay()}var n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,n);var o={type:O.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(o)}},t.prototype.isEmpty=function(){var e=Jt.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Jt.missing(this.rootNode)||e||!this.columnModel.isReady()},t.prototype.isRowsToRender=function(){return Jt.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},t.prototype.getNodesInRangeForSelection=function(e,i){var n=!i,o=!1,s,a=[],l=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort(function(u){var c=n&&!o;n||(u===i||u===e)&&(n=!0);var h=u.group&&l;if(!h){var d=n&&!o,p=u.isParentOfNode(s);(d||p)&&a.push(u)}c&&(u===i||u===e)&&(o=!0,u===i?s=i:s=e)}),a},t.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},t.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},t.prototype.getRootNode=function(){return this.rootNode},t.prototype.getRow=function(e){return this.rowsToDisplay[e]},t.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},t.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;var i=0,n=this.rowsToDisplay.length-1;if(e<=0)return 0;var o=Jt.last(this.rowsToDisplay);if(o.rowTop<=e)return this.rowsToDisplay.length-1;for(var s=-1,a=-1;;){var l=Math.floor((i+n)/2),u=this.rowsToDisplay[l];if(this.isRowInPixel(u,e))return l;u.rowTop<e?i=l+1:u.rowTop>e&&(n=l-1);var c=s===i&&a===n;if(c)return l;s=i,a=n}},t.prototype.isRowInPixel=function(e,i){var n=e.rowTop,o=e.rowTop+e.rowHeight,s=n<=i&&o>i;return s},t.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(i,n){return e(i,n)})},t.prototype.forEachNode=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,e,eo.Normal,0)},t.prototype.forEachNodeAfterFilter=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterAggFilter,e,eo.AfterFilter,0)},t.prototype.forEachNodeAfterFilterAndSort=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,e,eo.AfterFilterAndSort,0)},t.prototype.forEachPivotNode=function(e){this.recursivelyWalkNodesAndCallback([this.rootNode],e,eo.PivotNodes,0)},t.prototype.recursivelyWalkNodesAndCallback=function(e,i,n,o){if(!e)return o;for(var s=0;s<e.length;s++){var a=e[s];if(i(a,o++),a.hasChildren()){var l=null;switch(n){case eo.Normal:l=a.childrenAfterGroup;break;case eo.AfterFilter:l=a.childrenAfterAggFilter;break;case eo.AfterFilterAndSort:l=a.childrenAfterSort;break;case eo.PivotNodes:l=a.leafGroup?null:a.childrenAfterSort;break}l&&(o=this.recursivelyWalkNodesAndCallback(l,i,n,o))}}return o},t.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doFilterAggregates=function(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},t.prototype.expandOrCollapseAll=function(e){var i=this.gridOptionsWrapper.isTreeData(),n=this.columnModel.isPivotActive(),o=function(l){!l||l.forEach(function(u){var c=function(){u.expanded=e,o(u.childrenAfterGroup)};if(i){var h=Jt.exists(u.childrenAfterGroup);h&&c();return}if(n){var d=!u.leafGroup;d&&c();return}var p=u.group;p&&c()})};this.rootNode&&o(this.rootNode.childrenAfterGroup),this.refreshModel({step:Oe.MAP});var s=e?"expandAll":"collapseAll",a={type:O.EVENT_EXPAND_COLLAPSE_ALL,source:s};this.eventService.dispatchEvent(a)},t.prototype.doSort=function(e,i){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:i})},t.prototype.doRowGrouping=function(e,i,n,o,s){this.groupStage?(i?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:i,rowNodeOrder:n,changedPath:o}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:o,afterColumnsChanged:s}),this.restoreGroupState(e)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionService.updateGroupsFromChildrenSelections(o)):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren())},t.prototype.restoreGroupState=function(e){!e||Jt.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(i,n){typeof e[n]=="boolean"&&(i.expanded=e[n])})},t.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var e={};return Jt.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(i,n){return e[n]=i.expanded}),e},t.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},t.prototype.getRowNode=function(e){var i=typeof e=="string"&&e.indexOf(ue.ID_PREFIX_ROW_GROUP)==0;if(i){var n=void 0;return this.forEachNode(function(o){o.id===e&&(n=o)}),n}return this.nodeManager.getRowNode(e)},t.prototype.setRowData=function(e){var i=this.getGroupState();this.nodeManager.setRowData(e),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");var n={type:O.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(n),this.refreshModel({step:Oe.EVERYTHING,groupState:i,newData:!0})},t.prototype.batchUpdateRowData=function(e,i){var n=this;if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];var o=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){n.executeBatchUpdateRowData()},o)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:i})},t.prototype.flushAsyncTransactions=function(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},t.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var i=[],n=[],o=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(a){var l=e.nodeManager.updateRowData(a.rowDataTransaction,void 0);n.push(l),a.callback&&i.push(a.callback.bind(null,l)),typeof a.rowDataTransaction.addIndex=="number"&&(o=!0)}),this.commonUpdateRowData(n,void 0,o),i.length>0&&window.setTimeout(function(){i.forEach(function(a){return a()})},0),n.length>0){var s={type:O.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:n};this.eventService.dispatchEvent(s)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},t.prototype.updateRowData=function(e,i){this.valueCache.onDataChanged();var n=this.nodeManager.updateRowData(e,i),o=typeof e.addIndex=="number";return this.commonUpdateRowData([n],i,o),n},t.prototype.createRowNodeOrder=function(){var e=this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder();if(!e){var i={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var n=0;n<this.rootNode.allLeafChildren.length;n++){var o=this.rootNode.allLeafChildren[n];i[o.id]=n}return i}},t.prototype.commonUpdateRowData=function(e,i,n){var o=!this.gridOptionsWrapper.isSuppressAnimationFrame();n&&(i=this.createRowNodeOrder()),this.refreshModel({step:Oe.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:i,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),this.filterManager.onNewRowsLoaded("rowDataUpdated");var s={type:O.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(s)},t.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},t.prototype.onRowHeightChanged=function(){this.refreshModel({step:Oe.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},t.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},t.prototype.resetRowHeights=function(){var e=!1;this.forEachNode(function(i){i.setRowHeight(i.rowHeight,!0);var n=i.detailNode;n&&n.setRowHeight(n.rowHeight,!0),e=!0}),e&&this.onRowHeightChanged()},Rn([b("columnModel")],t.prototype,"columnModel",void 0),Rn([b("selectionService")],t.prototype,"selectionService",void 0),Rn([b("filterManager")],t.prototype,"filterManager",void 0),Rn([b("valueCache")],t.prototype,"valueCache",void 0),Rn([b("beans")],t.prototype,"beans",void 0),Rn([b("filterStage")],t.prototype,"filterStage",void 0),Rn([b("sortStage")],t.prototype,"sortStage",void 0),Rn([b("flattenStage")],t.prototype,"flattenStage",void 0),Rn([Ae("groupStage")],t.prototype,"groupStage",void 0),Rn([Ae("aggregationStage")],t.prototype,"aggregationStage",void 0),Rn([Ae("pivotStage")],t.prototype,"pivotStage",void 0),Rn([Ae("filterAggregatesStage")],t.prototype,"filterAggregatesStage",void 0),Rn([Ct],t.prototype,"init",null),t=Rn([Dt("rowModel")],t),t}(ft),rQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),tR=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},oQ=function(r){rQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execute=function(e){var i=e.changedPath;this.filterService.filter(i)},tR([b("filterService")],t.prototype,"filterService",void 0),t=tR([Dt("filterStage")],t),t}(ft),sQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Lp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},aQ=function(r){sQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execute=function(e){var i=this,n=this.sortController.getSortOptions(),o=Jt.exists(n)&&n.length>0,s=o&&Jt.exists(e.rowNodeTransactions)&&this.gridOptionsWrapper.isDeltaSort(),a=n.some(function(l){return!!i.columnModel.getGroupDisplayColumnForGroup(l.column.getId())});this.sortService.sort(n,o,s,e.rowNodeTransactions,e.changedPath,a)},Lp([b("sortService")],t.prototype,"sortService",void 0),Lp([b("sortController")],t.prototype,"sortController",void 0),Lp([b("columnModel")],t.prototype,"columnModel",void 0),t=Lp([Dt("sortStage")],t),t}(ft),lQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Jv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},uQ=function(r){lQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execute=function(e){var i=e.rowNode,n=[],o={value:0},s=this.columnModel.isPivotMode(),a=s&&i.leafGroup,l=a?[i]:i.childrenAfterSort;this.recursivelyAddToRowsToDisplay(l,n,o,s,0);var u=n.length>0,c=!a&&u&&this.gridOptionsWrapper.isGroupIncludeTotalFooter();return c&&(this.ensureFooterNodeExists(i),this.addRowNodeToRowsToDisplay(i.sibling,n,o,0)),n},t.prototype.recursivelyAddToRowsToDisplay=function(e,i,n,o,s){if(!Jt.missingOrEmpty(e))for(var a=this.gridOptionsWrapper.isGroupHideOpenParents(),l=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),u=!l&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),c=0;c<e.length;c++){var h=e[c],d=h.hasChildren(),p=o&&!d,f=l&&d&&h.childrenAfterGroup.length===1,m=u&&d&&h.leafGroup&&h.childrenAfterGroup.length===1,g=o&&h.leafGroup,y=a&&h.expanded&&!h.master&&!g,C=!p&&!y&&!f&&!m;if(C&&this.addRowNodeToRowsToDisplay(h,i,n,s),!(o&&h.leafGroup)){if(d){var w=f||m;if(h.expanded||w){var S=w?s:s+1;this.recursivelyAddToRowsToDisplay(h.childrenAfterSort,i,n,o,S),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(h),this.addRowNodeToRowsToDisplay(h.sibling,i,n,s))}}else if(h.master&&h.expanded){var E=this.createDetailNode(h);this.addRowNodeToRowsToDisplay(E,i,n,s)}}}},t.prototype.addRowNodeToRowsToDisplay=function(e,i,n,o){var s=this.gridOptionsWrapper.isGroupMultiAutoColumn();i.push(e),e.setUiLevel(s?0:o)},t.prototype.ensureFooterNodeExists=function(e){if(!Jt.exists(e.sibling)){var i=new ue(this.beans);Object.keys(e).forEach(function(n){i[n]=e[n]}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,Jt.exists(i.id)&&(i.id="rowGroupFooter_"+i.id),i.sibling=e,e.sibling=i}},t.prototype.createDetailNode=function(e){if(Jt.exists(e.detailNode))return e.detailNode;var i=new ue(this.beans);return i.detail=!0,i.selectable=!1,i.parent=e,Jt.exists(e.id)&&(i.id="detail_"+e.id),i.data=e.data,i.level=e.level+1,e.detailNode=i,i},Jv([b("columnModel")],t.prototype,"columnModel",void 0),Jv([b("beans")],t.prototype,"beans",void 0),t=Jv([Dt("flattenStage")],t),t}(ft),cQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ip=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},hQ=function(r){cQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()},t.prototype.sort=function(e,i,n,o,s,a){var l=this,u=this.gridOptionsWrapper.isGroupMaintainOrder(),c=this.columnModel.getAllGridColumns().some(function(f){return f.isRowGroupActive()}),h={};n&&o&&(h=this.calculateDirtyNodes(o));var d=this.columnModel.isPivotMode(),p=function(f){l.pullDownGroupDataForHideOpenParents(f.childrenAfterAggFilter,!0);var m=d&&f.leafGroup,g=u&&c&&!f.leafGroup&&!a;if(!i||g||m){var y=f.childrenAfterAggFilter.slice(0);if(u&&f.childrenAfterSort){var C=f.childrenAfterSort.reduce(function(S,E,M){return S[E.id]=M,S},{});y.sort(function(S,E){return(C[S.id]||0)-(C[E.id]||0)})}f.childrenAfterSort=y}else n?f.childrenAfterSort=l.doDeltaSort(f,h,s,e):f.childrenAfterSort=l.rowNodeSorter.doFullSort(f.childrenAfterAggFilter,e);if(f.sibling&&(f.sibling.childrenAfterSort=f.childrenAfterSort),l.updateChildIndexes(f),l.postSortFunc){var w={nodes:f.childrenAfterSort};l.postSortFunc(w)}};s&&s.forEachChangedNodeDepthFirst(p),this.updateGroupDataForHideOpenParents(s)},t.prototype.calculateDirtyNodes=function(e){var i={},n=function(o){o&&o.forEach(function(s){return i[s.id]=!0})};return e&&e.forEach(function(o){n(o.add),n(o.update),n(o.remove)}),i},t.prototype.doDeltaSort=function(e,i,n,o){var s=this,a=e.childrenAfterAggFilter,l=e.childrenAfterSort;if(!l)return this.rowNodeSorter.doFullSort(a,o);var u={},c=[];a.forEach(function(f){i[f.id]||!n.canSkip(f)?c.push(f):u[f.id]=!0});var h=l.filter(function(f){return u[f.id]}),d=function(f,m){return{currentPos:m,rowNode:f}},p=c.map(d).sort(function(f,m){return s.rowNodeSorter.compareRowNodes(o,f,m)});return this.mergeSortedArrays(o,p,h.map(d)).map(function(f){var m=f.rowNode;return m})},t.prototype.mergeSortedArrays=function(e,i,n){for(var o=[],s=0,a=0;s<i.length&&a<n.length;){var l=this.rowNodeSorter.compareRowNodes(e,i[s],n[a]);l<0?o.push(i[s++]):o.push(n[a++])}for(;s<i.length;)o.push(i[s++]);for(;a<n.length;)o.push(n[a++]);return o},t.prototype.updateChildIndexes=function(e){if(!Jt.missing(e.childrenAfterSort))for(var i=e.childrenAfterSort,n=0;n<i.length;n++){var o=i[n],s=n===0,a=n===e.childrenAfterSort.length-1;o.setFirstChild(s),o.setLastChild(a),o.setChildIndex(n)}},t.prototype.updateGroupDataForHideOpenParents=function(e){var i=this;if(!!this.gridOptionsWrapper.isGroupHideOpenParents()){if(this.gridOptionsWrapper.isTreeData()){var n="AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).";return Jt.doOnce(function(){return console.warn(n)},"sortService.hideOpenParentsWithTreeData"),!1}var o=function(s){i.pullDownGroupDataForHideOpenParents(s.childrenAfterSort,!1),s.childrenAfterSort.forEach(function(a){a.hasChildren()&&o(a)})};e&&e.executeFromRootNode(function(s){return o(s)})}},t.prototype.pullDownGroupDataForHideOpenParents=function(e,i){var n=this;!this.gridOptionsWrapper.isGroupHideOpenParents()||Jt.missing(e)||e.forEach(function(o){var s=n.columnModel.getGroupDisplayColumns();s.forEach(function(a){var l=a.getColDef().showRowGroup;if(typeof l!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}var u=l,c=n.columnModel.getPrimaryColumn(u),h=c===o.rowGroupColumn;if(!h)if(i)o.setGroupValue(a.getId(),void 0);else{var d=o.getFirstChildOfFirstChild(c);d&&o.setGroupValue(a.getId(),d.key)}})})},Ip([b("columnModel")],t.prototype,"columnModel",void 0),Ip([b("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),Ip([Ct],t.prototype,"init",null),t=Ip([Dt("sortService")],t),t}(ft),dQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),eR=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},pQ=function(r){dQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.filter=function(e){var i=this.filterManager.isColumnFilterPresent()||this.filterManager.isQuickFilterPresent()||this.filterManager.isExternalFilterPresent();this.filterNodes(i,e)},t.prototype.filterNodes=function(e,i){var n=this,o=function(u,c){u.hasChildren()&&e&&!c?u.childrenAfterFilter=u.childrenAfterGroup.filter(function(h){var d=h.childrenAfterFilter&&h.childrenAfterFilter.length>0,p=h.data&&n.filterManager.doesRowPassFilter({rowNode:h});return d||p}):u.childrenAfterFilter=u.childrenAfterGroup,u.sibling&&(u.sibling.childrenAfterFilter=u.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var s=function(u,c){if(u.childrenAfterGroup)for(var h=0;h<u.childrenAfterGroup.length;h++){var d=u.childrenAfterGroup[h],p=c||n.filterManager.doesRowPassFilter({rowNode:d});d.childrenAfterGroup?s(u.childrenAfterGroup[h],p):o(d,p)}o(u,c)},a=function(u){return s(u,!1)};i.executeFromRootNode(a)}else{var l=function(u){return o(u,!1)};i.forEachChangedNodeDepthFirst(l,!0)}},t.prototype.doingTreeDataFiltering=function(){return this.gridOptionsWrapper.isTreeData()&&!this.gridOptionsWrapper.isExcludeChildrenWhenTreeDataFiltering()},eR([b("filterManager")],t.prototype,"filterManager",void 0),t=eR([Dt("filterService")],t),t}(ft),fQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),_a=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gQ=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),n,o=[],s;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},mQ=function(r){fQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.rowModel.getType()===H.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},t.prototype.isActive=function(){return this.gridOptionsWrapper.isImmutableData()},t.prototype.setRowData=function(e){var i=this.createTransactionForRowData(e);if(!!i){var n=gQ(i,2),o=n[0],s=n[1],a=this.clientSideRowModel.updateRowData(o,s);a&&this.rowRenderer.refreshFullWidthRows(a.update)}},t.prototype.createTransactionForRowData=function(e){if(Jt.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}var i=this.gridOptionsWrapper.getRowIdFunc();if(i==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}var n={remove:[],update:[],add:[]},o=this.clientSideRowModel.getCopyOfNodesMap(),s=this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder(),a=s?void 0:{};return Jt.exists(e)&&e.forEach(function(l,u){var c=i({data:l,level:0}),h=o[c];if(a&&(a[c]=u),h){var d=h.data!==l;d&&n.update.push(l),o[c]=void 0}else n.add.push(l)}),Jt.iterateObject(o,function(l,u){u&&n.remove.push(u.data)}),[n,a]},_a([b("rowModel")],t.prototype,"rowModel",void 0),_a([b("rowRenderer")],t.prototype,"rowRenderer",void 0),_a([b("columnApi")],t.prototype,"columnApi",void 0),_a([b("gridApi")],t.prototype,"gridApi",void 0),_a([b("filterManager")],t.prototype,"filterManager",void 0),_a([Ct],t.prototype,"postConstruct",null),t=_a([Dt("immutableService")],t),t}(ft),vQ={moduleName:qt.ClientSideRowModelModule,beans:[oQ,aQ,uQ,hQ,pQ,mQ],rowModels:{clientSide:nQ}},yQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Qv=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},iR=function(r){yQ(t,r);function t(e,i,n){var o=r.call(this,e)||this;return o.parentCache=i,o.params=n,o.startRow=e*n.blockSize,o.endRow=o.startRow+n.blockSize,o}return t.prototype.postConstruct=function(){this.createRowNodes()},t.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},t.prototype.setDataAndId=function(e,i,n){!e.id&&e.alreadyRendered&&(e.alreadyRendered=!1),Jt.exists(i)?e.setDataAndId(i,n.toString()):e.setDataAndId(void 0,void 0)},t.prototype.loadFromDatasource=function(){var e=this,i=this.createLoadParams();if(Jt.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(function(){e.params.datasource.getRows(i)},0)},t.prototype.processServerFail=function(){},t.prototype.createLoadParams=function(){var e={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsWrapper.getContext()};return e},t.prototype.forEachNode=function(e,i,n){var o=this;this.rowNodes.forEach(function(s,a){var l=o.startRow+a;l<n&&e(s,i.next())})},t.prototype.getLastAccessed=function(){return this.lastAccessed},t.prototype.getRow=function(e,i){i===void 0&&(i=!1),i||(this.lastAccessed=this.params.lastAccessedSequence.next());var n=e-this.startRow;return this.rowNodes[n]},t.prototype.getStartRow=function(){return this.startRow},t.prototype.getEndRow=function(){return this.endRow},t.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.params.blockSize;e++){var i=this.startRow+e,n=new ue(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(i),n.setRowTop(this.params.rowHeight*i),this.rowNodes.push(n)}},t.prototype.processServerResult=function(e){var i=this;this.rowNodes.forEach(function(o,s){var a=e.rowData?e.rowData[s]:void 0;i.setDataAndId(o,a,i.startRow+s)});var n=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)},t.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(e){e.clearRowTopAndRowIndex()})},Qv([b("beans")],t.prototype,"beans",void 0),Qv([Ct],t.prototype,"postConstruct",null),Qv([Yi],t.prototype,"destroyRowNodes",null),t}(m_),_Q=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fp=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},CQ=function(r,t){return function(e,i){t(e,i,r)}},wQ=function(r){_Q(t,r);function t(e){var i=r.call(this)||this;return i.lastRowIndexKnown=!1,i.blocks={},i.blockCount=0,i.rowCount=e.initialRowCount,i.params=e,i}return t.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},t.prototype.getRow=function(e,i){i===void 0&&(i=!1);var n=Math.floor(e/this.params.blockSize),o=this.blocks[n];if(!o){if(i)return;o=this.createBlock(n)}return o.getRow(e)},t.prototype.createBlock=function(e){var i=this.createBean(new iR(e,this,this.params));return this.blocks[i.getId()]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),this.params.rowNodeBlockLoader.addBlock(i),i},t.prototype.refreshCache=function(){var e=this.blockCount==0;if(e){this.purgeCache();return}this.getBlocksInOrder().forEach(function(i){return i.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(i){return e.destroyBlock(i)})},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},t.prototype.pageLoaded=function(e,i){!this.isAlive()||(this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+i),this.checkRowCount(e,i),this.onCacheUpdated())},t.prototype.purgeBlocksIfNeeded=function(e){var i=this,n=this.getBlocksInOrder().filter(function(u){return u!=e}),o=function(u,c){return c.getLastAccessed()-u.getLastAccessed()};n.sort(o);var s=this.params.maxBlocksInCache>0,a=s?this.params.maxBlocksInCache-1:null,l=t.MAX_EMPTY_BLOCKS_TO_KEEP-1;n.forEach(function(u,c){var h=u.getState()===iR.STATE_WAITING_TO_LOAD&&c>=l,d=s?c>=a:!1;if(h||d){if(i.isBlockCurrentlyDisplayed(u)||i.isBlockFocused(u))return;i.removeBlockFromCache(u)}})},t.prototype.isBlockFocused=function(e){var i=this.focusService.getFocusCellToUseAfterRefresh();if(!i||i.rowPinned!=null)return!1;var n=e.getStartRow(),o=e.getEndRow(),s=i.rowIndex>=n&&i.rowIndex<o;return s},t.prototype.isBlockCurrentlyDisplayed=function(e){var i=e.getStartRow(),n=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(i,n)},t.prototype.removeBlockFromCache=function(e){!e||this.destroyBlock(e)},t.prototype.checkRowCount=function(e,i){if(typeof i=="number"&&i>=0)this.rowCount=i,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var n=(e.getId()+1)*this.params.blockSize,o=n+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}},t.prototype.setRowCount=function(e,i){this.rowCount=e,Jt.exists(i)&&(this.lastRowIndexKnown=i),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()},t.prototype.forEachNodeDeep=function(e){var i=this,n=new Nu;this.getBlocksInOrder().forEach(function(o){return o.forEachNode(e,n,i.rowCount)})},t.prototype.getBlocksInOrder=function(){var e=function(n,o){return n.getId()-o.getId()},i=Jt.getAllValuesInObject(this.blocks).sort(e);return i},t.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)},t.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var e={type:O.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}},t.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,i=[];this.getBlocksInOrder().forEach(function(n){var o=n.getId()*e.params.blockSize;o>=e.rowCount&&i.push(n)}),i.length>0&&i.forEach(function(n){return e.destroyBlock(n)})},t.prototype.purgeCache=function(){var e=this;this.getBlocksInOrder().forEach(function(i){return e.removeBlockFromCache(i)}),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},t.prototype.getRowNodesInRange=function(e,i){var n=this,o=[],s=-1,a=!1,l=new Nu;Jt.missing(e)&&(a=!0);var u=!1;this.getBlocksInOrder().forEach(function(h){if(!u){if(a&&s+1!==h.getId()){u=!0;return}s=h.getId(),h.forEachNode(function(d){var p=d===e||d===i;(a||p)&&o.push(d),p&&(a=!a)},l,n.rowCount)}});var c=u||a;return c?[]:o},t.MAX_EMPTY_BLOCKS_TO_KEEP=2,Fp([b("rowRenderer")],t.prototype,"rowRenderer",void 0),Fp([b("focusService")],t.prototype,"focusService",void 0),Fp([CQ(0,Cn("loggerFactory"))],t.prototype,"setBeans",null),Fp([Yi],t.prototype,"destroyAllBlocks",null),t}(ft),SQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Es=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},EQ=function(r){SQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.ensureRowHeightsValid=function(e,i,n,o){return!1},t.prototype.init=function(){var e=this;!this.gridOptionsWrapper.isRowModelInfinite()||(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return e.destroyCache()}),this.verifyProps())},t.prototype.verifyProps=function(){if(this.gridOptionsWrapper.getInitialGroupOrderComparator()!=null){var e="AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.";Jt.doOnce(function(){return console.warn(e)},"IRM.InitialGroupOrderComparator")}},t.prototype.start=function(){this.setDatasource(this.gridOptionsWrapper.getDatasource())},t.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,O.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,O.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,O.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},t.prototype.onFilterChanged=function(){this.reset()},t.prototype.onSortChanged=function(){this.reset()},t.prototype.onColumnEverything=function(){var e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()},t.prototype.isSortModelDifferent=function(){return!Jt.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},t.prototype.getType=function(){return H.ROW_MODEL_TYPE_INFINITE},t.prototype.setDatasource=function(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()},t.prototype.isEmpty=function(){return!this.infiniteCache},t.prototype.isRowsToRender=function(){return!!this.infiniteCache},t.prototype.getNodesInRangeForSelection=function(e,i){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,i):[]},t.prototype.reset=function(){if(!!this.datasource){var e=this.gridOptionsWrapper.getRowIdFunc(),i=e!=null;i||this.selectionService.reset(),this.resetCache();var n=this.createModelUpdatedEvent();this.eventService.dispatchEvent(n)}},t.prototype.createModelUpdatedEvent=function(){return{type:O.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},t.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsWrapper.getInfiniteInitialRowCount(),1),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheOverflowSize(),1),blockSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheBlockSize(),100),lastAccessedSequence:new Nu},this.infiniteCache=this.createBean(new wQ(this.cacheParams))},t.prototype.defaultIfInvalid=function(e,i){return e>0?e:i},t.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},t.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},t.prototype.getRow=function(e){if(!!this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)},t.prototype.getRowNode=function(e){var i;return this.forEachNode(function(n){n.id===e&&(i=n)}),i},t.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.getRowIndexAtPixel=function(e){if(this.rowHeight!==0){var i=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return i>n?n:i}return 0},t.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},t.prototype.isRowPresent=function(e){var i=this.getRowNode(e.id);return!!i},t.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},t.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},t.prototype.isLastRowIndexKnown=function(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1},t.prototype.setRowCount=function(e,i){this.infiniteCache&&this.infiniteCache.setRowCount(e,i)},Es([b("filterManager")],t.prototype,"filterManager",void 0),Es([b("sortController")],t.prototype,"sortController",void 0),Es([b("selectionService")],t.prototype,"selectionService",void 0),Es([b("rowRenderer")],t.prototype,"rowRenderer",void 0),Es([b("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Es([Ct],t.prototype,"init",null),Es([Yi],t.prototype,"destroyDatasource",null),t=Es([Dt("rowModel")],t),t}(ft),xQ={moduleName:qt.InfiniteRowModelModule,rowModels:{infinite:EQ}},RQ=function(){function r(){}return r.prototype.setBeans=function(t){this.beans=t},r.prototype.getFileName=function(t){var e=this.getDefaultFileExtension();return(t==null||!t.length)&&(t=this.getDefaultFileName()),t.indexOf(".")===-1?t+"."+e:t},r.prototype.getData=function(t){var e=this.createSerializingSession(t),i=this.beans.gridSerializer.serialize(e,t);return i},r}(),bQ=function(){function r(t){this.groupColumns=[];var e=t.columnModel,i=t.valueService,n=t.gridOptionsWrapper,o=t.processCellCallback,s=t.processHeaderCallback,a=t.processGroupHeaderCallback,l=t.processRowGroupCallback;this.columnModel=e,this.valueService=i,this.gridOptionsWrapper=n,this.processCellCallback=o,this.processHeaderCallback=s,this.processGroupHeaderCallback=a,this.processRowGroupCallback=l}return r.prototype.prepare=function(t){this.groupColumns=t.filter(function(e){return!!e.getColDef().showRowGroup})},r.prototype.extractHeaderValue=function(t){var e=this.getHeaderName(this.processHeaderCallback,t);return e!=null?e:""},r.prototype.extractRowCellValue=function(t,e,i,n,o){var s=this.gridOptionsWrapper.isGroupHideOpenParents(),a=!s&&this.shouldRenderGroupSummaryCell(o,t,e)?this.createValueForGroupNode(o):this.valueService.getValue(t,o),l=this.processCell({accumulatedRowIndex:i,rowNode:o,column:t,value:a,processCellCallback:this.processCellCallback,type:n});return l!=null?l:""},r.prototype.shouldRenderGroupSummaryCell=function(t,e,i){var n,o=t&&t.group;if(!o)return!1;var s=this.groupColumns.indexOf(e);if(s!==-1&&((n=t.groupData)===null||n===void 0?void 0:n[e.getId()]))return!0;var a=this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode());return i===0&&a},r.prototype.getHeaderName=function(t,e){return t?t({column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},r.prototype.createValueForGroupNode=function(t){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()});var e=[t.key];if(!this.gridOptionsWrapper.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,e.push(t.key);return e.reverse().join(" -> ")},r.prototype.processCell=function(t){var e=t.accumulatedRowIndex,i=t.rowNode,n=t.column,o=t.value,s=t.processCellCallback,a=t.type;return s?s({accumulatedRowIndex:e,column:n,node:i,value:o,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:a}):o!=null?o:""},r}(),MQ=function(){function r(){}return r.download=function(t,e){var i=document.defaultView||window;if(!i){console.warn("AG Grid: There is no `window` associated with the current `document`");return}var n=document.createElement("a"),o=i.URL.createObjectURL(e);n.setAttribute("href",o),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(n),i.setTimeout(function(){i.URL.revokeObjectURL(o)},0)},r}(),TQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),nR=`\r
`,PQ=function(r){TQ(t,r);function t(e){var i=r.call(this,e)||this;i.isFirstLine=!0,i.result="";var n=e.suppressQuotes,o=e.columnSeparator;return i.suppressQuotes=n,i.columnSeparator=o,i}return t.prototype.addCustomContent=function(e){var i=this;!e||(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,nR),this.result+=e):e.forEach(function(n){i.beginNewLine(),n.forEach(function(o,s){s!==0&&(i.result+=i.columnSeparator),i.result+=i.putInQuotes(o.data.value||""),o.mergeAcross&&i.appendEmptyCells(o.mergeAcross)})}))},t.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},t.prototype.onNewHeaderGroupingRowColumn=function(e,i,n,o){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i),this.appendEmptyCells(o)},t.prototype.appendEmptyCells=function(e){for(var i=1;i<=e;i++)this.result+=this.columnSeparator+this.putInQuotes("")},t.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},t.prototype.onNewHeaderRowColumn=function(e,i){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},t.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},t.prototype.onNewBodyRowColumn=function(e,i,n){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(e,i,i,H.EXPORT_TYPE_CSV,n))},t.prototype.putInQuotes=function(e){if(this.suppressQuotes)return e;if(e==null)return'""';var i;typeof e=="string"?i=e:typeof e.toString=="function"?i=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),i="");var n=i.replace(/"/g,'""');return'"'+n+'"'},t.prototype.parse=function(){return this.result},t.prototype.beginNewLine=function(){this.isFirstLine||(this.result+=nR),this.isFirstLine=!1},t}(bQ),OQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ul=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},AQ=function(r){OQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},t.prototype.getMergedParams=function(e){var i=this.gridOptionsWrapper.getDefaultExportParams("csv");return Object.assign({},i,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var i=this.getMergedParams(e),n=this.getData(i),o=new Blob(["\uFEFF",n],{type:"text/plain"});return MQ.download(this.getFileName(i.fileName),o),n},t.prototype.exportDataAsCsv=function(e){return this.export(e)},t.prototype.getDataAsCsv=function(e,i){i===void 0&&(i=!1);var n=i?Object.assign({},e):this.getMergedParams(e);return this.getData(n)},t.prototype.getDefaultFileName=function(){return"export.csv"},t.prototype.getDefaultFileExtension=function(){return"csv"},t.prototype.createSerializingSession=function(e){var i=this,n=i.columnModel,o=i.valueService,s=i.gridOptionsWrapper,a=e,l=a.processCellCallback,u=a.processHeaderCallback,c=a.processGroupHeaderCallback,h=a.processRowGroupCallback,d=a.suppressQuotes,p=a.columnSeparator;return new PQ({columnModel:n,valueService:o,gridOptionsWrapper:s,processCellCallback:l||void 0,processHeaderCallback:u||void 0,processGroupHeaderCallback:c||void 0,processRowGroupCallback:h||void 0,suppressQuotes:d||!1,columnSeparator:p||","})},t.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},Ul([b("columnModel")],t.prototype,"columnModel",void 0),Ul([b("valueService")],t.prototype,"valueService",void 0),Ul([b("gridSerializer")],t.prototype,"gridSerializer",void 0),Ul([b("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),Ul([Ct],t.prototype,"postConstruct",null),t=Ul([Dt("csvCreator")],t),t}(RQ),DQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(t,e)};return function(t,e){r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ca=function(r,t,e,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},rR;(function(r){r[r.HEADER_GROUPING=0]="HEADER_GROUPING",r[r.HEADER=1]="HEADER",r[r.BODY=2]="BODY"})(rR||(rR={}));var LQ=function(r){DQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.serialize=function(e,i){i===void 0&&(i={});var n=this.getColumnsToExport(i.allColumns,i.columnKeys),o=Jt.compose(this.prepareSession(n),this.prependContent(i),this.exportColumnGroups(i,n),this.exportHeaders(i,n),this.processPinnedTopRows(i,n),this.processRows(i,n),this.processPinnedBottomRows(i,n),this.appendContent(i));return o(e).parse()},t.prototype.processRow=function(e,i,n,o){var s=i.shouldRowBeSkipped||function(){return!1},a=this.gridOptionsWrapper,l=a.getContext(),u=a.getApi(),c=a.getColumnApi(),h=a.isGroupRemoveSingleChildren(),d=a.isGroupRemoveLowestSingleChildren(),p=i.rowPositions!=null,f=p||!!i.onlySelected,m=a.isGroupHideOpenParents()&&!f,g=this.columnModel.isPivotMode()?o.leafGroup:!o.group,y=i.skipGroups||i.skipRowGroups,C=d&&o.leafGroup,w=o.allChildrenCount===1&&(h||C);if(y&&i.skipGroups&&Jt.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups"),!(!g&&(i.skipRowGroups||w||m)||i.onlySelected&&!o.isSelected()||i.skipPinnedTop&&o.rowPinned==="top"||i.skipPinnedBottom&&o.rowPinned==="bottom")){var S=o.level===-1;if(!(S&&!o.leafGroup&&(!o.footer||!p))){var E=s({node:o,api:u,columnApi:c,context:l});if(!E){var M=e.onNewBodyRow();if(n.forEach(function(x,T){M.onColumn(x,T,o)}),i.getCustomContentBelowRow){var L=i.getCustomContentBelowRow({node:o,api:u,columnApi:c,context:l});L&&e.addCustomContent(L)}}}}},t.prototype.appendContent=function(e){return function(i){var n=e.customFooter||e.appendContent;return n&&(e.customFooter&&Jt.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),i.addCustomContent(n)),i}},t.prototype.prependContent=function(e){return function(i){var n=e.customHeader||e.prependContent;return n&&(e.customHeader&&Jt.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),i.addCustomContent(n)),i}},t.prototype.prepareSession=function(e){return function(i){return i.prepare(e),i}},t.prototype.exportColumnGroups=function(e,i){var n=this;return function(o){if(e.skipColumnGroupHeaders)e.columnGroups&&Jt.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var s=new wT,a=n.displayedGroupCreator.createDisplayedGroups(i,n.columnModel.getGridBalancedTree(),s,null);n.recursivelyAddHeaderGroups(a,o,e.processGroupHeaderCallback)}return o}},t.prototype.exportHeaders=function(e,i){return function(n){if(!e.skipHeader&&!e.skipColumnHeaders){var o=n.onNewHeaderRow();i.forEach(function(s,a){o.onColumn(s,a,void 0)})}else e.skipHeader&&Jt.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");return n}},t.prototype.processPinnedTopRows=function(e,i){var n=this;return function(o){var s=n.processRow.bind(n,o,e,i);return e.rowPositions?e.rowPositions.filter(function(a){return a.rowPinned==="top"}).sort(function(a,l){return a.rowIndex-l.rowIndex}).map(function(a){return n.pinnedRowModel.getPinnedTopRow(a.rowIndex)}).forEach(s):n.pinnedRowModel.forEachPinnedTopRow(s),o}},t.prototype.processRows=function(e,i){var n=this;return function(o){var s=n.rowModel,a=s.getType(),l=a===H.ROW_MODEL_TYPE_CLIENT_SIDE,u=a===H.ROW_MODEL_TYPE_SERVER_SIDE,c=!l&&e.onlySelected,h=n.processRow.bind(n,o,e,i),d=e.exportedRows,p=d===void 0?"filteredAndSorted":d;if(e.rowPositions)e.rowPositions.filter(function(m){return m.rowPinned==null}).sort(function(m,g){return m.rowIndex-g.rowIndex}).map(function(m){return s.getRow(m.rowIndex)}).forEach(h);else if(n.columnModel.isPivotMode())l?s.forEachPivotNode(h):s.forEachNode(h);else if(e.onlySelectedAllPages||c){var f=n.selectionService.getSelectedNodes();f.forEach(h)}else p==="all"?s.forEachNode(h):l||u?s.forEachNodeAfterFilterAndSort(h):s.forEachNode(h);return o}},t.prototype.processPinnedBottomRows=function(e,i){var n=this;return function(o){var s=n.processRow.bind(n,o,e,i);return e.rowPositions?e.rowPositions.filter(function(a){return a.rowPinned==="bottom"}).sort(function(a,l){return a.rowIndex-l.rowIndex}).map(function(a){return n.pinnedRowModel.getPinnedBottomRow(a.rowIndex)}).forEach(s):n.pinnedRowModel.forEachPinnedBottomRow(s),o}},t.prototype.getColumnsToExport=function(e,i){e===void 0&&(e=!1);var n=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getGridColumns(i);if(e&&!n){var o=this.gridOptionsWrapper.isTreeData()?this.columnModel.getGridColumns([H.GROUP_AUTO_COLUMN_ID]):[];return o.concat(this.columnModel.getAllPrimaryColumns()||[])}return this.columnModel.getAllDisplayedColumns()},t.prototype.recursivelyAddHeaderGroups=function(e,i,n){var o=[];e.forEach(function(s){var a=s;!a.getChildren||a.getChildren().forEach(function(l){return o.push(l)})}),e.length>0&&e[0]instanceof on&&this.doAddHeaderHeader(i,e,n),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,i,n)},t.prototype.doAddHeaderHeader=function(e,i,n){var o=this,s=e.onNewHeaderGroupingRow(),a=0;i.forEach(function(l){var u=l,c;n?c=n({columnGroup:u,api:o.gridOptionsWrapper.getApi(),columnApi:o.gridOptionsWrapper.getColumnApi(),context:o.gridOptionsWrapper.getContext()}):c=o.columnModel.getDisplayNameForColumnGroup(u,"header");var h=u.getLeafColumns().reduce(function(d,p,f,m){var g=Jt.last(d),y=p.getColumnGroupShow()==="open";return y?(!g||g[1]!=null)&&(g=[f],d.push(g)):g&&g[1]==null&&(g[1]=f-1),f===m.length-1&&g&&g[1]==null&&(g[1]=f),d},[]);s.onColumn(u,c||"",a++,u.getLeafColumns().length-1,h)})},Ca([b("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),Ca([b("columnModel")],t.prototype,"columnModel",void 0),Ca([b("rowModel")],t.prototype,"rowModel",void 0),Ca([b("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Ca([b("selectionService")],t.prototype,"selectionService",void 0),Ca([b("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),t=Ca([Dt("gridSerializer")],t),t}(ft),IQ={moduleName:qt.CsvExportModule,beans:[AQ,LQ]},FQ=[vQ,xQ,IQ];te.registerModules(FQ);class Fh{static getComponentDefinition(t,e){let i;return typeof t=="string"?i=this.searchForComponentInstance(e,t):i={extends:uR(Object.assign({},t))},i||console.error(`Could not find component with name of ${t}. Is it in Vue.components?`),i.extends?(i.extends.setup&&(i.setup=i.extends.setup),i.extends.props=this.addParamsToProps(i.extends.props)):i.props=this.addParamsToProps(i.props),i}static addParamsToProps(t){return!t||Array.isArray(t)&&t.indexOf("params")===-1?t=["params",...t||[]]:typeof t=="object"&&!t.params&&(t.params={type:Object}),t}static createAndMountComponent(t,e,i,n){const o=Fh.getComponentDefinition(t,i);if(!o)return;const{vNode:s,destroy:a,el:l}=this.mount(o,{params:Object.freeze(e)},i,n||{});return{componentInstance:s.component.proxy,element:l,destroy:a}}static mount(t,e,i,n){let o=He(t,e);o.appContext=i.$.appContext,o.appContext.provides=Object.assign(Object.assign(Object.assign({},n),o.appContext.provides?o.appContext.provides:{}),i.$parent.$options.provide?i.$parent.$options.provide:{});let s=document.createElement("div");return Kw(o,s),{vNode:o,destroy:()=>{s&&Kw(null,s),s=null,o=null},el:s}}static searchForComponentInstance(t,e,i=10,n=!1){let o=null,s=t.$parent,a=0;for(;!o&&s&&s.$options&&++a<i;){const l=s;o=l.$options&&l.$options.components?l.$options.components[e]:null,s=s.$parent}if(!o){const l=t.$.appContext.components;l&&l[e]&&(o=l[e])}return!o&&!n?(console.error(`Could not find component with name of ${e}. Is it in Vue.components?`),null):o}}class ah extends JJ{constructor(t,e){super(),this.parent=t,ah.provides||(ah.provides=e)}createWrapper(t){const e=this;class i extends NQ{init(s){super.init(s)}hasMethod(s){return n.getFrameworkComponentInstance()[s]!=null}callMethod(s,a){const l=this.getFrameworkComponentInstance();return n.getFrameworkComponentInstance()[s].apply(l,a)}addMethod(s,a){n[s]=a}overrideProcessing(s){return e.parent.autoParamsRefresh&&s==="refresh"}processMethod(s,a){return s==="refresh"&&(this.getFrameworkComponentInstance().params=a[0]),this.hasMethod(s)?this.callMethod(s,a):s==="refresh"}createComponent(s){return e.createComponent(t,s)}}const n=new i;return n}createComponent(t,e){return Fh.createAndMountComponent(t,e,this.parent,ah.provides)}createMethodProxy(t,e,i){return function(){return t.overrideProcessing(e)?t.processMethod(e,arguments):t.hasMethod(e)?t.callMethod(e,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}destroy(){this.parent=null}}class NQ{getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(t){const{componentInstance:e,element:i,destroy:n}=this.createComponent(t);this.componentInstance=e,this.unmount=n,this.element=i.firstElementChild}}const GQ=r=>r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),HQ=r=>`on${r.charAt(0).toUpperCase()}${r.substring(1,r.length)}`,WQ=()=>{const r={};Ur.PUBLIC_EVENTS.map(i=>HQ(GQ(i))).forEach(i=>r[i]=void 0);const e={};return Ur.ALL_PROPERTIES.filter(i=>i!="gridOptions").forEach(i=>{r[i]={},e[i]={handler(n,o){this.processChanges(i,n,o)},deep:i!=="popupParent"&&i!=="context"}}),[r,e]};class Na{static hasChildColumns(t){return t&&t.default&&t.default().length>0}static mapChildColumnDefs(t){return t.default().map(e=>Na.toColDef(e))}static toColDef(t){const e=Na.createColDefFromGridColumn(t);return t.children&&t.children.length>0&&(e.children=Na.getChildColDefs(t.children)),e}static getChildColDefs(t){return t.map(e=>Na.createColDefFromGridColumn(e))}static createColDefFromGridColumn(t){const e={};return Object.assign(e,t.props),delete e.children,Qy.BOOLEAN_PROPERTIES.forEach(i=>{const n=e;n[i]===""&&(n[i]=!0)}),e}}class VQ extends PP{constructor(t){super(),this.parent=t}frameworkComponent(t,e){let i=Fh.searchForComponentInstance(this.parent,t,10,!0)?t:null;if(!i&&e&&e[t]){const n=e[t];i=Fh.searchForComponentInstance(this.parent,n,10,!0)?n:null}return i}isFrameworkComponent(t){return typeof t=="object"}}const kQ=["rowDataChanged","rowDataUpdated","cellValueChanged","rowValueChanged"],oR="onUpdate:modelValue",BQ="update:modelValue",[UQ,zQ]=WQ(),Ug=uR({render(){return sR("div")},props:Object.assign({gridOptions:{type:Object,default:()=>({})},autoParamsRefresh:{type:Boolean,default:()=>!1},componentDependencies:{type:Array,default:()=>[]},plugins:[],modules:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0,required:!1}},UQ),data(){return{gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0}},watch:Object.assign({modelValue:{handler(r,t){this.processChanges("rowData",r,t)},deep:!0}},zQ),methods:{globalEventListener(r,t){this.isDestroyed||(r==="gridReady"&&(this.gridReadyFired=!0),this.updateModelIfUsed(r))},processChanges(r,t,e){if(this.gridCreated){if(this.skipChange(r,t,e))return;const i={};i[r]={currentValue:r==="rowData"?Object.isFrozen(t)?t:em(im(t)):t,previousValue:e},Ur.processOnChange(i,this.gridOptions,this.gridOptions.api,this.gridOptions.columnApi)}},checkForBindingConflicts(){const r=this;(r.rowData||this.gridOptions.rowData)&&r.modelValue&&console.warn("AG Grid: Using both rowData and v-model. rowData will be ignored.")},getRowData(){const r=[];return this.gridOptions.api.forEachNode(t=>{r.push(t.data)}),r},updateModelIfUsed(r){this.gridReadyFired&&this.$attrs[oR]&&kQ.indexOf(r)!==-1&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings(){const r=this,t=r.modelValue;return t||(r.rowData?r.rowData:r.gridOptions.rowData)},getProvides(){let r=AA(),t={};for(;r;)r&&r.provides&&(t=Object.assign(Object.assign({},t),r.provides)),r=r.parent;return t},skipChange(r,t,e){if(this.gridReadyFired&&r==="rowData"&&this.$attrs[oR]){if(t===e)return!0;if(t&&e){const i=t,n=e;if(i.length===n.length){for(let o=0;o<i.length;o++)if(i[o]!==n[o])return!1;return!0}}}return!1},debounce(r,t){let e;return()=>{const i=function(){r()};window.clearTimeout(e),e=window.setTimeout(i,t)}}},mounted(){this.emitRowModel=this.debounce(()=>{this.$emit(BQ,Object.freeze(this.getRowData()))},20);const r=this.getProvides(),t=new ah(this,r),e=em(Ur.copyAttributesToGridOptions(im(this.gridOptions),this));this.checkForBindingConflicts();const i=this.getRowDataBasedOnBindings();e.rowData=i&&(Object.isFrozen(i)?i:em(im(i))),Na.hasChildColumns(this.$slots)&&(e.columnDefs=Na.mapChildColumnDefs(this.$slots));const n={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:new VQ(this),providedBeanInstances:{frameworkComponentWrapper:t},modules:this.modules};new qJ(this.$el,e,n),this.gridCreated=!0},unmounted(){this.gridCreated&&(this.gridOptions.api&&this.gridOptions.api.destroy(),this.isDestroyed=!0)}}),jQ={class:"d-flex gap-2"},$Q=A("i",{class:"fa-solid fa-search cursor-pointer"},null,-1),YQ=[$Q],KQ={__name:"Attribute",props:["params"],setup(r){function t(e){const i=jp.find(function(o){return __==="geoserver"?o.properties.uuid===e.uuid:o.attributes.uuid===e.uuid});function n(){return __==="geoserver"?(Ou.value=i.properties,console.log(i.geometry),new wh({featureProjection:Ie.getView().getProjection()}).readGeometry(i.geometry)):(Ou.value=i.attributes,console.log(i),new Ib().readGeometry(i.geometry))}ff.getSource().clear(),ff.getSource().addFeature(new hr(n())),Ie.getView().fit(n(),Ie.getSize())}return(e,i)=>(At(),Vt("div",jQ,[A("span",{onClick:i[0]||(i[0]=n=>t(r.params.data))},YQ)]))}};let Ps,y_,jp=[],__="";const XQ={resizable:!0};function qQ(r){Ps=r.api,y_=r.columnApi,JQ(),Ps.hideOverlay()}function ZQ(r){Ps.setQuickFilter(r.target.value)}function JQ(){const r=[];y_.getColumns().forEach(t=>{r.push(t.getId())}),y_.autoSizeColumns(r,!1)}function QQ(r){const t=[8353313775117298e-9,-344572537384124e-8,15542331711382687e-9,3.3845737448304594e6],e="0",i="EPSG:3857".split(/:(?=\d+$)/).pop();return r+"/"+e+"/query/?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+t[0]+',"ymin":'+t[1]+',"xmax":'+t[2]+',"ymax":'+t[3]+',"spatialReference":{"wkid":'+i+"}}")+"&geometryType=esriGeometryEnvelope&inSR="+i+"&outFields=*&outSR="+i}async function ttt(r){__=r.serverType,Ps.showLoadingOverlay();const t=[];jp=[];const e=Ps.getColumnDefs();if(e.length=0,e.push({field:"Action",width:90,cellRenderer:KQ}),r.serverType==="geoserver"){const i=Vb(r.url,r.name_layer),n=await lh.get(i),{features:o}=n.data;o.map(a=>{jp.push(a),t.push(Object.assign(a.properties,{uuid:crypto.randomUUID()}))}),Object.keys(o[0].properties).forEach(a=>e.push({field:a}))}else{const i=QQ(r.url),n=await lh.get(i),{features:o}=n.data;o.map(a=>{jp.push(a),t.push(Object.assign(a.attributes,{uuid:crypto.randomUUID()}))}),Object.keys(o[0].attributes).forEach(a=>e.push({field:a}))}Ps.setColumnDefs(e),Ps.setRowData(t),Ps.hideOverlay()}const ett={style:{height:"13%"},class:"d-flex align-items-center justify-content-between mx-2"},itt={class:"d-flex gap-2"},ntt=A("option",{disabled:"",value:{}},"Choose Available WFS",-1),rtt=["value"],ott={class:"input-group input-group-sm"},stt=A("span",{class:"input-group-text"},[A("i",{class:"fa-solid fa-magnifying-glass"})],-1),att={__name:"AttributeTable",setup(r){const t=ii(!1),e=ii({});return C_(e,(i,n)=>{ttt(i)}),(i,n)=>(At(),Vt(mr,null,[A("div",ett,[A("div",itt,[ge(A("select",{class:"form-select form-select-sm","onUpdate:modelValue":n[0]||(n[0]=o=>e.value=o)},[ntt,(At(!0),Vt(mr,null,ig(U(Lg).kumuh360,o=>(At(),Vt("option",{key:o.id,value:o},vi(o.name),9,rtt))),128))],512),[[DA,e.value]]),A("div",ott,[stt,A("input",{type:"text",class:"form-control",placeholder:"Keyword",onInput:n[1]||(n[1]=o=>U(ZQ)(o))},null,32)])]),A("div",{class:"close-btn cursor-pointer",onMouseover:n[2]||(n[2]=o=>t.value=!0),onMouseleave:n[3]||(n[3]=o=>t.value=!1),onClick:n[4]||(n[4]=()=>U(IM)())},[A("i",{class:xi(["fa-circle-xmark fa-lg",t.value?"fa-solid":"fa-regular"])},null,2)],32)]),He(U(Ug),{class:"ag-theme-alpine",style:{height:"87%"},onGridReady:U(qQ),cacheQuickFilter:!0,pagination:!0,autoGroupColumnDef:{minWidth:170},paginationPageSize:"10",defaultColDef:U(XQ),rowSelection:"single",animateRows:"true"},null,8,["onGridReady","defaultColDef"])],64))}},ltt={class:"d-flex gap-2"},utt=A("i",{class:"fa-solid fa-droplet cursor-pointer"},null,-1),ctt=[utt],htt=A("i",{class:"fa-solid fa-pen-to-square cursor-pointer"},null,-1),dtt=[htt],ptt=A("i",{class:"fa-solid fa-trash cursor-pointer"},null,-1),ftt=[ptt],gtt={__name:"Layer",props:["params"],setup(r){async function t(e){const{id:i}=e;Qc.fire({title:"Are you sure?",text:"Layers could't be able to revert!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0d6efd",cancelButtonColor:"#dc3545",confirmButtonText:"Yes, delete it!"}).then(async n=>{if(n.isConfirmed)try{await ln.delete(`/layers/${i}/`),Dn&&Dn.showLoadingOverlay();const o=await jg();zg(o),Dn&&Dn.hideOverlay(),_o.fire({icon:"success",title:"Layer Deleted!"})}catch(o){console.error(o),_o.fire({icon:"error",title:"Failed to Remove Layer!"})}})}return(e,i)=>(At(),Vt("div",ltt,[A("span",{onClick:i[0]||(i[0]=n=>U(Tj)(r.params.data))},ctt),A("span",{onClick:i[1]||(i[1]=n=>U(Mj)(r.params.data))},dtt),A("span",{onClick:i[2]||(i[2]=n=>t(r.params.data))},ftt)]))}};let Dn;const{role:mtt}=JSON.parse(ia(sessionStorage.getItem("userData"))),vtt=En({value:[{headerName:"Layer Name",field:"name",flex:1},{headerName:"Layer Service",field:"name_layer",flex:1},{headerName:"URL Service",field:"url",flex:1},{headerName:"Year",field:"year"},{field:"Options",width:90,cellRenderer:gtt,hide:mtt!=="admin"}]}),zg=r=>Dn.setRowData(r),ytt={resizable:!0};async function jg(){const r=await ln.get(`/layers/?project=${jr()}`),{results:t}=r.data;return t}async function _tt(r){try{Dn=r.api;const t=await jg();zg(t)}catch(t){console.log(t)}}const hl=r=>(yr("data-v-d8d4c2e0"),r=r(),_r(),r),Ctt={class:"modal fade",id:"add-layer-modal","data-bs-backdrop":"static","data-bs-keyboard":"false"},wtt={class:"modal-dialog modal-dialog-centered"},Stt={class:"modal-content"},Ett={class:"modal-header"},xtt=hl(()=>A("h1",{class:"modal-title fs-5"},"Create New Layer",-1)),Rtt=["onSubmit"],btt={class:"modal-body"},Mtt={class:"mb-2"},Ttt=hl(()=>A("label",{class:"form-label"},"Layer Name",-1)),Ptt={class:"mb-2"},Ott=hl(()=>A("label",{class:"form-label"},"Layer Name Service",-1)),Att=hl(()=>A("div",{class:"mb-2"},[A("label",{class:"form-label"},"Project"),A("select",{class:"form-select form-select-sm"},[A("option",{selected:""},"Kumuh 360")])],-1)),Dtt={class:"mb-2"},Ltt=hl(()=>A("label",{class:"form-label"},"URL Link",-1)),Itt={class:"mb-2"},Ftt=hl(()=>A("label",{class:"form-label"},"Year",-1)),Ntt={class:"modal-footer"},Gtt=hl(()=>A("button",{type:"submit",class:"btn btn-primary btn-sm"},"Add Layer",-1)),Htt={__name:"CreateLayer",setup(r){const t=En({name:"",name_service:"",projectId:jr(),url:"",year:new Date().getFullYear()});async function e(){const i=sessionStorage.getItem("id"),n=sessionStorage.getItem("organization");try{await ln.post("/layers/",{name:t.name,project:t.projectId,url:t.url,name_layer:t.name_service,year:t.year,user:i,organization:n}),Dn&&Dn.showLoadingOverlay();const o=await jg();zg(o),Dn&&Dn.hideOverlay(),_o.fire({icon:"success",title:"Layer Added!"}),gc()}catch(o){console.error(o),_o.fire({icon:"error",title:"Layer Not Added!",text:"Please insert correct data"})}}return(i,n)=>(At(),Vt("div",Ctt,[A("div",wtt,[A("div",Stt,[A("div",Ett,[xtt,A("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=(...o)=>U(gc)&&U(gc)(...o))})]),A("form",{onSubmit:S_(e,["prevent"])},[A("div",btt,[A("div",Mtt,[Ttt,ge(A("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":n[1]||(n[1]=o=>t.name=o)},null,512),[[fn,t.name]])]),A("div",Ptt,[Ott,ge(A("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":n[2]||(n[2]=o=>t.name_service=o)},null,512),[[fn,t.name_service]])]),Att,A("div",Dtt,[Ltt,ge(A("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":n[3]||(n[3]=o=>t.url=o)},null,512),[[fn,t.url]])]),A("div",Itt,[Ftt,ge(A("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":n[4]||(n[4]=o=>t.year=o)},null,512),[[fn,t.year]])])]),A("div",Ntt,[A("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:n[5]||(n[5]=(...o)=>U(gc)&&U(gc)(...o))},"Close"),Gtt])],40,Rtt)])])]))}},Wtt=In(Htt,[["__scopeId","data-v-d8d4c2e0"]]);const dl=r=>(yr("data-v-f8abf46c"),r=r(),_r(),r),Vtt={class:"modal fade",id:"update-layer-modal","data-bs-backdrop":"static","data-bs-keyboard":"false"},ktt={class:"modal-dialog modal-dialog-centered"},Btt={class:"modal-content"},Utt={class:"modal-header"},ztt=dl(()=>A("h1",{class:"modal-title fs-5"},"Update New Layer",-1)),jtt=["onSubmit"],$tt={class:"modal-body"},Ytt={class:"mb-2"},Ktt=dl(()=>A("label",{class:"form-label"},"Layer Name",-1)),Xtt={class:"mb-2"},qtt=dl(()=>A("label",{class:"form-label"},"Layer Name Service",-1)),Ztt=dl(()=>A("div",{class:"mb-2"},[A("label",{class:"form-label"},"Project"),A("select",{class:"form-select form-select-sm"},[A("option",{selected:""},"Kumuh 360")])],-1)),Jtt={class:"mb-2"},Qtt=dl(()=>A("label",{class:"form-label"},"URL Link",-1)),tet={class:"mb-2"},eet=dl(()=>A("label",{class:"form-label"},"Year",-1)),iet={class:"modal-footer"},net=dl(()=>A("button",{type:"submit",class:"btn btn-primary btn-sm"},"Update Layer",-1)),ret={__name:"UpdateLayer",setup(r){async function t(){const e=sessionStorage.getItem("id"),i=sessionStorage.getItem("organization");try{await ln.put(`/layers/${qe.id}/`,{name:qe.name,project:qe.projectId,url:qe.url,name_layer:qe.name_service,year:qe.year,user:e,organization:i}),Dn&&Dn.showLoadingOverlay();const n=await jg();zg(n),Dn&&Dn.hideOverlay(),_o.fire({icon:"success",title:"Layer Updated!"}),mc()}catch(n){console.error(n),_o.fire({icon:"error",title:"Layer Not Updated!",text:"Please insert correct data"})}}return(e,i)=>(At(),Vt("div",Vtt,[A("div",ktt,[A("div",Btt,[A("div",Utt,[ztt,A("button",{type:"button",class:"btn-close",onClick:i[0]||(i[0]=(...n)=>U(mc)&&U(mc)(...n))})]),A("form",{onSubmit:S_(t,["prevent"])},[A("div",$tt,[A("div",Ytt,[Ktt,ge(A("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":i[1]||(i[1]=n=>U(qe).name=n)},null,512),[[fn,U(qe).name]])]),A("div",Xtt,[qtt,ge(A("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":i[2]||(i[2]=n=>U(qe).name_service=n)},null,512),[[fn,U(qe).name_service]])]),Ztt,A("div",Jtt,[Qtt,ge(A("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":i[3]||(i[3]=n=>U(qe).url=n)},null,512),[[fn,U(qe).url]])]),A("div",tet,[eet,ge(A("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":i[4]||(i[4]=n=>U(qe).year=n)},null,512),[[fn,U(qe).year]])])]),A("div",iet,[A("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:i[5]||(i[5]=(...n)=>U(mc)&&U(mc)(...n))},"Cancel"),net])],40,jtt)])])]))}},oet=In(ret,[["__scopeId","data-v-f8abf46c"]]);const OP=r=>(yr("data-v-7d5444af"),r=r(),_r(),r),set={class:"modal fade",id:"style-layer-modal","data-bs-backdrop":"static","data-bs-keyboard":"false"},aet={class:"modal-dialog modal-dialog-centered"},uet={class:"modal-content"},cet={class:"modal-header"},het=OP(()=>A("h1",{class:"modal-title fs-5"},"Styling Layer",-1)),det=LA('<div class="modal-body" data-v-7d5444af><div class="mb-2" data-v-7d5444af><label class="form-label" data-v-7d5444af>Color</label><div class="d-flex gap-2 align-items-center" data-v-7d5444af><input type="text" class="form-control form-control-sm" data-v-7d5444af><input type="color" id="colorInput" value="#563d7c" title="Choose your color" data-v-7d5444af></div></div><div class="mb-2" data-v-7d5444af><label class="form-label" data-v-7d5444af>Stroke</label><input type="number" class="form-control form-control-sm" data-v-7d5444af></div><div class="mb-2" data-v-7d5444af><label class="form-label" data-v-7d5444af>Type</label><select class="form-select form-select-sm" data-v-7d5444af><option selected data-v-7d5444af>Select Type</option><option value="1" data-v-7d5444af>Line</option><option value="2" data-v-7d5444af>Polygon</option></select></div><div class="mb-2" data-v-7d5444af><label class="form-label" data-v-7d5444af>Model</label><select class="form-select form-select-sm" data-v-7d5444af><option selected data-v-7d5444af>Select Model</option><option value="1" data-v-7d5444af>Solid</option><option value="2" data-v-7d5444af>Dashed</option><option value="2" data-v-7d5444af>Dot</option><option value="2" data-v-7d5444af>Line Dot</option><option value="2" data-v-7d5444af>Railroad</option><option value="2" data-v-7d5444af>Labeled</option><option value="2" data-v-7d5444af>Net</option><option value="2" data-v-7d5444af>Transparent</option></select></div></div>',1),pet={class:"modal-footer"},fet=OP(()=>A("button",{type:"submit",class:"btn btn-primary btn-sm"},"Save Style",-1)),get={__name:"SetStyleLayer",setup(r){return(t,e)=>(At(),Vt("div",set,[A("div",aet,[A("div",uet,[A("div",cet,[het,A("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...i)=>U(op)&&U(op)(...i))})]),A("form",{onSubmit:e[2]||(e[2]=S_(()=>{},["prevent"]))},[det,A("div",pet,[A("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:e[1]||(e[1]=(...i)=>U(op)&&U(op)(...i))},"Close"),fet])],32)])])]))}},met=In(get,[["__scopeId","data-v-7d5444af"]]),vet={style:{height:"13%"},class:"d-flex align-items-center justify-content-between mx-2"},yet=A("ul",{id:"pagination-layers",style:{height:"12%"}},null,-1),_et={__name:"LayerTable",setup(r){const t=ii(!1),{role:e}=JSON.parse(ia(sessionStorage.getItem("userData")));return(i,n)=>(At(),Vt(mr,null,[A("div",vet,[U(e)==="admin"?(At(),Vt("button",{key:0,type:"button",class:"btn btn-primary btn-sm",onClick:n[0]||(n[0]=(...o)=>U(tx)&&U(tx)(...o))},"Create New Layer")):li("",!0),A("div",{class:"close-btn cursor-pointer",onMouseover:n[1]||(n[1]=o=>t.value=!0),onMouseleave:n[2]||(n[2]=o=>t.value=!1),onClick:n[3]||(n[3]=()=>U(IM)())},[A("i",{class:xi(["fa-circle-xmark fa-xl",t.value?"fa-solid":"fa-regular"])},null,2)],32)]),U(e)==="admin"?(At(),Hr(Wtt,{key:0})):li("",!0),U(e)==="admin"?(At(),Hr(oet,{key:1})):li("",!0),U(e)==="admin"?(At(),Hr(met,{key:2})):li("",!0),He(U(Ug),{class:"ag-theme-alpine",style:{height:"75%"},onGridReady:U(_tt),columnDefs:U(vtt).value,defaultColDef:U(ytt),rowSelection:"single",animateRows:"true"},null,8,["onGridReady","columnDefs","defaultColDef"]),yet],64))}};let nl,Nh=1;const au=ii(""),Cet=En({value:[{headerName:"Image Name",field:"base_name",flex:1},{headerName:"Shooting Time",field:"shooting_time",flex:1},{headerName:"Latitude",field:"lat"},{headerName:"Longitude",field:"lon"},{headerName:"Year",field:"year"}]}),wet={resizable:!0},Cw=r=>nl.setRowData(r);function Eet(){const r=nl.getSelectedRows(),{id:t}=r[0];id(t,!1)}async function AP(r=!1){r&&LP();try{nl.showLoadingOverlay();const t=await ln.get(`/panoramas/?p=${Nh}&page_size=10&search=${au.value}&project=${jr()}`),{count:e,results:i}=t.data;Cw(i),nl.hideOverlay(),r&&ww(e)}catch(t){console.log(t)}}async function DP(r=!1){r&&LP();try{nl.showLoadingOverlay();const t=await ln.get(`/panoramas/?p=${Nh}&page_size=10&project=${jr()}`),{count:e,results:i}=t.data;Cw(i),nl.hideOverlay(),r&&ww(e)}catch(t){console.log(t)}}async function xet(r){try{nl=r.api;const t=await ln.get(`/panoramas/?p=${Nh}&page_size=10&project=${jr()}`),{count:e,results:i}=t.data;Cw(i),ww(e)}catch(t){console.log(t)}}function Ret(r,t){const e=`<span class="ag-paging-description panorama-description" role="status">
    <span id="ag-25-start-page">Page</span>
    <span id="ag-25-start-page-number" ref="lbCurrent" class="ag-paging-number">${r}</span>
    <span id="ag-25-of-page">of</span>
    <span id="ag-25-of-page-number" ref="lbTotal" class="ag-paging-number">${t}</span>
  </span>`;$(e).insertAfter("#pagination-panorama .prev-panorama")}function ww(r){let t=Math.ceil(r/10);$("#pagination-panorama").twbsPagination({totalPages:t,visiblePages:0,onPageClick:function(e,i){Nh=i,au?AP():DP(),Ret(Nh,t)},first:'<span class="ag-icon ag-icon-first"></span>',last:'<span class="ag-icon ag-icon-last"></span>',next:'<span class="ag-icon ag-icon-next"></span>',prev:'<span class="ag-icon ag-icon-previous"></span>',paginationClass:"ag-theme-alpine ag-paging-panel mb-0 me-4 border-top-0",nextClass:"ag-paging-button next-panorama",prevClass:"ag-paging-button prev-panorama",lastClass:"ag-paging-button",firstClass:"ag-paging-button",pageClass:"",activeClass:"",disabledClass:"ag-disabled",anchorClass:!1})}function LP(){$("#pagination-panorama").twbsPagination("destroy")}const IP=r=>(yr("data-v-ddae5085"),r=r(),_r(),r),bet={style:{height:"13%"},class:"d-flex align-items-center justify-content-between mx-2"},Met={class:"input-group input-group-sm",style:{width:"20%"}},Tet=IP(()=>A("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),Pet=[Tet],Oet=IP(()=>A("ul",{id:"pagination-panorama",style:{height:"12%"}},null,-1)),Aet={__name:"PanoramaTable",setup(r){const t=ii(!1);return(e,i)=>{const n=w_("tippy");return At(),Vt(mr,null,[A("div",bet,[A("div",Met,[ge(A("input",{type:"text",class:"form-control",placeholder:"Kata kunci","onUpdate:modelValue":i[0]||(i[0]=o=>Kc(au)?au.value=o:null)},null,512),[[fn,U(au)]]),ge((At(),Vt("span",{class:"input-group-text",onClick:i[1]||(i[1]=o=>U(au)?U(AP)(!0):U(DP)(!0))},Pet)),[[n,{content:"Cari"}]])]),A("div",{class:"close-btn cursor-pointer",onMouseover:i[2]||(i[2]=o=>t.value=!0),onMouseleave:i[3]||(i[3]=o=>t.value=!1),onClick:i[4]||(i[4]=()=>e.hideAttributeTable())},[A("i",{class:xi(["fa-circle-xmark fa-xl",t.value?"fa-solid":"fa-regular"])},null,2)],32)]),He(U(Ug),{class:"ag-theme-alpine",style:{height:"75%"},suppressPaginationPanel:!1,onSelectionChanged:U(Eet),onGridReady:U(xet),pagination:!1,columnDefs:U(Cet).value,defaultColDef:U(wet),rowSelection:"single",animateRows:"true"},null,8,["onSelectionChanged","onGridReady","columnDefs","defaultColDef"]),Oet],64)}}},Det=In(Aet,[["__scopeId","data-v-ddae5085"]]),Let={class:"d-flex gap-2"},Iet=A("i",{class:"fa-solid fa-circle-info cursor-pointer"},null,-1),Fet=[Iet],Net=A("i",{class:"fa-solid fa-trash cursor-pointer"},null,-1),Get=[Net],Het={__name:"Account",setup(r){async function t(e){const{id:i}=e;Qc.fire({title:"Are you sure?",text:"This account could't be able to restore!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0d6efd",cancelButtonColor:"#dc3545",confirmButtonText:"Yes, delete it!"}).then(async n=>{if(n.isConfirmed)try{await ln.delete(`/auth/users/${i}/`),lu&&lu.showLoadingOverlay();const o=await NP();FP(o),lu&&lu.hideOverlay(),_o.fire({icon:"success",title:"Account Deleted!"})}catch(o){console.error(o),_o.fire({icon:"error",title:"Failed to Remove Account!"})}})}return(e,i)=>(At(),Vt("div",Let,[A("span",{onClick:i[0]||(i[0]=()=>U(Pj)(e.params.data))},Fet),A("span",{onClick:i[1]||(i[1]=()=>t(e.params.data))},Get)]))}};let lu;const{role:Wet}=JSON.parse(ia(sessionStorage.getItem("userData"))),Vet=[{headerName:"Email",field:"email",flex:1},{headerName:"Username",field:"username",flex:1},{headerName:"Role",field:"role",flex:1},{headerName:"Status",cellRenderer:r=>r.data.is_active?"Active":"Non Active"},{field:"Options",width:90,cellRenderer:Het,hide:Wet!=="admin"}],FP=r=>lu.setRowData(r),ket={resizable:!0};async function NP(){const r=await ln.get("/auth/users/"),t=[];for(const e of r.data){let i=await Bet(e);i!==void 0&&t.push(i)}return t}async function Bet(r){const{organization:t}=JSON.parse(ia(sessionStorage.getItem("userData"))),e=await ln.get("/organization_users/",{params:{user:r.id,organization:t}}),{results:i}=e.data;if(i.length&&t===i[0].organization&&r.id===i[0].user)return r}async function Uet(r){try{lu=r.api;const t=await NP();FP(t)}catch(t){console.log(t)}}const zet={class:"modal fade",id:"acc2-info-modal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},jet={class:"modal-dialog modal-dialog-centered"},$et={class:"modal-content"},Yet=A("div",{class:"modal-header"},[A("h1",{class:"modal-title fs-5"},"Account Information"),A("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ket={class:"modal-body"},Xet={class:"list-group"},qet={class:"list-group-item d-flex justify-content-between align-items-start"},Zet={class:"ms-2 me-auto"},Jet=A("div",{class:"fw-bold"},"User ID",-1),Qet={class:"list-group-item d-flex justify-content-between align-items-start"},tit={class:"ms-2 me-auto"},eit=A("div",{class:"fw-bold"},"Email",-1),iit={class:"list-group-item d-flex justify-content-between align-items-start"},nit={class:"ms-2 me-auto"},rit=A("div",{class:"fw-bold"},"Username",-1),oit={class:"list-group-item d-flex justify-content-between align-items-start"},sit={class:"ms-2 me-auto"},ait=A("div",{class:"fw-bold"},"Role",-1),lit={__name:"Info",setup(r){return(t,e)=>(At(),Vt("div",zet,[A("div",jet,[A("div",$et,[Yet,A("div",Ket,[A("ol",Xet,[A("li",qet,[A("div",Zet,[Jet,Os(" "+vi(U(Hs).id),1)])]),A("li",Qet,[A("div",tit,[eit,Os(" "+vi(U(Hs).email),1)])]),A("li",iit,[A("div",nit,[rit,Os(" "+vi(U(Hs).username),1)])]),A("li",oit,[A("div",sit,[ait,Os(" "+vi(U(Hs).role),1)])])])])])])]))}},uit={style:{height:"13%"},class:"d-flex align-items-center justify-content-between mx-2"},cit=A("div",null,null,-1),hit={__name:"AccountTable",setup(r){const t=ii(!1),{role:e}=JSON.parse(ia(sessionStorage.getItem("userData")));return(i,n)=>(At(),Vt(mr,null,[A("div",uit,[cit,A("div",{class:"close-btn cursor-pointer",onMouseover:n[0]||(n[0]=o=>t.value=!0),onMouseleave:n[1]||(n[1]=o=>t.value=!1),onClick:n[2]||(n[2]=(...o)=>U(FE)&&U(FE)(...o))},[A("i",{class:xi(["fa-circle-xmark fa-xl",t.value?"fa-solid":"fa-regular"])},null,2)],32)]),U(e)==="admin"?(At(),Hr(lit,{key:0})):li("",!0),He(U(Ug),{class:"ag-theme-alpine",style:{height:"87%"},onGridReady:U(Uet),pagination:!0,columnDefs:U(Vet),defaultColDef:U(ket),rowSelection:"single",animateRows:"true"},null,8,["onGridReady","columnDefs","defaultColDef"])],64))}},dit={key:0,style:{height:"100%"}},pit={key:1,style:{height:"100%"}},fit={key:2,style:{height:"100%"}},git={key:3,style:{height:"100%"}},mit={__name:"PaneTable",setup(r){return(t,e)=>(At(),Vt(mr,null,[U(qo)?(At(),Vt("div",dit,[He(att)])):li("",!0),U(zs)?(At(),Vt("div",pit,[He(_et)])):li("",!0),U(js)?(At(),Vt("div",fit,[He(Det)])):li("",!0),U($s)?(At(),Vt("div",git,[He(hit)])):li("",!0)],64))}},uu=En({x:0,y:0});function vit(r){interact(r).draggable({ignoreFrom:"input, textarea",inertia:!0,restrict:{restriction:"parent",elementRect:{top:0,left:0,bottom:1,right:1}},listeners:{move(t){uu.x+=t.dx,uu.y+=t.dy,t.target.style.transform=`translate(${uu.x}px, ${uu.y}px)`}}})}const tc=r=>(yr("data-v-ca8a752e"),r=r(),_r(),r),yit={class:"card-body"},_it={class:"mb-3 row"},Cit=tc(()=>A("label",{class:"col-sm-6 col-form-label"},"Drift Along track axis",-1)),wit={class:"col-sm-6"},Sit={class:"mb-3 row"},Eit=tc(()=>A("label",{class:"col-sm-6 col-form-label"},"Drift by side track axis",-1)),xit={class:"col-sm-6"},Rit={class:"mb-3 row"},bit=tc(()=>A("label",{class:"col-sm-6 col-form-label"},"Height from ground",-1)),Mit={class:"col-sm-6"},Tit={class:"mb-3 row"},Pit=tc(()=>A("label",{class:"col-sm-6 col-form-label"},"Roll angle",-1)),Oit={class:"col-sm-6"},Ait={class:"mb-3 row"},Dit=tc(()=>A("label",{class:"col-sm-6 col-form-label"},"Pitch angle",-1)),Lit={class:"col-sm-6"},Iit={class:"mb-3 row"},Fit=tc(()=>A("label",{class:"col-sm-6 col-form-label"},"Track angle",-1)),Nit={class:"col-sm-6"},Git={__name:"CorrectionPopup",setup(r){async function t(){const{id:i}=oi,{id:n,yField:o,xField:s,hField:a,rollField:l,pitchField:u,trackField:c,noteField:h}=Le;try{await Fb.put("/rest/api/correct/",{base_id:i,drift_x:s,drift_y:o,height:a,roll:l,pitch:u,track:c,X_API_KEY:"Kemang_28_secret",id:n}),_o.fire({icon:"success",title:"Correction Value has been saved!"})}catch(d){console.error(d),_o.fire({icon:"error",title:"Correction Value not saved!"})}}function e(){const{yField:i,xField:n,hField:o,rollField:s,pitchField:a,trackField:l}=xs;Le.yField=i,Le.xField=n,Le.hField=o,Le.rollField=s,Le.pitchField=a,Le.trackField=l,Mn()}return lR(()=>{vit("#correction-panorama")}),(i,n)=>(At(),Hr(Eo,{name:"custom-classes","enter-active-class":"animate__animated animate__zoomIn animate__faster","leave-active-class":"animate__animated animate__zoomOut animate__faster"},{default:nn(()=>[U(Kn).showCorrection?(At(),Vt("div",{key:0,class:"card",id:"correction-panorama",style:aR(`transform: translate(${U(uu).x}px, ${U(uu).y}px)`)},[A("div",yit,[A("form",null,[A("div",_it,[Cit,A("div",wit,[ge(A("input",{type:"number",onChange:n[0]||(n[0]=(...o)=>U(Mn)&&U(Mn)(...o)),"onUpdate:modelValue":n[1]||(n[1]=o=>U(Le).yField=o),placeholder:"0.00",step:".2",class:"form-control form-control-sm"},null,544),[[fn,U(Le).yField]])])]),A("div",Sit,[Eit,A("div",xit,[ge(A("input",{type:"number",onChange:n[2]||(n[2]=(...o)=>U(Mn)&&U(Mn)(...o)),"onUpdate:modelValue":n[3]||(n[3]=o=>U(Le).xField=o),placeholder:"0.00",step:".2",class:"form-control form-control-sm"},null,544),[[fn,U(Le).xField]])])]),A("div",Rit,[bit,A("div",Mit,[ge(A("input",{type:"number",onChange:n[4]||(n[4]=(...o)=>U(Mn)&&U(Mn)(...o)),"onUpdate:modelValue":n[5]||(n[5]=o=>U(Le).hField=o),placeholder:"0.00",step:".2",class:"form-control form-control-sm"},null,544),[[fn,U(Le).hField]])])]),A("div",Tit,[Pit,A("div",Oit,[ge(A("input",{type:"number",onChange:n[6]||(n[6]=(...o)=>U(Mn)&&U(Mn)(...o)),"onUpdate:modelValue":n[7]||(n[7]=o=>U(Le).rollField=o),placeholder:"0.00",step:".2",class:"form-control form-control-sm"},null,544),[[fn,U(Le).rollField]])])]),A("div",Ait,[Dit,A("div",Lit,[ge(A("input",{type:"number",onChange:n[8]||(n[8]=(...o)=>U(Mn)&&U(Mn)(...o)),"onUpdate:modelValue":n[9]||(n[9]=o=>U(Le).pitchField=o),placeholder:"0.00",step:".2",class:"form-control form-control-sm"},null,544),[[fn,U(Le).pitchField]])])]),A("div",Iit,[Fit,A("div",Nit,[ge(A("input",{type:"number",onChange:n[10]||(n[10]=(...o)=>U(Mn)&&U(Mn)(...o)),"onUpdate:modelValue":n[11]||(n[11]=o=>U(Le).trackField=o),placeholder:"0.00",step:".2",class:"form-control form-control-sm"},null,544),[[fn,U(Le).trackField]])])]),A("div",{class:"d-flex justify-content-between"},[A("button",{type:"button",class:"btn btn-primary btn-sm mt-1",onClick:t},"Keep"),A("button",{type:"button",class:"btn btn-danger btn-sm mt-1",onClick:e},"Discard")])])])],4)):li("",!0)]),_:1}))}},Hit=In(Git,[["__scopeId","data-v-ca8a752e"]]);const Wit={style:{height:"100vh"}},Bit={__name:"MapViewer",setup(r){function t(){jr()!=="919c733f-62fb-4564-871b-c20635fc827a"?alert("project id not valid"):pf()!=="2023"&&alert("year of project not valid")}function e(){setTimeout(()=>{v4(),X5(),D4(jr(),pf())},jh),t()}return(i,n)=>(At(),Vt("div",Wit,[He(U(qw),{horizontal:"",onReady:e,class:"default-theme",onResize:U(g4),"dbl-click-splitter":!1},{default:nn(()=>[He(U(hd),{size:U(rn).top},{default:nn(()=>[He(U(qw),{vertical:"",onResize:U(f4),"dbl-click-splitter":!1},{default:nn(()=>[He(U(hd),{class:"card",size:U(rn).map},{default:nn(()=>[He(v6)]),_:1},8,["size"]),He(U(hd),{class:"card",size:U(rn).pano},{default:nn(()=>[He(h8)]),_:1},8,["size"])]),_:1},8,["onResize"])]),_:1},8,["size"]),He(U(hd),{class:"card",size:U(rn).bottom,"max-size":"50"},{default:nn(()=>[He(mit)]),_:1},8,["size"])]),_:1},8,["onResize"]),He(Hit)]))}};export{Bit as default};
